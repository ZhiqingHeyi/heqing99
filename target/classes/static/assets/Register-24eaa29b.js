import{_ as h,u as k,r as b,m as P,d,o as N,c as R,e as r,f as o,w as t,B as U,i as u,p as E,E as p}from"./index-27530dd5.js";const q={class:"register-container"},M={class:"register-content"},B={__name:"Register",setup(C){const g=k(),m=b(null),c=b(!1),l=P({username:"",phone:"",password:"",confirmPassword:"",email:"",realName:"",agreement:!1}),w={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号码",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号码",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6个字符",trigger:"blur"},{validator:(i,e,s)=>{var a;e===""?s(new Error("请输入密码")):(l.confirmPassword!==""&&((a=m.value)==null||a.validateField("confirmPassword")),s())},trigger:"blur"}],confirmPassword:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:(i,e,s)=>{e===""?s(new Error("请再次输入密码")):e!==l.password?s(new Error("两次输入密码不一致!")):s()},trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],realName:[{required:!0,message:"请输入真实姓名",trigger:"blur"}],agreement:[{validator:(i,e,s)=>{if(!e)return s(new Error("请同意用户协议和隐私政策"));s()},trigger:"change"}]},_=async()=>{m.value&&await m.value.validate(async i=>{if(i){c.value=!0;try{const e={username:l.username,password:l.password,confirmPassword:l.confirmPassword,name:l.realName,phone:l.phone,email:l.email,gender:"unknown",birthday:null};console.log("会员注册提交的数据:",e);const s=await E.register(e);console.log("注册响应:",s),s.success?(p.success("注册成功!"),setTimeout(()=>{try{localStorage.setItem("tempUserName",l.username),console.log("注册成功，正在跳转到登录页面..."),g.replace("/login").catch(a=>{console.error("路由跳转失败:",a),window.location.href="/login"})}catch(a){console.error("跳转到登录页面出错:",a),window.location.href="/login"}},1500)):p.error(s.message||"注册失败，请稍后重试")}catch(e){console.error("会员注册失败:",e),p.error(e.message||"注册失败，请稍后重试")}finally{c.value=!1}}})},y=()=>{try{console.log("正在跳转到登录页面..."),g.replace("/login").catch(i=>{console.error("路由跳转失败:",i),window.location.href="/login"})}catch(i){console.error("跳转到登录页面出错:",i),window.location.href="/login"}};return(i,e)=>{const s=d("el-input"),a=d("el-form-item"),v=d("el-checkbox"),f=d("el-button"),x=d("el-form"),V=d("el-card");return N(),R("div",q,[e[12]||(e[12]=r("div",{class:"background-image"},null,-1)),r("div",M,[o(V,{class:"register-card luxury-card"},{default:t(()=>[e[10]||(e[10]=r("div",{class:"luxury-header"},[r("div",{class:"logo-wrapper"},[r("img",{src:U,alt:"鹤清酒店",class:"logo"})]),r("h2",{class:"register-title"},"尊贵会员注册"),r("div",{class:"luxury-divider"},[r("span",{class:"divider-icon"})])],-1)),o(x,{model:l,rules:w,ref_key:"memberFormRef",ref:m,"label-width":"100px",class:"register-form"},{default:t(()=>[o(a,{label:"用户名",prop:"username"},{default:t(()=>[o(s,{modelValue:l.username,"onUpdate:modelValue":e[0]||(e[0]=n=>l.username=n),placeholder:"请输入用户名",class:"luxury-input"},null,8,["modelValue"])]),_:1}),o(a,{label:"手机号码",prop:"phone"},{default:t(()=>[o(s,{modelValue:l.phone,"onUpdate:modelValue":e[1]||(e[1]=n=>l.phone=n),placeholder:"请输入手机号码",class:"luxury-input"},null,8,["modelValue"])]),_:1}),o(a,{label:"密码",prop:"password"},{default:t(()=>[o(s,{modelValue:l.password,"onUpdate:modelValue":e[2]||(e[2]=n=>l.password=n),type:"password",placeholder:"请输入密码","show-password":"",class:"luxury-input"},null,8,["modelValue"])]),_:1}),o(a,{label:"确认密码",prop:"confirmPassword"},{default:t(()=>[o(s,{modelValue:l.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=n=>l.confirmPassword=n),type:"password",placeholder:"请确认密码","show-password":"",class:"luxury-input"},null,8,["modelValue"])]),_:1}),o(a,{label:"邮箱",prop:"email"},{default:t(()=>[o(s,{modelValue:l.email,"onUpdate:modelValue":e[4]||(e[4]=n=>l.email=n),placeholder:"请输入邮箱",class:"luxury-input"},null,8,["modelValue"])]),_:1}),o(a,{label:"真实姓名",prop:"realName"},{default:t(()=>[o(s,{modelValue:l.realName,"onUpdate:modelValue":e[5]||(e[5]=n=>l.realName=n),placeholder:"请输入真实姓名",class:"luxury-input"},null,8,["modelValue"])]),_:1}),o(a,null,{default:t(()=>[o(v,{modelValue:l.agreement,"onUpdate:modelValue":e[6]||(e[6]=n=>l.agreement=n),class:"luxury-checkbox"},{default:t(()=>e[7]||(e[7]=[u(" 我已阅读并同意"),r("a",{href:"#",class:"luxury-link"},"《用户协议》",-1),u("和"),r("a",{href:"#",class:"luxury-link"},"《隐私政策》",-1)])),_:1},8,["modelValue"])]),_:1}),o(a,null,{default:t(()=>[o(f,{type:"primary",class:"register-btn luxury-btn",onClick:_,loading:c.value,disabled:!l.agreement},{default:t(()=>e[8]||(e[8]=[u("立即注册")])),_:1},8,["loading","disabled"]),o(f,{onClick:y,class:"login-btn luxury-btn-text"},{default:t(()=>e[9]||(e[9]=[u("已有账号？去登录")])),_:1})]),_:1})]),_:1},8,["model"]),e[11]||(e[11]=r("div",{class:"register-benefits luxury-benefits"},[r("h4",null,"尊享会员专属礼遇"),r("ul",null,[r("li",null,[r("i",{class:"el-icon-check benefit-icon"}),u(" 预定免押金")]),r("li",null,[r("i",{class:"el-icon-check benefit-icon"}),u(" 积分奖励与兑换")]),r("li",null,[r("i",{class:"el-icon-check benefit-icon"}),u(" 专属优惠与折扣")]),r("li",null,[r("i",{class:"el-icon-check benefit-icon"}),u(" 生日特惠礼遇")]),r("li",null,[r("i",{class:"el-icon-check benefit-icon"}),u(" 会员专享休息室")])])],-1))]),_:1})])])}}},A=h(B,[["__scopeId","data-v-33828608"]]);export{A as default};
