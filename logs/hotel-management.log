2025-05-02 10:19:09.737  INFO 27964 --- [main] com.hotel.HotelManagementApplication     : Starting HotelManagementApplication using Java 18.0.2 on LAPTOP-HeYIXianJun with PID 27964 (E:\桌面\javahotel\heqing99\target\classes started by 上善若水 in E:\桌面\javahotel\heqing99)
2025-05-02 10:19:09.737 DEBUG 27964 --- [main] com.hotel.HotelManagementApplication     : Running with Spring Boot v2.7.0, Spring v5.3.20
2025-05-02 10:19:09.747  INFO 27964 --- [main] com.hotel.HotelManagementApplication     : No active profile set, falling back to 1 default profile: "default"
2025-05-02 10:19:10.794  INFO 27964 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-02 10:19:11.050  INFO 27964 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 243 ms. Found 19 JPA repository interfaces.
2025-05-02 10:19:11.725  INFO 27964 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8090 (http)
2025-05-02 10:19:11.726  INFO 27964 --- [main] o.a.catalina.core.AprLifecycleListener   : Loaded Apache Tomcat Native library [1.2.30] using APR version [1.7.0].
2025-05-02 10:19:11.726  INFO 27964 --- [main] o.a.catalina.core.AprLifecycleListener   : APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true], UDS [true].
2025-05-02 10:19:11.726  INFO 27964 --- [main] o.a.catalina.core.AprLifecycleListener   : APR/OpenSSL configuration: useAprConnector [false], useOpenSSL [true]
2025-05-02 10:19:11.796  INFO 27964 --- [main] o.a.catalina.core.AprLifecycleListener   : OpenSSL successfully initialized [OpenSSL 1.1.1k  25 Mar 2021]
2025-05-02 10:19:11.805  INFO 27964 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-02 10:19:11.806  INFO 27964 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-05-02 10:19:11.964  INFO 27964 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-02 10:19:11.965  INFO 27964 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2156 ms
2025-05-02 10:19:12.125  INFO 27964 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-02 10:19:12.190  INFO 27964 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.9.Final
2025-05-02 10:19:12.377  INFO 27964 --- [main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2025-05-02 10:19:12.501  INFO 27964 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-02 10:19:12.882  INFO 27964 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-02 10:19:12.902  INFO 27964 --- [main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2025-05-02 10:19:14.090  INFO 27964 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-05-02 10:19:14.100  INFO 27964 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-02 10:19:14.555 DEBUG 27964 --- [main] c.hotel.config.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2025-05-02 10:19:14.555 DEBUG 27964 --- [main] o.springframework.web.filter.CorsFilter  : Filter 'corsFilter' configured for use
2025-05-02 10:19:15.382 DEBUG 27964 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.html']
2025-05-02 10:19:15.392 DEBUG 27964 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.js']
2025-05-02 10:19:15.392 DEBUG 27964 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.css']
2025-05-02 10:19:15.392 DEBUG 27964 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.ico']
2025-05-02 10:19:15.392 DEBUG 27964 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/assets/**']
2025-05-02 10:19:15.392 DEBUG 27964 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/']
2025-05-02 10:19:15.392 DEBUG 27964 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/about']
2025-05-02 10:19:15.392 DEBUG 27964 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/rooms']
2025-05-02 10:19:15.392 DEBUG 27964 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/room/**']
2025-05-02 10:19:15.392 DEBUG 27964 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/contact']
2025-05-02 10:19:15.392 DEBUG 27964 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/booking']
2025-05-02 10:19:15.392 DEBUG 27964 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/register']
2025-05-02 10:19:15.392 DEBUG 27964 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/login']
2025-05-02 10:19:15.392 DEBUG 27964 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/user/**']
2025-05-02 10:19:15.392 DEBUG 27964 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin']
2025-05-02 10:19:15.392 DEBUG 27964 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/login']
2025-05-02 10:19:15.392 DEBUG 27964 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/dashboard/**']
2025-05-02 10:19:15.392 DEBUG 27964 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/users/**']
2025-05-02 10:19:15.392 DEBUG 27964 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/staff/**']
2025-05-02 10:19:15.392 DEBUG 27964 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/reception/**']
2025-05-02 10:19:15.392 DEBUG 27964 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/cleaning/**']
2025-05-02 10:19:15.392 DEBUG 27964 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/login', POST]
2025-05-02 10:19:15.392 DEBUG 27964 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/login', GET]
2025-05-02 10:19:15.392 DEBUG 27964 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/auth/login', POST]
2025-05-02 10:19:15.392 DEBUG 27964 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/refresh-token', POST]
2025-05-02 10:19:15.392 DEBUG 27964 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/register', POST]
2025-05-02 10:19:15.392 DEBUG 27964 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/login', POST]
2025-05-02 10:19:15.402 DEBUG 27964 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/check-username', GET]
2025-05-02 10:19:15.402 DEBUG 27964 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/check-phone', GET]
2025-05-02 10:19:15.402 DEBUG 27964 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for Ant [pattern='/api/users/profile', GET]
2025-05-02 10:19:15.402 DEBUG 27964 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for Ant [pattern='/api/users/{id}', PUT]
2025-05-02 10:19:15.402 DEBUG 27964 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for Ant [pattern='/api/users/{id}/password', PUT]
2025-05-02 10:19:15.402 DEBUG 27964 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasRole('ROLE_ADMIN')] for Ant [pattern='/api/admin/**']
2025-05-02 10:19:15.402 DEBUG 27964 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasRole('ROLE_ADMIN')] for Ant [pattern='/api/users/{id}', DELETE]
2025-05-02 10:19:15.402 DEBUG 27964 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/**', OPTIONS]
2025-05-02 10:19:15.402 DEBUG 27964 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for any request
2025-05-02 10:19:15.402  INFO 27964 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4d87e7f3, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@14c7ab73, org.springframework.security.web.context.SecurityContextPersistenceFilter@171b0d3, org.springframework.security.web.header.HeaderWriterFilter@771ede0d, org.springframework.web.filter.CorsFilter@522f74a1, org.springframework.security.web.authentication.logout.LogoutFilter@78c91d2a, com.hotel.config.JwtAuthenticationFilter@67167f8f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@55159007, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@edf4973, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4fcb796f, org.springframework.security.web.session.SessionManagementFilter@628cb8e0, org.springframework.security.web.access.ExceptionTranslationFilter@78de0f6f, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@6e669b5c]
2025-05-02 10:19:15.452  WARN 27964 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-02 10:19:15.572 DEBUG 27964 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-05-02 10:19:15.602  INFO 27964 --- [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [static/index.html]
2025-05-02 10:19:15.672 DEBUG 27964 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 161 mappings in 'requestMappingHandlerMapping'
2025-05-02 10:19:15.682 DEBUG 27964 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/admin, /admin/login, /admin/dashboard, /admin/users, /admin/staff, /admin/rooms, /admin/reception/bookings, /admin/reception/checkin, /admin/reception/visitors, /admin/cleaning/tasks, /admin/cleaning/records, /login] in 'viewControllerHandlerMapping'
2025-05-02 10:19:15.692 DEBUG 27964 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /assets/**, /*.js, /*.css, /favicon.ico, /index.html, /images/**, /assets/images/**] in 'resourceHandlerMapping'
2025-05-02 10:19:15.702 DEBUG 27964 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-05-02 10:19:15.852  INFO 27964 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8090 (http) with context path ''
2025-05-02 10:19:15.865  INFO 27964 --- [main] com.hotel.HotelManagementApplication     : Started HotelManagementApplication in 6.59 seconds (JVM running for 7.622)
2025-05-02 10:19:56.824  INFO 27964 --- [http-nio-8090-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-02 10:19:56.824  INFO 27964 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-02 10:19:56.824 DEBUG 27964 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-05-02 10:19:56.824 DEBUG 27964 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-05-02 10:19:56.824 DEBUG 27964 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-05-02 10:19:56.824 DEBUG 27964 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@6441db2c
2025-05-02 10:19:56.824 DEBUG 27964 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@1ead6e20
2025-05-02 10:19:56.824 DEBUG 27964 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-05-02 10:19:56.824  INFO 27964 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2025-05-02 10:19:56.847 DEBUG 27964 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/statistics
2025-05-02 10:19:56.856 DEBUG 27964 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 10:19:56.942 DEBUG 27964 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 10:19:56.961 DEBUG 27964 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/statistics] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 10:19:56.962 DEBUG 27964 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/statistics
2025-05-02 10:19:56.964 DEBUG 27964 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/statistics", parameters={}
2025-05-02 10:19:56.969 DEBUG 27964 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-02 10:19:57.231 DEBUG 27964 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 10:19:57.232 DEBUG 27964 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{todayRevenue=0, monthlyRevenue=0, upcomingReservations=0, totalUsers=15, availableRooms=1, newUsers (truncated)...]
2025-05-02 10:19:57.301 DEBUG 27964 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 10:19:57.308 DEBUG 27964 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 10:31:15.462 DEBUG 27964 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/statistics
2025-05-02 10:31:15.462 DEBUG 27964 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 10:31:15.472 DEBUG 27964 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 10:31:15.472 DEBUG 27964 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/statistics] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 10:31:15.472 DEBUG 27964 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/statistics
2025-05-02 10:31:15.472 DEBUG 27964 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/statistics", parameters={}
2025-05-02 10:31:15.472 DEBUG 27964 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-02 10:31:15.531 DEBUG 27964 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 10:31:15.531 DEBUG 27964 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{todayRevenue=0, monthlyRevenue=0, upcomingReservations=0, totalUsers=15, availableRooms=1, newUsers (truncated)...]
2025-05-02 10:31:15.533 DEBUG 27964 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 10:31:15.534 DEBUG 27964 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 10:31:34.381 DEBUG 27964 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/statistics
2025-05-02 10:31:34.381 DEBUG 27964 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 10:31:34.386 DEBUG 27964 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 10:31:34.386 DEBUG 27964 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/statistics] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 10:31:34.387 DEBUG 27964 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/statistics
2025-05-02 10:31:34.387 DEBUG 27964 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/statistics", parameters={}
2025-05-02 10:31:34.387 DEBUG 27964 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-02 10:31:34.443 DEBUG 27964 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 10:31:34.443 DEBUG 27964 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{todayRevenue=0, monthlyRevenue=0, upcomingReservations=0, totalUsers=15, availableRooms=1, newUsers (truncated)...]
2025-05-02 10:31:34.444 DEBUG 27964 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 10:31:34.445 DEBUG 27964 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 10:31:41.180 DEBUG 27964 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-02 10:31:41.181 DEBUG 27964 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 10:31:41.192 DEBUG 27964 --- [http-nio-8090-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 10:31:41.192 DEBUG 27964 --- [http-nio-8090-exec-4] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 5A29A4A47A25E456C4F538CE7FF0CCBF
2025-05-02 10:31:41.195 DEBUG 27964 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-02 10:31:41.195 DEBUG 27964 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-02 10:31:41.195 DEBUG 27964 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-02 10:31:41.195 DEBUG 27964 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-02 10:31:41.223 DEBUG 27964 --- [http-nio-8090-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=admin, password=admin123)]
2025-05-02 10:31:41.390 DEBUG 27964 --- [http-nio-8090-exec-4] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-02 10:31:41.425 DEBUG 27964 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 10:31:41.425 DEBUG 27964 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=1, username=admin, role=ADMIN, token=eyJhbGciOiJIUz (truncated)...]
2025-05-02 10:31:41.425 DEBUG 27964 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 10:31:41.425 DEBUG 27964 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 10:31:41.536 DEBUG 27964 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/statistics
2025-05-02 10:31:41.536 DEBUG 27964 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 10:31:41.541 DEBUG 27964 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 10:31:41.543 DEBUG 27964 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/statistics] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 10:31:41.543 DEBUG 27964 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/statistics
2025-05-02 10:31:41.543 DEBUG 27964 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/statistics", parameters={}
2025-05-02 10:31:41.544 DEBUG 27964 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-02 10:31:41.602 DEBUG 27964 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 10:31:41.602 DEBUG 27964 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{todayRevenue=0, monthlyRevenue=0, upcomingReservations=0, totalUsers=15, availableRooms=1, newUsers (truncated)...]
2025-05-02 10:31:41.602 DEBUG 27964 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 10:31:41.602 DEBUG 27964 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 10:32:33.213 DEBUG 27964 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-02 10:32:33.214 DEBUG 27964 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 10:32:33.215 DEBUG 27964 --- [http-nio-8090-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 10:32:33.215 DEBUG 27964 --- [http-nio-8090-exec-6] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 5A29A4A47A25E456C4F538CE7FF0CCBF
2025-05-02 10:32:33.216 DEBUG 27964 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-02 10:32:33.216 DEBUG 27964 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-02 10:32:33.216 DEBUG 27964 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-02 10:32:33.216 DEBUG 27964 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-02 10:32:33.218 DEBUG 27964 --- [http-nio-8090-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=admin, password=admin123)]
2025-05-02 10:32:33.293 DEBUG 27964 --- [http-nio-8090-exec-6] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-02 10:32:33.299 DEBUG 27964 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 10:32:33.300 DEBUG 27964 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=1, username=admin, role=ADMIN, token=eyJhbGciOiJIUz (truncated)...]
2025-05-02 10:32:33.301 DEBUG 27964 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 10:32:33.302 DEBUG 27964 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 10:32:33.313 DEBUG 27964 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/1
2025-05-02 10:32:33.314 DEBUG 27964 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 10:32:33.320 DEBUG 27964 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 10:32:33.320 DEBUG 27964 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users/1] with attributes [authenticated]
2025-05-02 10:32:33.320 DEBUG 27964 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/1
2025-05-02 10:32:33.320 DEBUG 27964 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/1", parameters={}
2025-05-02 10:32:33.322 DEBUG 27964 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getUserById(Long)
2025-05-02 10:32:33.335 DEBUG 27964 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 10:32:33.364 DEBUG 27964 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=User(id=1, username=admin, password=null, name= (truncated)...]
2025-05-02 10:32:33.382 DEBUG 27964 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 10:32:33.383 DEBUG 27964 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 10:32:33.701 DEBUG 27964 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/membership/info
2025-05-02 10:32:33.701 DEBUG 27964 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 10:32:33.704 DEBUG 27964 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 10:32:33.704 DEBUG 27964 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/membership/info] with attributes [authenticated]
2025-05-02 10:32:33.705 DEBUG 27964 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/membership/info
2025-05-02 10:32:33.705 DEBUG 27964 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/membership/info", parameters={}
2025-05-02 10:32:33.705 DEBUG 27964 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.MembershipController#getCurrentUserMembershipInfo()
2025-05-02 10:32:33.716 DEBUG 27964 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 10:32:33.716 DEBUG 27964 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=MembershipDTO(userId=1, username=admin, name=系统管理员, memberLevel=普通用户, memberLevelCod (truncated)...]
2025-05-02 10:32:33.721 DEBUG 27964 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 10:32:33.721 DEBUG 27964 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 10:32:51.909 DEBUG 27964 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/1
2025-05-02 10:32:51.909 DEBUG 27964 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 10:32:51.913 DEBUG 27964 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 10:32:51.914 DEBUG 27964 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users/1] with attributes [authenticated]
2025-05-02 10:32:51.914 DEBUG 27964 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/1
2025-05-02 10:32:51.914 DEBUG 27964 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/1", parameters={}
2025-05-02 10:32:51.915 DEBUG 27964 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getUserById(Long)
2025-05-02 10:32:51.921 DEBUG 27964 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 10:32:51.930 DEBUG 27964 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=User(id=1, username=admin, password=null, name= (truncated)...]
2025-05-02 10:32:51.931 DEBUG 27964 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 10:32:51.931 DEBUG 27964 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 10:32:51.976 DEBUG 27964 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/membership/info
2025-05-02 10:32:51.976 DEBUG 27964 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 10:32:51.976 DEBUG 27964 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 10:32:51.976 DEBUG 27964 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/membership/info] with attributes [authenticated]
2025-05-02 10:32:51.976 DEBUG 27964 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/membership/info
2025-05-02 10:32:51.976 DEBUG 27964 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/membership/info", parameters={}
2025-05-02 10:32:51.976 DEBUG 27964 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.MembershipController#getCurrentUserMembershipInfo()
2025-05-02 10:32:51.986 DEBUG 27964 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 10:32:51.986 DEBUG 27964 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=MembershipDTO(userId=1, username=admin, name=系统管理员, memberLevel=普通用户, memberLevelCod (truncated)...]
2025-05-02 10:32:51.986 DEBUG 27964 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 10:32:51.986 DEBUG 27964 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 10:32:54.490 DEBUG 27964 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2025-05-02 10:32:54.490 DEBUG 27964 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 10:32:54.494 DEBUG 27964 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 10:32:54.494 DEBUG 27964 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/logout] with attributes [authenticated]
2025-05-02 10:32:54.494 DEBUG 27964 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2025-05-02 10:32:54.495 DEBUG 27964 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2025-05-02 10:32:54.499 DEBUG 27964 --- [http-nio-8090-exec-1] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-05-02 10:32:54.502 DEBUG 27964 --- [http-nio-8090-exec-1] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2025-05-02 10:32:54.502 DEBUG 27964 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND
2025-05-02 10:32:54.502 DEBUG 27964 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 10:32:54.502 DEBUG 27964 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /index.html
2025-05-02 10:32:54.502 DEBUG 27964 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 10:32:54.502 DEBUG 27964 --- [http-nio-8090-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 10:32:54.502 DEBUG 27964 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /index.html
2025-05-02 10:32:54.502 DEBUG 27964 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for POST "/index.html", parameters={}
2025-05-02 10:32:54.507 DEBUG 27964 --- [http-nio-8090-exec-1] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [static/]]
2025-05-02 10:32:54.509  WARN 27964 --- [http-nio-8090-exec-1] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'POST' not supported]
2025-05-02 10:32:54.509 DEBUG 27964 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 405
2025-05-02 10:32:54.509 DEBUG 27964 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 10:35:01.164 DEBUG 27964 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-02 10:35:01.164 DEBUG 27964 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 10:35:01.170 ERROR 27964 --- [http-nio-8090-exec-3] com.hotel.util.JwtTokenProvider          : Expired JWT token
2025-05-02 10:35:01.170  WARN 27964 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : JWT Token 无效: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJkZGQiLCJyb2xlIjoiQ1VTVE9NRVIiLCJpYXQiOjE3NDU4MDkwNTEsImV4cCI6MTc0NTg5NTQ1MX0.N-zquTfLaEyTwq6t_L1EQLXcLQIv60oi9-uetVUG11rjdUZZDKWTO1Oqx2niFs8ZoS5fLsCkuIhTSzvodwXBoQ
2025-05-02 10:35:01.170 DEBUG 27964 --- [http-nio-8090-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 10:35:01.170 DEBUG 27964 --- [http-nio-8090-exec-3] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-02 10:35:01.170 DEBUG 27964 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-02 10:35:01.170 DEBUG 27964 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-02 10:35:01.170 DEBUG 27964 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-02 10:35:01.170 DEBUG 27964 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-02 10:35:01.170 DEBUG 27964 --- [http-nio-8090-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=front, password=12345)]
2025-05-02 10:35:01.241 DEBUG 27964 --- [http-nio-8090-exec-3] o.s.s.a.dao.DaoAuthenticationProvider    : Failed to authenticate since password does not match stored value
2025-05-02 10:35:01.248 DEBUG 27964 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 10:35:01.248 DEBUG 27964 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=false, message=用户名或密码错误, userId=null, username=null, role=null, token=null)]
2025-05-02 10:35:01.248 DEBUG 27964 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 401 UNAUTHORIZED
2025-05-02 10:35:01.254 DEBUG 27964 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 10:35:07.663 DEBUG 27964 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/invitation-codes
2025-05-02 10:35:07.663 DEBUG 27964 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 10:35:07.669 DEBUG 27964 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 10:35:07.669 DEBUG 27964 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/invitation-codes] with attributes [authenticated]
2025-05-02 10:35:07.669 DEBUG 27964 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/invitation-codes
2025-05-02 10:35:07.669 DEBUG 27964 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/invitation-codes", parameters={}
2025-05-02 10:35:07.669 DEBUG 27964 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#getValidInvitationCodes()
2025-05-02 10:35:07.682 DEBUG 27964 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 10:35:07.682 DEBUG 27964 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[InvitationCode(id=1, code=6YJP8NZ5, role=RECEPTIONIST, maxUses=1, currentUses=0, expiryDate=2025-05 (truncated)...]
2025-05-02 10:35:07.689 DEBUG 27964 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 10:35:07.689 DEBUG 27964 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 10:45:17.530  INFO 27964 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-02 10:45:17.542  INFO 27964 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-02 10:45:17.551  INFO 27964 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-02 10:46:59.986  INFO 11648 --- [main] com.hotel.HotelManagementApplication     : Starting HotelManagementApplication using Java 18.0.2 on LAPTOP-HeYIXianJun with PID 11648 (E:\桌面\javahotel\heqing99\target\classes started by 上善若水 in E:\桌面\javahotel\heqing99)
2025-05-02 10:46:59.988 DEBUG 11648 --- [main] com.hotel.HotelManagementApplication     : Running with Spring Boot v2.7.0, Spring v5.3.20
2025-05-02 10:46:59.988  INFO 11648 --- [main] com.hotel.HotelManagementApplication     : No active profile set, falling back to 1 default profile: "default"
2025-05-02 10:47:00.987  INFO 11648 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-02 10:47:01.193  INFO 11648 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 197 ms. Found 19 JPA repository interfaces.
2025-05-02 10:47:01.764  INFO 11648 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8090 (http)
2025-05-02 10:47:01.765  INFO 11648 --- [main] o.a.catalina.core.AprLifecycleListener   : Loaded Apache Tomcat Native library [1.2.30] using APR version [1.7.0].
2025-05-02 10:47:01.765  INFO 11648 --- [main] o.a.catalina.core.AprLifecycleListener   : APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true], UDS [true].
2025-05-02 10:47:01.765  INFO 11648 --- [main] o.a.catalina.core.AprLifecycleListener   : APR/OpenSSL configuration: useAprConnector [false], useOpenSSL [true]
2025-05-02 10:47:01.771  INFO 11648 --- [main] o.a.catalina.core.AprLifecycleListener   : OpenSSL successfully initialized [OpenSSL 1.1.1k  25 Mar 2021]
2025-05-02 10:47:01.781  INFO 11648 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-02 10:47:01.781  INFO 11648 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-05-02 10:47:01.935  INFO 11648 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-02 10:47:01.936  INFO 11648 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1897 ms
2025-05-02 10:47:02.131  INFO 11648 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-02 10:47:02.197  INFO 11648 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.9.Final
2025-05-02 10:47:02.387  INFO 11648 --- [main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2025-05-02 10:47:02.491  INFO 11648 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-02 10:47:02.843  INFO 11648 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-02 10:47:02.859  INFO 11648 --- [main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2025-05-02 10:47:04.100  INFO 11648 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-05-02 10:47:04.109  INFO 11648 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-02 10:47:04.598 DEBUG 11648 --- [main] c.hotel.config.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2025-05-02 10:47:04.599 DEBUG 11648 --- [main] o.springframework.web.filter.CorsFilter  : Filter 'corsFilter' configured for use
2025-05-02 10:47:05.457 DEBUG 11648 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.html']
2025-05-02 10:47:05.465 DEBUG 11648 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.js']
2025-05-02 10:47:05.466 DEBUG 11648 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.css']
2025-05-02 10:47:05.466 DEBUG 11648 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.ico']
2025-05-02 10:47:05.466 DEBUG 11648 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/assets/**']
2025-05-02 10:47:05.466 DEBUG 11648 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/']
2025-05-02 10:47:05.466 DEBUG 11648 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/about']
2025-05-02 10:47:05.466 DEBUG 11648 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/rooms']
2025-05-02 10:47:05.467 DEBUG 11648 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/room/**']
2025-05-02 10:47:05.467 DEBUG 11648 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/contact']
2025-05-02 10:47:05.467 DEBUG 11648 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/booking']
2025-05-02 10:47:05.467 DEBUG 11648 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/register']
2025-05-02 10:47:05.467 DEBUG 11648 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/login']
2025-05-02 10:47:05.468 DEBUG 11648 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/user/**']
2025-05-02 10:47:05.468 DEBUG 11648 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin']
2025-05-02 10:47:05.468 DEBUG 11648 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/login']
2025-05-02 10:47:05.469 DEBUG 11648 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/dashboard/**']
2025-05-02 10:47:05.469 DEBUG 11648 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/users/**']
2025-05-02 10:47:05.469 DEBUG 11648 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/staff/**']
2025-05-02 10:47:05.469 DEBUG 11648 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/reception/**']
2025-05-02 10:47:05.469 DEBUG 11648 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/cleaning/**']
2025-05-02 10:47:05.469 DEBUG 11648 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/login', POST]
2025-05-02 10:47:05.469 DEBUG 11648 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/login', GET]
2025-05-02 10:47:05.470 DEBUG 11648 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/auth/login', POST]
2025-05-02 10:47:05.470 DEBUG 11648 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/refresh-token', POST]
2025-05-02 10:47:05.471 DEBUG 11648 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/register', POST]
2025-05-02 10:47:05.471 DEBUG 11648 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/login', POST]
2025-05-02 10:47:05.471 DEBUG 11648 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/check-username', GET]
2025-05-02 10:47:05.471 DEBUG 11648 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/check-phone', GET]
2025-05-02 10:47:05.471 DEBUG 11648 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for Ant [pattern='/api/users/profile', GET]
2025-05-02 10:47:05.471 DEBUG 11648 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for Ant [pattern='/api/users/{id}', PUT]
2025-05-02 10:47:05.471 DEBUG 11648 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for Ant [pattern='/api/users/{id}/password', PUT]
2025-05-02 10:47:05.471 DEBUG 11648 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasRole('ROLE_ADMIN')] for Ant [pattern='/api/admin/**']
2025-05-02 10:47:05.473 DEBUG 11648 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasRole('ROLE_ADMIN')] for Ant [pattern='/api/users/{id}', DELETE]
2025-05-02 10:47:05.473 DEBUG 11648 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/**', OPTIONS]
2025-05-02 10:47:05.473 DEBUG 11648 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for any request
2025-05-02 10:47:05.480  INFO 11648 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@8aa3013, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@627ad446, org.springframework.security.web.context.SecurityContextPersistenceFilter@3fe59f84, org.springframework.security.web.header.HeaderWriterFilter@5f14eb51, org.springframework.web.filter.CorsFilter@41c83af0, org.springframework.security.web.authentication.logout.LogoutFilter@334ac669, com.hotel.config.JwtAuthenticationFilter@10ffe32f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@373c8f35, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1d86b636, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@77feca04, org.springframework.security.web.session.SessionManagementFilter@2f650dae, org.springframework.security.web.access.ExceptionTranslationFilter@18356d9e, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@5b8ba1d2]
2025-05-02 10:47:05.534  WARN 11648 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-02 10:47:05.666 DEBUG 11648 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-05-02 10:47:05.690  INFO 11648 --- [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [static/index.html]
2025-05-02 10:47:05.761 DEBUG 11648 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 162 mappings in 'requestMappingHandlerMapping'
2025-05-02 10:47:05.766 DEBUG 11648 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/admin, /admin/login, /admin/dashboard, /admin/users, /admin/staff, /admin/rooms, /admin/reception/bookings, /admin/reception/checkin, /admin/reception/visitors, /admin/cleaning/tasks, /admin/cleaning/records, /login] in 'viewControllerHandlerMapping'
2025-05-02 10:47:05.781 DEBUG 11648 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /assets/**, /*.js, /*.css, /favicon.ico, /index.html, /images/**, /assets/images/**] in 'resourceHandlerMapping'
2025-05-02 10:47:05.789 DEBUG 11648 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-05-02 10:47:05.938  INFO 11648 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8090 (http) with context path ''
2025-05-02 10:47:05.948  INFO 11648 --- [main] com.hotel.HotelManagementApplication     : Started HotelManagementApplication in 6.457 seconds (JVM running for 7.476)
2025-05-02 10:48:59.674  INFO 11648 --- [http-nio-8090-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-02 10:48:59.675  INFO 11648 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-02 10:48:59.675 DEBUG 11648 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-05-02 10:48:59.675 DEBUG 11648 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-05-02 10:48:59.675 DEBUG 11648 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-05-02 10:48:59.676 DEBUG 11648 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@4af0ae2c
2025-05-02 10:48:59.677 DEBUG 11648 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@5f63a6f2
2025-05-02 10:48:59.677 DEBUG 11648 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-05-02 10:48:59.678  INFO 11648 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2025-05-02 10:48:59.693 DEBUG 11648 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/invitation-codes/validate/6YJP8NZ5
2025-05-02 10:48:59.701 DEBUG 11648 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 10:48:59.803 DEBUG 11648 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 10:48:59.813 DEBUG 11648 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/invitation-codes/validate/6YJP8NZ5] with attributes [authenticated]
2025-05-02 10:48:59.813 DEBUG 11648 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/invitation-codes/validate/6YJP8NZ5
2025-05-02 10:48:59.816 DEBUG 11648 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/invitation-codes/validate/6YJP8NZ5", parameters={}
2025-05-02 10:48:59.823 DEBUG 11648 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#validateCode(String)
2025-05-02 10:48:59.914 DEBUG 11648 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 10:48:59.915 DEBUG 11648 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{role=RECEPTIONIST}]
2025-05-02 10:48:59.938 DEBUG 11648 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 10:48:59.941 DEBUG 11648 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 10:49:15.997 DEBUG 11648 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/invitation-codes
2025-05-02 10:49:15.997 DEBUG 11648 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 10:49:16.002 DEBUG 11648 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 10:49:16.002 DEBUG 11648 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/invitation-codes] with attributes [authenticated]
2025-05-02 10:49:16.003 DEBUG 11648 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/invitation-codes
2025-05-02 10:49:16.003 DEBUG 11648 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/invitation-codes", parameters={}
2025-05-02 10:49:16.004 DEBUG 11648 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#getValidInvitationCodes()
2025-05-02 10:49:16.026 DEBUG 11648 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 10:49:16.027 DEBUG 11648 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[InvitationCode(id=1, code=6YJP8NZ5, role=RECEPTIONIST, maxUses=1, currentUses=0, expiryDate=2025-05 (truncated)...]
2025-05-02 10:49:16.091 DEBUG 11648 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 10:49:16.091 DEBUG 11648 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 10:50:23.964 DEBUG 11648 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-02 10:50:23.964 DEBUG 11648 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 10:50:23.985 ERROR 11648 --- [http-nio-8090-exec-7] com.hotel.util.JwtTokenProvider          : Expired JWT token
2025-05-02 10:50:23.985  WARN 11648 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : JWT Token 无效: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJkZGQiLCJyb2xlIjoiQ1VTVE9NRVIiLCJpYXQiOjE3NDU4MDkwNTEsImV4cCI6MTc0NTg5NTQ1MX0.N-zquTfLaEyTwq6t_L1EQLXcLQIv60oi9-uetVUG11rjdUZZDKWTO1Oqx2niFs8ZoS5fLsCkuIhTSzvodwXBoQ
2025-05-02 10:50:23.985 DEBUG 11648 --- [http-nio-8090-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 10:50:23.985 DEBUG 11648 --- [http-nio-8090-exec-7] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-02 10:50:23.985 DEBUG 11648 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-02 10:50:23.985 DEBUG 11648 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-02 10:50:23.985 DEBUG 11648 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-02 10:50:23.985 DEBUG 11648 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-02 10:50:24.013 DEBUG 11648 --- [http-nio-8090-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=18999177256, password=18999177256)]
2025-05-02 10:50:24.165 DEBUG 11648 --- [http-nio-8090-exec-7] o.s.s.a.dao.DaoAuthenticationProvider    : Failed to find user '18999177256'
2025-05-02 10:50:24.173 DEBUG 11648 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 10:50:24.173 DEBUG 11648 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=false, message=用户名或密码错误, userId=null, username=null, role=null, token=null)]
2025-05-02 10:50:24.173 DEBUG 11648 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 401 UNAUTHORIZED
2025-05-02 10:50:24.173 DEBUG 11648 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 10:50:25.407 DEBUG 11648 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-02 10:50:25.407 DEBUG 11648 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 10:50:25.409 ERROR 11648 --- [http-nio-8090-exec-4] com.hotel.util.JwtTokenProvider          : Expired JWT token
2025-05-02 10:50:25.410  WARN 11648 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : JWT Token 无效: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJkZGQiLCJyb2xlIjoiQ1VTVE9NRVIiLCJpYXQiOjE3NDU4MDkwNTEsImV4cCI6MTc0NTg5NTQ1MX0.N-zquTfLaEyTwq6t_L1EQLXcLQIv60oi9-uetVUG11rjdUZZDKWTO1Oqx2niFs8ZoS5fLsCkuIhTSzvodwXBoQ
2025-05-02 10:50:25.410 DEBUG 11648 --- [http-nio-8090-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 10:50:25.410 DEBUG 11648 --- [http-nio-8090-exec-4] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-02 10:50:25.411 DEBUG 11648 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-02 10:50:25.411 DEBUG 11648 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-02 10:50:25.414 DEBUG 11648 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-02 10:50:25.414 DEBUG 11648 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-02 10:50:25.416 DEBUG 11648 --- [http-nio-8090-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=18999177256, password=18999177256)]
2025-05-02 10:50:25.492 DEBUG 11648 --- [http-nio-8090-exec-4] o.s.s.a.dao.DaoAuthenticationProvider    : Failed to find user '18999177256'
2025-05-02 10:50:25.492 DEBUG 11648 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 10:50:25.492 DEBUG 11648 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=false, message=用户名或密码错误, userId=null, username=null, role=null, token=null)]
2025-05-02 10:50:25.492 DEBUG 11648 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 401 UNAUTHORIZED
2025-05-02 10:50:25.492 DEBUG 11648 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 10:50:26.458 DEBUG 11648 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-02 10:50:26.458 DEBUG 11648 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 10:50:26.463 ERROR 11648 --- [http-nio-8090-exec-5] com.hotel.util.JwtTokenProvider          : Expired JWT token
2025-05-02 10:50:26.463  WARN 11648 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : JWT Token 无效: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJkZGQiLCJyb2xlIjoiQ1VTVE9NRVIiLCJpYXQiOjE3NDU4MDkwNTEsImV4cCI6MTc0NTg5NTQ1MX0.N-zquTfLaEyTwq6t_L1EQLXcLQIv60oi9-uetVUG11rjdUZZDKWTO1Oqx2niFs8ZoS5fLsCkuIhTSzvodwXBoQ
2025-05-02 10:50:26.464 DEBUG 11648 --- [http-nio-8090-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 10:50:26.464 DEBUG 11648 --- [http-nio-8090-exec-5] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-02 10:50:26.465 DEBUG 11648 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-02 10:50:26.465 DEBUG 11648 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-02 10:50:26.465 DEBUG 11648 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-02 10:50:26.465 DEBUG 11648 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-02 10:50:26.465 DEBUG 11648 --- [http-nio-8090-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=18999177256, password=18999177256)]
2025-05-02 10:50:26.540 DEBUG 11648 --- [http-nio-8090-exec-5] o.s.s.a.dao.DaoAuthenticationProvider    : Failed to find user '18999177256'
2025-05-02 10:50:26.540 DEBUG 11648 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 10:50:26.540 DEBUG 11648 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=false, message=用户名或密码错误, userId=null, username=null, role=null, token=null)]
2025-05-02 10:50:26.548 DEBUG 11648 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 401 UNAUTHORIZED
2025-05-02 10:50:26.548 DEBUG 11648 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 10:50:26.883 DEBUG 11648 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-02 10:50:26.883 DEBUG 11648 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 10:50:26.885 ERROR 11648 --- [http-nio-8090-exec-6] com.hotel.util.JwtTokenProvider          : Expired JWT token
2025-05-02 10:50:26.885  WARN 11648 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : JWT Token 无效: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJkZGQiLCJyb2xlIjoiQ1VTVE9NRVIiLCJpYXQiOjE3NDU4MDkwNTEsImV4cCI6MTc0NTg5NTQ1MX0.N-zquTfLaEyTwq6t_L1EQLXcLQIv60oi9-uetVUG11rjdUZZDKWTO1Oqx2niFs8ZoS5fLsCkuIhTSzvodwXBoQ
2025-05-02 10:50:26.885 DEBUG 11648 --- [http-nio-8090-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 10:50:26.885 DEBUG 11648 --- [http-nio-8090-exec-6] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-02 10:50:26.886 DEBUG 11648 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-02 10:50:26.886 DEBUG 11648 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-02 10:50:26.886 DEBUG 11648 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-02 10:50:26.886 DEBUG 11648 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-02 10:50:26.887 DEBUG 11648 --- [http-nio-8090-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=18999177256, password=18999177256)]
2025-05-02 10:50:26.958 DEBUG 11648 --- [http-nio-8090-exec-6] o.s.s.a.dao.DaoAuthenticationProvider    : Failed to find user '18999177256'
2025-05-02 10:50:26.958 DEBUG 11648 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 10:50:26.958 DEBUG 11648 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=false, message=用户名或密码错误, userId=null, username=null, role=null, token=null)]
2025-05-02 10:50:26.958 DEBUG 11648 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 401 UNAUTHORIZED
2025-05-02 10:50:26.958 DEBUG 11648 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 10:55:03.668 DEBUG 11648 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/invitation-codes
2025-05-02 10:55:03.668 DEBUG 11648 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 10:55:03.673 DEBUG 11648 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 10:55:03.675 DEBUG 11648 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/invitation-codes] with attributes [authenticated]
2025-05-02 10:55:03.675 DEBUG 11648 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/invitation-codes
2025-05-02 10:55:03.675 DEBUG 11648 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/invitation-codes", parameters={}
2025-05-02 10:55:03.675 DEBUG 11648 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#getValidInvitationCodes()
2025-05-02 10:55:03.681 DEBUG 11648 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 10:55:03.682 DEBUG 11648 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[InvitationCode(id=1, code=6YJP8NZ5, role=RECEPTIONIST, maxUses=1, currentUses=0, expiryDate=2025-05 (truncated)...]
2025-05-02 10:55:03.684 DEBUG 11648 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 10:55:03.684 DEBUG 11648 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 10:55:18.413 DEBUG 11648 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-02 10:55:18.414 DEBUG 11648 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 10:55:18.414 DEBUG 11648 --- [http-nio-8090-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 10:55:18.414 DEBUG 11648 --- [http-nio-8090-exec-8] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 5A29A4A47A25E456C4F538CE7FF0CCBF
2025-05-02 10:55:18.415 DEBUG 11648 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-02 10:55:18.416 DEBUG 11648 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-02 10:55:18.416 DEBUG 11648 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-02 10:55:18.416 DEBUG 11648 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-02 10:55:18.418 DEBUG 11648 --- [http-nio-8090-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=admin, password=admin123)]
2025-05-02 10:55:18.487 DEBUG 11648 --- [http-nio-8090-exec-8] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-02 10:55:18.521 DEBUG 11648 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 10:55:18.521 DEBUG 11648 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=1, username=admin, role=ADMIN, token=eyJhbGciOiJIUz (truncated)...]
2025-05-02 10:55:18.521 DEBUG 11648 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 10:55:18.521 DEBUG 11648 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 10:55:18.678 DEBUG 11648 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/statistics
2025-05-02 10:55:18.679 DEBUG 11648 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 10:55:18.684 DEBUG 11648 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 10:55:18.691 DEBUG 11648 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/statistics] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 10:55:18.691 DEBUG 11648 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/statistics
2025-05-02 10:55:18.691 DEBUG 11648 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/statistics", parameters={}
2025-05-02 10:55:18.692 DEBUG 11648 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-02 10:55:18.784 DEBUG 11648 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 10:55:18.784 DEBUG 11648 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{todayRevenue=0, monthlyRevenue=0, upcomingReservations=0, totalUsers=15, availableRooms=1, newUsers (truncated)...]
2025-05-02 10:55:18.794 DEBUG 11648 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 10:55:18.794 DEBUG 11648 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 10:55:19.829 DEBUG 11648 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/invitation-codes
2025-05-02 10:55:19.830 DEBUG 11648 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 10:55:19.835 DEBUG 11648 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 10:55:19.836 DEBUG 11648 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/invitation-codes] with attributes [authenticated]
2025-05-02 10:55:19.836 DEBUG 11648 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/invitation-codes
2025-05-02 10:55:19.836 DEBUG 11648 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/invitation-codes", parameters={}
2025-05-02 10:55:19.837 DEBUG 11648 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#getValidInvitationCodes()
2025-05-02 10:55:19.843 DEBUG 11648 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 10:55:19.844 DEBUG 11648 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[InvitationCode(id=1, code=6YJP8NZ5, role=RECEPTIONIST, maxUses=1, currentUses=0, expiryDate=2025-05 (truncated)...]
2025-05-02 10:55:19.845 DEBUG 11648 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 10:55:19.845 DEBUG 11648 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 11:01:39.651 DEBUG 11648 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/invitation-codes
2025-05-02 11:01:39.651 DEBUG 11648 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 11:01:39.656 DEBUG 11648 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 11:01:39.657 DEBUG 11648 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/invitation-codes] with attributes [authenticated]
2025-05-02 11:01:39.657 DEBUG 11648 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/invitation-codes
2025-05-02 11:01:39.658 DEBUG 11648 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/invitation-codes", parameters={}
2025-05-02 11:01:39.658 DEBUG 11648 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#getValidInvitationCodes()
2025-05-02 11:01:39.664 DEBUG 11648 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 11:01:39.664 DEBUG 11648 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[InvitationCode(id=1, code=6YJP8NZ5, role=RECEPTIONIST, maxUses=1, currentUses=0, expiryDate=2025-05 (truncated)...]
2025-05-02 11:01:39.665 DEBUG 11648 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 11:01:39.665 DEBUG 11648 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 11:01:42.199  INFO 11648 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-02 11:01:42.199  INFO 11648 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-02 11:01:42.209  INFO 11648 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-02 11:12:55.387  INFO 4968 --- [main] com.hotel.HotelManagementApplication     : Starting HotelManagementApplication using Java 18.0.2 on LAPTOP-HeYIXianJun with PID 4968 (E:\桌面\javahotel\heqing99\target\classes started by 上善若水 in E:\桌面\javahotel\heqing99)
2025-05-02 11:12:55.388 DEBUG 4968 --- [main] com.hotel.HotelManagementApplication     : Running with Spring Boot v2.7.0, Spring v5.3.20
2025-05-02 11:12:55.388  INFO 4968 --- [main] com.hotel.HotelManagementApplication     : No active profile set, falling back to 1 default profile: "default"
2025-05-02 11:12:56.241  INFO 4968 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-02 11:12:56.422  INFO 4968 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 171 ms. Found 19 JPA repository interfaces.
2025-05-02 11:12:56.898  INFO 4968 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8090 (http)
2025-05-02 11:12:56.898  INFO 4968 --- [main] o.a.catalina.core.AprLifecycleListener   : Loaded Apache Tomcat Native library [1.2.30] using APR version [1.7.0].
2025-05-02 11:12:56.898  INFO 4968 --- [main] o.a.catalina.core.AprLifecycleListener   : APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true], UDS [true].
2025-05-02 11:12:56.898  INFO 4968 --- [main] o.a.catalina.core.AprLifecycleListener   : APR/OpenSSL configuration: useAprConnector [false], useOpenSSL [true]
2025-05-02 11:12:56.898  INFO 4968 --- [main] o.a.catalina.core.AprLifecycleListener   : OpenSSL successfully initialized [OpenSSL 1.1.1k  25 Mar 2021]
2025-05-02 11:12:56.908  INFO 4968 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-02 11:12:56.908  INFO 4968 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-05-02 11:12:57.028  INFO 4968 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-02 11:12:57.028  INFO 4968 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1596 ms
2025-05-02 11:12:57.178  INFO 4968 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-02 11:12:57.228  INFO 4968 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.9.Final
2025-05-02 11:12:57.378  INFO 4968 --- [main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2025-05-02 11:12:57.479  INFO 4968 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-02 11:12:57.781  INFO 4968 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-02 11:12:57.791  INFO 4968 --- [main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2025-05-02 11:12:58.804  INFO 4968 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-05-02 11:12:58.814  INFO 4968 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-02 11:12:59.224 DEBUG 4968 --- [main] c.hotel.config.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2025-05-02 11:12:59.224 DEBUG 4968 --- [main] o.springframework.web.filter.CorsFilter  : Filter 'corsFilter' configured for use
2025-05-02 11:12:59.981 DEBUG 4968 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.html']
2025-05-02 11:12:59.981 DEBUG 4968 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.js']
2025-05-02 11:12:59.981 DEBUG 4968 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.css']
2025-05-02 11:12:59.981 DEBUG 4968 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.ico']
2025-05-02 11:12:59.981 DEBUG 4968 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/assets/**']
2025-05-02 11:12:59.981 DEBUG 4968 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/']
2025-05-02 11:12:59.981 DEBUG 4968 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/about']
2025-05-02 11:12:59.981 DEBUG 4968 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/rooms']
2025-05-02 11:12:59.981 DEBUG 4968 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/room/**']
2025-05-02 11:12:59.981 DEBUG 4968 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/contact']
2025-05-02 11:12:59.981 DEBUG 4968 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/booking']
2025-05-02 11:12:59.981 DEBUG 4968 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/register']
2025-05-02 11:12:59.981 DEBUG 4968 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/login']
2025-05-02 11:12:59.981 DEBUG 4968 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/user/**']
2025-05-02 11:12:59.981 DEBUG 4968 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin']
2025-05-02 11:12:59.981 DEBUG 4968 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/login']
2025-05-02 11:12:59.991 DEBUG 4968 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/dashboard/**']
2025-05-02 11:12:59.991 DEBUG 4968 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/users/**']
2025-05-02 11:12:59.991 DEBUG 4968 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/staff/**']
2025-05-02 11:12:59.991 DEBUG 4968 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/reception/**']
2025-05-02 11:12:59.991 DEBUG 4968 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/cleaning/**']
2025-05-02 11:12:59.991 DEBUG 4968 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/login', POST]
2025-05-02 11:12:59.991 DEBUG 4968 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/login', GET]
2025-05-02 11:12:59.991 DEBUG 4968 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/auth/login', POST]
2025-05-02 11:12:59.991 DEBUG 4968 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/refresh-token', POST]
2025-05-02 11:12:59.991 DEBUG 4968 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/register', POST]
2025-05-02 11:12:59.991 DEBUG 4968 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/login', POST]
2025-05-02 11:12:59.991 DEBUG 4968 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/check-username', GET]
2025-05-02 11:12:59.991 DEBUG 4968 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/check-phone', GET]
2025-05-02 11:12:59.991 DEBUG 4968 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for Ant [pattern='/api/users/profile', GET]
2025-05-02 11:12:59.991 DEBUG 4968 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for Ant [pattern='/api/users/{id}', PUT]
2025-05-02 11:12:59.991 DEBUG 4968 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for Ant [pattern='/api/users/{id}/password', PUT]
2025-05-02 11:12:59.991 DEBUG 4968 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasRole('ROLE_ADMIN')] for Ant [pattern='/api/admin/**']
2025-05-02 11:12:59.991 DEBUG 4968 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasRole('ROLE_ADMIN')] for Ant [pattern='/api/users/{id}', DELETE]
2025-05-02 11:12:59.991 DEBUG 4968 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/**', OPTIONS]
2025-05-02 11:12:59.991 DEBUG 4968 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for any request
2025-05-02 11:12:59.991  INFO 4968 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@64821706, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@8aa3013, org.springframework.security.web.context.SecurityContextPersistenceFilter@79aa675b, org.springframework.security.web.header.HeaderWriterFilter@6cfe32cd, org.springframework.web.filter.CorsFilter@1399ad68, org.springframework.security.web.authentication.logout.LogoutFilter@4f4b7a2e, com.hotel.config.JwtAuthenticationFilter@70ccb3bf, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@38eafdab, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@373c8f35, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@627ad446, org.springframework.security.web.session.SessionManagementFilter@287dde94, org.springframework.security.web.access.ExceptionTranslationFilter@7a0f1f9d, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@1f67d37f]
2025-05-02 11:13:00.041  WARN 4968 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-02 11:13:00.151 DEBUG 4968 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-05-02 11:13:00.161  INFO 4968 --- [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [static/index.html]
2025-05-02 11:13:00.226 DEBUG 4968 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 163 mappings in 'requestMappingHandlerMapping'
2025-05-02 11:13:00.229 DEBUG 4968 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/admin, /admin/login, /admin/dashboard, /admin/users, /admin/staff, /admin/rooms, /admin/reception/bookings, /admin/reception/checkin, /admin/reception/visitors, /admin/cleaning/tasks, /admin/cleaning/records, /login] in 'viewControllerHandlerMapping'
2025-05-02 11:13:00.242 DEBUG 4968 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /assets/**, /*.js, /*.css, /favicon.ico, /index.html, /images/**, /assets/images/**] in 'resourceHandlerMapping'
2025-05-02 11:13:00.242 DEBUG 4968 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-05-02 11:13:00.388  INFO 4968 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8090 (http) with context path ''
2025-05-02 11:13:00.392  INFO 4968 --- [main] com.hotel.HotelManagementApplication     : Started HotelManagementApplication in 5.472 seconds (JVM running for 6.301)
2025-05-02 11:14:17.259  INFO 4968 --- [http-nio-8090-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-02 11:14:17.259  INFO 4968 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-02 11:14:17.259 DEBUG 4968 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-05-02 11:14:17.259 DEBUG 4968 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-05-02 11:14:17.259 DEBUG 4968 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-05-02 11:14:17.259 DEBUG 4968 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@333d5a0c
2025-05-02 11:14:17.259 DEBUG 4968 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@5f63a6f2
2025-05-02 11:14:17.259 DEBUG 4968 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-05-02 11:14:17.259  INFO 4968 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2025-05-02 11:14:17.283 DEBUG 4968 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/invitation-codes/validate/6YJP8NZ5
2025-05-02 11:14:17.289 DEBUG 4968 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 11:14:17.294 DEBUG 4968 --- [http-nio-8090-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 11:14:17.294 DEBUG 4968 --- [http-nio-8090-exec-1] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-02 11:14:17.305 DEBUG 4968 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Failed to authorize filter invocation [GET /api/invitation-codes/validate/6YJP8NZ5] with attributes [authenticated]
2025-05-02 11:14:17.305 DEBUG 4968 --- [http-nio-8090-exec-1] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access
2025-05-02 11:14:17.305 DEBUG 4968 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 11:14:17.305 DEBUG 4968 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /error
2025-05-02 11:14:17.305 DEBUG 4968 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 11:14:17.305 DEBUG 4968 --- [http-nio-8090-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 11:14:17.305 DEBUG 4968 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /error
2025-05-02 11:14:17.314 DEBUG 4968 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/error", parameters={}
2025-05-02 11:14:17.324 DEBUG 4968 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CustomErrorController#handleError(HttpServletRequest, WebRequest)
2025-05-02 11:14:17.354 DEBUG 4968 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 11:14:17.354 DEBUG 4968 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=Forbidden, message=An error occurred, status=403}]
2025-05-02 11:14:17.384 DEBUG 4968 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 403
2025-05-02 11:14:17.384 DEBUG 4968 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 11:14:18.677 DEBUG 4968 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/invitation-codes/validate/6YJP8NZ5
2025-05-02 11:14:18.678 DEBUG 4968 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 11:14:18.678 DEBUG 4968 --- [http-nio-8090-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 11:14:18.678 DEBUG 4968 --- [http-nio-8090-exec-5] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-02 11:14:18.678 DEBUG 4968 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Failed to authorize filter invocation [GET /api/invitation-codes/validate/6YJP8NZ5] with attributes [authenticated]
2025-05-02 11:14:18.679 DEBUG 4968 --- [http-nio-8090-exec-5] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access
2025-05-02 11:14:18.679 DEBUG 4968 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 11:14:18.679 DEBUG 4968 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /error
2025-05-02 11:14:18.680 DEBUG 4968 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 11:14:18.680 DEBUG 4968 --- [http-nio-8090-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 11:14:18.680 DEBUG 4968 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /error
2025-05-02 11:14:18.681 DEBUG 4968 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/error", parameters={}
2025-05-02 11:14:18.681 DEBUG 4968 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CustomErrorController#handleError(HttpServletRequest, WebRequest)
2025-05-02 11:14:18.682 DEBUG 4968 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 11:14:18.682 DEBUG 4968 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=Forbidden, message=An error occurred, status=403}]
2025-05-02 11:14:18.684 DEBUG 4968 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 403
2025-05-02 11:14:18.685 DEBUG 4968 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 11:14:19.310 DEBUG 4968 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/invitation-codes/validate/6YJP8NZ5
2025-05-02 11:14:19.311 DEBUG 4968 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 11:14:19.311 DEBUG 4968 --- [http-nio-8090-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 11:14:19.311 DEBUG 4968 --- [http-nio-8090-exec-6] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-02 11:14:19.311 DEBUG 4968 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Failed to authorize filter invocation [GET /api/invitation-codes/validate/6YJP8NZ5] with attributes [authenticated]
2025-05-02 11:14:19.311 DEBUG 4968 --- [http-nio-8090-exec-6] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access
2025-05-02 11:14:19.312 DEBUG 4968 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 11:14:19.312 DEBUG 4968 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /error
2025-05-02 11:14:19.312 DEBUG 4968 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 11:14:19.312 DEBUG 4968 --- [http-nio-8090-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 11:14:19.312 DEBUG 4968 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /error
2025-05-02 11:14:19.313 DEBUG 4968 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/error", parameters={}
2025-05-02 11:14:19.313 DEBUG 4968 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CustomErrorController#handleError(HttpServletRequest, WebRequest)
2025-05-02 11:14:19.313 DEBUG 4968 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 11:14:19.314 DEBUG 4968 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=Forbidden, message=An error occurred, status=403}]
2025-05-02 11:14:19.317 DEBUG 4968 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 403
2025-05-02 11:14:19.317 DEBUG 4968 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 11:14:32.554 DEBUG 4968 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/invitation-codes
2025-05-02 11:14:32.554 DEBUG 4968 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 11:14:32.647 DEBUG 4968 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 11:14:32.648 DEBUG 4968 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/invitation-codes] with attributes [authenticated]
2025-05-02 11:14:32.648 DEBUG 4968 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/invitation-codes
2025-05-02 11:14:32.649 DEBUG 4968 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/invitation-codes", parameters={}
2025-05-02 11:14:32.650 DEBUG 4968 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#getValidInvitationCodes()
2025-05-02 11:14:32.696 DEBUG 4968 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 11:14:32.696 DEBUG 4968 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[InvitationCode(id=1, code=6YJP8NZ5, role=RECEPTIONIST, maxUses=1, currentUses=0, expiryDate=2025-05 (truncated)...]
2025-05-02 11:14:32.749 DEBUG 4968 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 11:14:32.749 DEBUG 4968 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 11:14:38.383 DEBUG 4968 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/invitation-codes/validate/3T57HH9P
2025-05-02 11:14:38.383 DEBUG 4968 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 11:14:38.384 DEBUG 4968 --- [http-nio-8090-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 11:14:38.384 DEBUG 4968 --- [http-nio-8090-exec-2] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-02 11:14:38.385 DEBUG 4968 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Failed to authorize filter invocation [GET /api/invitation-codes/validate/3T57HH9P] with attributes [authenticated]
2025-05-02 11:14:38.385 DEBUG 4968 --- [http-nio-8090-exec-2] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access
2025-05-02 11:14:38.385 DEBUG 4968 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 11:14:38.386 DEBUG 4968 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /error
2025-05-02 11:14:38.386 DEBUG 4968 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 11:14:38.387 DEBUG 4968 --- [http-nio-8090-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 11:14:38.387 DEBUG 4968 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /error
2025-05-02 11:14:38.388 DEBUG 4968 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/error", parameters={}
2025-05-02 11:14:38.388 DEBUG 4968 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CustomErrorController#handleError(HttpServletRequest, WebRequest)
2025-05-02 11:14:38.389 DEBUG 4968 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 11:14:38.389 DEBUG 4968 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=Forbidden, message=An error occurred, status=403}]
2025-05-02 11:14:38.390 DEBUG 4968 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 403
2025-05-02 11:14:38.391 DEBUG 4968 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 11:15:56.140 DEBUG 4968 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/invitation-codes/validate/3T57HH9P
2025-05-02 11:15:56.141 DEBUG 4968 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 11:15:56.142 DEBUG 4968 --- [http-nio-8090-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 11:15:56.142 DEBUG 4968 --- [http-nio-8090-exec-3] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-02 11:15:56.142 DEBUG 4968 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Failed to authorize filter invocation [GET /api/invitation-codes/validate/3T57HH9P] with attributes [authenticated]
2025-05-02 11:15:56.142 DEBUG 4968 --- [http-nio-8090-exec-3] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access
2025-05-02 11:15:56.143 DEBUG 4968 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 11:15:56.144 DEBUG 4968 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /error
2025-05-02 11:15:56.144 DEBUG 4968 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 11:15:56.144 DEBUG 4968 --- [http-nio-8090-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 11:15:56.145 DEBUG 4968 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /error
2025-05-02 11:15:56.146 DEBUG 4968 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/error", parameters={}
2025-05-02 11:15:56.147 DEBUG 4968 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CustomErrorController#handleError(HttpServletRequest, WebRequest)
2025-05-02 11:15:56.148 DEBUG 4968 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 11:15:56.148 DEBUG 4968 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=Forbidden, message=An error occurred, status=403}]
2025-05-02 11:15:56.149 DEBUG 4968 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 403
2025-05-02 11:15:56.149 DEBUG 4968 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 11:15:57.734 DEBUG 4968 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/invitation-codes/validate/3T57HH9P
2025-05-02 11:15:57.735 DEBUG 4968 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 11:15:57.735 DEBUG 4968 --- [http-nio-8090-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 11:15:57.735 DEBUG 4968 --- [http-nio-8090-exec-7] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-02 11:15:57.736 DEBUG 4968 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Failed to authorize filter invocation [GET /api/invitation-codes/validate/3T57HH9P] with attributes [authenticated]
2025-05-02 11:15:57.736 DEBUG 4968 --- [http-nio-8090-exec-7] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access
2025-05-02 11:15:57.736 DEBUG 4968 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 11:15:57.736 DEBUG 4968 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /error
2025-05-02 11:15:57.737 DEBUG 4968 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 11:15:57.737 DEBUG 4968 --- [http-nio-8090-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 11:15:57.737 DEBUG 4968 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /error
2025-05-02 11:15:57.737 DEBUG 4968 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/error", parameters={}
2025-05-02 11:15:57.737 DEBUG 4968 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CustomErrorController#handleError(HttpServletRequest, WebRequest)
2025-05-02 11:15:57.738 DEBUG 4968 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 11:15:57.738 DEBUG 4968 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=Forbidden, message=An error occurred, status=403}]
2025-05-02 11:15:57.739 DEBUG 4968 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 403
2025-05-02 11:15:57.739 DEBUG 4968 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 11:16:01.112  INFO 4968 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-02 11:16:01.112  INFO 4968 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-02 11:16:01.126  INFO 4968 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-02 11:16:08.434  INFO 22360 --- [main] com.hotel.HotelManagementApplication     : Starting HotelManagementApplication using Java 18.0.2 on LAPTOP-HeYIXianJun with PID 22360 (E:\桌面\javahotel\heqing99\target\classes started by 上善若水 in E:\桌面\javahotel\heqing99)
2025-05-02 11:16:08.436 DEBUG 22360 --- [main] com.hotel.HotelManagementApplication     : Running with Spring Boot v2.7.0, Spring v5.3.20
2025-05-02 11:16:08.436  INFO 22360 --- [main] com.hotel.HotelManagementApplication     : No active profile set, falling back to 1 default profile: "default"
2025-05-02 11:16:09.409  INFO 22360 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-02 11:16:09.650  INFO 22360 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 228 ms. Found 19 JPA repository interfaces.
2025-05-02 11:16:10.273  INFO 22360 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8090 (http)
2025-05-02 11:16:10.273  INFO 22360 --- [main] o.a.catalina.core.AprLifecycleListener   : Loaded Apache Tomcat Native library [1.2.30] using APR version [1.7.0].
2025-05-02 11:16:10.273  INFO 22360 --- [main] o.a.catalina.core.AprLifecycleListener   : APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true], UDS [true].
2025-05-02 11:16:10.273  INFO 22360 --- [main] o.a.catalina.core.AprLifecycleListener   : APR/OpenSSL configuration: useAprConnector [false], useOpenSSL [true]
2025-05-02 11:16:10.283  INFO 22360 --- [main] o.a.catalina.core.AprLifecycleListener   : OpenSSL successfully initialized [OpenSSL 1.1.1k  25 Mar 2021]
2025-05-02 11:16:10.294  INFO 22360 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-02 11:16:10.294  INFO 22360 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-05-02 11:16:10.444  INFO 22360 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-02 11:16:10.444  INFO 22360 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1956 ms
2025-05-02 11:16:10.621  INFO 22360 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-02 11:16:10.681  INFO 22360 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.9.Final
2025-05-02 11:16:10.893  INFO 22360 --- [main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2025-05-02 11:16:11.004  INFO 22360 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-02 11:16:11.360  INFO 22360 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-02 11:16:11.381  INFO 22360 --- [main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2025-05-02 11:16:12.617  INFO 22360 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-05-02 11:16:12.627  INFO 22360 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-02 11:16:13.138 DEBUG 22360 --- [main] c.hotel.config.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2025-05-02 11:16:13.138 DEBUG 22360 --- [main] o.springframework.web.filter.CorsFilter  : Filter 'corsFilter' configured for use
2025-05-02 11:16:14.027 DEBUG 22360 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.html']
2025-05-02 11:16:14.027 DEBUG 22360 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.js']
2025-05-02 11:16:14.037 DEBUG 22360 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.css']
2025-05-02 11:16:14.037 DEBUG 22360 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.ico']
2025-05-02 11:16:14.037 DEBUG 22360 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/assets/**']
2025-05-02 11:16:14.037 DEBUG 22360 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/']
2025-05-02 11:16:14.037 DEBUG 22360 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/about']
2025-05-02 11:16:14.037 DEBUG 22360 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/rooms']
2025-05-02 11:16:14.037 DEBUG 22360 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/room/**']
2025-05-02 11:16:14.037 DEBUG 22360 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/contact']
2025-05-02 11:16:14.037 DEBUG 22360 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/booking']
2025-05-02 11:16:14.037 DEBUG 22360 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/register']
2025-05-02 11:16:14.037 DEBUG 22360 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/login']
2025-05-02 11:16:14.037 DEBUG 22360 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/user/**']
2025-05-02 11:16:14.037 DEBUG 22360 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin']
2025-05-02 11:16:14.037 DEBUG 22360 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/login']
2025-05-02 11:16:14.037 DEBUG 22360 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/dashboard/**']
2025-05-02 11:16:14.037 DEBUG 22360 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/users/**']
2025-05-02 11:16:14.037 DEBUG 22360 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/staff/**']
2025-05-02 11:16:14.037 DEBUG 22360 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/reception/**']
2025-05-02 11:16:14.037 DEBUG 22360 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/cleaning/**']
2025-05-02 11:16:14.037 DEBUG 22360 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/login', POST]
2025-05-02 11:16:14.037 DEBUG 22360 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/login', GET]
2025-05-02 11:16:14.037 DEBUG 22360 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/auth/login', POST]
2025-05-02 11:16:14.037 DEBUG 22360 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/refresh-token', POST]
2025-05-02 11:16:14.037 DEBUG 22360 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/register', POST]
2025-05-02 11:16:14.037 DEBUG 22360 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/login', POST]
2025-05-02 11:16:14.037 DEBUG 22360 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/check-username', GET]
2025-05-02 11:16:14.037 DEBUG 22360 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/check-phone', GET]
2025-05-02 11:16:14.037 DEBUG 22360 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/invitation-codes/validate/**', GET]
2025-05-02 11:16:14.037 DEBUG 22360 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for Ant [pattern='/api/users/profile', GET]
2025-05-02 11:16:14.037 DEBUG 22360 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for Ant [pattern='/api/users/{id}', PUT]
2025-05-02 11:16:14.037 DEBUG 22360 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for Ant [pattern='/api/users/{id}/password', PUT]
2025-05-02 11:16:14.037 DEBUG 22360 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasRole('ROLE_ADMIN')] for Ant [pattern='/api/admin/**']
2025-05-02 11:16:14.037 DEBUG 22360 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasRole('ROLE_ADMIN')] for Ant [pattern='/api/users/{id}', DELETE]
2025-05-02 11:16:14.037 DEBUG 22360 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/**', OPTIONS]
2025-05-02 11:16:14.037 DEBUG 22360 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for any request
2025-05-02 11:16:14.047  INFO 22360 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@c7aac7c, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7ab8f93, org.springframework.security.web.context.SecurityContextPersistenceFilter@1bd6bfb0, org.springframework.security.web.header.HeaderWriterFilter@d5eca06, org.springframework.web.filter.CorsFilter@9ba167e, org.springframework.security.web.authentication.logout.LogoutFilter@383a5260, com.hotel.config.JwtAuthenticationFilter@62d21afd, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7fb28ed, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@536f389, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6037748a, org.springframework.security.web.session.SessionManagementFilter@455cb6d9, org.springframework.security.web.access.ExceptionTranslationFilter@7bb888b7, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@6c502018]
2025-05-02 11:16:14.097  WARN 22360 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-02 11:16:14.232 DEBUG 22360 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-05-02 11:16:14.262  INFO 22360 --- [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [static/index.html]
2025-05-02 11:16:14.328 DEBUG 22360 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 163 mappings in 'requestMappingHandlerMapping'
2025-05-02 11:16:14.328 DEBUG 22360 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/admin, /admin/login, /admin/dashboard, /admin/users, /admin/staff, /admin/rooms, /admin/reception/bookings, /admin/reception/checkin, /admin/reception/visitors, /admin/cleaning/tasks, /admin/cleaning/records, /login] in 'viewControllerHandlerMapping'
2025-05-02 11:16:14.348 DEBUG 22360 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /assets/**, /*.js, /*.css, /favicon.ico, /index.html, /images/**, /assets/images/**] in 'resourceHandlerMapping'
2025-05-02 11:16:14.358 DEBUG 22360 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-05-02 11:16:14.510  INFO 22360 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8090 (http) with context path ''
2025-05-02 11:16:14.520  INFO 22360 --- [main] com.hotel.HotelManagementApplication     : Started HotelManagementApplication in 6.553 seconds (JVM running for 7.504)
2025-05-02 11:17:37.070  INFO 22360 --- [http-nio-8090-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-02 11:17:37.070  INFO 22360 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-02 11:17:37.070 DEBUG 22360 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-05-02 11:17:37.070 DEBUG 22360 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-05-02 11:17:37.070 DEBUG 22360 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-05-02 11:17:37.075 DEBUG 22360 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@14ecd835
2025-05-02 11:17:37.075 DEBUG 22360 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@665e18d5
2025-05-02 11:17:37.075 DEBUG 22360 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-05-02 11:17:37.075  INFO 22360 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 5 ms
2025-05-02 11:17:37.085 DEBUG 22360 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/invitation-codes/validate/3T57HH9P
2025-05-02 11:17:37.085 DEBUG 22360 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 11:17:37.095 DEBUG 22360 --- [http-nio-8090-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 11:17:37.095 DEBUG 22360 --- [http-nio-8090-exec-1] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-02 11:17:37.095 DEBUG 22360 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/invitation-codes/validate/3T57HH9P] with attributes [permitAll]
2025-05-02 11:17:37.095 DEBUG 22360 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/invitation-codes/validate/3T57HH9P
2025-05-02 11:17:37.103 DEBUG 22360 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/invitation-codes/validate/3T57HH9P", parameters={}
2025-05-02 11:17:37.103 DEBUG 22360 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#validateCode(String)
2025-05-02 11:17:37.188 DEBUG 22360 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 11:17:37.188 DEBUG 22360 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{role=RECEPTIONIST}]
2025-05-02 11:17:37.203 DEBUG 22360 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 11:17:37.203 DEBUG 22360 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 11:18:11.263 DEBUG 22360 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/users/register/staff
2025-05-02 11:18:11.263 DEBUG 22360 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 11:18:11.323 ERROR 22360 --- [http-nio-8090-exec-2] com.hotel.util.JwtTokenProvider          : Expired JWT token
2025-05-02 11:18:11.323  WARN 22360 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : JWT Token 无效: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJkZGQiLCJyb2xlIjoiQ1VTVE9NRVIiLCJpYXQiOjE3NDU4MDkwNTEsImV4cCI6MTc0NTg5NTQ1MX0.N-zquTfLaEyTwq6t_L1EQLXcLQIv60oi9-uetVUG11rjdUZZDKWTO1Oqx2niFs8ZoS5fLsCkuIhTSzvodwXBoQ
2025-05-02 11:18:11.323 DEBUG 22360 --- [http-nio-8090-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 11:18:11.323 DEBUG 22360 --- [http-nio-8090-exec-2] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-02 11:18:11.323 DEBUG 22360 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Failed to authorize filter invocation [POST /api/users/register/staff] with attributes [authenticated]
2025-05-02 11:18:11.323 DEBUG 22360 --- [http-nio-8090-exec-2] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access
2025-05-02 11:18:11.323 DEBUG 22360 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 11:18:11.323 DEBUG 22360 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /error
2025-05-02 11:18:11.330 DEBUG 22360 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 11:18:11.330 DEBUG 22360 --- [http-nio-8090-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 11:18:11.330 DEBUG 22360 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /error
2025-05-02 11:18:11.330 DEBUG 22360 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for POST "/error", parameters={}
2025-05-02 11:18:11.330 DEBUG 22360 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CustomErrorController#handleError(HttpServletRequest, WebRequest)
2025-05-02 11:18:11.336 DEBUG 22360 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 11:18:11.336 DEBUG 22360 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=Forbidden, message=An error occurred, status=403}]
2025-05-02 11:18:11.343 DEBUG 22360 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 403
2025-05-02 11:18:11.343 DEBUG 22360 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 11:18:15.107 DEBUG 22360 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/users/register/staff
2025-05-02 11:18:15.107 DEBUG 22360 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 11:18:15.114 ERROR 22360 --- [http-nio-8090-exec-7] com.hotel.util.JwtTokenProvider          : Expired JWT token
2025-05-02 11:18:15.114  WARN 22360 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : JWT Token 无效: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJkZGQiLCJyb2xlIjoiQ1VTVE9NRVIiLCJpYXQiOjE3NDU4MDkwNTEsImV4cCI6MTc0NTg5NTQ1MX0.N-zquTfLaEyTwq6t_L1EQLXcLQIv60oi9-uetVUG11rjdUZZDKWTO1Oqx2niFs8ZoS5fLsCkuIhTSzvodwXBoQ
2025-05-02 11:18:15.114 DEBUG 22360 --- [http-nio-8090-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 11:18:15.114 DEBUG 22360 --- [http-nio-8090-exec-7] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-02 11:18:15.114 DEBUG 22360 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Failed to authorize filter invocation [POST /api/users/register/staff] with attributes [authenticated]
2025-05-02 11:18:15.114 DEBUG 22360 --- [http-nio-8090-exec-7] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access
2025-05-02 11:18:15.114 DEBUG 22360 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 11:18:15.114 DEBUG 22360 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /error
2025-05-02 11:18:15.114 DEBUG 22360 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 11:18:15.114 DEBUG 22360 --- [http-nio-8090-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 11:18:15.114 DEBUG 22360 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /error
2025-05-02 11:18:15.114 DEBUG 22360 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for POST "/error", parameters={}
2025-05-02 11:18:15.114 DEBUG 22360 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CustomErrorController#handleError(HttpServletRequest, WebRequest)
2025-05-02 11:18:15.114 DEBUG 22360 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 11:18:15.114 DEBUG 22360 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=Forbidden, message=An error occurred, status=403}]
2025-05-02 11:18:15.114 DEBUG 22360 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 403
2025-05-02 11:18:15.114 DEBUG 22360 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 11:18:20.971 DEBUG 22360 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/users/register/staff
2025-05-02 11:18:20.972 DEBUG 22360 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 11:18:20.973 ERROR 22360 --- [http-nio-8090-exec-10] com.hotel.util.JwtTokenProvider          : Expired JWT token
2025-05-02 11:18:20.974  WARN 22360 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : JWT Token 无效: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJkZGQiLCJyb2xlIjoiQ1VTVE9NRVIiLCJpYXQiOjE3NDU4MDkwNTEsImV4cCI6MTc0NTg5NTQ1MX0.N-zquTfLaEyTwq6t_L1EQLXcLQIv60oi9-uetVUG11rjdUZZDKWTO1Oqx2niFs8ZoS5fLsCkuIhTSzvodwXBoQ
2025-05-02 11:18:20.974 DEBUG 22360 --- [http-nio-8090-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 11:18:20.974 DEBUG 22360 --- [http-nio-8090-exec-10] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-02 11:18:20.975 DEBUG 22360 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Failed to authorize filter invocation [POST /api/users/register/staff] with attributes [authenticated]
2025-05-02 11:18:20.975 DEBUG 22360 --- [http-nio-8090-exec-10] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access
2025-05-02 11:18:20.975 DEBUG 22360 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 11:18:20.976 DEBUG 22360 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /error
2025-05-02 11:18:20.976 DEBUG 22360 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 11:18:20.976 DEBUG 22360 --- [http-nio-8090-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 11:18:20.976 DEBUG 22360 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /error
2025-05-02 11:18:20.977 DEBUG 22360 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for POST "/error", parameters={}
2025-05-02 11:18:20.978 DEBUG 22360 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CustomErrorController#handleError(HttpServletRequest, WebRequest)
2025-05-02 11:18:20.979 DEBUG 22360 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 11:18:20.979 DEBUG 22360 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=Forbidden, message=An error occurred, status=403}]
2025-05-02 11:18:20.981 DEBUG 22360 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 403
2025-05-02 11:18:20.981 DEBUG 22360 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 11:20:19.274  INFO 22360 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-02 11:20:19.274  INFO 22360 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-02 11:20:19.284  INFO 22360 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-02 11:20:26.018  INFO 14264 --- [main] com.hotel.HotelManagementApplication     : Starting HotelManagementApplication using Java 18.0.2 on LAPTOP-HeYIXianJun with PID 14264 (E:\桌面\javahotel\heqing99\target\classes started by 上善若水 in E:\桌面\javahotel\heqing99)
2025-05-02 11:20:26.018 DEBUG 14264 --- [main] com.hotel.HotelManagementApplication     : Running with Spring Boot v2.7.0, Spring v5.3.20
2025-05-02 11:20:26.018  INFO 14264 --- [main] com.hotel.HotelManagementApplication     : No active profile set, falling back to 1 default profile: "default"
2025-05-02 11:20:26.948  INFO 14264 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-02 11:20:27.142  INFO 14264 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 184 ms. Found 19 JPA repository interfaces.
2025-05-02 11:20:27.653  INFO 14264 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8090 (http)
2025-05-02 11:20:27.653  INFO 14264 --- [main] o.a.catalina.core.AprLifecycleListener   : Loaded Apache Tomcat Native library [1.2.30] using APR version [1.7.0].
2025-05-02 11:20:27.653  INFO 14264 --- [main] o.a.catalina.core.AprLifecycleListener   : APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true], UDS [true].
2025-05-02 11:20:27.653  INFO 14264 --- [main] o.a.catalina.core.AprLifecycleListener   : APR/OpenSSL configuration: useAprConnector [false], useOpenSSL [true]
2025-05-02 11:20:27.653  INFO 14264 --- [main] o.a.catalina.core.AprLifecycleListener   : OpenSSL successfully initialized [OpenSSL 1.1.1k  25 Mar 2021]
2025-05-02 11:20:27.663  INFO 14264 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-02 11:20:27.663  INFO 14264 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-05-02 11:20:27.794  INFO 14264 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-02 11:20:27.794  INFO 14264 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1730 ms
2025-05-02 11:20:27.955  INFO 14264 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-02 11:20:27.995  INFO 14264 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.9.Final
2025-05-02 11:20:28.106  INFO 14264 --- [main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2025-05-02 11:20:28.186  INFO 14264 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-02 11:20:28.427  INFO 14264 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-02 11:20:28.438  INFO 14264 --- [main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2025-05-02 11:20:29.410  INFO 14264 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-05-02 11:20:29.424  INFO 14264 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-02 11:20:29.823 DEBUG 14264 --- [main] c.hotel.config.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2025-05-02 11:20:29.823 DEBUG 14264 --- [main] o.springframework.web.filter.CorsFilter  : Filter 'corsFilter' configured for use
2025-05-02 11:20:30.588 DEBUG 14264 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.html']
2025-05-02 11:20:30.598 DEBUG 14264 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.js']
2025-05-02 11:20:30.598 DEBUG 14264 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.css']
2025-05-02 11:20:30.598 DEBUG 14264 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.ico']
2025-05-02 11:20:30.598 DEBUG 14264 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/assets/**']
2025-05-02 11:20:30.598 DEBUG 14264 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/']
2025-05-02 11:20:30.598 DEBUG 14264 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/about']
2025-05-02 11:20:30.598 DEBUG 14264 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/rooms']
2025-05-02 11:20:30.598 DEBUG 14264 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/room/**']
2025-05-02 11:20:30.598 DEBUG 14264 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/contact']
2025-05-02 11:20:30.598 DEBUG 14264 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/booking']
2025-05-02 11:20:30.598 DEBUG 14264 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/register']
2025-05-02 11:20:30.598 DEBUG 14264 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/login']
2025-05-02 11:20:30.598 DEBUG 14264 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/user/**']
2025-05-02 11:20:30.598 DEBUG 14264 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin']
2025-05-02 11:20:30.598 DEBUG 14264 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/login']
2025-05-02 11:20:30.598 DEBUG 14264 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/dashboard/**']
2025-05-02 11:20:30.598 DEBUG 14264 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/users/**']
2025-05-02 11:20:30.598 DEBUG 14264 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/staff/**']
2025-05-02 11:20:30.598 DEBUG 14264 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/reception/**']
2025-05-02 11:20:30.598 DEBUG 14264 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/cleaning/**']
2025-05-02 11:20:30.598 DEBUG 14264 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/login', POST]
2025-05-02 11:20:30.598 DEBUG 14264 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/login', GET]
2025-05-02 11:20:30.598 DEBUG 14264 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/auth/login', POST]
2025-05-02 11:20:30.598 DEBUG 14264 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/refresh-token', POST]
2025-05-02 11:20:30.598 DEBUG 14264 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/register', POST]
2025-05-02 11:20:30.598 DEBUG 14264 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/login', POST]
2025-05-02 11:20:30.598 DEBUG 14264 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/check-username', GET]
2025-05-02 11:20:30.598 DEBUG 14264 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/check-phone', GET]
2025-05-02 11:20:30.598 DEBUG 14264 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/invitation-codes/validate/**', GET]
2025-05-02 11:20:30.598 DEBUG 14264 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/register/staff', POST]
2025-05-02 11:20:30.598 DEBUG 14264 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for Ant [pattern='/api/users/profile', GET]
2025-05-02 11:20:30.598 DEBUG 14264 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for Ant [pattern='/api/users/{id}', PUT]
2025-05-02 11:20:30.598 DEBUG 14264 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for Ant [pattern='/api/users/{id}/password', PUT]
2025-05-02 11:20:30.598 DEBUG 14264 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasRole('ROLE_ADMIN')] for Ant [pattern='/api/admin/**']
2025-05-02 11:20:30.608 DEBUG 14264 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasRole('ROLE_ADMIN')] for Ant [pattern='/api/users/{id}', DELETE]
2025-05-02 11:20:30.608 DEBUG 14264 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/**', OPTIONS]
2025-05-02 11:20:30.608 DEBUG 14264 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for any request
2025-05-02 11:20:30.608  INFO 14264 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@49dacc93, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@dd025d9, org.springframework.security.web.context.SecurityContextPersistenceFilter@7bb888b7, org.springframework.security.web.header.HeaderWriterFilter@5643052d, org.springframework.web.filter.CorsFilter@7e2f16bd, org.springframework.security.web.authentication.logout.LogoutFilter@24ccc91b, com.hotel.config.JwtAuthenticationFilter@ec1b776, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@277dddcf, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@321c01c2, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3bea478e, org.springframework.security.web.session.SessionManagementFilter@63e81ac6, org.springframework.security.web.access.ExceptionTranslationFilter@2c989d82, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@3b235623]
2025-05-02 11:20:30.659  WARN 14264 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-02 11:20:30.779 DEBUG 14264 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-05-02 11:20:30.799  INFO 14264 --- [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [static/index.html]
2025-05-02 11:20:30.859 DEBUG 14264 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 163 mappings in 'requestMappingHandlerMapping'
2025-05-02 11:20:30.859 DEBUG 14264 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/admin, /admin/login, /admin/dashboard, /admin/users, /admin/staff, /admin/rooms, /admin/reception/bookings, /admin/reception/checkin, /admin/reception/visitors, /admin/cleaning/tasks, /admin/cleaning/records, /login] in 'viewControllerHandlerMapping'
2025-05-02 11:20:30.869 DEBUG 14264 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /assets/**, /*.js, /*.css, /favicon.ico, /index.html, /images/**, /assets/images/**] in 'resourceHandlerMapping'
2025-05-02 11:20:30.879 DEBUG 14264 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-05-02 11:20:31.008  INFO 14264 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8090 (http) with context path ''
2025-05-02 11:20:31.018  INFO 14264 --- [main] com.hotel.HotelManagementApplication     : Started HotelManagementApplication in 5.456 seconds (JVM running for 6.284)
2025-05-02 11:21:42.157  INFO 14264 --- [http-nio-8090-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-02 11:21:42.157  INFO 14264 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-02 11:21:42.167 DEBUG 14264 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-05-02 11:21:42.167 DEBUG 14264 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-05-02 11:21:42.167 DEBUG 14264 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-05-02 11:21:42.167 DEBUG 14264 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@6e8426aa
2025-05-02 11:21:42.167 DEBUG 14264 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@6a5a99d9
2025-05-02 11:21:42.167 DEBUG 14264 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-05-02 11:21:42.167  INFO 14264 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 10 ms
2025-05-02 11:21:42.177 DEBUG 14264 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/invitation-codes/validate/3T57HH9P
2025-05-02 11:21:42.177 DEBUG 14264 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 11:21:42.187 DEBUG 14264 --- [http-nio-8090-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 11:21:42.187 DEBUG 14264 --- [http-nio-8090-exec-1] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-02 11:21:42.199 DEBUG 14264 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/invitation-codes/validate/3T57HH9P] with attributes [permitAll]
2025-05-02 11:21:42.202 DEBUG 14264 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/invitation-codes/validate/3T57HH9P
2025-05-02 11:21:42.202 DEBUG 14264 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/invitation-codes/validate/3T57HH9P", parameters={}
2025-05-02 11:21:42.207 DEBUG 14264 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#validateCode(String)
2025-05-02 11:21:42.278 DEBUG 14264 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 11:21:42.278 DEBUG 14264 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{role=RECEPTIONIST}]
2025-05-02 11:21:42.297 DEBUG 14264 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 11:21:42.297 DEBUG 14264 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 11:21:57.919 DEBUG 14264 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/users/register/staff
2025-05-02 11:21:57.919 DEBUG 14264 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 11:21:57.984 ERROR 14264 --- [http-nio-8090-exec-2] com.hotel.util.JwtTokenProvider          : Expired JWT token
2025-05-02 11:21:57.984  WARN 14264 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : JWT Token 无效: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJkZGQiLCJyb2xlIjoiQ1VTVE9NRVIiLCJpYXQiOjE3NDU4MDkwNTEsImV4cCI6MTc0NTg5NTQ1MX0.N-zquTfLaEyTwq6t_L1EQLXcLQIv60oi9-uetVUG11rjdUZZDKWTO1Oqx2niFs8ZoS5fLsCkuIhTSzvodwXBoQ
2025-05-02 11:21:57.984 DEBUG 14264 --- [http-nio-8090-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 11:21:57.984 DEBUG 14264 --- [http-nio-8090-exec-2] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-02 11:21:57.984 DEBUG 14264 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/register/staff] with attributes [permitAll]
2025-05-02 11:21:57.984 DEBUG 14264 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/users/register/staff
2025-05-02 11:21:57.984 DEBUG 14264 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : POST "/api/users/register/staff", parameters={}
2025-05-02 11:21:57.984 DEBUG 14264 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#registerStaff(StaffRegistrationDto)
2025-05-02 11:21:58.032 DEBUG 14264 --- [http-nio-8090-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [StaffRegistrationDto(username=18999177256, phone=18999177256, password=18999177256, email=1899917725 (truncated)...]
2025-05-02 11:21:58.243 DEBUG 14264 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 11:21:58.243 DEBUG 14264 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=员工注册成功，请等待审核, data=UserDTO(id=16, username=18999177256,  (truncated)...]
2025-05-02 11:21:58.253 DEBUG 14264 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-05-02 11:21:58.253 DEBUG 14264 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 11:22:04.568 DEBUG 14264 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-02 11:22:04.569 DEBUG 14264 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 11:22:04.571 ERROR 14264 --- [http-nio-8090-exec-3] com.hotel.util.JwtTokenProvider          : Expired JWT token
2025-05-02 11:22:04.571  WARN 14264 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : JWT Token 无效: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJkZGQiLCJyb2xlIjoiQ1VTVE9NRVIiLCJpYXQiOjE3NDU4MDkwNTEsImV4cCI6MTc0NTg5NTQ1MX0.N-zquTfLaEyTwq6t_L1EQLXcLQIv60oi9-uetVUG11rjdUZZDKWTO1Oqx2niFs8ZoS5fLsCkuIhTSzvodwXBoQ
2025-05-02 11:22:04.571 DEBUG 14264 --- [http-nio-8090-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 11:22:04.571 DEBUG 14264 --- [http-nio-8090-exec-3] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-02 11:22:04.572 DEBUG 14264 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-02 11:22:04.572 DEBUG 14264 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-02 11:22:04.572 DEBUG 14264 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-02 11:22:04.573 DEBUG 14264 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-02 11:22:04.575 DEBUG 14264 --- [http-nio-8090-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=18999177256, password=18999177256)]
2025-05-02 11:22:04.713 DEBUG 14264 --- [http-nio-8090-exec-3] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-02 11:22:04.733 DEBUG 14264 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 11:22:04.733 DEBUG 14264 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=16, username=18999177256, role=RECEPTIONIST, token= (truncated)...]
2025-05-02 11:22:04.733 DEBUG 14264 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 11:22:04.733 DEBUG 14264 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 11:22:10.573 DEBUG 14264 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-02 11:22:10.574 DEBUG 14264 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 11:22:10.576 ERROR 14264 --- [http-nio-8090-exec-4] com.hotel.util.JwtTokenProvider          : Expired JWT token
2025-05-02 11:22:10.576  WARN 14264 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : JWT Token 无效: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJkZGQiLCJyb2xlIjoiQ1VTVE9NRVIiLCJpYXQiOjE3NDU4MDkwNTEsImV4cCI6MTc0NTg5NTQ1MX0.N-zquTfLaEyTwq6t_L1EQLXcLQIv60oi9-uetVUG11rjdUZZDKWTO1Oqx2niFs8ZoS5fLsCkuIhTSzvodwXBoQ
2025-05-02 11:22:10.577 DEBUG 14264 --- [http-nio-8090-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 11:22:10.578 DEBUG 14264 --- [http-nio-8090-exec-4] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-02 11:22:10.578 DEBUG 14264 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-02 11:22:10.578 DEBUG 14264 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-02 11:22:10.579 DEBUG 14264 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-02 11:22:10.579 DEBUG 14264 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-02 11:22:10.580 DEBUG 14264 --- [http-nio-8090-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=18999177256, password=18999177256)]
2025-05-02 11:22:10.653 DEBUG 14264 --- [http-nio-8090-exec-4] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-02 11:22:10.660 DEBUG 14264 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 11:22:10.660 DEBUG 14264 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=16, username=18999177256, role=RECEPTIONIST, token= (truncated)...]
2025-05-02 11:22:10.660 DEBUG 14264 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 11:22:10.660 DEBUG 14264 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 11:22:19.973 DEBUG 14264 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-02 11:22:19.973 DEBUG 14264 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 11:22:19.973 ERROR 14264 --- [http-nio-8090-exec-5] com.hotel.util.JwtTokenProvider          : Expired JWT token
2025-05-02 11:22:19.973  WARN 14264 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : JWT Token 无效: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJkZGQiLCJyb2xlIjoiQ1VTVE9NRVIiLCJpYXQiOjE3NDU4MDkwNTEsImV4cCI6MTc0NTg5NTQ1MX0.N-zquTfLaEyTwq6t_L1EQLXcLQIv60oi9-uetVUG11rjdUZZDKWTO1Oqx2niFs8ZoS5fLsCkuIhTSzvodwXBoQ
2025-05-02 11:22:19.978 DEBUG 14264 --- [http-nio-8090-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 11:22:19.979 DEBUG 14264 --- [http-nio-8090-exec-5] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-02 11:22:19.979 DEBUG 14264 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-02 11:22:19.979 DEBUG 14264 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-02 11:22:19.979 DEBUG 14264 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-02 11:22:19.979 DEBUG 14264 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-02 11:22:19.979 DEBUG 14264 --- [http-nio-8090-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=18999177256, password=18999177256)]
2025-05-02 11:22:20.048 DEBUG 14264 --- [http-nio-8090-exec-5] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-02 11:22:20.048 DEBUG 14264 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 11:22:20.048 DEBUG 14264 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=16, username=18999177256, role=RECEPTIONIST, token= (truncated)...]
2025-05-02 11:22:20.048 DEBUG 14264 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 11:22:20.055 DEBUG 14264 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 11:25:52.192 DEBUG 14264 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-02 11:25:52.193 DEBUG 14264 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 11:25:52.195 ERROR 14264 --- [http-nio-8090-exec-6] com.hotel.util.JwtTokenProvider          : Expired JWT token
2025-05-02 11:25:52.195  WARN 14264 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : JWT Token 无效: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJkZGQiLCJyb2xlIjoiQ1VTVE9NRVIiLCJpYXQiOjE3NDU4MDkwNTEsImV4cCI6MTc0NTg5NTQ1MX0.N-zquTfLaEyTwq6t_L1EQLXcLQIv60oi9-uetVUG11rjdUZZDKWTO1Oqx2niFs8ZoS5fLsCkuIhTSzvodwXBoQ
2025-05-02 11:25:52.196 DEBUG 14264 --- [http-nio-8090-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 11:25:52.196 DEBUG 14264 --- [http-nio-8090-exec-6] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-02 11:25:52.196 DEBUG 14264 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-02 11:25:52.196 DEBUG 14264 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-02 11:25:52.196 DEBUG 14264 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-02 11:25:52.196 DEBUG 14264 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-02 11:25:52.197 DEBUG 14264 --- [http-nio-8090-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=18999177256, password=18999177256)]
2025-05-02 11:25:52.265 DEBUG 14264 --- [http-nio-8090-exec-6] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-02 11:25:52.265 DEBUG 14264 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 11:25:52.271 DEBUG 14264 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=16, username=18999177256, role=RECEPTIONIST, token= (truncated)...]
2025-05-02 11:25:52.272 DEBUG 14264 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 11:25:52.272 DEBUG 14264 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 11:25:53.609 DEBUG 14264 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-02 11:25:53.610 DEBUG 14264 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 11:25:53.611 ERROR 14264 --- [http-nio-8090-exec-7] com.hotel.util.JwtTokenProvider          : Expired JWT token
2025-05-02 11:25:53.611  WARN 14264 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : JWT Token 无效: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJkZGQiLCJyb2xlIjoiQ1VTVE9NRVIiLCJpYXQiOjE3NDU4MDkwNTEsImV4cCI6MTc0NTg5NTQ1MX0.N-zquTfLaEyTwq6t_L1EQLXcLQIv60oi9-uetVUG11rjdUZZDKWTO1Oqx2niFs8ZoS5fLsCkuIhTSzvodwXBoQ
2025-05-02 11:25:53.612 DEBUG 14264 --- [http-nio-8090-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 11:25:53.613 DEBUG 14264 --- [http-nio-8090-exec-7] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-02 11:25:53.613 DEBUG 14264 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-02 11:25:53.613 DEBUG 14264 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-02 11:25:53.613 DEBUG 14264 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-02 11:25:53.613 DEBUG 14264 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-02 11:25:53.613 DEBUG 14264 --- [http-nio-8090-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=18999177256, password=18999177256)]
2025-05-02 11:25:53.689 DEBUG 14264 --- [http-nio-8090-exec-7] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-02 11:25:53.689 DEBUG 14264 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 11:25:53.689 DEBUG 14264 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=16, username=18999177256, role=RECEPTIONIST, token= (truncated)...]
2025-05-02 11:25:53.689 DEBUG 14264 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 11:25:53.695 DEBUG 14264 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 11:25:55.041 DEBUG 14264 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-02 11:25:55.042 DEBUG 14264 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 11:25:55.043 ERROR 14264 --- [http-nio-8090-exec-8] com.hotel.util.JwtTokenProvider          : Expired JWT token
2025-05-02 11:25:55.043  WARN 14264 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : JWT Token 无效: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJkZGQiLCJyb2xlIjoiQ1VTVE9NRVIiLCJpYXQiOjE3NDU4MDkwNTEsImV4cCI6MTc0NTg5NTQ1MX0.N-zquTfLaEyTwq6t_L1EQLXcLQIv60oi9-uetVUG11rjdUZZDKWTO1Oqx2niFs8ZoS5fLsCkuIhTSzvodwXBoQ
2025-05-02 11:25:55.044 DEBUG 14264 --- [http-nio-8090-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 11:25:55.044 DEBUG 14264 --- [http-nio-8090-exec-8] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-02 11:25:55.045 DEBUG 14264 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-02 11:25:55.045 DEBUG 14264 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-02 11:25:55.045 DEBUG 14264 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-02 11:25:55.045 DEBUG 14264 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-02 11:25:55.050 DEBUG 14264 --- [http-nio-8090-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=18999177256, password=18999177256)]
2025-05-02 11:25:55.119 DEBUG 14264 --- [http-nio-8090-exec-8] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-02 11:25:55.127 DEBUG 14264 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 11:25:55.127 DEBUG 14264 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=16, username=18999177256, role=RECEPTIONIST, token= (truncated)...]
2025-05-02 11:25:55.127 DEBUG 14264 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 11:25:55.127 DEBUG 14264 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 11:26:52.155 DEBUG 14264 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/invitation-codes
2025-05-02 11:26:52.155 DEBUG 14264 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 11:26:52.164 DEBUG 14264 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 11:26:52.165 DEBUG 14264 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/invitation-codes] with attributes [authenticated]
2025-05-02 11:26:52.166 DEBUG 14264 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/invitation-codes
2025-05-02 11:26:52.166 DEBUG 14264 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/invitation-codes", parameters={}
2025-05-02 11:26:52.166 DEBUG 14264 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#getValidInvitationCodes()
2025-05-02 11:26:52.177 DEBUG 14264 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 11:26:52.177 DEBUG 14264 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[InvitationCode(id=1, code=6YJP8NZ5, role=RECEPTIONIST, maxUses=1, currentUses=0, expiryDate=2025-05 (truncated)...]
2025-05-02 11:26:52.190 DEBUG 14264 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 11:26:52.190 DEBUG 14264 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 11:30:25.471 DEBUG 14264 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-02 11:30:25.471 DEBUG 14264 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 11:30:25.478 ERROR 14264 --- [http-nio-8090-exec-10] com.hotel.util.JwtTokenProvider          : Expired JWT token
2025-05-02 11:30:25.478  WARN 14264 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : JWT Token 无效: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJkZGQiLCJyb2xlIjoiQ1VTVE9NRVIiLCJpYXQiOjE3NDU4MDkwNTEsImV4cCI6MTc0NTg5NTQ1MX0.N-zquTfLaEyTwq6t_L1EQLXcLQIv60oi9-uetVUG11rjdUZZDKWTO1Oqx2niFs8ZoS5fLsCkuIhTSzvodwXBoQ
2025-05-02 11:30:25.478 DEBUG 14264 --- [http-nio-8090-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 11:30:25.478 DEBUG 14264 --- [http-nio-8090-exec-10] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-02 11:30:25.478 DEBUG 14264 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-02 11:30:25.478 DEBUG 14264 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-02 11:30:25.478 DEBUG 14264 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-02 11:30:25.478 DEBUG 14264 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-02 11:30:25.478 DEBUG 14264 --- [http-nio-8090-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=18999177256, password=18999177256)]
2025-05-02 11:30:25.548 DEBUG 14264 --- [http-nio-8090-exec-10] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-02 11:30:25.554 DEBUG 14264 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 11:30:25.554 DEBUG 14264 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=16, username=18999177256, role=RECEPTIONIST, token= (truncated)...]
2025-05-02 11:30:25.554 DEBUG 14264 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 11:30:25.554 DEBUG 14264 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 11:55:27.197 DEBUG 14264 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-02 11:55:27.197 DEBUG 14264 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 11:55:27.198 DEBUG 14264 --- [http-nio-8090-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 11:55:27.198 DEBUG 14264 --- [http-nio-8090-exec-1] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 5A29A4A47A25E456C4F538CE7FF0CCBF
2025-05-02 11:55:27.198 DEBUG 14264 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-02 11:55:27.199 DEBUG 14264 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-02 11:55:27.199 DEBUG 14264 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-02 11:55:27.199 DEBUG 14264 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-02 11:55:27.200 DEBUG 14264 --- [http-nio-8090-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=admin, password=admin123)]
2025-05-02 11:55:27.271 DEBUG 14264 --- [http-nio-8090-exec-1] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-02 11:55:27.277 DEBUG 14264 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 11:55:27.277 DEBUG 14264 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=1, username=admin, role=ADMIN, token=eyJhbGciOiJIUz (truncated)...]
2025-05-02 11:55:27.277 DEBUG 14264 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 11:55:27.278 DEBUG 14264 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 12:04:37.621 DEBUG 14264 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-02 12:04:37.622 DEBUG 14264 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 12:04:37.628 ERROR 14264 --- [http-nio-8090-exec-2] com.hotel.util.JwtTokenProvider          : Expired JWT token
2025-05-02 12:04:37.629  WARN 14264 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : JWT Token 无效: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJkZGQiLCJyb2xlIjoiQ1VTVE9NRVIiLCJpYXQiOjE3NDU4MDkwNTEsImV4cCI6MTc0NTg5NTQ1MX0.N-zquTfLaEyTwq6t_L1EQLXcLQIv60oi9-uetVUG11rjdUZZDKWTO1Oqx2niFs8ZoS5fLsCkuIhTSzvodwXBoQ
2025-05-02 12:04:37.629 DEBUG 14264 --- [http-nio-8090-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 12:04:37.630 DEBUG 14264 --- [http-nio-8090-exec-2] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-02 12:04:37.630 DEBUG 14264 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-02 12:04:37.630 DEBUG 14264 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-02 12:04:37.630 DEBUG 14264 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-02 12:04:37.631 DEBUG 14264 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-02 12:04:37.632 DEBUG 14264 --- [http-nio-8090-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=18999177256, password=18999177256)]
2025-05-02 12:04:37.700 DEBUG 14264 --- [http-nio-8090-exec-2] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-02 12:04:37.707 DEBUG 14264 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 12:04:37.707 DEBUG 14264 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=16, username=18999177256, role=RECEPTIONIST, token= (truncated)...]
2025-05-02 12:04:37.713 DEBUG 14264 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 12:04:37.714 DEBUG 14264 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 12:04:51.336 DEBUG 14264 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users?page=1&pageSize=10&username=&phone=&status=
2025-05-02 12:04:51.337 DEBUG 14264 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 12:04:51.341 DEBUG 14264 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 12:04:51.343 DEBUG 14264 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users?page=1&pageSize=10&username=&phone=&status=] with attributes [authenticated]
2025-05-02 12:04:51.343 DEBUG 14264 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users?page=1&pageSize=10&username=&phone=&status=
2025-05-02 12:04:51.345 DEBUG 14264 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users?page=1&pageSize=10&username=&phone=&status=", parameters={masked}
2025-05-02 12:04:51.346 DEBUG 14264 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getAllUsers(int, int, String, String, String, String)
2025-05-02 12:04:51.439 DEBUG 14264 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 12:04:51.439 DEBUG 14264 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data={total=16, users=[UserDTO(id=16, username=18999 (truncated)...]
2025-05-02 12:04:51.439 DEBUG 14264 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 12:04:51.449 DEBUG 14264 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 12:05:02.965 DEBUG 14264 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users?page=1&pageSize=10&username=&phone=&status=
2025-05-02 12:05:02.965 DEBUG 14264 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 12:05:02.971 DEBUG 14264 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 12:05:02.971 DEBUG 14264 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users?page=1&pageSize=10&username=&phone=&status=] with attributes [authenticated]
2025-05-02 12:05:02.972 DEBUG 14264 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users?page=1&pageSize=10&username=&phone=&status=
2025-05-02 12:05:02.972 DEBUG 14264 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users?page=1&pageSize=10&username=&phone=&status=", parameters={masked}
2025-05-02 12:05:02.973 DEBUG 14264 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getAllUsers(int, int, String, String, String, String)
2025-05-02 12:05:02.987 DEBUG 14264 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 12:05:02.987 DEBUG 14264 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data={total=16, users=[UserDTO(id=16, username=18999 (truncated)...]
2025-05-02 12:05:02.989 DEBUG 14264 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 12:05:02.990 DEBUG 14264 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 12:05:03.501 DEBUG 14264 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/staff?page=0&pageSize=10
2025-05-02 12:05:03.501 DEBUG 14264 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 12:05:03.504 DEBUG 14264 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 12:05:03.505 DEBUG 14264 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users/staff?page=0&pageSize=10] with attributes [authenticated]
2025-05-02 12:05:03.505 DEBUG 14264 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/staff?page=0&pageSize=10
2025-05-02 12:05:03.506 DEBUG 14264 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/staff?page=0&pageSize=10", parameters={masked}
2025-05-02 12:05:03.506 DEBUG 14264 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getAllStaffPaginated(int, int, String, String, String)
2025-05-02 12:05:03.532 DEBUG 14264 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 12:05:03.532 DEBUG 14264 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data={total=4, users=[UserDTO(id=16, username=189991 (truncated)...]
2025-05-02 12:05:03.534 DEBUG 14264 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 12:05:03.535 DEBUG 14264 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 12:05:04.018 DEBUG 14264 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/rooms
2025-05-02 12:05:04.018 DEBUG 14264 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 12:05:04.022 DEBUG 14264 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 12:05:04.034 DEBUG 14264 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/rooms] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 12:05:04.034 DEBUG 14264 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/rooms
2025-05-02 12:05:04.034 DEBUG 14264 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/rooms", parameters={}
2025-05-02 12:05:04.035 DEBUG 14264 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminRoomController#getAllRooms(RoomFilterDTO)
2025-05-02 12:05:04.122 DEBUG 14264 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 12:05:04.122 DEBUG 14264 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data={total=1, list=[{roomNumber=501, lastCleanTime=2025-05-01T15:04:43, notes=, needClea (truncated)...]
2025-05-02 12:05:04.124 DEBUG 14264 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 12:05:04.124 DEBUG 14264 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 12:05:04.151 DEBUG 14264 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/roomtypes
2025-05-02 12:05:04.151 DEBUG 14264 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 12:05:04.159 DEBUG 14264 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 12:05:04.160 DEBUG 14264 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/roomtypes] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 12:05:04.160 DEBUG 14264 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/roomtypes
2025-05-02 12:05:04.160 DEBUG 14264 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/roomtypes", parameters={}
2025-05-02 12:05:04.161 DEBUG 14264 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getAllRoomTypes()
2025-05-02 12:05:04.173 DEBUG 14264 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 12:05:04.174 DEBUG 14264 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{amenities=无限量杜蕾斯、矿泉水、咖啡、茶叶等, name=行政套房, description=高端奢华行政房, id=1, basePrice=899.0 (truncated)...]
2025-05-02 12:05:04.175 DEBUG 14264 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 12:05:04.176 DEBUG 14264 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 12:05:04.490 DEBUG 14264 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/invitation-codes
2025-05-02 12:05:04.490 DEBUG 14264 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 12:05:04.494 DEBUG 14264 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 12:05:04.495 DEBUG 14264 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/invitation-codes] with attributes [authenticated]
2025-05-02 12:05:04.495 DEBUG 14264 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/invitation-codes
2025-05-02 12:05:04.496 DEBUG 14264 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/invitation-codes", parameters={}
2025-05-02 12:05:04.496 DEBUG 14264 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#getValidInvitationCodes()
2025-05-02 12:05:04.504 DEBUG 14264 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 12:05:04.504 DEBUG 14264 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[InvitationCode(id=1, code=6YJP8NZ5, role=RECEPTIONIST, maxUses=1, currentUses=0, expiryDate=2025-05 (truncated)...]
2025-05-02 12:05:04.506 DEBUG 14264 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 12:05:04.506 DEBUG 14264 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 12:08:35.455  INFO 14264 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-02 12:08:35.465  INFO 14264 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-02 12:08:35.485  INFO 14264 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-02 12:08:45.818  INFO 21900 --- [main] com.hotel.HotelManagementApplication     : Starting HotelManagementApplication using Java 18.0.2 on LAPTOP-HeYIXianJun with PID 21900 (E:\桌面\javahotel\heqing99\target\classes started by 上善若水 in E:\桌面\javahotel\heqing99)
2025-05-02 12:08:45.822 DEBUG 21900 --- [main] com.hotel.HotelManagementApplication     : Running with Spring Boot v2.7.0, Spring v5.3.20
2025-05-02 12:08:45.823  INFO 21900 --- [main] com.hotel.HotelManagementApplication     : No active profile set, falling back to 1 default profile: "default"
2025-05-02 12:08:46.787  INFO 21900 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-02 12:08:46.998  INFO 21900 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 193 ms. Found 19 JPA repository interfaces.
2025-05-02 12:08:47.562  INFO 21900 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8090 (http)
2025-05-02 12:08:47.562  INFO 21900 --- [main] o.a.catalina.core.AprLifecycleListener   : Loaded Apache Tomcat Native library [1.2.30] using APR version [1.7.0].
2025-05-02 12:08:47.562  INFO 21900 --- [main] o.a.catalina.core.AprLifecycleListener   : APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true], UDS [true].
2025-05-02 12:08:47.562  INFO 21900 --- [main] o.a.catalina.core.AprLifecycleListener   : APR/OpenSSL configuration: useAprConnector [false], useOpenSSL [true]
2025-05-02 12:08:47.622  INFO 21900 --- [main] o.a.catalina.core.AprLifecycleListener   : OpenSSL successfully initialized [OpenSSL 1.1.1k  25 Mar 2021]
2025-05-02 12:08:47.639  INFO 21900 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-02 12:08:47.639  INFO 21900 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-05-02 12:08:47.784  INFO 21900 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-02 12:08:47.785  INFO 21900 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1916 ms
2025-05-02 12:08:47.955  INFO 21900 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-02 12:08:48.015  INFO 21900 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.9.Final
2025-05-02 12:08:48.175  INFO 21900 --- [main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2025-05-02 12:08:48.294  INFO 21900 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-02 12:08:48.646  INFO 21900 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-02 12:08:48.666  INFO 21900 --- [main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2025-05-02 12:08:49.875  INFO 21900 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-05-02 12:08:49.885  INFO 21900 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-02 12:08:50.326 DEBUG 21900 --- [main] c.hotel.config.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2025-05-02 12:08:50.326 DEBUG 21900 --- [main] o.springframework.web.filter.CorsFilter  : Filter 'corsFilter' configured for use
2025-05-02 12:08:51.105 DEBUG 21900 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.html']
2025-05-02 12:08:51.105 DEBUG 21900 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.js']
2025-05-02 12:08:51.105 DEBUG 21900 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.css']
2025-05-02 12:08:51.105 DEBUG 21900 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.ico']
2025-05-02 12:08:51.105 DEBUG 21900 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/assets/**']
2025-05-02 12:08:51.105 DEBUG 21900 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/']
2025-05-02 12:08:51.105 DEBUG 21900 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/about']
2025-05-02 12:08:51.105 DEBUG 21900 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/rooms']
2025-05-02 12:08:51.115 DEBUG 21900 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/room/**']
2025-05-02 12:08:51.115 DEBUG 21900 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/contact']
2025-05-02 12:08:51.115 DEBUG 21900 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/booking']
2025-05-02 12:08:51.115 DEBUG 21900 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/register']
2025-05-02 12:08:51.115 DEBUG 21900 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/login']
2025-05-02 12:08:51.115 DEBUG 21900 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/user/**']
2025-05-02 12:08:51.115 DEBUG 21900 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin']
2025-05-02 12:08:51.115 DEBUG 21900 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/login']
2025-05-02 12:08:51.115 DEBUG 21900 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/dashboard/**']
2025-05-02 12:08:51.115 DEBUG 21900 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/users/**']
2025-05-02 12:08:51.115 DEBUG 21900 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/staff/**']
2025-05-02 12:08:51.115 DEBUG 21900 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/reception/**']
2025-05-02 12:08:51.115 DEBUG 21900 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/cleaning/**']
2025-05-02 12:08:51.115 DEBUG 21900 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/login', POST]
2025-05-02 12:08:51.115 DEBUG 21900 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/login', GET]
2025-05-02 12:08:51.115 DEBUG 21900 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/auth/login', POST]
2025-05-02 12:08:51.115 DEBUG 21900 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/refresh-token', POST]
2025-05-02 12:08:51.115 DEBUG 21900 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/register', POST]
2025-05-02 12:08:51.115 DEBUG 21900 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/login', POST]
2025-05-02 12:08:51.115 DEBUG 21900 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/check-username', GET]
2025-05-02 12:08:51.115 DEBUG 21900 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/check-phone', GET]
2025-05-02 12:08:51.115 DEBUG 21900 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/invitation-codes/validate/**', GET]
2025-05-02 12:08:51.115 DEBUG 21900 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/register/staff', POST]
2025-05-02 12:08:51.115 DEBUG 21900 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for Ant [pattern='/api/users/profile', GET]
2025-05-02 12:08:51.115 DEBUG 21900 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for Ant [pattern='/api/users/{id}', PUT]
2025-05-02 12:08:51.115 DEBUG 21900 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for Ant [pattern='/api/users/{id}/password', PUT]
2025-05-02 12:08:51.115 DEBUG 21900 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasRole('ROLE_ADMIN')] for Ant [pattern='/api/admin/**']
2025-05-02 12:08:51.115 DEBUG 21900 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasRole('ROLE_ADMIN')] for Ant [pattern='/api/users/{id}', DELETE]
2025-05-02 12:08:51.115 DEBUG 21900 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/**', OPTIONS]
2025-05-02 12:08:51.115 DEBUG 21900 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for any request
2025-05-02 12:08:51.125  INFO 21900 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2e845f1c, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1e9afe4e, org.springframework.security.web.context.SecurityContextPersistenceFilter@3507200d, org.springframework.security.web.header.HeaderWriterFilter@7894a250, org.springframework.web.filter.CorsFilter@594fcb22, org.springframework.security.web.authentication.logout.LogoutFilter@40304938, com.hotel.config.JwtAuthenticationFilter@2e3b4394, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7c4de811, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@443b9ebb, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1f67d37f, org.springframework.security.web.session.SessionManagementFilter@5f14eb51, org.springframework.security.web.access.ExceptionTranslationFilter@6195ce27, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@190cc39e]
2025-05-02 12:08:51.165  WARN 21900 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-02 12:08:51.285 DEBUG 21900 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-05-02 12:08:51.315  INFO 21900 --- [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [static/index.html]
2025-05-02 12:08:51.375 DEBUG 21900 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 163 mappings in 'requestMappingHandlerMapping'
2025-05-02 12:08:51.375 DEBUG 21900 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/admin, /admin/login, /admin/dashboard, /admin/users, /admin/staff, /admin/rooms, /admin/reception/bookings, /admin/reception/checkin, /admin/reception/visitors, /admin/cleaning/tasks, /admin/cleaning/records, /login] in 'viewControllerHandlerMapping'
2025-05-02 12:08:51.395 DEBUG 21900 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /assets/**, /*.js, /*.css, /favicon.ico, /index.html, /images/**, /assets/images/**] in 'resourceHandlerMapping'
2025-05-02 12:08:51.405 DEBUG 21900 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-05-02 12:08:51.540  INFO 21900 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8090 (http) with context path ''
2025-05-02 12:08:51.545  INFO 21900 --- [main] com.hotel.HotelManagementApplication     : Started HotelManagementApplication in 6.263 seconds (JVM running for 7.242)
2025-05-02 12:08:57.205  INFO 21900 --- [http-nio-8090-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-02 12:08:57.205  INFO 21900 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-02 12:08:57.205 DEBUG 21900 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-05-02 12:08:57.205 DEBUG 21900 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-05-02 12:08:57.205 DEBUG 21900 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-05-02 12:08:57.205 DEBUG 21900 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@492e9e87
2025-05-02 12:08:57.205 DEBUG 21900 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@68a7bc12
2025-05-02 12:08:57.205 DEBUG 21900 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-05-02 12:08:57.205  INFO 21900 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2025-05-02 12:08:57.225 DEBUG 21900 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users?page=1&pageSize=10&username=&phone=&status=
2025-05-02 12:08:57.225 DEBUG 21900 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 12:08:57.302 DEBUG 21900 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 12:08:57.312 DEBUG 21900 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users?page=1&pageSize=10&username=&phone=&status=] with attributes [authenticated]
2025-05-02 12:08:57.312 DEBUG 21900 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users?page=1&pageSize=10&username=&phone=&status=
2025-05-02 12:08:57.312 DEBUG 21900 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users?page=1&pageSize=10&username=&phone=&status=", parameters={masked}
2025-05-02 12:08:57.312 DEBUG 21900 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getAllUsers(int, int, String, String, String, String)
2025-05-02 12:08:57.432 DEBUG 21900 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 12:08:57.438 DEBUG 21900 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data={total=16, users=[UserDTO(id=16, username=18999 (truncated)...]
2025-05-02 12:08:57.468 DEBUG 21900 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 12:08:57.470 DEBUG 21900 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 12:12:20.789 DEBUG 21900 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/rooms
2025-05-02 12:12:20.790 DEBUG 21900 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 12:12:20.790 DEBUG 21900 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 12:12:20.802 DEBUG 21900 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/rooms] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 12:12:20.803 DEBUG 21900 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/rooms
2025-05-02 12:12:20.803 DEBUG 21900 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/rooms", parameters={}
2025-05-02 12:12:20.804 DEBUG 21900 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminRoomController#getAllRooms(RoomFilterDTO)
2025-05-02 12:12:20.852 DEBUG 21900 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 12:12:20.852 DEBUG 21900 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data={total=1, list=[{roomNumber=501, lastCleanTime=2025-05-01T15:04:43, notes=, needClea (truncated)...]
2025-05-02 12:12:20.855 DEBUG 21900 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 12:12:20.855 DEBUG 21900 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 12:12:21.058 DEBUG 21900 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/roomtypes
2025-05-02 12:12:21.058 DEBUG 21900 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 12:12:21.063 DEBUG 21900 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 12:12:21.063 DEBUG 21900 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/roomtypes] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 12:12:21.063 DEBUG 21900 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/roomtypes
2025-05-02 12:12:21.063 DEBUG 21900 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/roomtypes", parameters={}
2025-05-02 12:12:21.063 DEBUG 21900 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getAllRoomTypes()
2025-05-02 12:12:21.071 DEBUG 21900 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 12:12:21.071 DEBUG 21900 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{amenities=无限量杜蕾斯、矿泉水、咖啡、茶叶等, name=行政套房, description=高端奢华行政房, id=1, basePrice=899.0 (truncated)...]
2025-05-02 12:12:21.072 DEBUG 21900 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 12:12:21.073 DEBUG 21900 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 12:13:21.838 DEBUG 21900 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/invitation-codes
2025-05-02 12:13:21.838 DEBUG 21900 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 12:13:21.848 DEBUG 21900 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 12:13:21.848 DEBUG 21900 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/invitation-codes] with attributes [authenticated]
2025-05-02 12:13:21.848 DEBUG 21900 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/invitation-codes
2025-05-02 12:13:21.848 DEBUG 21900 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/invitation-codes", parameters={}
2025-05-02 12:13:21.848 DEBUG 21900 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#getValidInvitationCodes()
2025-05-02 12:13:21.876 DEBUG 21900 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 12:13:21.876 DEBUG 21900 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[InvitationCode(id=1, code=6YJP8NZ5, role=RECEPTIONIST, maxUses=1, currentUses=0, expiryDate=2025-05 (truncated)...]
2025-05-02 12:13:21.886 DEBUG 21900 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 12:13:21.886 DEBUG 21900 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 12:13:33.504 DEBUG 21900 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users?page=1&pageSize=10&username=&phone=&status=
2025-05-02 12:13:33.504 DEBUG 21900 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 12:13:33.504 DEBUG 21900 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 12:13:33.512 DEBUG 21900 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users?page=1&pageSize=10&username=&phone=&status=] with attributes [authenticated]
2025-05-02 12:13:33.512 DEBUG 21900 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users?page=1&pageSize=10&username=&phone=&status=
2025-05-02 12:13:33.512 DEBUG 21900 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users?page=1&pageSize=10&username=&phone=&status=", parameters={masked}
2025-05-02 12:13:33.512 DEBUG 21900 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getAllUsers(int, int, String, String, String, String)
2025-05-02 12:13:33.525 DEBUG 21900 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 12:13:33.525 DEBUG 21900 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data={total=16, users=[UserDTO(id=16, username=18999 (truncated)...]
2025-05-02 12:13:33.532 DEBUG 21900 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 12:13:33.532 DEBUG 21900 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 12:13:36.262 DEBUG 21900 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/staff?page=0&pageSize=10
2025-05-02 12:13:36.262 DEBUG 21900 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 12:13:36.268 DEBUG 21900 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 12:13:36.268 DEBUG 21900 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users/staff?page=0&pageSize=10] with attributes [authenticated]
2025-05-02 12:13:36.268 DEBUG 21900 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/staff?page=0&pageSize=10
2025-05-02 12:13:36.268 DEBUG 21900 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/staff?page=0&pageSize=10", parameters={masked}
2025-05-02 12:13:36.268 DEBUG 21900 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getAllStaffPaginated(int, int, String, String, String)
2025-05-02 12:13:36.289 DEBUG 21900 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 12:13:36.289 DEBUG 21900 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data={total=4, users=[UserDTO(id=16, username=189991 (truncated)...]
2025-05-02 12:13:36.289 DEBUG 21900 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 12:13:36.289 DEBUG 21900 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:18:32.463 DEBUG 21900 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/statistics
2025-05-02 15:18:32.464 DEBUG 21900 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:18:32.471 DEBUG 21900 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:18:32.471 DEBUG 21900 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/statistics] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 15:18:32.471 DEBUG 21900 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/statistics
2025-05-02 15:18:32.472 DEBUG 21900 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/statistics", parameters={}
2025-05-02 15:18:32.476 DEBUG 21900 --- [http-nio-8090-exec-10] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-05-02 15:18:32.478 DEBUG 21900 --- [http-nio-8090-exec-10] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2025-05-02 15:18:32.478 DEBUG 21900 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND
2025-05-02 15:18:32.478 DEBUG 21900 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:18:32.478 DEBUG 21900 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /index.html
2025-05-02 15:18:32.478 DEBUG 21900 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:18:32.478 DEBUG 21900 --- [http-nio-8090-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 15:18:32.478 DEBUG 21900 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /index.html
2025-05-02 15:18:32.483 DEBUG 21900 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/index.html", parameters={}
2025-05-02 15:18:32.483 DEBUG 21900 --- [http-nio-8090-exec-10] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [static/]]
2025-05-02 15:18:32.488 DEBUG 21900 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 404
2025-05-02 15:18:32.488 DEBUG 21900 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:20:25.697 DEBUG 21900 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-02 15:20:25.697 DEBUG 21900 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:20:25.709 ERROR 21900 --- [http-nio-8090-exec-4] com.hotel.util.JwtTokenProvider          : Expired JWT token
2025-05-02 15:20:25.710  WARN 21900 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : JWT Token 无效: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJkZGQiLCJyb2xlIjoiQ1VTVE9NRVIiLCJpYXQiOjE3NDU4MDkwNTEsImV4cCI6MTc0NTg5NTQ1MX0.N-zquTfLaEyTwq6t_L1EQLXcLQIv60oi9-uetVUG11rjdUZZDKWTO1Oqx2niFs8ZoS5fLsCkuIhTSzvodwXBoQ
2025-05-02 15:20:25.711 DEBUG 21900 --- [http-nio-8090-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 15:20:25.711 DEBUG 21900 --- [http-nio-8090-exec-4] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-02 15:20:25.711 DEBUG 21900 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-02 15:20:25.711 DEBUG 21900 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-02 15:20:25.711 DEBUG 21900 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-02 15:20:25.711 DEBUG 21900 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-02 15:20:25.738 DEBUG 21900 --- [http-nio-8090-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=18999177256, password=18999177256)]
2025-05-02 15:20:25.878 DEBUG 21900 --- [http-nio-8090-exec-4] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-02 15:20:25.893 DEBUG 21900 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:20:25.893 DEBUG 21900 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=16, username=18999177256, role=RECEPTIONIST, token= (truncated)...]
2025-05-02 15:20:25.893 DEBUG 21900 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:20:25.893 DEBUG 21900 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:20:33.163 DEBUG 21900 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/statistics
2025-05-02 15:20:33.163 DEBUG 21900 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:20:33.174 DEBUG 21900 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:20:33.174 DEBUG 21900 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/statistics] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 15:20:33.174 DEBUG 21900 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/statistics
2025-05-02 15:20:33.174 DEBUG 21900 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/statistics", parameters={}
2025-05-02 15:20:33.174 DEBUG 21900 --- [http-nio-8090-exec-5] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-05-02 15:20:33.184 DEBUG 21900 --- [http-nio-8090-exec-5] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2025-05-02 15:20:33.184 DEBUG 21900 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND
2025-05-02 15:20:33.184 DEBUG 21900 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:20:33.184 DEBUG 21900 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /index.html
2025-05-02 15:20:33.184 DEBUG 21900 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:20:33.184 DEBUG 21900 --- [http-nio-8090-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 15:20:33.184 DEBUG 21900 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /index.html
2025-05-02 15:20:33.184 DEBUG 21900 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/index.html", parameters={}
2025-05-02 15:20:33.184 DEBUG 21900 --- [http-nio-8090-exec-5] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [static/]]
2025-05-02 15:20:33.194 DEBUG 21900 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 404
2025-05-02 15:20:33.194 DEBUG 21900 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:20:36.509  INFO 21900 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-02 15:20:36.509  INFO 21900 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-02 15:20:36.519  INFO 21900 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-02 15:20:40.787  INFO 15588 --- [main] com.hotel.HotelManagementApplication     : Starting HotelManagementApplication using Java 18.0.2 on LAPTOP-HeYIXianJun with PID 15588 (E:\桌面\javahotel\heqing99\target\classes started by 上善若水 in E:\桌面\javahotel\heqing99)
2025-05-02 15:20:40.793 DEBUG 15588 --- [main] com.hotel.HotelManagementApplication     : Running with Spring Boot v2.7.0, Spring v5.3.20
2025-05-02 15:20:40.793  INFO 15588 --- [main] com.hotel.HotelManagementApplication     : No active profile set, falling back to 1 default profile: "default"
2025-05-02 15:20:41.574  INFO 15588 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-02 15:20:41.784  INFO 15588 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 199 ms. Found 19 JPA repository interfaces.
2025-05-02 15:20:42.275  INFO 15588 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8090 (http)
2025-05-02 15:20:42.275  INFO 15588 --- [main] o.a.catalina.core.AprLifecycleListener   : Loaded Apache Tomcat Native library [1.2.30] using APR version [1.7.0].
2025-05-02 15:20:42.275  INFO 15588 --- [main] o.a.catalina.core.AprLifecycleListener   : APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true], UDS [true].
2025-05-02 15:20:42.275  INFO 15588 --- [main] o.a.catalina.core.AprLifecycleListener   : APR/OpenSSL configuration: useAprConnector [false], useOpenSSL [true]
2025-05-02 15:20:42.286  INFO 15588 --- [main] o.a.catalina.core.AprLifecycleListener   : OpenSSL successfully initialized [OpenSSL 1.1.1k  25 Mar 2021]
2025-05-02 15:20:42.286  INFO 15588 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-02 15:20:42.286  INFO 15588 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-05-02 15:20:42.446  INFO 15588 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-02 15:20:42.446  INFO 15588 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1605 ms
2025-05-02 15:20:42.595  INFO 15588 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-02 15:20:42.665  INFO 15588 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.9.Final
2025-05-02 15:20:42.857  INFO 15588 --- [main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2025-05-02 15:20:42.965  INFO 15588 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-02 15:20:43.295  INFO 15588 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-02 15:20:43.308  INFO 15588 --- [main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2025-05-02 15:20:44.339  INFO 15588 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-05-02 15:20:44.349  INFO 15588 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-02 15:20:44.751 DEBUG 15588 --- [main] c.hotel.config.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2025-05-02 15:20:44.751 DEBUG 15588 --- [main] o.springframework.web.filter.CorsFilter  : Filter 'corsFilter' configured for use
2025-05-02 15:20:45.504 DEBUG 15588 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.html']
2025-05-02 15:20:45.514 DEBUG 15588 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.js']
2025-05-02 15:20:45.514 DEBUG 15588 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.css']
2025-05-02 15:20:45.514 DEBUG 15588 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.ico']
2025-05-02 15:20:45.514 DEBUG 15588 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/assets/**']
2025-05-02 15:20:45.514 DEBUG 15588 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/']
2025-05-02 15:20:45.514 DEBUG 15588 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/about']
2025-05-02 15:20:45.514 DEBUG 15588 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/rooms']
2025-05-02 15:20:45.514 DEBUG 15588 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/room/**']
2025-05-02 15:20:45.514 DEBUG 15588 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/contact']
2025-05-02 15:20:45.514 DEBUG 15588 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/booking']
2025-05-02 15:20:45.514 DEBUG 15588 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/register']
2025-05-02 15:20:45.514 DEBUG 15588 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/login']
2025-05-02 15:20:45.514 DEBUG 15588 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/user/**']
2025-05-02 15:20:45.514 DEBUG 15588 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin']
2025-05-02 15:20:45.514 DEBUG 15588 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/login']
2025-05-02 15:20:45.514 DEBUG 15588 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/dashboard/**']
2025-05-02 15:20:45.514 DEBUG 15588 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/users/**']
2025-05-02 15:20:45.514 DEBUG 15588 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/staff/**']
2025-05-02 15:20:45.514 DEBUG 15588 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/reception/**']
2025-05-02 15:20:45.514 DEBUG 15588 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/cleaning/**']
2025-05-02 15:20:45.514 DEBUG 15588 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/login', POST]
2025-05-02 15:20:45.514 DEBUG 15588 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/login', GET]
2025-05-02 15:20:45.514 DEBUG 15588 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/auth/login', POST]
2025-05-02 15:20:45.514 DEBUG 15588 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/refresh-token', POST]
2025-05-02 15:20:45.514 DEBUG 15588 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/register', POST]
2025-05-02 15:20:45.514 DEBUG 15588 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/login', POST]
2025-05-02 15:20:45.514 DEBUG 15588 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/check-username', GET]
2025-05-02 15:20:45.514 DEBUG 15588 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/check-phone', GET]
2025-05-02 15:20:45.514 DEBUG 15588 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/invitation-codes/validate/**', GET]
2025-05-02 15:20:45.514 DEBUG 15588 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/register/staff', POST]
2025-05-02 15:20:45.514 DEBUG 15588 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for Ant [pattern='/api/users/profile', GET]
2025-05-02 15:20:45.514 DEBUG 15588 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for Ant [pattern='/api/users/{id}', PUT]
2025-05-02 15:20:45.514 DEBUG 15588 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for Ant [pattern='/api/users/{id}/password', PUT]
2025-05-02 15:20:45.514 DEBUG 15588 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasRole('ROLE_ADMIN')] for Ant [pattern='/api/admin/**']
2025-05-02 15:20:45.514 DEBUG 15588 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasRole('ROLE_ADMIN')] for Ant [pattern='/api/users/{id}', DELETE]
2025-05-02 15:20:45.514 DEBUG 15588 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/**', OPTIONS]
2025-05-02 15:20:45.514 DEBUG 15588 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for any request
2025-05-02 15:20:45.524  INFO 15588 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1ae2028d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@259ae1a9, org.springframework.security.web.context.SecurityContextPersistenceFilter@61c42e54, org.springframework.security.web.header.HeaderWriterFilter@4865434e, org.springframework.web.filter.CorsFilter@47d4468a, org.springframework.security.web.authentication.logout.LogoutFilter@5e0b7f58, com.hotel.config.JwtAuthenticationFilter@13868c41, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3bf306d3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5101b9, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@d082916, org.springframework.security.web.session.SessionManagementFilter@74120029, org.springframework.security.web.access.ExceptionTranslationFilter@4830c979, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@5ac35b17]
2025-05-02 15:20:45.564  WARN 15588 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-02 15:20:45.675 DEBUG 15588 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-05-02 15:20:45.695  INFO 15588 --- [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [static/index.html]
2025-05-02 15:20:45.745 DEBUG 15588 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 163 mappings in 'requestMappingHandlerMapping'
2025-05-02 15:20:45.755 DEBUG 15588 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/admin, /admin/login, /admin/dashboard, /admin/users, /admin/staff, /admin/rooms, /admin/reception/bookings, /admin/reception/checkin, /admin/reception/visitors, /admin/cleaning/tasks, /admin/cleaning/records, /login] in 'viewControllerHandlerMapping'
2025-05-02 15:20:45.765 DEBUG 15588 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /assets/**, /*.js, /*.css, /favicon.ico, /index.html, /images/**, /assets/images/**] in 'resourceHandlerMapping'
2025-05-02 15:20:45.775 DEBUG 15588 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-05-02 15:20:45.916  INFO 15588 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8090 (http) with context path ''
2025-05-02 15:20:45.916  INFO 15588 --- [main] com.hotel.HotelManagementApplication     : Started HotelManagementApplication in 5.575 seconds (JVM running for 6.476)
2025-05-02 15:20:49.803  INFO 15588 --- [http-nio-8090-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-02 15:20:49.804  INFO 15588 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-02 15:20:49.804 DEBUG 15588 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-05-02 15:20:49.804 DEBUG 15588 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-05-02 15:20:49.804 DEBUG 15588 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-05-02 15:20:49.805 DEBUG 15588 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@6ebf5f26
2025-05-02 15:20:49.806 DEBUG 15588 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@5aff8207
2025-05-02 15:20:49.806 DEBUG 15588 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-05-02 15:20:49.807  INFO 15588 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2025-05-02 15:20:49.823 DEBUG 15588 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/statistics
2025-05-02 15:20:49.828 DEBUG 15588 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:20:49.906 DEBUG 15588 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:20:49.915 DEBUG 15588 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/statistics] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 15:20:49.915 DEBUG 15588 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/statistics
2025-05-02 15:20:49.919 DEBUG 15588 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/statistics", parameters={}
2025-05-02 15:20:49.928 DEBUG 15588 --- [http-nio-8090-exec-1] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-05-02 15:20:49.936 DEBUG 15588 --- [http-nio-8090-exec-1] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2025-05-02 15:20:49.936 DEBUG 15588 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND
2025-05-02 15:20:49.937 DEBUG 15588 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:20:49.940 DEBUG 15588 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /index.html
2025-05-02 15:20:49.940 DEBUG 15588 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:20:49.941 DEBUG 15588 --- [http-nio-8090-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 15:20:49.941 DEBUG 15588 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /index.html
2025-05-02 15:20:49.941 DEBUG 15588 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/index.html", parameters={}
2025-05-02 15:20:49.941 DEBUG 15588 --- [http-nio-8090-exec-1] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [static/]]
2025-05-02 15:20:49.958 DEBUG 15588 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 404
2025-05-02 15:20:49.958 DEBUG 15588 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:22:16.629 DEBUG 15588 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/invitation-codes
2025-05-02 15:22:16.630 DEBUG 15588 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:22:16.639 DEBUG 15588 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:22:16.644 DEBUG 15588 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/invitation-codes] with attributes [authenticated]
2025-05-02 15:22:16.645 DEBUG 15588 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/invitation-codes
2025-05-02 15:22:16.646 DEBUG 15588 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/invitation-codes", parameters={}
2025-05-02 15:22:16.649 DEBUG 15588 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#getValidInvitationCodes()
2025-05-02 15:22:16.782 DEBUG 15588 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:22:16.782 DEBUG 15588 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[InvitationCode(id=1, code=6YJP8NZ5, role=RECEPTIONIST, maxUses=1, currentUses=0, expiryDate=2025-05 (truncated)...]
2025-05-02 15:22:16.956 DEBUG 15588 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:22:16.956 DEBUG 15588 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:22:37.936 DEBUG 15588 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/invitation-codes
2025-05-02 15:22:37.937 DEBUG 15588 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:22:37.946 DEBUG 15588 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:22:37.947 DEBUG 15588 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/invitation-codes] with attributes [authenticated]
2025-05-02 15:22:37.947 DEBUG 15588 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/invitation-codes
2025-05-02 15:22:37.948 DEBUG 15588 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/invitation-codes", parameters={}
2025-05-02 15:22:37.948 DEBUG 15588 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#getValidInvitationCodes()
2025-05-02 15:22:37.958 DEBUG 15588 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:22:37.958 DEBUG 15588 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[InvitationCode(id=1, code=6YJP8NZ5, role=RECEPTIONIST, maxUses=1, currentUses=0, expiryDate=2025-05 (truncated)...]
2025-05-02 15:22:37.961 DEBUG 15588 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:22:37.962 DEBUG 15588 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:22:40.162 DEBUG 15588 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/statistics
2025-05-02 15:22:40.162 DEBUG 15588 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:22:40.173 DEBUG 15588 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:22:40.174 DEBUG 15588 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/statistics] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 15:22:40.175 DEBUG 15588 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/statistics
2025-05-02 15:22:40.175 DEBUG 15588 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/statistics", parameters={}
2025-05-02 15:22:40.177 DEBUG 15588 --- [http-nio-8090-exec-4] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-05-02 15:22:40.186 DEBUG 15588 --- [http-nio-8090-exec-4] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2025-05-02 15:22:40.187 DEBUG 15588 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND
2025-05-02 15:22:40.188 DEBUG 15588 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:22:40.188 DEBUG 15588 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /index.html
2025-05-02 15:22:40.189 DEBUG 15588 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:22:40.189 DEBUG 15588 --- [http-nio-8090-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 15:22:40.189 DEBUG 15588 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /index.html
2025-05-02 15:22:40.189 DEBUG 15588 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/index.html", parameters={}
2025-05-02 15:22:40.191 DEBUG 15588 --- [http-nio-8090-exec-4] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [static/]]
2025-05-02 15:22:40.200 DEBUG 15588 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 404
2025-05-02 15:22:40.200 DEBUG 15588 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:23:25.335 DEBUG 15588 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users?page=1&pageSize=10&username=&phone=&status=
2025-05-02 15:23:25.336 DEBUG 15588 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:23:25.347 DEBUG 15588 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:23:25.348 DEBUG 15588 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users?page=1&pageSize=10&username=&phone=&status=] with attributes [authenticated]
2025-05-02 15:23:25.348 DEBUG 15588 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users?page=1&pageSize=10&username=&phone=&status=
2025-05-02 15:23:25.349 DEBUG 15588 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users?page=1&pageSize=10&username=&phone=&status=", parameters={masked}
2025-05-02 15:23:25.350 DEBUG 15588 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getAllUsers(int, int, String, String, String, String)
2025-05-02 15:23:25.494 DEBUG 15588 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:23:25.496 DEBUG 15588 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data={total=16, users=[UserDTO(id=16, username=18999 (truncated)...]
2025-05-02 15:23:25.520 DEBUG 15588 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:23:25.520 DEBUG 15588 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:23:26.133 DEBUG 15588 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/staff?page=0&pageSize=10
2025-05-02 15:23:26.133 DEBUG 15588 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:23:26.144 DEBUG 15588 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:23:26.145 DEBUG 15588 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users/staff?page=0&pageSize=10] with attributes [authenticated]
2025-05-02 15:23:26.145 DEBUG 15588 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/staff?page=0&pageSize=10
2025-05-02 15:23:26.146 DEBUG 15588 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/staff?page=0&pageSize=10", parameters={masked}
2025-05-02 15:23:26.146 DEBUG 15588 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getAllStaffPaginated(int, int, String, String, String)
2025-05-02 15:23:26.178 DEBUG 15588 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:23:26.178 DEBUG 15588 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data={total=4, users=[UserDTO(id=16, username=189991 (truncated)...]
2025-05-02 15:23:26.180 DEBUG 15588 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:23:26.182 DEBUG 15588 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:23:26.699 DEBUG 15588 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/rooms
2025-05-02 15:23:26.699 DEBUG 15588 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:23:26.708 DEBUG 15588 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:23:26.709 DEBUG 15588 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/rooms] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 15:23:26.709 DEBUG 15588 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/rooms
2025-05-02 15:23:26.709 DEBUG 15588 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/rooms", parameters={}
2025-05-02 15:23:26.710 DEBUG 15588 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminRoomController#getAllRooms(RoomFilterDTO)
2025-05-02 15:23:26.778 DEBUG 15588 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:23:26.779 DEBUG 15588 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data={total=1, list=[{roomNumber=501, lastCleanTime=2025-05-01T15:04:43, notes=, needClea (truncated)...]
2025-05-02 15:23:26.784 DEBUG 15588 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:23:26.785 DEBUG 15588 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:23:26.839 DEBUG 15588 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/roomtypes
2025-05-02 15:23:26.840 DEBUG 15588 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:23:26.847 DEBUG 15588 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:23:26.848 DEBUG 15588 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/roomtypes] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 15:23:26.849 DEBUG 15588 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/roomtypes
2025-05-02 15:23:26.850 DEBUG 15588 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/roomtypes", parameters={}
2025-05-02 15:23:26.850 DEBUG 15588 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getAllRoomTypes()
2025-05-02 15:23:26.863 DEBUG 15588 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:23:26.863 DEBUG 15588 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{amenities=无限量杜蕾斯、矿泉水、咖啡、茶叶等, name=行政套房, description=高端奢华行政房, id=1, basePrice=899.0 (truncated)...]
2025-05-02 15:23:26.865 DEBUG 15588 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:23:26.866 DEBUG 15588 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:23:27.085 DEBUG 15588 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/invitation-codes
2025-05-02 15:23:27.086 DEBUG 15588 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:23:27.094 DEBUG 15588 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:23:27.095 DEBUG 15588 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/invitation-codes] with attributes [authenticated]
2025-05-02 15:23:27.096 DEBUG 15588 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/invitation-codes
2025-05-02 15:23:27.096 DEBUG 15588 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/invitation-codes", parameters={}
2025-05-02 15:23:27.097 DEBUG 15588 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#getValidInvitationCodes()
2025-05-02 15:23:27.106 DEBUG 15588 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:23:27.106 DEBUG 15588 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[InvitationCode(id=1, code=6YJP8NZ5, role=RECEPTIONIST, maxUses=1, currentUses=0, expiryDate=2025-05 (truncated)...]
2025-05-02 15:23:27.109 DEBUG 15588 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:23:27.109 DEBUG 15588 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:23:57.805 DEBUG 15588 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/statistics
2025-05-02 15:23:57.806 DEBUG 15588 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:23:57.810 DEBUG 15588 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:23:57.811 DEBUG 15588 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/statistics] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 15:23:57.811 DEBUG 15588 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/statistics
2025-05-02 15:23:57.811 DEBUG 15588 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/statistics", parameters={}
2025-05-02 15:23:57.812 DEBUG 15588 --- [http-nio-8090-exec-10] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-05-02 15:23:57.814 DEBUG 15588 --- [http-nio-8090-exec-10] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2025-05-02 15:23:57.814 DEBUG 15588 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND
2025-05-02 15:23:57.815 DEBUG 15588 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:23:57.815 DEBUG 15588 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /index.html
2025-05-02 15:23:57.815 DEBUG 15588 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:23:57.815 DEBUG 15588 --- [http-nio-8090-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 15:23:57.815 DEBUG 15588 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /index.html
2025-05-02 15:23:57.816 DEBUG 15588 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/index.html", parameters={}
2025-05-02 15:23:57.816 DEBUG 15588 --- [http-nio-8090-exec-10] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [static/]]
2025-05-02 15:23:57.820 DEBUG 15588 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 404
2025-05-02 15:23:57.820 DEBUG 15588 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:24:29.089 DEBUG 15588 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/statistics
2025-05-02 15:24:29.089 DEBUG 15588 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:24:29.089 DEBUG 15588 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:24:29.089 DEBUG 15588 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/statistics] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 15:24:29.089 DEBUG 15588 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/statistics
2025-05-02 15:24:29.089 DEBUG 15588 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/statistics", parameters={}
2025-05-02 15:24:29.099 DEBUG 15588 --- [http-nio-8090-exec-1] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-05-02 15:24:29.100 DEBUG 15588 --- [http-nio-8090-exec-1] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2025-05-02 15:24:29.100 DEBUG 15588 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND
2025-05-02 15:24:29.100 DEBUG 15588 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:24:29.100 DEBUG 15588 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /index.html
2025-05-02 15:24:29.100 DEBUG 15588 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:24:29.100 DEBUG 15588 --- [http-nio-8090-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 15:24:29.100 DEBUG 15588 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /index.html
2025-05-02 15:24:29.100 DEBUG 15588 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/index.html", parameters={}
2025-05-02 15:24:29.100 DEBUG 15588 --- [http-nio-8090-exec-1] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [static/]]
2025-05-02 15:24:29.110 DEBUG 15588 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 404
2025-05-02 15:24:29.110 DEBUG 15588 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:29:13.779 DEBUG 15588 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/staff?page=0&pageSize=10
2025-05-02 15:29:13.779 DEBUG 15588 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:29:13.784 DEBUG 15588 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:29:13.785 DEBUG 15588 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users/staff?page=0&pageSize=10] with attributes [authenticated]
2025-05-02 15:29:13.785 DEBUG 15588 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/staff?page=0&pageSize=10
2025-05-02 15:29:13.785 DEBUG 15588 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/staff?page=0&pageSize=10", parameters={masked}
2025-05-02 15:29:13.785 DEBUG 15588 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getAllStaffPaginated(int, int, String, String, String)
2025-05-02 15:29:13.794 DEBUG 15588 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:29:13.794 DEBUG 15588 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data={total=4, users=[UserDTO(id=16, username=189991 (truncated)...]
2025-05-02 15:29:13.796 DEBUG 15588 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:29:13.797 DEBUG 15588 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:29:15.329 DEBUG 15588 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/statistics
2025-05-02 15:29:15.330 DEBUG 15588 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:29:15.336 DEBUG 15588 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:29:15.336 DEBUG 15588 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/statistics] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 15:29:15.336 DEBUG 15588 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/statistics
2025-05-02 15:29:15.336 DEBUG 15588 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/statistics", parameters={}
2025-05-02 15:29:15.337 DEBUG 15588 --- [http-nio-8090-exec-9] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-05-02 15:29:15.340 DEBUG 15588 --- [http-nio-8090-exec-9] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2025-05-02 15:29:15.340 DEBUG 15588 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND
2025-05-02 15:29:15.340 DEBUG 15588 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:29:15.341 DEBUG 15588 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /index.html
2025-05-02 15:29:15.341 DEBUG 15588 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:29:15.341 DEBUG 15588 --- [http-nio-8090-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 15:29:15.341 DEBUG 15588 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /index.html
2025-05-02 15:29:15.341 DEBUG 15588 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/index.html", parameters={}
2025-05-02 15:29:15.341 DEBUG 15588 --- [http-nio-8090-exec-9] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [static/]]
2025-05-02 15:29:15.347 DEBUG 15588 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 404
2025-05-02 15:29:15.347 DEBUG 15588 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:29:22.297 DEBUG 15588 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/rooms
2025-05-02 15:29:22.298 DEBUG 15588 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:29:22.302 DEBUG 15588 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:29:22.303 DEBUG 15588 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/rooms] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 15:29:22.303 DEBUG 15588 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/rooms
2025-05-02 15:29:22.303 DEBUG 15588 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/rooms", parameters={}
2025-05-02 15:29:22.304 DEBUG 15588 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminRoomController#getAllRooms(RoomFilterDTO)
2025-05-02 15:29:22.315 DEBUG 15588 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:29:22.315 DEBUG 15588 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data={total=1, list=[{roomNumber=501, lastCleanTime=2025-05-01T15:04:43, notes=, needClea (truncated)...]
2025-05-02 15:29:22.316 DEBUG 15588 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:29:22.317 DEBUG 15588 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:29:22.368 DEBUG 15588 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/roomtypes
2025-05-02 15:29:22.368 DEBUG 15588 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:29:22.374 DEBUG 15588 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:29:22.375 DEBUG 15588 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/roomtypes] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 15:29:22.375 DEBUG 15588 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/roomtypes
2025-05-02 15:29:22.375 DEBUG 15588 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/roomtypes", parameters={}
2025-05-02 15:29:22.376 DEBUG 15588 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getAllRoomTypes()
2025-05-02 15:29:22.381 DEBUG 15588 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:29:22.382 DEBUG 15588 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{amenities=无限量杜蕾斯、矿泉水、咖啡、茶叶等, name=行政套房, description=高端奢华行政房, id=1, basePrice=899.0 (truncated)...]
2025-05-02 15:29:22.383 DEBUG 15588 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:29:22.383 DEBUG 15588 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:29:23.667 DEBUG 15588 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/statistics
2025-05-02 15:29:23.668 DEBUG 15588 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:29:23.672 DEBUG 15588 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:29:23.672 DEBUG 15588 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/statistics] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 15:29:23.672 DEBUG 15588 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/statistics
2025-05-02 15:29:23.673 DEBUG 15588 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/statistics", parameters={}
2025-05-02 15:29:23.673 DEBUG 15588 --- [http-nio-8090-exec-2] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-05-02 15:29:23.676 DEBUG 15588 --- [http-nio-8090-exec-2] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2025-05-02 15:29:23.677 DEBUG 15588 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND
2025-05-02 15:29:23.677 DEBUG 15588 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:29:23.677 DEBUG 15588 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /index.html
2025-05-02 15:29:23.677 DEBUG 15588 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:29:23.677 DEBUG 15588 --- [http-nio-8090-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 15:29:23.677 DEBUG 15588 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /index.html
2025-05-02 15:29:23.677 DEBUG 15588 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/index.html", parameters={}
2025-05-02 15:29:23.677 DEBUG 15588 --- [http-nio-8090-exec-2] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [static/]]
2025-05-02 15:29:23.680 DEBUG 15588 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 404
2025-05-02 15:29:23.680 DEBUG 15588 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:29:25.943 DEBUG 15588 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/statistics
2025-05-02 15:29:25.943 DEBUG 15588 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:29:25.948 DEBUG 15588 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:29:25.949 DEBUG 15588 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/statistics] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 15:29:25.949 DEBUG 15588 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/statistics
2025-05-02 15:29:25.950 DEBUG 15588 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/statistics", parameters={}
2025-05-02 15:29:25.950 DEBUG 15588 --- [http-nio-8090-exec-7] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-05-02 15:29:25.952 DEBUG 15588 --- [http-nio-8090-exec-7] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2025-05-02 15:29:25.952 DEBUG 15588 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND
2025-05-02 15:29:25.953 DEBUG 15588 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:29:25.953 DEBUG 15588 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /index.html
2025-05-02 15:29:25.954 DEBUG 15588 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:29:25.954 DEBUG 15588 --- [http-nio-8090-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 15:29:25.954 DEBUG 15588 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /index.html
2025-05-02 15:29:25.955 DEBUG 15588 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/index.html", parameters={}
2025-05-02 15:29:25.956 DEBUG 15588 --- [http-nio-8090-exec-7] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [static/]]
2025-05-02 15:29:25.961 DEBUG 15588 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 404
2025-05-02 15:29:25.961 DEBUG 15588 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:29:30.950  INFO 15588 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-02 15:29:30.956  INFO 15588 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-02 15:29:30.971  INFO 15588 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-02 15:29:39.987  INFO 22872 --- [main] com.hotel.HotelManagementApplication     : Starting HotelManagementApplication using Java 18.0.2 on LAPTOP-HeYIXianJun with PID 22872 (E:\桌面\javahotel\heqing99\target\classes started by 上善若水 in E:\桌面\javahotel\heqing99)
2025-05-02 15:29:39.989 DEBUG 22872 --- [main] com.hotel.HotelManagementApplication     : Running with Spring Boot v2.7.0, Spring v5.3.20
2025-05-02 15:29:39.989  INFO 22872 --- [main] com.hotel.HotelManagementApplication     : No active profile set, falling back to 1 default profile: "default"
2025-05-02 15:29:40.944  INFO 22872 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-02 15:29:41.144  INFO 22872 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 189 ms. Found 19 JPA repository interfaces.
2025-05-02 15:29:41.696  INFO 22872 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8090 (http)
2025-05-02 15:29:41.696  INFO 22872 --- [main] o.a.catalina.core.AprLifecycleListener   : Loaded Apache Tomcat Native library [1.2.30] using APR version [1.7.0].
2025-05-02 15:29:41.696  INFO 22872 --- [main] o.a.catalina.core.AprLifecycleListener   : APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true], UDS [true].
2025-05-02 15:29:41.696  INFO 22872 --- [main] o.a.catalina.core.AprLifecycleListener   : APR/OpenSSL configuration: useAprConnector [false], useOpenSSL [true]
2025-05-02 15:29:41.706  INFO 22872 --- [main] o.a.catalina.core.AprLifecycleListener   : OpenSSL successfully initialized [OpenSSL 1.1.1k  25 Mar 2021]
2025-05-02 15:29:41.715  INFO 22872 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-02 15:29:41.715  INFO 22872 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-05-02 15:29:41.865  INFO 22872 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-02 15:29:41.865  INFO 22872 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1824 ms
2025-05-02 15:29:42.055  INFO 22872 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-02 15:29:42.116  INFO 22872 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.9.Final
2025-05-02 15:29:42.276  INFO 22872 --- [main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2025-05-02 15:29:42.387  INFO 22872 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-02 15:29:42.739  INFO 22872 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-02 15:29:42.749  INFO 22872 --- [main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2025-05-02 15:29:43.934  INFO 22872 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-05-02 15:29:43.944  INFO 22872 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-02 15:29:44.344 DEBUG 22872 --- [main] c.hotel.config.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2025-05-02 15:29:44.344 DEBUG 22872 --- [main] o.springframework.web.filter.CorsFilter  : Filter 'corsFilter' configured for use
2025-05-02 15:29:45.150 DEBUG 22872 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.html']
2025-05-02 15:29:45.160 DEBUG 22872 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.js']
2025-05-02 15:29:45.160 DEBUG 22872 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.css']
2025-05-02 15:29:45.160 DEBUG 22872 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.ico']
2025-05-02 15:29:45.160 DEBUG 22872 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/assets/**']
2025-05-02 15:29:45.160 DEBUG 22872 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/']
2025-05-02 15:29:45.160 DEBUG 22872 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/about']
2025-05-02 15:29:45.160 DEBUG 22872 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/rooms']
2025-05-02 15:29:45.160 DEBUG 22872 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/room/**']
2025-05-02 15:29:45.160 DEBUG 22872 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/contact']
2025-05-02 15:29:45.160 DEBUG 22872 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/booking']
2025-05-02 15:29:45.160 DEBUG 22872 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/register']
2025-05-02 15:29:45.160 DEBUG 22872 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/login']
2025-05-02 15:29:45.160 DEBUG 22872 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/user/**']
2025-05-02 15:29:45.160 DEBUG 22872 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin']
2025-05-02 15:29:45.160 DEBUG 22872 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/login']
2025-05-02 15:29:45.160 DEBUG 22872 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/dashboard/**']
2025-05-02 15:29:45.160 DEBUG 22872 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/users/**']
2025-05-02 15:29:45.160 DEBUG 22872 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/staff/**']
2025-05-02 15:29:45.160 DEBUG 22872 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/reception/**']
2025-05-02 15:29:45.160 DEBUG 22872 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/cleaning/**']
2025-05-02 15:29:45.160 DEBUG 22872 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/login', POST]
2025-05-02 15:29:45.160 DEBUG 22872 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/login', GET]
2025-05-02 15:29:45.160 DEBUG 22872 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/auth/login', POST]
2025-05-02 15:29:45.160 DEBUG 22872 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/refresh-token', POST]
2025-05-02 15:29:45.160 DEBUG 22872 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/register', POST]
2025-05-02 15:29:45.160 DEBUG 22872 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/login', POST]
2025-05-02 15:29:45.160 DEBUG 22872 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/check-username', GET]
2025-05-02 15:29:45.160 DEBUG 22872 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/check-phone', GET]
2025-05-02 15:29:45.160 DEBUG 22872 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/invitation-codes/validate/**', GET]
2025-05-02 15:29:45.160 DEBUG 22872 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/register/staff', POST]
2025-05-02 15:29:45.160 DEBUG 22872 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for Ant [pattern='/api/users/profile', GET]
2025-05-02 15:29:45.160 DEBUG 22872 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for Ant [pattern='/api/users/{id}', PUT]
2025-05-02 15:29:45.160 DEBUG 22872 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for Ant [pattern='/api/users/{id}/password', PUT]
2025-05-02 15:29:45.160 DEBUG 22872 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasRole('ROLE_ADMIN')] for Ant [pattern='/api/admin/**']
2025-05-02 15:29:45.160 DEBUG 22872 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasRole('ROLE_ADMIN')] for Ant [pattern='/api/users/{id}', DELETE]
2025-05-02 15:29:45.170 DEBUG 22872 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/**', OPTIONS]
2025-05-02 15:29:45.170 DEBUG 22872 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for any request
2025-05-02 15:29:45.170  INFO 22872 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3db3668, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@125c03d3, org.springframework.security.web.context.SecurityContextPersistenceFilter@6e68ccc9, org.springframework.security.web.header.HeaderWriterFilter@45775a15, org.springframework.web.filter.CorsFilter@47d4468a, org.springframework.security.web.authentication.logout.LogoutFilter@4f7da3a2, com.hotel.config.JwtAuthenticationFilter@13868c41, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@63e4bbf9, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@455cb6d9, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7e9ea888, org.springframework.security.web.session.SessionManagementFilter@55159007, org.springframework.security.web.access.ExceptionTranslationFilter@1fd73dcb, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@1ff52a71]
2025-05-02 15:29:45.214  WARN 22872 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-02 15:29:45.321 DEBUG 22872 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-05-02 15:29:45.341  INFO 22872 --- [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [static/index.html]
2025-05-02 15:29:45.401 DEBUG 22872 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 163 mappings in 'requestMappingHandlerMapping'
2025-05-02 15:29:45.401 DEBUG 22872 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/admin, /admin/login, /admin/dashboard, /admin/users, /admin/staff, /admin/rooms, /admin/reception/bookings, /admin/reception/checkin, /admin/reception/visitors, /admin/cleaning/tasks, /admin/cleaning/records, /login] in 'viewControllerHandlerMapping'
2025-05-02 15:29:45.411 DEBUG 22872 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /assets/**, /*.js, /*.css, /favicon.ico, /index.html, /images/**, /assets/images/**] in 'resourceHandlerMapping'
2025-05-02 15:29:45.426 DEBUG 22872 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-05-02 15:29:45.562  INFO 22872 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8090 (http) with context path ''
2025-05-02 15:29:45.572  INFO 22872 --- [main] com.hotel.HotelManagementApplication     : Started HotelManagementApplication in 6.08 seconds (JVM running for 6.908)
2025-05-02 15:29:48.833  INFO 22872 --- [http-nio-8090-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-02 15:29:48.833  INFO 22872 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-02 15:29:48.833 DEBUG 22872 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-05-02 15:29:48.833 DEBUG 22872 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-05-02 15:29:48.833 DEBUG 22872 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-05-02 15:29:48.833 DEBUG 22872 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@6015c745
2025-05-02 15:29:48.833 DEBUG 22872 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@6a486afb
2025-05-02 15:29:48.833 DEBUG 22872 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-05-02 15:29:48.833  INFO 22872 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2025-05-02 15:29:48.854 DEBUG 22872 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users?page=1&pageSize=10&username=&phone=&status=
2025-05-02 15:29:48.855 DEBUG 22872 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:29:48.960 DEBUG 22872 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:29:48.971 DEBUG 22872 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users?page=1&pageSize=10&username=&phone=&status=] with attributes [authenticated]
2025-05-02 15:29:48.971 DEBUG 22872 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users?page=1&pageSize=10&username=&phone=&status=
2025-05-02 15:29:48.974 DEBUG 22872 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users?page=1&pageSize=10&username=&phone=&status=", parameters={masked}
2025-05-02 15:29:48.979 DEBUG 22872 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getAllUsers(int, int, String, String, String, String)
2025-05-02 15:29:49.144 DEBUG 22872 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:29:49.145 DEBUG 22872 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data={total=16, users=[UserDTO(id=16, username=18999 (truncated)...]
2025-05-02 15:29:49.192 DEBUG 22872 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:29:49.195 DEBUG 22872 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:29:50.133 DEBUG 22872 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/statistics
2025-05-02 15:29:50.133 DEBUG 22872 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:29:50.142 DEBUG 22872 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:29:50.150 DEBUG 22872 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/statistics] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 15:29:50.150 DEBUG 22872 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/statistics
2025-05-02 15:29:50.150 DEBUG 22872 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/statistics", parameters={}
2025-05-02 15:29:50.155 DEBUG 22872 --- [http-nio-8090-exec-2] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-05-02 15:29:50.155 DEBUG 22872 --- [http-nio-8090-exec-2] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2025-05-02 15:29:50.155 DEBUG 22872 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND
2025-05-02 15:29:50.155 DEBUG 22872 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:29:50.164 DEBUG 22872 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /index.html
2025-05-02 15:29:50.164 DEBUG 22872 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:29:50.164 DEBUG 22872 --- [http-nio-8090-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 15:29:50.164 DEBUG 22872 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /index.html
2025-05-02 15:29:50.164 DEBUG 22872 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/index.html", parameters={}
2025-05-02 15:29:50.167 DEBUG 22872 --- [http-nio-8090-exec-2] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [static/]]
2025-05-02 15:29:50.167 DEBUG 22872 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 404
2025-05-02 15:29:50.167 DEBUG 22872 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:29:55.682 DEBUG 22872 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/staff?page=0&pageSize=10
2025-05-02 15:29:55.683 DEBUG 22872 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:29:55.688 DEBUG 22872 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:29:55.688 DEBUG 22872 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users/staff?page=0&pageSize=10] with attributes [authenticated]
2025-05-02 15:29:55.689 DEBUG 22872 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/staff?page=0&pageSize=10
2025-05-02 15:29:55.689 DEBUG 22872 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/staff?page=0&pageSize=10", parameters={masked}
2025-05-02 15:29:55.690 DEBUG 22872 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getAllStaffPaginated(int, int, String, String, String)
2025-05-02 15:29:55.708 DEBUG 22872 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:29:55.708 DEBUG 22872 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data={total=4, users=[UserDTO(id=16, username=189991 (truncated)...]
2025-05-02 15:29:55.710 DEBUG 22872 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:29:55.711 DEBUG 22872 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:30:10.785 DEBUG 22872 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/statistics
2025-05-02 15:30:10.786 DEBUG 22872 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:30:10.792 DEBUG 22872 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:30:10.792 DEBUG 22872 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/statistics] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 15:30:10.795 DEBUG 22872 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/statistics
2025-05-02 15:30:10.795 DEBUG 22872 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/statistics", parameters={}
2025-05-02 15:30:10.795 DEBUG 22872 --- [http-nio-8090-exec-4] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-05-02 15:30:10.801 DEBUG 22872 --- [http-nio-8090-exec-4] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2025-05-02 15:30:10.801 DEBUG 22872 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND
2025-05-02 15:30:10.802 DEBUG 22872 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:30:10.803 DEBUG 22872 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /index.html
2025-05-02 15:30:10.803 DEBUG 22872 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:30:10.803 DEBUG 22872 --- [http-nio-8090-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 15:30:10.803 DEBUG 22872 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /index.html
2025-05-02 15:30:10.803 DEBUG 22872 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/index.html", parameters={}
2025-05-02 15:30:10.803 DEBUG 22872 --- [http-nio-8090-exec-4] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [static/]]
2025-05-02 15:30:10.803 DEBUG 22872 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 404
2025-05-02 15:30:10.803 DEBUG 22872 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:30:51.727 DEBUG 22872 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/rooms
2025-05-02 15:30:51.727 DEBUG 22872 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:30:51.731 DEBUG 22872 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:30:51.732 DEBUG 22872 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/rooms] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 15:30:51.732 DEBUG 22872 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/rooms
2025-05-02 15:30:51.732 DEBUG 22872 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/rooms", parameters={}
2025-05-02 15:30:51.733 DEBUG 22872 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminRoomController#getAllRooms(RoomFilterDTO)
2025-05-02 15:30:51.783 DEBUG 22872 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:30:51.784 DEBUG 22872 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data={total=1, list=[{roomNumber=501, lastCleanTime=2025-05-01T15:04:43, notes=, needClea (truncated)...]
2025-05-02 15:30:51.789 DEBUG 22872 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:30:51.789 DEBUG 22872 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:30:51.831 DEBUG 22872 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/roomtypes
2025-05-02 15:30:51.831 DEBUG 22872 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:30:51.839 DEBUG 22872 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:30:51.840 DEBUG 22872 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/roomtypes] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 15:30:51.840 DEBUG 22872 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/roomtypes
2025-05-02 15:30:51.840 DEBUG 22872 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/roomtypes", parameters={}
2025-05-02 15:30:51.841 DEBUG 22872 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getAllRoomTypes()
2025-05-02 15:30:51.853 DEBUG 22872 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:30:51.854 DEBUG 22872 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{amenities=无限量杜蕾斯、矿泉水、咖啡、茶叶等, name=行政套房, description=高端奢华行政房, id=1, basePrice=899.0 (truncated)...]
2025-05-02 15:30:51.856 DEBUG 22872 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:30:51.857 DEBUG 22872 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:30:55.478 DEBUG 22872 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/statistics
2025-05-02 15:30:55.478 DEBUG 22872 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:30:55.483 DEBUG 22872 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:30:55.484 DEBUG 22872 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/statistics] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 15:30:55.484 DEBUG 22872 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/statistics
2025-05-02 15:30:55.484 DEBUG 22872 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/statistics", parameters={}
2025-05-02 15:30:55.485 DEBUG 22872 --- [http-nio-8090-exec-7] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-05-02 15:30:55.488 DEBUG 22872 --- [http-nio-8090-exec-7] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2025-05-02 15:30:55.489 DEBUG 22872 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND
2025-05-02 15:30:55.489 DEBUG 22872 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:30:55.489 DEBUG 22872 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /index.html
2025-05-02 15:30:55.490 DEBUG 22872 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:30:55.490 DEBUG 22872 --- [http-nio-8090-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 15:30:55.490 DEBUG 22872 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /index.html
2025-05-02 15:30:55.490 DEBUG 22872 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/index.html", parameters={}
2025-05-02 15:30:55.491 DEBUG 22872 --- [http-nio-8090-exec-7] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [static/]]
2025-05-02 15:30:55.496 DEBUG 22872 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 404
2025-05-02 15:30:55.497 DEBUG 22872 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:30:56.200 DEBUG 22872 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users?page=1&pageSize=10&username=&phone=&status=
2025-05-02 15:30:56.200 DEBUG 22872 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:30:56.205 DEBUG 22872 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:30:56.206 DEBUG 22872 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users?page=1&pageSize=10&username=&phone=&status=] with attributes [authenticated]
2025-05-02 15:30:56.206 DEBUG 22872 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users?page=1&pageSize=10&username=&phone=&status=
2025-05-02 15:30:56.206 DEBUG 22872 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users?page=1&pageSize=10&username=&phone=&status=", parameters={masked}
2025-05-02 15:30:56.206 DEBUG 22872 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getAllUsers(int, int, String, String, String, String)
2025-05-02 15:30:56.218 DEBUG 22872 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:30:56.218 DEBUG 22872 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data={total=16, users=[UserDTO(id=16, username=18999 (truncated)...]
2025-05-02 15:30:56.220 DEBUG 22872 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:30:56.220 DEBUG 22872 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:30:56.828 DEBUG 22872 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/staff?page=0&pageSize=10
2025-05-02 15:30:56.829 DEBUG 22872 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:30:56.835 DEBUG 22872 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:30:56.835 DEBUG 22872 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users/staff?page=0&pageSize=10] with attributes [authenticated]
2025-05-02 15:30:56.835 DEBUG 22872 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/staff?page=0&pageSize=10
2025-05-02 15:30:56.836 DEBUG 22872 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/staff?page=0&pageSize=10", parameters={masked}
2025-05-02 15:30:56.836 DEBUG 22872 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getAllStaffPaginated(int, int, String, String, String)
2025-05-02 15:30:56.844 DEBUG 22872 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:30:56.844 DEBUG 22872 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data={total=4, users=[UserDTO(id=16, username=189991 (truncated)...]
2025-05-02 15:30:56.846 DEBUG 22872 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:30:56.846 DEBUG 22872 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:31:04.216 DEBUG 22872 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/invitation-codes
2025-05-02 15:31:04.217 DEBUG 22872 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:31:04.221 DEBUG 22872 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:31:04.222 DEBUG 22872 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/invitation-codes] with attributes [authenticated]
2025-05-02 15:31:04.222 DEBUG 22872 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/invitation-codes
2025-05-02 15:31:04.222 DEBUG 22872 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/invitation-codes", parameters={}
2025-05-02 15:31:04.222 DEBUG 22872 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#getValidInvitationCodes()
2025-05-02 15:31:04.240 DEBUG 22872 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:31:04.240 DEBUG 22872 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[InvitationCode(id=1, code=6YJP8NZ5, role=RECEPTIONIST, maxUses=1, currentUses=0, expiryDate=2025-05 (truncated)...]
2025-05-02 15:31:04.245 DEBUG 22872 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:31:04.245 DEBUG 22872 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:33:35.124 DEBUG 22872 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/statistics
2025-05-02 15:33:35.124 DEBUG 22872 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:33:35.129 DEBUG 22872 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:33:35.130 DEBUG 22872 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/statistics] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 15:33:35.130 DEBUG 22872 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/statistics
2025-05-02 15:33:35.130 DEBUG 22872 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/statistics", parameters={}
2025-05-02 15:33:35.131 DEBUG 22872 --- [http-nio-8090-exec-1] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-05-02 15:33:35.134 DEBUG 22872 --- [http-nio-8090-exec-1] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2025-05-02 15:33:35.134 DEBUG 22872 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND
2025-05-02 15:33:35.135 DEBUG 22872 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:33:35.135 DEBUG 22872 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /index.html
2025-05-02 15:33:35.135 DEBUG 22872 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:33:35.136 DEBUG 22872 --- [http-nio-8090-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 15:33:35.136 DEBUG 22872 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /index.html
2025-05-02 15:33:35.136 DEBUG 22872 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/index.html", parameters={}
2025-05-02 15:33:35.137 DEBUG 22872 --- [http-nio-8090-exec-1] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [static/]]
2025-05-02 15:33:35.141 DEBUG 22872 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 404
2025-05-02 15:33:35.141 DEBUG 22872 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:33:38.671 DEBUG 22872 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users?page=1&pageSize=10&username=&phone=&status=
2025-05-02 15:33:38.672 DEBUG 22872 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:33:38.675 DEBUG 22872 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:33:38.676 DEBUG 22872 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users?page=1&pageSize=10&username=&phone=&status=] with attributes [authenticated]
2025-05-02 15:33:38.676 DEBUG 22872 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users?page=1&pageSize=10&username=&phone=&status=
2025-05-02 15:33:38.676 DEBUG 22872 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users?page=1&pageSize=10&username=&phone=&status=", parameters={masked}
2025-05-02 15:33:38.676 DEBUG 22872 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getAllUsers(int, int, String, String, String, String)
2025-05-02 15:33:38.689 DEBUG 22872 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:33:38.689 DEBUG 22872 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data={total=16, users=[UserDTO(id=16, username=18999 (truncated)...]
2025-05-02 15:33:38.691 DEBUG 22872 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:33:38.691 DEBUG 22872 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:33:42.055 DEBUG 22872 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/staff?page=0&pageSize=10
2025-05-02 15:33:42.056 DEBUG 22872 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:33:42.061 DEBUG 22872 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:33:42.062 DEBUG 22872 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users/staff?page=0&pageSize=10] with attributes [authenticated]
2025-05-02 15:33:42.062 DEBUG 22872 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/staff?page=0&pageSize=10
2025-05-02 15:33:42.062 DEBUG 22872 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/staff?page=0&pageSize=10", parameters={masked}
2025-05-02 15:33:42.062 DEBUG 22872 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getAllStaffPaginated(int, int, String, String, String)
2025-05-02 15:33:42.072 DEBUG 22872 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:33:42.073 DEBUG 22872 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data={total=4, users=[UserDTO(id=16, username=189991 (truncated)...]
2025-05-02 15:33:42.074 DEBUG 22872 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:33:42.075 DEBUG 22872 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:33:44.147 DEBUG 22872 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/rooms
2025-05-02 15:33:44.148 DEBUG 22872 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:33:44.151 DEBUG 22872 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:33:44.152 DEBUG 22872 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/rooms] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 15:33:44.153 DEBUG 22872 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/rooms
2025-05-02 15:33:44.153 DEBUG 22872 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/rooms", parameters={}
2025-05-02 15:33:44.153 DEBUG 22872 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminRoomController#getAllRooms(RoomFilterDTO)
2025-05-02 15:33:44.163 DEBUG 22872 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:33:44.163 DEBUG 22872 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data={total=1, list=[{roomNumber=501, lastCleanTime=2025-05-01T15:04:43, notes=, needClea (truncated)...]
2025-05-02 15:33:44.164 DEBUG 22872 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:33:44.164 DEBUG 22872 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:33:44.502 DEBUG 22872 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/roomtypes
2025-05-02 15:33:44.502 DEBUG 22872 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:33:44.507 DEBUG 22872 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:33:44.507 DEBUG 22872 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/roomtypes] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 15:33:44.507 DEBUG 22872 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/roomtypes
2025-05-02 15:33:44.508 DEBUG 22872 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/roomtypes", parameters={}
2025-05-02 15:33:44.508 DEBUG 22872 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getAllRoomTypes()
2025-05-02 15:33:44.512 DEBUG 22872 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:33:44.513 DEBUG 22872 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{amenities=无限量杜蕾斯、矿泉水、咖啡、茶叶等, name=行政套房, description=高端奢华行政房, id=1, basePrice=899.0 (truncated)...]
2025-05-02 15:33:44.514 DEBUG 22872 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:33:44.514 DEBUG 22872 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:33:45.328 DEBUG 22872 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/invitation-codes
2025-05-02 15:33:45.328 DEBUG 22872 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:33:45.334 DEBUG 22872 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:33:45.334 DEBUG 22872 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/invitation-codes] with attributes [authenticated]
2025-05-02 15:33:45.334 DEBUG 22872 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/invitation-codes
2025-05-02 15:33:45.334 DEBUG 22872 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/invitation-codes", parameters={}
2025-05-02 15:33:45.335 DEBUG 22872 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#getValidInvitationCodes()
2025-05-02 15:33:45.341 DEBUG 22872 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:33:45.341 DEBUG 22872 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[InvitationCode(id=1, code=6YJP8NZ5, role=RECEPTIONIST, maxUses=1, currentUses=0, expiryDate=2025-05 (truncated)...]
2025-05-02 15:33:45.342 DEBUG 22872 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:33:45.342 DEBUG 22872 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:33:52.662 DEBUG 22872 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/invitation-codes
2025-05-02 15:33:52.662 DEBUG 22872 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:33:52.674 DEBUG 22872 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:33:52.674 DEBUG 22872 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/invitation-codes] with attributes [authenticated]
2025-05-02 15:33:52.674 DEBUG 22872 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/invitation-codes
2025-05-02 15:33:52.674 DEBUG 22872 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : POST "/api/invitation-codes", parameters={}
2025-05-02 15:33:52.674 DEBUG 22872 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#createInvitationCode(Map)
2025-05-02 15:33:52.681 DEBUG 22872 --- [http-nio-8090-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{role=CLEANER, maxUses=1, expiryDate=2025-06-01T15:59:59.999Z}]
2025-05-02 15:33:52.758 DEBUG 22872 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:33:52.758 DEBUG 22872 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [InvitationCode(id=4, code=00NC2385, role=CLEANER, maxUses=1, currentUses=0, expiryDate=2025-06-01T23 (truncated)...]
2025-05-02 15:33:52.758 DEBUG 22872 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:33:52.758 DEBUG 22872 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:33:52.915 DEBUG 22872 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/invitation-codes
2025-05-02 15:33:52.915 DEBUG 22872 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:33:52.915 DEBUG 22872 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:33:52.915 DEBUG 22872 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/invitation-codes] with attributes [authenticated]
2025-05-02 15:33:52.915 DEBUG 22872 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/invitation-codes
2025-05-02 15:33:52.915 DEBUG 22872 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/invitation-codes", parameters={}
2025-05-02 15:33:52.915 DEBUG 22872 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#createInvitationCode(Map)
2025-05-02 15:33:52.924 DEBUG 22872 --- [http-nio-8090-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{role=CLEANER, maxUses=1, expiryDate=2025-06-01T15:59:59.999Z}]
2025-05-02 15:33:52.929 DEBUG 22872 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:33:52.929 DEBUG 22872 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [InvitationCode(id=5, code=HAX6WMN5, role=CLEANER, maxUses=1, currentUses=0, expiryDate=2025-06-01T23 (truncated)...]
2025-05-02 15:33:52.929 DEBUG 22872 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:33:52.929 DEBUG 22872 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:33:53.072 DEBUG 22872 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/invitation-codes
2025-05-02 15:33:53.072 DEBUG 22872 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:33:53.072 DEBUG 22872 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:33:53.072 DEBUG 22872 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/invitation-codes] with attributes [authenticated]
2025-05-02 15:33:53.072 DEBUG 22872 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/invitation-codes
2025-05-02 15:33:53.072 DEBUG 22872 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/invitation-codes", parameters={}
2025-05-02 15:33:53.072 DEBUG 22872 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#createInvitationCode(Map)
2025-05-02 15:33:53.072 DEBUG 22872 --- [http-nio-8090-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{role=CLEANER, maxUses=1, expiryDate=2025-06-01T15:59:59.999Z}]
2025-05-02 15:33:53.082 DEBUG 22872 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:33:53.082 DEBUG 22872 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [InvitationCode(id=6, code=9OGGSZQO, role=CLEANER, maxUses=1, currentUses=0, expiryDate=2025-06-01T23 (truncated)...]
2025-05-02 15:33:53.082 DEBUG 22872 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:33:53.092 DEBUG 22872 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:33:53.251 DEBUG 22872 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/invitation-codes
2025-05-02 15:33:53.251 DEBUG 22872 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:33:53.251 DEBUG 22872 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:33:53.251 DEBUG 22872 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/invitation-codes] with attributes [authenticated]
2025-05-02 15:33:53.251 DEBUG 22872 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/invitation-codes
2025-05-02 15:33:53.251 DEBUG 22872 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : POST "/api/invitation-codes", parameters={}
2025-05-02 15:33:53.251 DEBUG 22872 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#createInvitationCode(Map)
2025-05-02 15:33:53.251 DEBUG 22872 --- [http-nio-8090-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{role=CLEANER, maxUses=1, expiryDate=2025-06-01T15:59:59.999Z}]
2025-05-02 15:33:53.262 DEBUG 22872 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:33:53.262 DEBUG 22872 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [InvitationCode(id=7, code=ZMGN330N, role=CLEANER, maxUses=1, currentUses=0, expiryDate=2025-06-01T23 (truncated)...]
2025-05-02 15:33:53.262 DEBUG 22872 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:33:53.262 DEBUG 22872 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:33:53.402 DEBUG 22872 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/invitation-codes
2025-05-02 15:33:53.402 DEBUG 22872 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:33:53.409 DEBUG 22872 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:33:53.409 DEBUG 22872 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/invitation-codes] with attributes [authenticated]
2025-05-02 15:33:53.409 DEBUG 22872 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/invitation-codes
2025-05-02 15:33:53.409 DEBUG 22872 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : POST "/api/invitation-codes", parameters={}
2025-05-02 15:33:53.409 DEBUG 22872 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#createInvitationCode(Map)
2025-05-02 15:33:53.409 DEBUG 22872 --- [http-nio-8090-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{role=CLEANER, maxUses=1, expiryDate=2025-06-01T15:59:59.999Z}]
2025-05-02 15:33:53.419 DEBUG 22872 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:33:53.419 DEBUG 22872 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [InvitationCode(id=8, code=WXA50X88, role=CLEANER, maxUses=1, currentUses=0, expiryDate=2025-06-01T23 (truncated)...]
2025-05-02 15:33:53.421 DEBUG 22872 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:33:53.421 DEBUG 22872 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:33:53.577 DEBUG 22872 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/invitation-codes
2025-05-02 15:33:53.577 DEBUG 22872 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:33:53.583 DEBUG 22872 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:33:53.583 DEBUG 22872 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/invitation-codes] with attributes [authenticated]
2025-05-02 15:33:53.583 DEBUG 22872 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/invitation-codes
2025-05-02 15:33:53.583 DEBUG 22872 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/invitation-codes", parameters={}
2025-05-02 15:33:53.583 DEBUG 22872 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#getValidInvitationCodes()
2025-05-02 15:33:53.589 DEBUG 22872 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:33:53.589 DEBUG 22872 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[InvitationCode(id=1, code=6YJP8NZ5, role=RECEPTIONIST, maxUses=1, currentUses=0, expiryDate=2025-05 (truncated)...]
2025-05-02 15:33:53.589 DEBUG 22872 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:33:53.589 DEBUG 22872 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:34:50.131 DEBUG 22872 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/invitation-codes/validate/00NC2385
2025-05-02 15:34:50.131 DEBUG 22872 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:34:50.131 DEBUG 22872 --- [http-nio-8090-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 15:34:50.131 DEBUG 22872 --- [http-nio-8090-exec-3] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 392DE3288BDD9A64697788511D190ED3
2025-05-02 15:34:50.131 DEBUG 22872 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/invitation-codes/validate/00NC2385] with attributes [permitAll]
2025-05-02 15:34:50.131 DEBUG 22872 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/invitation-codes/validate/00NC2385
2025-05-02 15:34:50.131 DEBUG 22872 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/invitation-codes/validate/00NC2385", parameters={}
2025-05-02 15:34:50.131 DEBUG 22872 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#validateCode(String)
2025-05-02 15:34:50.141 DEBUG 22872 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:34:50.141 DEBUG 22872 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{role=CLEANER}]
2025-05-02 15:34:50.141 DEBUG 22872 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:34:50.141 DEBUG 22872 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:35:28.387 DEBUG 22872 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/users/register/staff
2025-05-02 15:35:28.388 DEBUG 22872 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:35:28.388 DEBUG 22872 --- [http-nio-8090-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 15:35:28.388 DEBUG 22872 --- [http-nio-8090-exec-4] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 392DE3288BDD9A64697788511D190ED3
2025-05-02 15:35:28.388 DEBUG 22872 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/register/staff] with attributes [permitAll]
2025-05-02 15:35:28.388 DEBUG 22872 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/users/register/staff
2025-05-02 15:35:28.388 DEBUG 22872 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/users/register/staff", parameters={}
2025-05-02 15:35:28.388 DEBUG 22872 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#registerStaff(StaffRegistrationDto)
2025-05-02 15:35:28.407 DEBUG 22872 --- [http-nio-8090-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [StaffRegistrationDto(username=保洁7号阿姨, phone=15698758866, password=15698758866, email=15698758866@163 (truncated)...]
2025-05-02 15:35:28.532 DEBUG 22872 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:35:28.532 DEBUG 22872 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=员工注册成功，请等待审核, data=UserDTO(id=17, username=保洁7号阿姨, name= (truncated)...]
2025-05-02 15:35:28.532 DEBUG 22872 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-05-02 15:35:28.532 DEBUG 22872 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:35:46.864 DEBUG 22872 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-02 15:35:46.864 DEBUG 22872 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:35:46.864 DEBUG 22872 --- [http-nio-8090-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 15:35:46.864 DEBUG 22872 --- [http-nio-8090-exec-9] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 392DE3288BDD9A64697788511D190ED3
2025-05-02 15:35:46.864 DEBUG 22872 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-02 15:35:46.864 DEBUG 22872 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-02 15:35:46.864 DEBUG 22872 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-02 15:35:46.864 DEBUG 22872 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-02 15:35:46.870 DEBUG 22872 --- [http-nio-8090-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=15698758866, password=15698758866)]
2025-05-02 15:35:47.010 DEBUG 22872 --- [http-nio-8090-exec-9] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-02 15:35:47.025 DEBUG 22872 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:35:47.025 DEBUG 22872 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=17, username=保洁7号阿姨, role=CLEANER, token=eyJhbGciOi (truncated)...]
2025-05-02 15:35:47.025 DEBUG 22872 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:35:47.025 DEBUG 22872 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:37:26.578 DEBUG 22872 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-02 15:37:26.578 DEBUG 22872 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:37:26.581 ERROR 22872 --- [http-nio-8090-exec-6] com.hotel.util.JwtTokenProvider          : Expired JWT token
2025-05-02 15:37:26.581  WARN 22872 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : JWT Token 无效: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJkZGQiLCJyb2xlIjoiQ1VTVE9NRVIiLCJpYXQiOjE3NDU4MDkwNTEsImV4cCI6MTc0NTg5NTQ1MX0.N-zquTfLaEyTwq6t_L1EQLXcLQIv60oi9-uetVUG11rjdUZZDKWTO1Oqx2niFs8ZoS5fLsCkuIhTSzvodwXBoQ
2025-05-02 15:37:26.581 DEBUG 22872 --- [http-nio-8090-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 15:37:26.581 DEBUG 22872 --- [http-nio-8090-exec-6] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-02 15:37:26.581 DEBUG 22872 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-02 15:37:26.581 DEBUG 22872 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-02 15:37:26.581 DEBUG 22872 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-02 15:37:26.581 DEBUG 22872 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-02 15:37:26.587 DEBUG 22872 --- [http-nio-8090-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=18999177256, password=18999177256)]
2025-05-02 15:37:26.657 DEBUG 22872 --- [http-nio-8090-exec-6] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-02 15:37:26.664 DEBUG 22872 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:37:26.664 DEBUG 22872 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=16, username=18999177256, role=RECEPTIONIST, token= (truncated)...]
2025-05-02 15:37:26.664 DEBUG 22872 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:37:26.664 DEBUG 22872 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:40:19.789 DEBUG 22872 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/invitation-codes
2025-05-02 15:40:19.790 DEBUG 22872 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:40:19.796 DEBUG 22872 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:40:19.797 DEBUG 22872 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/invitation-codes] with attributes [authenticated]
2025-05-02 15:40:19.797 DEBUG 22872 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/invitation-codes
2025-05-02 15:40:19.798 DEBUG 22872 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/invitation-codes", parameters={}
2025-05-02 15:40:19.799 DEBUG 22872 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#getValidInvitationCodes()
2025-05-02 15:40:19.808 DEBUG 22872 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:40:19.809 DEBUG 22872 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[InvitationCode(id=1, code=6YJP8NZ5, role=RECEPTIONIST, maxUses=1, currentUses=0, expiryDate=2025-05 (truncated)...]
2025-05-02 15:40:19.811 DEBUG 22872 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:40:19.811 DEBUG 22872 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:40:35.309 DEBUG 22872 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/statistics
2025-05-02 15:40:35.309 DEBUG 22872 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:40:35.309 DEBUG 22872 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:40:35.309 DEBUG 22872 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/statistics] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 15:40:35.309 DEBUG 22872 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/statistics
2025-05-02 15:40:35.319 DEBUG 22872 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/statistics", parameters={}
2025-05-02 15:40:35.319 DEBUG 22872 --- [http-nio-8090-exec-8] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-05-02 15:40:35.319 DEBUG 22872 --- [http-nio-8090-exec-8] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2025-05-02 15:40:35.319 DEBUG 22872 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND
2025-05-02 15:40:35.319 DEBUG 22872 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:40:35.319 DEBUG 22872 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /index.html
2025-05-02 15:40:35.319 DEBUG 22872 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:40:35.319 DEBUG 22872 --- [http-nio-8090-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 15:40:35.319 DEBUG 22872 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /index.html
2025-05-02 15:40:35.319 DEBUG 22872 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/index.html", parameters={}
2025-05-02 15:40:35.319 DEBUG 22872 --- [http-nio-8090-exec-8] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [static/]]
2025-05-02 15:40:35.319 DEBUG 22872 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 404
2025-05-02 15:40:35.319 DEBUG 22872 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:42:41.512 DEBUG 22872 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/statistics
2025-05-02 15:42:41.512 DEBUG 22872 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:42:41.516 DEBUG 22872 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:42:41.517 DEBUG 22872 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/statistics] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 15:42:41.517 DEBUG 22872 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/statistics
2025-05-02 15:42:41.518 DEBUG 22872 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/statistics", parameters={}
2025-05-02 15:42:41.518 DEBUG 22872 --- [http-nio-8090-exec-5] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-05-02 15:42:41.521 DEBUG 22872 --- [http-nio-8090-exec-5] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2025-05-02 15:42:41.522 DEBUG 22872 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND
2025-05-02 15:42:41.522 DEBUG 22872 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:42:41.522 DEBUG 22872 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /index.html
2025-05-02 15:42:41.522 DEBUG 22872 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:42:41.523 DEBUG 22872 --- [http-nio-8090-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 15:42:41.523 DEBUG 22872 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /index.html
2025-05-02 15:42:41.523 DEBUG 22872 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/index.html", parameters={}
2025-05-02 15:42:41.524 DEBUG 22872 --- [http-nio-8090-exec-5] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [static/]]
2025-05-02 15:42:41.528 DEBUG 22872 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 404
2025-05-02 15:42:41.529 DEBUG 22872 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:42:49.482 DEBUG 22872 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/statistics
2025-05-02 15:42:49.483 DEBUG 22872 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:42:49.487 DEBUG 22872 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:42:49.487 DEBUG 22872 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/statistics] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 15:42:49.488 DEBUG 22872 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/statistics
2025-05-02 15:42:49.488 DEBUG 22872 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/statistics", parameters={}
2025-05-02 15:42:49.489 DEBUG 22872 --- [http-nio-8090-exec-10] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-05-02 15:42:49.491 DEBUG 22872 --- [http-nio-8090-exec-10] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2025-05-02 15:42:49.492 DEBUG 22872 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND
2025-05-02 15:42:49.492 DEBUG 22872 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:42:49.492 DEBUG 22872 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /index.html
2025-05-02 15:42:49.492 DEBUG 22872 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:42:49.492 DEBUG 22872 --- [http-nio-8090-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 15:42:49.492 DEBUG 22872 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /index.html
2025-05-02 15:42:49.492 DEBUG 22872 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/index.html", parameters={}
2025-05-02 15:42:49.493 DEBUG 22872 --- [http-nio-8090-exec-10] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [static/]]
2025-05-02 15:42:49.496 DEBUG 22872 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 404
2025-05-02 15:42:49.496 DEBUG 22872 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:42:51.059  INFO 22872 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-02 15:42:51.066  INFO 22872 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-02 15:42:51.069  INFO 22872 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-02 15:42:56.309  INFO 12572 --- [main] com.hotel.HotelManagementApplication     : Starting HotelManagementApplication using Java 18.0.2 on LAPTOP-HeYIXianJun with PID 12572 (E:\桌面\javahotel\heqing99\target\classes started by 上善若水 in E:\桌面\javahotel\heqing99)
2025-05-02 15:42:56.313 DEBUG 12572 --- [main] com.hotel.HotelManagementApplication     : Running with Spring Boot v2.7.0, Spring v5.3.20
2025-05-02 15:42:56.314  INFO 12572 --- [main] com.hotel.HotelManagementApplication     : No active profile set, falling back to 1 default profile: "default"
2025-05-02 15:42:57.953  INFO 12572 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-02 15:42:58.173  INFO 12572 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 207 ms. Found 19 JPA repository interfaces.
2025-05-02 15:42:58.720  INFO 12572 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8090 (http)
2025-05-02 15:42:58.720  INFO 12572 --- [main] o.a.catalina.core.AprLifecycleListener   : Loaded Apache Tomcat Native library [1.2.30] using APR version [1.7.0].
2025-05-02 15:42:58.720  INFO 12572 --- [main] o.a.catalina.core.AprLifecycleListener   : APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true], UDS [true].
2025-05-02 15:42:58.720  INFO 12572 --- [main] o.a.catalina.core.AprLifecycleListener   : APR/OpenSSL configuration: useAprConnector [false], useOpenSSL [true]
2025-05-02 15:42:58.720  INFO 12572 --- [main] o.a.catalina.core.AprLifecycleListener   : OpenSSL successfully initialized [OpenSSL 1.1.1k  25 Mar 2021]
2025-05-02 15:42:58.730  INFO 12572 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-02 15:42:58.730  INFO 12572 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-05-02 15:42:58.861  INFO 12572 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-02 15:42:58.861  INFO 12572 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2473 ms
2025-05-02 15:42:59.025  INFO 12572 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-02 15:42:59.085  INFO 12572 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.9.Final
2025-05-02 15:42:59.254  INFO 12572 --- [main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2025-05-02 15:42:59.369  INFO 12572 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-02 15:42:59.711  INFO 12572 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-02 15:42:59.721  INFO 12572 --- [main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2025-05-02 15:43:01.198  INFO 12572 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-05-02 15:43:01.208  INFO 12572 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-02 15:43:01.721 DEBUG 12572 --- [main] c.hotel.config.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2025-05-02 15:43:01.721 DEBUG 12572 --- [main] o.springframework.web.filter.CorsFilter  : Filter 'corsFilter' configured for use
2025-05-02 15:43:02.541 DEBUG 12572 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.html']
2025-05-02 15:43:02.541 DEBUG 12572 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.js']
2025-05-02 15:43:02.551 DEBUG 12572 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.css']
2025-05-02 15:43:02.551 DEBUG 12572 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.ico']
2025-05-02 15:43:02.551 DEBUG 12572 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/assets/**']
2025-05-02 15:43:02.551 DEBUG 12572 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/']
2025-05-02 15:43:02.551 DEBUG 12572 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/about']
2025-05-02 15:43:02.551 DEBUG 12572 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/rooms']
2025-05-02 15:43:02.551 DEBUG 12572 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/room/**']
2025-05-02 15:43:02.551 DEBUG 12572 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/contact']
2025-05-02 15:43:02.551 DEBUG 12572 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/booking']
2025-05-02 15:43:02.551 DEBUG 12572 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/register']
2025-05-02 15:43:02.551 DEBUG 12572 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/login']
2025-05-02 15:43:02.551 DEBUG 12572 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/user/**']
2025-05-02 15:43:02.551 DEBUG 12572 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin']
2025-05-02 15:43:02.551 DEBUG 12572 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/login']
2025-05-02 15:43:02.551 DEBUG 12572 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/dashboard/**']
2025-05-02 15:43:02.551 DEBUG 12572 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/users/**']
2025-05-02 15:43:02.551 DEBUG 12572 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/staff/**']
2025-05-02 15:43:02.551 DEBUG 12572 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/reception/**']
2025-05-02 15:43:02.551 DEBUG 12572 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/cleaning/**']
2025-05-02 15:43:02.551 DEBUG 12572 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/login', POST]
2025-05-02 15:43:02.551 DEBUG 12572 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/login', GET]
2025-05-02 15:43:02.551 DEBUG 12572 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/auth/login', POST]
2025-05-02 15:43:02.551 DEBUG 12572 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/refresh-token', POST]
2025-05-02 15:43:02.551 DEBUG 12572 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/register', POST]
2025-05-02 15:43:02.551 DEBUG 12572 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/login', POST]
2025-05-02 15:43:02.551 DEBUG 12572 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/check-username', GET]
2025-05-02 15:43:02.551 DEBUG 12572 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/check-phone', GET]
2025-05-02 15:43:02.551 DEBUG 12572 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/invitation-codes/validate/**', GET]
2025-05-02 15:43:02.551 DEBUG 12572 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/register/staff', POST]
2025-05-02 15:43:02.551 DEBUG 12572 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for Ant [pattern='/api/users/profile', GET]
2025-05-02 15:43:02.551 DEBUG 12572 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for Ant [pattern='/api/users/{id}', PUT]
2025-05-02 15:43:02.551 DEBUG 12572 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for Ant [pattern='/api/users/{id}/password', PUT]
2025-05-02 15:43:02.551 DEBUG 12572 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasRole('ROLE_ADMIN')] for Ant [pattern='/api/admin/**']
2025-05-02 15:43:02.551 DEBUG 12572 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasRole('ROLE_ADMIN')] for Ant [pattern='/api/users/{id}', DELETE]
2025-05-02 15:43:02.551 DEBUG 12572 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/**', OPTIONS]
2025-05-02 15:43:02.551 DEBUG 12572 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for any request
2025-05-02 15:43:02.561  INFO 12572 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@67201002, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6ddc9001, org.springframework.security.web.context.SecurityContextPersistenceFilter@5101b9, org.springframework.security.web.header.HeaderWriterFilter@2f650dae, org.springframework.web.filter.CorsFilter@594fcb22, org.springframework.security.web.authentication.logout.LogoutFilter@117be84a, com.hotel.config.JwtAuthenticationFilter@2e3b4394, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5ec25b61, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7da40bf4, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1f39b3ba, org.springframework.security.web.session.SessionManagementFilter@61c42e54, org.springframework.security.web.access.ExceptionTranslationFilter@65029fc, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@6a7b4ff5]
2025-05-02 15:43:02.601  WARN 12572 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-02 15:43:02.727 DEBUG 12572 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-05-02 15:43:02.762  INFO 12572 --- [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [static/index.html]
2025-05-02 15:43:02.824 DEBUG 12572 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 163 mappings in 'requestMappingHandlerMapping'
2025-05-02 15:43:02.834 DEBUG 12572 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/admin, /admin/login, /admin/dashboard, /admin/users, /admin/staff, /admin/rooms, /admin/reception/bookings, /admin/reception/checkin, /admin/reception/visitors, /admin/cleaning/tasks, /admin/cleaning/records, /login] in 'viewControllerHandlerMapping'
2025-05-02 15:43:02.849 DEBUG 12572 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /assets/**, /*.js, /*.css, /favicon.ico, /index.html, /images/**, /assets/images/**] in 'resourceHandlerMapping'
2025-05-02 15:43:02.849 DEBUG 12572 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-05-02 15:43:03.019  INFO 12572 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8090 (http) with context path ''
2025-05-02 15:43:03.029  INFO 12572 --- [main] com.hotel.HotelManagementApplication     : Started HotelManagementApplication in 7.248 seconds (JVM running for 8.164)
2025-05-02 15:43:10.765  INFO 12572 --- [http-nio-8090-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-02 15:43:10.765  INFO 12572 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-02 15:43:10.765 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-05-02 15:43:10.765 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-05-02 15:43:10.765 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-05-02 15:43:10.769 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@7a5a26b7
2025-05-02 15:43:10.770 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@6a5a99d9
2025-05-02 15:43:10.772 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-05-02 15:43:10.772  INFO 12572 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 7 ms
2025-05-02 15:43:10.793 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/statistics
2025-05-02 15:43:10.804 DEBUG 12572 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:43:10.918 DEBUG 12572 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:43:10.934 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/statistics] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 15:43:10.934 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/statistics
2025-05-02 15:43:10.938 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/statistics", parameters={}
2025-05-02 15:43:10.952 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-05-02 15:43:10.962 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2025-05-02 15:43:10.962 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND
2025-05-02 15:43:10.964 DEBUG 12572 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:43:10.967 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /index.html
2025-05-02 15:43:10.967 DEBUG 12572 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:43:10.967 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 15:43:10.967 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /index.html
2025-05-02 15:43:10.967 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/index.html", parameters={}
2025-05-02 15:43:10.969 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [static/]]
2025-05-02 15:43:10.987 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 404
2025-05-02 15:43:10.988 DEBUG 12572 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:43:36.000 DEBUG 12572 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/statistics
2025-05-02 15:43:36.017 DEBUG 12572 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:43:36.034 DEBUG 12572 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:43:36.035 DEBUG 12572 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/statistics] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 15:43:36.035 DEBUG 12572 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/statistics
2025-05-02 15:43:36.036 DEBUG 12572 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/statistics", parameters={}
2025-05-02 15:43:36.038 DEBUG 12572 --- [http-nio-8090-exec-2] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-05-02 15:43:36.060 DEBUG 12572 --- [http-nio-8090-exec-2] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2025-05-02 15:43:36.062 DEBUG 12572 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND
2025-05-02 15:43:36.063 DEBUG 12572 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:43:36.063 DEBUG 12572 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /index.html
2025-05-02 15:43:36.063 DEBUG 12572 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:43:36.063 DEBUG 12572 --- [http-nio-8090-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 15:43:36.087 DEBUG 12572 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /index.html
2025-05-02 15:43:36.087 DEBUG 12572 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/index.html", parameters={}
2025-05-02 15:43:36.088 DEBUG 12572 --- [http-nio-8090-exec-2] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [static/]]
2025-05-02 15:43:36.097 DEBUG 12572 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 404
2025-05-02 15:43:36.099 DEBUG 12572 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:43:41.266 DEBUG 12572 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users?page=1&pageSize=10&username=&phone=&status=
2025-05-02 15:43:41.267 DEBUG 12572 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:43:41.278 DEBUG 12572 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:43:41.283 DEBUG 12572 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users?page=1&pageSize=10&username=&phone=&status=] with attributes [authenticated]
2025-05-02 15:43:41.284 DEBUG 12572 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users?page=1&pageSize=10&username=&phone=&status=
2025-05-02 15:43:41.285 DEBUG 12572 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users?page=1&pageSize=10&username=&phone=&status=", parameters={masked}
2025-05-02 15:43:41.288 DEBUG 12572 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getAllUsers(int, int, String, String, String, String)
2025-05-02 15:43:41.589 DEBUG 12572 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:43:41.592 DEBUG 12572 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data={total=17, users=[UserDTO(id=17, username=保洁7号阿 (truncated)...]
2025-05-02 15:43:41.648 DEBUG 12572 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:43:41.649 DEBUG 12572 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:43:41.933 DEBUG 12572 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/staff?page=0&pageSize=10
2025-05-02 15:43:41.933 DEBUG 12572 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:43:41.946 DEBUG 12572 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:43:41.946 DEBUG 12572 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users/staff?page=0&pageSize=10] with attributes [authenticated]
2025-05-02 15:43:41.947 DEBUG 12572 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/staff?page=0&pageSize=10
2025-05-02 15:43:41.947 DEBUG 12572 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/staff?page=0&pageSize=10", parameters={masked}
2025-05-02 15:43:41.947 DEBUG 12572 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getAllStaffPaginated(int, int, String, String, String)
2025-05-02 15:43:41.978 DEBUG 12572 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:43:41.979 DEBUG 12572 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data={total=5, users=[UserDTO(id=17, username=保洁7号阿姨 (truncated)...]
2025-05-02 15:43:41.982 DEBUG 12572 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:43:41.982 DEBUG 12572 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:43:43.583 DEBUG 12572 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/rooms
2025-05-02 15:43:43.583 DEBUG 12572 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:43:43.589 DEBUG 12572 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:43:43.590 DEBUG 12572 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/rooms] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 15:43:43.590 DEBUG 12572 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/rooms
2025-05-02 15:43:43.591 DEBUG 12572 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/rooms", parameters={}
2025-05-02 15:43:43.591 DEBUG 12572 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminRoomController#getAllRooms(RoomFilterDTO)
2025-05-02 15:43:43.656 DEBUG 12572 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:43:43.656 DEBUG 12572 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data={total=1, list=[{roomNumber=501, lastCleanTime=2025-05-01T15:04:43, notes=, needClea (truncated)...]
2025-05-02 15:43:43.660 DEBUG 12572 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:43:43.660 DEBUG 12572 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:43:43.849 DEBUG 12572 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/roomtypes
2025-05-02 15:43:43.850 DEBUG 12572 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:43:43.854 DEBUG 12572 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:43:43.855 DEBUG 12572 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/roomtypes] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 15:43:43.855 DEBUG 12572 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/roomtypes
2025-05-02 15:43:43.855 DEBUG 12572 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/roomtypes", parameters={}
2025-05-02 15:43:43.855 DEBUG 12572 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getAllRoomTypes()
2025-05-02 15:43:43.863 DEBUG 12572 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:43:43.863 DEBUG 12572 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{amenities=无限量杜蕾斯、矿泉水、咖啡、茶叶等, name=行政套房, description=高端奢华行政房, id=1, basePrice=899.0 (truncated)...]
2025-05-02 15:43:43.864 DEBUG 12572 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:43:43.864 DEBUG 12572 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:44:06.085 DEBUG 12572 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/admin/rooms/types
2025-05-02 15:44:06.085 DEBUG 12572 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:44:06.104 DEBUG 12572 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:44:06.104 DEBUG 12572 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/admin/rooms/types] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 15:44:06.104 DEBUG 12572 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/admin/rooms/types
2025-05-02 15:44:06.104 DEBUG 12572 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : POST "/api/admin/rooms/types", parameters={}
2025-05-02 15:44:06.104 DEBUG 12572 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminRoomController#addRoomType(RoomType)
2025-05-02 15:44:06.154 DEBUG 12572 --- [http-nio-8090-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [RoomType(id=null, name=行政套房, description=, longDescription=null, basePrice=1299, weekendPrice=null,  (truncated)...]
2025-05-02 15:44:06.157 DEBUG 12572 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:44:06.157 DEBUG 12572 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=400, success=false, message=房型名称已存在}]
2025-05-02 15:44:06.157 DEBUG 12572 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 400 BAD_REQUEST
2025-05-02 15:44:06.157 DEBUG 12572 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:44:29.223 DEBUG 12572 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/admin/rooms
2025-05-02 15:44:29.223 DEBUG 12572 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:44:29.229 DEBUG 12572 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:44:29.229 DEBUG 12572 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/admin/rooms] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 15:44:29.229 DEBUG 12572 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/admin/rooms
2025-05-02 15:44:29.229 DEBUG 12572 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/admin/rooms", parameters={}
2025-05-02 15:44:29.229 DEBUG 12572 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminRoomController#addRoom(Room)
2025-05-02 15:44:29.229 DEBUG 12572 --- [http-nio-8090-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [Room(id=null, roomNumber=401, roomType=RoomType(id=1, name=null, description=null, longDescription=n (truncated)...]
2025-05-02 15:44:29.305 DEBUG 12572 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:44:29.305 DEBUG 12572 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data={roomNumber=401, lastCleanTime=2025-05-02T15:44:29.271396600, notes=, needCleaning=f (truncated)...]
2025-05-02 15:44:29.305 DEBUG 12572 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-05-02 15:44:29.305 DEBUG 12572 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:44:29.482 DEBUG 12572 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/rooms
2025-05-02 15:44:29.482 DEBUG 12572 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:44:29.482 DEBUG 12572 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:44:29.482 DEBUG 12572 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/rooms] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 15:44:29.482 DEBUG 12572 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/rooms
2025-05-02 15:44:29.482 DEBUG 12572 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/rooms", parameters={}
2025-05-02 15:44:29.482 DEBUG 12572 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminRoomController#getAllRooms(RoomFilterDTO)
2025-05-02 15:44:29.499 DEBUG 12572 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:44:29.499 DEBUG 12572 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data={total=2, list=[{roomNumber=501, lastCleanTime=2025-05-01T15:04:43, notes=, needClea (truncated)...]
2025-05-02 15:44:29.499 DEBUG 12572 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:44:29.499 DEBUG 12572 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:44:29.625 DEBUG 12572 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/roomtypes
2025-05-02 15:44:29.625 DEBUG 12572 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:44:29.625 DEBUG 12572 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:44:29.635 DEBUG 12572 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/roomtypes] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 15:44:29.635 DEBUG 12572 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/roomtypes
2025-05-02 15:44:29.635 DEBUG 12572 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/roomtypes", parameters={}
2025-05-02 15:44:29.635 DEBUG 12572 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getAllRoomTypes()
2025-05-02 15:44:29.641 DEBUG 12572 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:44:29.642 DEBUG 12572 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{amenities=无限量杜蕾斯、矿泉水、咖啡、茶叶等, name=行政套房, description=高端奢华行政房, id=1, basePrice=899.0 (truncated)...]
2025-05-02 15:44:29.643 DEBUG 12572 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:44:29.643 DEBUG 12572 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:59:00.919 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/rooms
2025-05-02 15:59:00.920 DEBUG 12572 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:59:00.924 DEBUG 12572 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:59:00.925 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/rooms] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 15:59:00.925 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/rooms
2025-05-02 15:59:00.925 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/rooms", parameters={}
2025-05-02 15:59:00.925 DEBUG 12572 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminRoomController#getAllRooms(RoomFilterDTO)
2025-05-02 15:59:00.936 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:59:00.936 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data={total=2, list=[{roomNumber=501, lastCleanTime=2025-05-01T15:04:43, notes=, needClea (truncated)...]
2025-05-02 15:59:00.937 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:59:00.937 DEBUG 12572 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:59:00.999 DEBUG 12572 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/roomtypes
2025-05-02 15:59:01.000 DEBUG 12572 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:59:01.005 DEBUG 12572 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:59:01.006 DEBUG 12572 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/roomtypes] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 15:59:01.006 DEBUG 12572 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/roomtypes
2025-05-02 15:59:01.006 DEBUG 12572 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/roomtypes", parameters={}
2025-05-02 15:59:01.007 DEBUG 12572 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getAllRoomTypes()
2025-05-02 15:59:01.012 DEBUG 12572 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:59:01.013 DEBUG 12572 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{amenities=无限量杜蕾斯、矿泉水、咖啡、茶叶等, name=行政套房, description=高端奢华行政房, id=1, basePrice=899.0 (truncated)...]
2025-05-02 15:59:01.015 DEBUG 12572 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:59:01.015 DEBUG 12572 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:59:12.176 DEBUG 12572 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/rooms
2025-05-02 15:59:12.177 DEBUG 12572 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:59:12.181 DEBUG 12572 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:59:12.182 DEBUG 12572 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/rooms] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 15:59:12.182 DEBUG 12572 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/rooms
2025-05-02 15:59:12.182 DEBUG 12572 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/rooms", parameters={}
2025-05-02 15:59:12.182 DEBUG 12572 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminRoomController#getAllRooms(RoomFilterDTO)
2025-05-02 15:59:12.194 DEBUG 12572 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:59:12.194 DEBUG 12572 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data={total=2, list=[{roomNumber=501, lastCleanTime=2025-05-01T15:04:43, notes=, needClea (truncated)...]
2025-05-02 15:59:12.195 DEBUG 12572 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:59:12.195 DEBUG 12572 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 15:59:12.231 DEBUG 12572 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/roomtypes
2025-05-02 15:59:12.232 DEBUG 12572 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 15:59:12.237 DEBUG 12572 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 15:59:12.238 DEBUG 12572 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/roomtypes] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 15:59:12.238 DEBUG 12572 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/roomtypes
2025-05-02 15:59:12.238 DEBUG 12572 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/roomtypes", parameters={}
2025-05-02 15:59:12.238 DEBUG 12572 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getAllRoomTypes()
2025-05-02 15:59:12.245 DEBUG 12572 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 15:59:12.245 DEBUG 12572 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{amenities=无限量杜蕾斯、矿泉水、咖啡、茶叶等, name=行政套房, description=高端奢华行政房, id=1, basePrice=899.0 (truncated)...]
2025-05-02 15:59:12.247 DEBUG 12572 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 15:59:12.247 DEBUG 12572 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:07:29.819 DEBUG 12572 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users?page=1&pageSize=10&username=&phone=&status=
2025-05-02 16:07:29.820 DEBUG 12572 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:07:29.824 DEBUG 12572 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:07:29.824 DEBUG 12572 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users?page=1&pageSize=10&username=&phone=&status=] with attributes [authenticated]
2025-05-02 16:07:29.824 DEBUG 12572 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users?page=1&pageSize=10&username=&phone=&status=
2025-05-02 16:07:29.826 DEBUG 12572 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users?page=1&pageSize=10&username=&phone=&status=", parameters={masked}
2025-05-02 16:07:29.826 DEBUG 12572 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getAllUsers(int, int, String, String, String, String)
2025-05-02 16:07:29.836 DEBUG 12572 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:07:29.836 DEBUG 12572 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data={total=17, users=[UserDTO(id=17, username=保洁7号阿 (truncated)...]
2025-05-02 16:07:29.838 DEBUG 12572 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:07:29.838 DEBUG 12572 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:07:30.348 DEBUG 12572 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/staff?page=0&pageSize=10
2025-05-02 16:07:30.348 DEBUG 12572 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:07:30.352 DEBUG 12572 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:07:30.352 DEBUG 12572 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users/staff?page=0&pageSize=10] with attributes [authenticated]
2025-05-02 16:07:30.352 DEBUG 12572 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/staff?page=0&pageSize=10
2025-05-02 16:07:30.352 DEBUG 12572 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/staff?page=0&pageSize=10", parameters={masked}
2025-05-02 16:07:30.353 DEBUG 12572 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getAllStaffPaginated(int, int, String, String, String)
2025-05-02 16:07:30.359 DEBUG 12572 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:07:30.359 DEBUG 12572 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data={total=5, users=[UserDTO(id=17, username=保洁7号阿姨 (truncated)...]
2025-05-02 16:07:30.360 DEBUG 12572 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:07:30.361 DEBUG 12572 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:07:30.846 DEBUG 12572 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/rooms
2025-05-02 16:07:30.847 DEBUG 12572 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:07:30.850 DEBUG 12572 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:07:30.850 DEBUG 12572 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/rooms] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 16:07:30.850 DEBUG 12572 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/rooms
2025-05-02 16:07:30.851 DEBUG 12572 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/rooms", parameters={}
2025-05-02 16:07:30.851 DEBUG 12572 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminRoomController#getAllRooms(RoomFilterDTO)
2025-05-02 16:07:30.859 DEBUG 12572 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:07:30.860 DEBUG 12572 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data={total=2, list=[{roomNumber=501, lastCleanTime=2025-05-01T15:04:43, notes=, needClea (truncated)...]
2025-05-02 16:07:30.860 DEBUG 12572 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:07:30.861 DEBUG 12572 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:07:30.886 DEBUG 12572 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/roomtypes
2025-05-02 16:07:30.886 DEBUG 12572 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:07:30.891 DEBUG 12572 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:07:30.891 DEBUG 12572 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/roomtypes] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 16:07:30.891 DEBUG 12572 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/roomtypes
2025-05-02 16:07:30.892 DEBUG 12572 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/roomtypes", parameters={}
2025-05-02 16:07:30.892 DEBUG 12572 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getAllRoomTypes()
2025-05-02 16:07:30.898 DEBUG 12572 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:07:30.898 DEBUG 12572 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{amenities=无限量杜蕾斯、矿泉水、咖啡、茶叶等, name=行政套房, description=高端奢华行政房, id=1, basePrice=899.0 (truncated)...]
2025-05-02 16:07:30.899 DEBUG 12572 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:07:30.899 DEBUG 12572 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:07:31.354 DEBUG 12572 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/invitation-codes
2025-05-02 16:07:31.354 DEBUG 12572 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:07:31.357 DEBUG 12572 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:07:31.358 DEBUG 12572 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/invitation-codes] with attributes [authenticated]
2025-05-02 16:07:31.358 DEBUG 12572 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/invitation-codes
2025-05-02 16:07:31.358 DEBUG 12572 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/invitation-codes", parameters={}
2025-05-02 16:07:31.358 DEBUG 12572 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#getValidInvitationCodes()
2025-05-02 16:07:31.369 DEBUG 12572 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:07:31.369 DEBUG 12572 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[InvitationCode(id=1, code=6YJP8NZ5, role=RECEPTIONIST, maxUses=1, currentUses=0, expiryDate=2025-05 (truncated)...]
2025-05-02 16:07:31.375 DEBUG 12572 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:07:31.376 DEBUG 12572 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:10:10.238 DEBUG 12572 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-02 16:10:10.239 DEBUG 12572 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:10:10.243 DEBUG 12572 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:10:10.244 DEBUG 12572 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 16:10:10.244 DEBUG 12572 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-02 16:10:10.244 DEBUG 12572 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-02 16:10:10.245 DEBUG 12572 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-02 16:10:10.304 DEBUG 12572 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:10:10.305 DEBUG 12572 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{todayRevenue=0, monthlyRevenue=0, upcomingReservations=0, totalUsers=17, availableRooms=2, newUsers (truncated)...]
2025-05-02 16:10:10.306 DEBUG 12572 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:10:10.306 DEBUG 12572 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:10:47.739 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-02 16:10:47.739 DEBUG 12572 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:10:47.743 DEBUG 12572 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:10:47.744 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 16:10:47.744 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-02 16:10:47.744 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-02 16:10:47.745 DEBUG 12572 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-02 16:10:47.798 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:10:47.798 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{todayRevenue=0, monthlyRevenue=0, upcomingReservations=0, totalUsers=17, availableRooms=2, newUsers (truncated)...]
2025-05-02 16:10:47.799 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:10:47.799 DEBUG 12572 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:10:53.103 DEBUG 12572 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users?page=1&pageSize=10&username=&phone=&status=
2025-05-02 16:10:53.103 DEBUG 12572 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:10:53.107 DEBUG 12572 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:10:53.107 DEBUG 12572 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users?page=1&pageSize=10&username=&phone=&status=] with attributes [authenticated]
2025-05-02 16:10:53.108 DEBUG 12572 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users?page=1&pageSize=10&username=&phone=&status=
2025-05-02 16:10:53.108 DEBUG 12572 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users?page=1&pageSize=10&username=&phone=&status=", parameters={masked}
2025-05-02 16:10:53.108 DEBUG 12572 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getAllUsers(int, int, String, String, String, String)
2025-05-02 16:10:53.119 DEBUG 12572 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:10:53.119 DEBUG 12572 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data={total=17, users=[UserDTO(id=17, username=保洁7号阿 (truncated)...]
2025-05-02 16:10:53.120 DEBUG 12572 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:10:53.121 DEBUG 12572 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:10:53.963 DEBUG 12572 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/staff?page=0&pageSize=10
2025-05-02 16:10:53.963 DEBUG 12572 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:10:53.966 DEBUG 12572 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:10:53.967 DEBUG 12572 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users/staff?page=0&pageSize=10] with attributes [authenticated]
2025-05-02 16:10:53.967 DEBUG 12572 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/staff?page=0&pageSize=10
2025-05-02 16:10:53.968 DEBUG 12572 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/staff?page=0&pageSize=10", parameters={masked}
2025-05-02 16:10:53.968 DEBUG 12572 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getAllStaffPaginated(int, int, String, String, String)
2025-05-02 16:10:53.974 DEBUG 12572 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:10:53.974 DEBUG 12572 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data={total=5, users=[UserDTO(id=17, username=保洁7号阿姨 (truncated)...]
2025-05-02 16:10:53.975 DEBUG 12572 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:10:53.975 DEBUG 12572 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:10:54.460 DEBUG 12572 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/rooms
2025-05-02 16:10:54.460 DEBUG 12572 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:10:54.463 DEBUG 12572 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:10:54.464 DEBUG 12572 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/rooms] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 16:10:54.464 DEBUG 12572 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/rooms
2025-05-02 16:10:54.464 DEBUG 12572 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/rooms", parameters={}
2025-05-02 16:10:54.464 DEBUG 12572 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminRoomController#getAllRooms(RoomFilterDTO)
2025-05-02 16:10:54.474 DEBUG 12572 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:10:54.475 DEBUG 12572 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data={total=2, list=[{roomNumber=501, lastCleanTime=2025-05-01T15:04:43, notes=, needClea (truncated)...]
2025-05-02 16:10:54.475 DEBUG 12572 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:10:54.476 DEBUG 12572 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:10:54.503 DEBUG 12572 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/roomtypes
2025-05-02 16:10:54.503 DEBUG 12572 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:10:54.507 DEBUG 12572 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:10:54.507 DEBUG 12572 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/roomtypes] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 16:10:54.507 DEBUG 12572 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/roomtypes
2025-05-02 16:10:54.507 DEBUG 12572 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/roomtypes", parameters={}
2025-05-02 16:10:54.507 DEBUG 12572 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getAllRoomTypes()
2025-05-02 16:10:54.513 DEBUG 12572 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:10:54.513 DEBUG 12572 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{amenities=无限量杜蕾斯、矿泉水、咖啡、茶叶等, name=行政套房, description=高端奢华行政房, id=1, basePrice=899.0 (truncated)...]
2025-05-02 16:10:54.515 DEBUG 12572 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:10:54.515 DEBUG 12572 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:10:55.431 DEBUG 12572 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/invitation-codes
2025-05-02 16:10:55.431 DEBUG 12572 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:10:55.438 DEBUG 12572 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:10:55.438 DEBUG 12572 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/invitation-codes] with attributes [authenticated]
2025-05-02 16:10:55.438 DEBUG 12572 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/invitation-codes
2025-05-02 16:10:55.438 DEBUG 12572 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/invitation-codes", parameters={}
2025-05-02 16:10:55.438 DEBUG 12572 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#getValidInvitationCodes()
2025-05-02 16:10:55.445 DEBUG 12572 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:10:55.445 DEBUG 12572 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[InvitationCode(id=1, code=6YJP8NZ5, role=RECEPTIONIST, maxUses=1, currentUses=0, expiryDate=2025-05 (truncated)...]
2025-05-02 16:10:55.445 DEBUG 12572 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:10:55.445 DEBUG 12572 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:11:02.018 DEBUG 12572 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/invitation-codes
2025-05-02 16:11:02.018 DEBUG 12572 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:11:02.022 DEBUG 12572 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:11:02.023 DEBUG 12572 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/invitation-codes] with attributes [authenticated]
2025-05-02 16:11:02.023 DEBUG 12572 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/invitation-codes
2025-05-02 16:11:02.023 DEBUG 12572 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/invitation-codes", parameters={}
2025-05-02 16:11:02.023 DEBUG 12572 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#getValidInvitationCodes()
2025-05-02 16:11:02.027 DEBUG 12572 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:11:02.027 DEBUG 12572 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[InvitationCode(id=1, code=6YJP8NZ5, role=RECEPTIONIST, maxUses=1, currentUses=0, expiryDate=2025-05 (truncated)...]
2025-05-02 16:11:02.028 DEBUG 12572 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:11:02.028 DEBUG 12572 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:11:12.235 DEBUG 12572 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-02 16:11:12.235 DEBUG 12572 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:11:12.235 DEBUG 12572 --- [http-nio-8090-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 16:11:12.235 DEBUG 12572 --- [http-nio-8090-exec-8] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 392DE3288BDD9A64697788511D190ED3
2025-05-02 16:11:12.235 DEBUG 12572 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-02 16:11:12.235 DEBUG 12572 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-02 16:11:12.235 DEBUG 12572 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-02 16:11:12.235 DEBUG 12572 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-02 16:11:12.235 DEBUG 12572 --- [http-nio-8090-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=15698758866, password=15698758866)]
2025-05-02 16:11:12.387 DEBUG 12572 --- [http-nio-8090-exec-8] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-02 16:11:12.404 DEBUG 12572 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:11:12.404 DEBUG 12572 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=17, username=保洁7号阿姨, role=CLEANER, token=eyJhbGciOi (truncated)...]
2025-05-02 16:11:12.404 DEBUG 12572 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:11:12.404 DEBUG 12572 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:18:28.544 DEBUG 12572 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/invitation-codes
2025-05-02 16:18:28.544 DEBUG 12572 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:18:28.550 DEBUG 12572 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:18:28.551 DEBUG 12572 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/invitation-codes] with attributes [authenticated]
2025-05-02 16:18:28.551 DEBUG 12572 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/invitation-codes
2025-05-02 16:18:28.551 DEBUG 12572 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/invitation-codes", parameters={}
2025-05-02 16:18:28.552 DEBUG 12572 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#getValidInvitationCodes()
2025-05-02 16:18:28.558 DEBUG 12572 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:18:28.559 DEBUG 12572 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[InvitationCode(id=1, code=6YJP8NZ5, role=RECEPTIONIST, maxUses=1, currentUses=0, expiryDate=2025-05 (truncated)...]
2025-05-02 16:18:28.560 DEBUG 12572 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:18:28.561 DEBUG 12572 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:18:40.117 DEBUG 12572 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/invitation-codes/all
2025-05-02 16:18:40.117 DEBUG 12572 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:18:40.121 DEBUG 12572 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:18:40.121 DEBUG 12572 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/invitation-codes/all] with attributes [authenticated]
2025-05-02 16:18:40.121 DEBUG 12572 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/invitation-codes/all
2025-05-02 16:18:40.122 DEBUG 12572 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/invitation-codes/all", parameters={}
2025-05-02 16:18:40.123 DEBUG 12572 --- [http-nio-8090-exec-10] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-05-02 16:18:40.127 DEBUG 12572 --- [http-nio-8090-exec-10] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2025-05-02 16:18:40.127 DEBUG 12572 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND
2025-05-02 16:18:40.127 DEBUG 12572 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:18:40.127 DEBUG 12572 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /index.html
2025-05-02 16:18:40.128 DEBUG 12572 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:18:40.128 DEBUG 12572 --- [http-nio-8090-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 16:18:40.128 DEBUG 12572 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /index.html
2025-05-02 16:18:40.129 DEBUG 12572 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/index.html", parameters={}
2025-05-02 16:18:40.129 DEBUG 12572 --- [http-nio-8090-exec-10] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [static/]]
2025-05-02 16:18:40.133 DEBUG 12572 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 404
2025-05-02 16:18:40.133 DEBUG 12572 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:19:09.757 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/invitation-codes/all
2025-05-02 16:19:09.758 DEBUG 12572 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:19:09.761 DEBUG 12572 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:19:09.762 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/invitation-codes/all] with attributes [authenticated]
2025-05-02 16:19:09.762 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/invitation-codes/all
2025-05-02 16:19:09.762 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/invitation-codes/all", parameters={}
2025-05-02 16:19:09.762 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-05-02 16:19:09.764 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2025-05-02 16:19:09.765 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND
2025-05-02 16:19:09.765 DEBUG 12572 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:19:09.765 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /index.html
2025-05-02 16:19:09.765 DEBUG 12572 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:19:09.765 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 16:19:09.766 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /index.html
2025-05-02 16:19:09.766 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/index.html", parameters={}
2025-05-02 16:19:09.766 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [static/]]
2025-05-02 16:19:09.770 DEBUG 12572 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 404
2025-05-02 16:19:09.774 DEBUG 12572 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:19:15.508 DEBUG 12572 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/invitation-codes/all
2025-05-02 16:19:15.508 DEBUG 12572 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:19:15.511 DEBUG 12572 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:19:15.511 DEBUG 12572 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/invitation-codes/all] with attributes [authenticated]
2025-05-02 16:19:15.512 DEBUG 12572 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/invitation-codes/all
2025-05-02 16:19:15.512 DEBUG 12572 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/invitation-codes/all", parameters={}
2025-05-02 16:19:15.513 DEBUG 12572 --- [http-nio-8090-exec-2] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-05-02 16:19:15.515 DEBUG 12572 --- [http-nio-8090-exec-2] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2025-05-02 16:19:15.515 DEBUG 12572 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND
2025-05-02 16:19:15.515 DEBUG 12572 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:19:15.516 DEBUG 12572 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /index.html
2025-05-02 16:19:15.516 DEBUG 12572 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:19:15.516 DEBUG 12572 --- [http-nio-8090-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 16:19:15.516 DEBUG 12572 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /index.html
2025-05-02 16:19:15.516 DEBUG 12572 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/index.html", parameters={}
2025-05-02 16:19:15.516 DEBUG 12572 --- [http-nio-8090-exec-2] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [static/]]
2025-05-02 16:19:15.520 DEBUG 12572 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 404
2025-05-02 16:19:15.520 DEBUG 12572 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:19:20.080  INFO 12572 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-02 16:19:20.083  INFO 12572 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-02 16:19:20.092  INFO 12572 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-02 16:19:31.224  INFO 19696 --- [main] com.hotel.HotelManagementApplication     : Starting HotelManagementApplication using Java 18.0.2 on LAPTOP-HeYIXianJun with PID 19696 (E:\桌面\javahotel\heqing99\target\classes started by 上善若水 in E:\桌面\javahotel\heqing99)
2025-05-02 16:19:31.226 DEBUG 19696 --- [main] com.hotel.HotelManagementApplication     : Running with Spring Boot v2.7.0, Spring v5.3.20
2025-05-02 16:19:31.227  INFO 19696 --- [main] com.hotel.HotelManagementApplication     : No active profile set, falling back to 1 default profile: "default"
2025-05-02 16:19:32.125  INFO 19696 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-02 16:19:32.341  INFO 19696 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 206 ms. Found 19 JPA repository interfaces.
2025-05-02 16:19:32.886  INFO 19696 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8090 (http)
2025-05-02 16:19:32.887  INFO 19696 --- [main] o.a.catalina.core.AprLifecycleListener   : Loaded Apache Tomcat Native library [1.2.30] using APR version [1.7.0].
2025-05-02 16:19:32.887  INFO 19696 --- [main] o.a.catalina.core.AprLifecycleListener   : APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true], UDS [true].
2025-05-02 16:19:32.888  INFO 19696 --- [main] o.a.catalina.core.AprLifecycleListener   : APR/OpenSSL configuration: useAprConnector [false], useOpenSSL [true]
2025-05-02 16:19:32.895  INFO 19696 --- [main] o.a.catalina.core.AprLifecycleListener   : OpenSSL successfully initialized [OpenSSL 1.1.1k  25 Mar 2021]
2025-05-02 16:19:32.904  INFO 19696 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-02 16:19:32.904  INFO 19696 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-05-02 16:19:33.037  INFO 19696 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-02 16:19:33.037  INFO 19696 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1764 ms
2025-05-02 16:19:33.197  INFO 19696 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-02 16:19:33.250  INFO 19696 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.9.Final
2025-05-02 16:19:33.408  INFO 19696 --- [main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2025-05-02 16:19:33.510  INFO 19696 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-02 16:19:33.822  INFO 19696 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-02 16:19:33.837  INFO 19696 --- [main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2025-05-02 16:19:34.906  INFO 19696 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-05-02 16:19:34.915  INFO 19696 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-02 16:19:35.368 DEBUG 19696 --- [main] c.hotel.config.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2025-05-02 16:19:35.368 DEBUG 19696 --- [main] o.springframework.web.filter.CorsFilter  : Filter 'corsFilter' configured for use
2025-05-02 16:19:36.162 DEBUG 19696 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.html']
2025-05-02 16:19:36.163 DEBUG 19696 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.js']
2025-05-02 16:19:36.163 DEBUG 19696 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.css']
2025-05-02 16:19:36.163 DEBUG 19696 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.ico']
2025-05-02 16:19:36.163 DEBUG 19696 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/assets/**']
2025-05-02 16:19:36.163 DEBUG 19696 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/']
2025-05-02 16:19:36.163 DEBUG 19696 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/about']
2025-05-02 16:19:36.163 DEBUG 19696 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/rooms']
2025-05-02 16:19:36.163 DEBUG 19696 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/room/**']
2025-05-02 16:19:36.163 DEBUG 19696 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/contact']
2025-05-02 16:19:36.163 DEBUG 19696 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/booking']
2025-05-02 16:19:36.163 DEBUG 19696 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/register']
2025-05-02 16:19:36.163 DEBUG 19696 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/login']
2025-05-02 16:19:36.163 DEBUG 19696 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/user/**']
2025-05-02 16:19:36.163 DEBUG 19696 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin']
2025-05-02 16:19:36.163 DEBUG 19696 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/login']
2025-05-02 16:19:36.173 DEBUG 19696 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/dashboard/**']
2025-05-02 16:19:36.173 DEBUG 19696 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/users/**']
2025-05-02 16:19:36.173 DEBUG 19696 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/staff/**']
2025-05-02 16:19:36.173 DEBUG 19696 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/reception/**']
2025-05-02 16:19:36.173 DEBUG 19696 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/cleaning/**']
2025-05-02 16:19:36.174 DEBUG 19696 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/login', POST]
2025-05-02 16:19:36.174 DEBUG 19696 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/login', GET]
2025-05-02 16:19:36.174 DEBUG 19696 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/auth/login', POST]
2025-05-02 16:19:36.174 DEBUG 19696 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/refresh-token', POST]
2025-05-02 16:19:36.174 DEBUG 19696 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/register', POST]
2025-05-02 16:19:36.174 DEBUG 19696 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/login', POST]
2025-05-02 16:19:36.174 DEBUG 19696 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/check-username', GET]
2025-05-02 16:19:36.174 DEBUG 19696 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/check-phone', GET]
2025-05-02 16:19:36.175 DEBUG 19696 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/invitation-codes/validate/**', GET]
2025-05-02 16:19:36.175 DEBUG 19696 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/register/staff', POST]
2025-05-02 16:19:36.175 DEBUG 19696 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for Ant [pattern='/api/users/profile', GET]
2025-05-02 16:19:36.175 DEBUG 19696 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for Ant [pattern='/api/users/{id}', PUT]
2025-05-02 16:19:36.175 DEBUG 19696 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for Ant [pattern='/api/users/{id}/password', PUT]
2025-05-02 16:19:36.175 DEBUG 19696 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasRole('ROLE_ADMIN')] for Ant [pattern='/api/admin/**']
2025-05-02 16:19:36.177 DEBUG 19696 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasRole('ROLE_ADMIN')] for Ant [pattern='/api/users/{id}', DELETE]
2025-05-02 16:19:36.177 DEBUG 19696 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/**', OPTIONS]
2025-05-02 16:19:36.177 DEBUG 19696 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for any request
2025-05-02 16:19:36.190  INFO 19696 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@b97f195, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@408bb173, org.springframework.security.web.context.SecurityContextPersistenceFilter@52a3eba3, org.springframework.security.web.header.HeaderWriterFilter@29767156, org.springframework.web.filter.CorsFilter@7db70494, org.springframework.security.web.authentication.logout.LogoutFilter@6d71f296, com.hotel.config.JwtAuthenticationFilter@70cdbd18, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7ec729be, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4f7da3a2, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@360d0c7a, org.springframework.security.web.session.SessionManagementFilter@764d54a0, org.springframework.security.web.access.ExceptionTranslationFilter@2b33f7a0, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@3368cf02]
2025-05-02 16:19:36.230  WARN 19696 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-02 16:19:36.352 DEBUG 19696 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-05-02 16:19:36.374  INFO 19696 --- [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [static/index.html]
2025-05-02 16:19:36.438 DEBUG 19696 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 164 mappings in 'requestMappingHandlerMapping'
2025-05-02 16:19:36.444 DEBUG 19696 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/admin, /admin/login, /admin/dashboard, /admin/users, /admin/staff, /admin/rooms, /admin/reception/bookings, /admin/reception/checkin, /admin/reception/visitors, /admin/cleaning/tasks, /admin/cleaning/records, /login] in 'viewControllerHandlerMapping'
2025-05-02 16:19:36.458 DEBUG 19696 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /assets/**, /*.js, /*.css, /favicon.ico, /index.html, /images/**, /assets/images/**] in 'resourceHandlerMapping'
2025-05-02 16:19:36.466 DEBUG 19696 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-05-02 16:19:36.606  INFO 19696 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8090 (http) with context path ''
2025-05-02 16:19:36.616  INFO 19696 --- [main] com.hotel.HotelManagementApplication     : Started HotelManagementApplication in 5.891 seconds (JVM running for 6.683)
2025-05-02 16:19:50.077  INFO 19696 --- [http-nio-8090-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-02 16:19:50.078  INFO 19696 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-02 16:19:50.078 DEBUG 19696 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-05-02 16:19:50.078 DEBUG 19696 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-05-02 16:19:50.078 DEBUG 19696 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-05-02 16:19:50.079 DEBUG 19696 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@3be60847
2025-05-02 16:19:50.080 DEBUG 19696 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@18bab95b
2025-05-02 16:19:50.080 DEBUG 19696 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-05-02 16:19:50.081  INFO 19696 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2025-05-02 16:19:50.104 DEBUG 19696 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/invitation-codes/all
2025-05-02 16:19:50.111 DEBUG 19696 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:19:50.195 DEBUG 19696 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:19:50.203 DEBUG 19696 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/invitation-codes/all] with attributes [authenticated]
2025-05-02 16:19:50.204 DEBUG 19696 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/invitation-codes/all
2025-05-02 16:19:50.207 DEBUG 19696 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/invitation-codes/all", parameters={}
2025-05-02 16:19:50.212 DEBUG 19696 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#getAllInvitationCodes()
2025-05-02 16:19:50.298 DEBUG 19696 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:19:50.299 DEBUG 19696 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[InvitationCode(id=8, code=WXA50X88, role=CLEANER, maxUses=1, currentUses=0, expiryDate=2025-06-01T2 (truncated)...]
2025-05-02 16:19:50.373 DEBUG 19696 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:19:50.375 DEBUG 19696 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:20:09.831 DEBUG 19696 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/invitation-codes
2025-05-02 16:20:09.832 DEBUG 19696 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:20:09.845 DEBUG 19696 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:20:09.845 DEBUG 19696 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/invitation-codes] with attributes [authenticated]
2025-05-02 16:20:09.846 DEBUG 19696 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/invitation-codes
2025-05-02 16:20:09.846 DEBUG 19696 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/invitation-codes", parameters={}
2025-05-02 16:20:09.846 DEBUG 19696 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#createInvitationCode(Map)
2025-05-02 16:20:09.857 DEBUG 19696 --- [http-nio-8090-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{role=CLEANER, maxUses=1, expiryDate=2025-06-01T15:59:59.999Z}]
2025-05-02 16:20:09.914 DEBUG 19696 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:20:09.914 DEBUG 19696 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [InvitationCode(id=9, code=QH8AYXB7, role=CLEANER, maxUses=1, currentUses=0, expiryDate=2025-06-01T23 (truncated)...]
2025-05-02 16:20:09.914 DEBUG 19696 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:20:09.914 DEBUG 19696 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:20:09.930 DEBUG 19696 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/invitation-codes
2025-05-02 16:20:09.930 DEBUG 19696 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:20:09.935 DEBUG 19696 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:20:09.935 DEBUG 19696 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/invitation-codes] with attributes [authenticated]
2025-05-02 16:20:09.935 DEBUG 19696 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/invitation-codes
2025-05-02 16:20:09.935 DEBUG 19696 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/invitation-codes", parameters={}
2025-05-02 16:20:09.935 DEBUG 19696 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#createInvitationCode(Map)
2025-05-02 16:20:09.936 DEBUG 19696 --- [http-nio-8090-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{role=CLEANER, maxUses=1, expiryDate=2025-06-01T15:59:59.999Z}]
2025-05-02 16:20:09.945 DEBUG 19696 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:20:09.945 DEBUG 19696 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [InvitationCode(id=10, code=UCLJNNDX, role=CLEANER, maxUses=1, currentUses=0, expiryDate=2025-06-01T2 (truncated)...]
2025-05-02 16:20:09.946 DEBUG 19696 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:20:09.946 DEBUG 19696 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:20:09.953 DEBUG 19696 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/invitation-codes
2025-05-02 16:20:09.954 DEBUG 19696 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:20:09.958 DEBUG 19696 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:20:09.958 DEBUG 19696 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/invitation-codes] with attributes [authenticated]
2025-05-02 16:20:09.959 DEBUG 19696 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/invitation-codes
2025-05-02 16:20:09.959 DEBUG 19696 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : POST "/api/invitation-codes", parameters={}
2025-05-02 16:20:09.959 DEBUG 19696 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#createInvitationCode(Map)
2025-05-02 16:20:09.960 DEBUG 19696 --- [http-nio-8090-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{role=CLEANER, maxUses=1, expiryDate=2025-06-01T15:59:59.999Z}]
2025-05-02 16:20:09.967 DEBUG 19696 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:20:09.967 DEBUG 19696 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [InvitationCode(id=11, code=VMT2FGC6, role=CLEANER, maxUses=1, currentUses=0, expiryDate=2025-06-01T2 (truncated)...]
2025-05-02 16:20:09.969 DEBUG 19696 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:20:09.969 DEBUG 19696 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:20:10.281 DEBUG 19696 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/invitation-codes
2025-05-02 16:20:10.281 DEBUG 19696 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:20:10.286 DEBUG 19696 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:20:10.286 DEBUG 19696 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/invitation-codes] with attributes [authenticated]
2025-05-02 16:20:10.286 DEBUG 19696 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/invitation-codes
2025-05-02 16:20:10.286 DEBUG 19696 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/invitation-codes", parameters={}
2025-05-02 16:20:10.287 DEBUG 19696 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#createInvitationCode(Map)
2025-05-02 16:20:10.287 DEBUG 19696 --- [http-nio-8090-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{role=CLEANER, maxUses=1, expiryDate=2025-06-01T15:59:59.999Z}]
2025-05-02 16:20:10.304 DEBUG 19696 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:20:10.304 DEBUG 19696 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [InvitationCode(id=12, code=L1R1O7TC, role=CLEANER, maxUses=1, currentUses=0, expiryDate=2025-06-01T2 (truncated)...]
2025-05-02 16:20:10.305 DEBUG 19696 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:20:10.305 DEBUG 19696 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:20:10.538 DEBUG 19696 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/invitation-codes/all
2025-05-02 16:20:10.538 DEBUG 19696 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:20:10.542 DEBUG 19696 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:20:10.542 DEBUG 19696 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/invitation-codes/all] with attributes [authenticated]
2025-05-02 16:20:10.542 DEBUG 19696 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/invitation-codes/all
2025-05-02 16:20:10.542 DEBUG 19696 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/invitation-codes/all", parameters={}
2025-05-02 16:20:10.542 DEBUG 19696 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#getAllInvitationCodes()
2025-05-02 16:20:10.556 DEBUG 19696 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:20:10.556 DEBUG 19696 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[InvitationCode(id=12, code=L1R1O7TC, role=CLEANER, maxUses=1, currentUses=0, expiryDate=2025-06-01T (truncated)...]
2025-05-02 16:20:10.558 DEBUG 19696 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:20:10.558 DEBUG 19696 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:21:31.652 DEBUG 19696 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-02 16:21:31.652 DEBUG 19696 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:21:31.657 DEBUG 19696 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:21:31.663 DEBUG 19696 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 16:21:31.663 DEBUG 19696 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-02 16:21:31.664 DEBUG 19696 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-02 16:21:31.664 DEBUG 19696 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-02 16:21:31.773 DEBUG 19696 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:21:31.773 DEBUG 19696 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{todayRevenue=0, monthlyRevenue=0, upcomingReservations=0, totalUsers=17, availableRooms=2, newUsers (truncated)...]
2025-05-02 16:21:31.787 DEBUG 19696 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:21:31.787 DEBUG 19696 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:21:40.085 DEBUG 19696 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users?page=1&pageSize=10&username=&phone=&status=
2025-05-02 16:21:40.085 DEBUG 19696 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:21:40.095 DEBUG 19696 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:21:40.095 DEBUG 19696 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users?page=1&pageSize=10&username=&phone=&status=] with attributes [authenticated]
2025-05-02 16:21:40.095 DEBUG 19696 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users?page=1&pageSize=10&username=&phone=&status=
2025-05-02 16:21:40.096 DEBUG 19696 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users?page=1&pageSize=10&username=&phone=&status=", parameters={masked}
2025-05-02 16:21:40.096 DEBUG 19696 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getAllUsers(int, int, String, String, String, String)
2025-05-02 16:21:40.136 DEBUG 19696 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:21:40.137 DEBUG 19696 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data={total=17, users=[UserDTO(id=17, username=保洁7号阿 (truncated)...]
2025-05-02 16:21:40.139 DEBUG 19696 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:21:40.139 DEBUG 19696 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:21:42.233 DEBUG 19696 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/staff?page=0&pageSize=10
2025-05-02 16:21:42.234 DEBUG 19696 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:21:42.238 DEBUG 19696 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:21:42.239 DEBUG 19696 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users/staff?page=0&pageSize=10] with attributes [authenticated]
2025-05-02 16:21:42.239 DEBUG 19696 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/staff?page=0&pageSize=10
2025-05-02 16:21:42.240 DEBUG 19696 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/staff?page=0&pageSize=10", parameters={masked}
2025-05-02 16:21:42.240 DEBUG 19696 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getAllStaffPaginated(int, int, String, String, String)
2025-05-02 16:21:42.253 DEBUG 19696 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:21:42.253 DEBUG 19696 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data={total=5, users=[UserDTO(id=17, username=保洁7号阿姨 (truncated)...]
2025-05-02 16:21:42.253 DEBUG 19696 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:21:42.256 DEBUG 19696 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:21:42.996 DEBUG 19696 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/rooms
2025-05-02 16:21:42.996 DEBUG 19696 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:21:43.002 DEBUG 19696 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:21:43.002 DEBUG 19696 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/rooms] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 16:21:43.002 DEBUG 19696 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/rooms
2025-05-02 16:21:43.002 DEBUG 19696 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/rooms", parameters={}
2025-05-02 16:21:43.002 DEBUG 19696 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminRoomController#getAllRooms(RoomFilterDTO)
2025-05-02 16:21:43.022 DEBUG 19696 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:21:43.022 DEBUG 19696 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data={total=2, list=[{roomNumber=501, lastCleanTime=2025-05-01T15:04:43, notes=, needClea (truncated)...]
2025-05-02 16:21:43.022 DEBUG 19696 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:21:43.022 DEBUG 19696 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:21:43.266 DEBUG 19696 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/roomtypes
2025-05-02 16:21:43.266 DEBUG 19696 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:21:43.266 DEBUG 19696 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:21:43.266 DEBUG 19696 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/roomtypes] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 16:21:43.266 DEBUG 19696 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/roomtypes
2025-05-02 16:21:43.266 DEBUG 19696 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/roomtypes", parameters={}
2025-05-02 16:21:43.266 DEBUG 19696 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getAllRoomTypes()
2025-05-02 16:21:43.277 DEBUG 19696 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:21:43.277 DEBUG 19696 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{amenities=无限量杜蕾斯、矿泉水、咖啡、茶叶等, name=行政套房, description=高端奢华行政房, id=1, basePrice=899.0 (truncated)...]
2025-05-02 16:21:43.277 DEBUG 19696 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:21:43.277 DEBUG 19696 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:30:54.092 DEBUG 19696 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/rooms
2025-05-02 16:30:54.092 DEBUG 19696 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:30:54.098 DEBUG 19696 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:30:54.099 DEBUG 19696 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/rooms] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 16:30:54.099 DEBUG 19696 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/rooms
2025-05-02 16:30:54.099 DEBUG 19696 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/rooms", parameters={}
2025-05-02 16:30:54.100 DEBUG 19696 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminRoomController#getAllRooms(RoomFilterDTO)
2025-05-02 16:30:54.114 DEBUG 19696 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:30:54.115 DEBUG 19696 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data={total=2, list=[{roomNumber=501, lastCleanTime=2025-05-01T15:04:43, notes=, needClea (truncated)...]
2025-05-02 16:30:54.115 DEBUG 19696 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:30:54.116 DEBUG 19696 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:30:54.181 DEBUG 19696 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/roomtypes
2025-05-02 16:30:54.181 DEBUG 19696 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:30:54.188 DEBUG 19696 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:30:54.188 DEBUG 19696 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/roomtypes] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 16:30:54.188 DEBUG 19696 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/roomtypes
2025-05-02 16:30:54.188 DEBUG 19696 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/roomtypes", parameters={}
2025-05-02 16:30:54.188 DEBUG 19696 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getAllRoomTypes()
2025-05-02 16:30:54.194 DEBUG 19696 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:30:54.194 DEBUG 19696 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{amenities=无限量杜蕾斯、矿泉水、咖啡、茶叶等, name=行政套房, description=高端奢华行政房, id=1, basePrice=899.0 (truncated)...]
2025-05-02 16:30:54.195 DEBUG 19696 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:30:54.195 DEBUG 19696 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:31:10.205 DEBUG 19696 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/rooms
2025-05-02 16:31:10.206 DEBUG 19696 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:31:10.213 DEBUG 19696 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:31:10.214 DEBUG 19696 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/rooms] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 16:31:10.215 DEBUG 19696 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/rooms
2025-05-02 16:31:10.215 DEBUG 19696 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/rooms", parameters={}
2025-05-02 16:31:10.216 DEBUG 19696 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminRoomController#getAllRooms(RoomFilterDTO)
2025-05-02 16:31:10.229 DEBUG 19696 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:31:10.230 DEBUG 19696 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data={total=2, list=[{roomNumber=501, lastCleanTime=2025-05-01T15:04:43, notes=, needClea (truncated)...]
2025-05-02 16:31:10.231 DEBUG 19696 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:31:10.231 DEBUG 19696 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:31:10.290 DEBUG 19696 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/roomtypes
2025-05-02 16:31:10.291 DEBUG 19696 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:31:10.297 DEBUG 19696 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:31:10.298 DEBUG 19696 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/roomtypes] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 16:31:10.298 DEBUG 19696 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/roomtypes
2025-05-02 16:31:10.298 DEBUG 19696 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/roomtypes", parameters={}
2025-05-02 16:31:10.299 DEBUG 19696 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getAllRoomTypes()
2025-05-02 16:31:10.305 DEBUG 19696 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:31:10.306 DEBUG 19696 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{amenities=无限量杜蕾斯、矿泉水、咖啡、茶叶等, name=行政套房, description=高端奢华行政房, id=1, basePrice=899.0 (truncated)...]
2025-05-02 16:31:10.307 DEBUG 19696 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:31:10.307 DEBUG 19696 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:31:12.770 DEBUG 19696 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/staff?page=0&pageSize=10
2025-05-02 16:31:12.771 DEBUG 19696 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:31:12.776 DEBUG 19696 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:31:12.776 DEBUG 19696 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users/staff?page=0&pageSize=10] with attributes [authenticated]
2025-05-02 16:31:12.776 DEBUG 19696 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/staff?page=0&pageSize=10
2025-05-02 16:31:12.776 DEBUG 19696 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/staff?page=0&pageSize=10", parameters={masked}
2025-05-02 16:31:12.777 DEBUG 19696 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getAllStaffPaginated(int, int, String, String, String)
2025-05-02 16:31:12.786 DEBUG 19696 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:31:12.787 DEBUG 19696 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data={total=5, users=[UserDTO(id=17, username=保洁7号阿姨 (truncated)...]
2025-05-02 16:31:12.788 DEBUG 19696 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:31:12.788 DEBUG 19696 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:31:13.857 DEBUG 19696 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users?page=1&pageSize=10&username=&phone=&status=
2025-05-02 16:31:13.858 DEBUG 19696 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:31:13.862 DEBUG 19696 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:31:13.863 DEBUG 19696 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users?page=1&pageSize=10&username=&phone=&status=] with attributes [authenticated]
2025-05-02 16:31:13.864 DEBUG 19696 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users?page=1&pageSize=10&username=&phone=&status=
2025-05-02 16:31:13.864 DEBUG 19696 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users?page=1&pageSize=10&username=&phone=&status=", parameters={masked}
2025-05-02 16:31:13.864 DEBUG 19696 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getAllUsers(int, int, String, String, String, String)
2025-05-02 16:31:13.877 DEBUG 19696 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:31:13.878 DEBUG 19696 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data={total=17, users=[UserDTO(id=17, username=保洁7号阿 (truncated)...]
2025-05-02 16:31:13.879 DEBUG 19696 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:31:13.879 DEBUG 19696 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:31:14.398 DEBUG 19696 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-02 16:31:14.398 DEBUG 19696 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:31:14.404 DEBUG 19696 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:31:14.404 DEBUG 19696 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 16:31:14.404 DEBUG 19696 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-02 16:31:14.405 DEBUG 19696 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-02 16:31:14.405 DEBUG 19696 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-02 16:31:14.468 DEBUG 19696 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:31:14.469 DEBUG 19696 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{todayRevenue=0, monthlyRevenue=0, upcomingReservations=0, totalUsers=17, availableRooms=2, newUsers (truncated)...]
2025-05-02 16:31:14.470 DEBUG 19696 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:31:14.470 DEBUG 19696 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:31:32.237 DEBUG 19696 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-02 16:31:32.237 DEBUG 19696 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:31:32.237 DEBUG 19696 --- [http-nio-8090-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 16:31:32.237 DEBUG 19696 --- [http-nio-8090-exec-9] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 5A29A4A47A25E456C4F538CE7FF0CCBF
2025-05-02 16:31:32.237 DEBUG 19696 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-02 16:31:32.237 DEBUG 19696 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-02 16:31:32.237 DEBUG 19696 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-02 16:31:32.237 DEBUG 19696 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-02 16:31:32.258 DEBUG 19696 --- [http-nio-8090-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=17777777777, password=17777777777)]
2025-05-02 16:31:32.410 DEBUG 19696 --- [http-nio-8090-exec-9] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-02 16:31:32.434 DEBUG 19696 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:31:32.434 DEBUG 19696 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=11, username=177, role=CUSTOMER, token=eyJhbGciOiJI (truncated)...]
2025-05-02 16:31:32.434 DEBUG 19696 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:31:32.434 DEBUG 19696 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:31:32.445 DEBUG 19696 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/11
2025-05-02 16:31:32.445 DEBUG 19696 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:31:32.445 DEBUG 19696 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 '177' 认证成功, 设置 SecurityContext
2025-05-02 16:31:32.445 DEBUG 19696 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users/11] with attributes [authenticated]
2025-05-02 16:31:32.445 DEBUG 19696 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/11
2025-05-02 16:31:32.445 DEBUG 19696 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/11", parameters={}
2025-05-02 16:31:32.445 DEBUG 19696 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getUserById(Long)
2025-05-02 16:31:32.459 DEBUG 19696 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:31:32.480 DEBUG 19696 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=User(id=11, username=177, password=null, name=1 (truncated)...]
2025-05-02 16:31:32.494 DEBUG 19696 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:31:32.494 DEBUG 19696 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:31:32.820 DEBUG 19696 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/membership/info
2025-05-02 16:31:32.820 DEBUG 19696 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:31:32.820 DEBUG 19696 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 '177' 认证成功, 设置 SecurityContext
2025-05-02 16:31:32.820 DEBUG 19696 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/membership/info] with attributes [authenticated]
2025-05-02 16:31:32.820 DEBUG 19696 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/membership/info
2025-05-02 16:31:32.820 DEBUG 19696 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/membership/info", parameters={}
2025-05-02 16:31:32.820 DEBUG 19696 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.MembershipController#getCurrentUserMembershipInfo()
2025-05-02 16:31:32.836 DEBUG 19696 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:31:32.836 DEBUG 19696 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=MembershipDTO(userId=11, username=177, name=177, memberLevel=普通用户, memberLevelCode=R (truncated)...]
2025-05-02 16:31:32.841 DEBUG 19696 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:31:32.841 DEBUG 19696 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:31:39.962 DEBUG 19696 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/11
2025-05-02 16:31:39.963 DEBUG 19696 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:31:39.967 DEBUG 19696 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 '177' 认证成功, 设置 SecurityContext
2025-05-02 16:31:39.968 DEBUG 19696 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users/11] with attributes [authenticated]
2025-05-02 16:31:39.969 DEBUG 19696 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/11
2025-05-02 16:31:39.969 DEBUG 19696 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/11", parameters={}
2025-05-02 16:31:39.970 DEBUG 19696 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getUserById(Long)
2025-05-02 16:31:39.975 DEBUG 19696 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:31:39.984 DEBUG 19696 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=User(id=11, username=177, password=null, name=1 (truncated)...]
2025-05-02 16:31:39.985 DEBUG 19696 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:31:39.985 DEBUG 19696 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:31:40.005 DEBUG 19696 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/membership/info
2025-05-02 16:31:40.005 DEBUG 19696 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:31:40.013 DEBUG 19696 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 '177' 认证成功, 设置 SecurityContext
2025-05-02 16:31:40.014 DEBUG 19696 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/membership/info] with attributes [authenticated]
2025-05-02 16:31:40.015 DEBUG 19696 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/membership/info
2025-05-02 16:31:40.015 DEBUG 19696 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/membership/info", parameters={}
2025-05-02 16:31:40.015 DEBUG 19696 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.MembershipController#getCurrentUserMembershipInfo()
2025-05-02 16:31:40.020 DEBUG 19696 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:31:40.020 DEBUG 19696 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=MembershipDTO(userId=11, username=177, name=177, memberLevel=普通用户, memberLevelCode=R (truncated)...]
2025-05-02 16:31:40.020 DEBUG 19696 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:31:40.020 DEBUG 19696 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:31:57.712 DEBUG 19696 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-02 16:31:57.713 DEBUG 19696 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:31:57.718 DEBUG 19696 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 '177' 认证成功, 设置 SecurityContext
2025-05-02 16:31:57.719 DEBUG 19696 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-02 16:31:57.719 DEBUG 19696 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-02 16:31:57.720 DEBUG 19696 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-02 16:31:57.720 DEBUG 19696 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-02 16:31:57.726 DEBUG 19696 --- [http-nio-8090-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=admin, password=admin123)]
2025-05-02 16:31:57.803 DEBUG 19696 --- [http-nio-8090-exec-2] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-02 16:31:57.810 DEBUG 19696 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:31:57.810 DEBUG 19696 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=1, username=admin, role=ADMIN, token=eyJhbGciOiJIUz (truncated)...]
2025-05-02 16:31:57.811 DEBUG 19696 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:31:57.811 DEBUG 19696 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:31:58.251 DEBUG 19696 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-02 16:31:58.251 DEBUG 19696 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:31:58.254 DEBUG 19696 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:31:58.254 DEBUG 19696 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 16:31:58.254 DEBUG 19696 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-02 16:31:58.254 DEBUG 19696 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-02 16:31:58.254 DEBUG 19696 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-02 16:31:58.299 DEBUG 19696 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:31:58.299 DEBUG 19696 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{todayRevenue=0, monthlyRevenue=0, upcomingReservations=0, totalUsers=17, availableRooms=2, newUsers (truncated)...]
2025-05-02 16:31:58.299 DEBUG 19696 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:31:58.299 DEBUG 19696 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:31:59.377 DEBUG 19696 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/rooms
2025-05-02 16:31:59.378 DEBUG 19696 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:31:59.382 DEBUG 19696 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:31:59.383 DEBUG 19696 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/rooms] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 16:31:59.383 DEBUG 19696 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/rooms
2025-05-02 16:31:59.384 DEBUG 19696 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/rooms", parameters={}
2025-05-02 16:31:59.384 DEBUG 19696 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminRoomController#getAllRooms(RoomFilterDTO)
2025-05-02 16:31:59.395 DEBUG 19696 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:31:59.395 DEBUG 19696 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data={total=2, list=[{roomNumber=501, lastCleanTime=2025-05-01T15:04:43, notes=, needClea (truncated)...]
2025-05-02 16:31:59.396 DEBUG 19696 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:31:59.397 DEBUG 19696 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:31:59.428 DEBUG 19696 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/roomtypes
2025-05-02 16:31:59.428 DEBUG 19696 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:31:59.432 DEBUG 19696 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:31:59.433 DEBUG 19696 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/roomtypes] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 16:31:59.433 DEBUG 19696 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/roomtypes
2025-05-02 16:31:59.433 DEBUG 19696 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/roomtypes", parameters={}
2025-05-02 16:31:59.434 DEBUG 19696 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getAllRoomTypes()
2025-05-02 16:31:59.441 DEBUG 19696 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:31:59.441 DEBUG 19696 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{amenities=无限量杜蕾斯、矿泉水、咖啡、茶叶等, name=行政套房, description=高端奢华行政房, id=1, basePrice=899.0 (truncated)...]
2025-05-02 16:31:59.441 DEBUG 19696 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:31:59.441 DEBUG 19696 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:32:17.780 DEBUG 19696 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing PUT /api/admin/roomtypes/1
2025-05-02 16:32:17.780 DEBUG 19696 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:32:17.787 DEBUG 19696 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:32:17.787 DEBUG 19696 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [PUT /api/admin/roomtypes/1] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 16:32:17.787 DEBUG 19696 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured PUT /api/admin/roomtypes/1
2025-05-02 16:32:17.787 DEBUG 19696 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : PUT "/api/admin/roomtypes/1", parameters={}
2025-05-02 16:32:17.787 DEBUG 19696 --- [http-nio-8090-exec-8] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-05-02 16:32:17.794 DEBUG 19696 --- [http-nio-8090-exec-8] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2025-05-02 16:32:17.794 DEBUG 19696 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND
2025-05-02 16:32:17.794 DEBUG 19696 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:32:17.800 DEBUG 19696 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing PUT /index.html
2025-05-02 16:32:17.800 DEBUG 19696 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:32:17.800 DEBUG 19696 --- [http-nio-8090-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-02 16:32:17.800 DEBUG 19696 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured PUT /index.html
2025-05-02 16:32:17.800 DEBUG 19696 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for PUT "/index.html", parameters={}
2025-05-02 16:32:17.800 DEBUG 19696 --- [http-nio-8090-exec-8] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [static/]]
2025-05-02 16:32:17.800  WARN 19696 --- [http-nio-8090-exec-8] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'PUT' not supported]
2025-05-02 16:32:17.800 DEBUG 19696 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 405
2025-05-02 16:32:17.800 DEBUG 19696 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:32:23.525  INFO 19696 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-02 16:32:23.525  INFO 19696 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-02 16:32:23.545  INFO 19696 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-02 16:32:33.027  INFO 32756 --- [main] com.hotel.HotelManagementApplication     : Starting HotelManagementApplication using Java 18.0.2 on LAPTOP-HeYIXianJun with PID 32756 (E:\桌面\javahotel\heqing99\target\classes started by 上善若水 in E:\桌面\javahotel\heqing99)
2025-05-02 16:32:33.027 DEBUG 32756 --- [main] com.hotel.HotelManagementApplication     : Running with Spring Boot v2.7.0, Spring v5.3.20
2025-05-02 16:32:33.027  INFO 32756 --- [main] com.hotel.HotelManagementApplication     : No active profile set, falling back to 1 default profile: "default"
2025-05-02 16:32:33.977  INFO 32756 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-02 16:32:34.177  INFO 32756 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 192 ms. Found 19 JPA repository interfaces.
2025-05-02 16:32:34.731  INFO 32756 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8090 (http)
2025-05-02 16:32:34.731  INFO 32756 --- [main] o.a.catalina.core.AprLifecycleListener   : Loaded Apache Tomcat Native library [1.2.30] using APR version [1.7.0].
2025-05-02 16:32:34.731  INFO 32756 --- [main] o.a.catalina.core.AprLifecycleListener   : APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true], UDS [true].
2025-05-02 16:32:34.731  INFO 32756 --- [main] o.a.catalina.core.AprLifecycleListener   : APR/OpenSSL configuration: useAprConnector [false], useOpenSSL [true]
2025-05-02 16:32:34.740  INFO 32756 --- [main] o.a.catalina.core.AprLifecycleListener   : OpenSSL successfully initialized [OpenSSL 1.1.1k  25 Mar 2021]
2025-05-02 16:32:34.750  INFO 32756 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-02 16:32:34.750  INFO 32756 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-05-02 16:32:34.900  INFO 32756 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-02 16:32:34.900  INFO 32756 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1821 ms
2025-05-02 16:32:35.081  INFO 32756 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-02 16:32:35.151  INFO 32756 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.9.Final
2025-05-02 16:32:35.351  INFO 32756 --- [main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2025-05-02 16:32:35.471  INFO 32756 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-02 16:32:35.823  INFO 32756 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-02 16:32:35.833  INFO 32756 --- [main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2025-05-02 16:32:36.976  INFO 32756 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-05-02 16:32:36.986  INFO 32756 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-02 16:32:37.412 DEBUG 32756 --- [main] c.hotel.config.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2025-05-02 16:32:37.412 DEBUG 32756 --- [main] o.springframework.web.filter.CorsFilter  : Filter 'corsFilter' configured for use
2025-05-02 16:32:38.197 DEBUG 32756 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.html']
2025-05-02 16:32:38.206 DEBUG 32756 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.js']
2025-05-02 16:32:38.206 DEBUG 32756 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.css']
2025-05-02 16:32:38.206 DEBUG 32756 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.ico']
2025-05-02 16:32:38.207 DEBUG 32756 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/assets/**']
2025-05-02 16:32:38.207 DEBUG 32756 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/']
2025-05-02 16:32:38.207 DEBUG 32756 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/about']
2025-05-02 16:32:38.207 DEBUG 32756 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/rooms']
2025-05-02 16:32:38.208 DEBUG 32756 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/room/**']
2025-05-02 16:32:38.208 DEBUG 32756 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/contact']
2025-05-02 16:32:38.208 DEBUG 32756 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/booking']
2025-05-02 16:32:38.208 DEBUG 32756 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/register']
2025-05-02 16:32:38.208 DEBUG 32756 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/login']
2025-05-02 16:32:38.208 DEBUG 32756 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/user/**']
2025-05-02 16:32:38.210 DEBUG 32756 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin']
2025-05-02 16:32:38.210 DEBUG 32756 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/login']
2025-05-02 16:32:38.211 DEBUG 32756 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/dashboard/**']
2025-05-02 16:32:38.211 DEBUG 32756 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/users/**']
2025-05-02 16:32:38.211 DEBUG 32756 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/staff/**']
2025-05-02 16:32:38.211 DEBUG 32756 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/reception/**']
2025-05-02 16:32:38.211 DEBUG 32756 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/cleaning/**']
2025-05-02 16:32:38.211 DEBUG 32756 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/login', POST]
2025-05-02 16:32:38.211 DEBUG 32756 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/login', GET]
2025-05-02 16:32:38.211 DEBUG 32756 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/auth/login', POST]
2025-05-02 16:32:38.211 DEBUG 32756 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/refresh-token', POST]
2025-05-02 16:32:38.211 DEBUG 32756 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/register', POST]
2025-05-02 16:32:38.211 DEBUG 32756 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/login', POST]
2025-05-02 16:32:38.211 DEBUG 32756 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/check-username', GET]
2025-05-02 16:32:38.211 DEBUG 32756 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/check-phone', GET]
2025-05-02 16:32:38.211 DEBUG 32756 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/invitation-codes/validate/**', GET]
2025-05-02 16:32:38.211 DEBUG 32756 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/register/staff', POST]
2025-05-02 16:32:38.211 DEBUG 32756 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for Ant [pattern='/api/users/profile', GET]
2025-05-02 16:32:38.211 DEBUG 32756 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for Ant [pattern='/api/users/{id}', PUT]
2025-05-02 16:32:38.211 DEBUG 32756 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for Ant [pattern='/api/users/{id}/password', PUT]
2025-05-02 16:32:38.211 DEBUG 32756 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasRole('ROLE_ADMIN')] for Ant [pattern='/api/admin/**']
2025-05-02 16:32:38.211 DEBUG 32756 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasRole('ROLE_ADMIN')] for Ant [pattern='/api/users/{id}', DELETE]
2025-05-02 16:32:38.211 DEBUG 32756 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/**', OPTIONS]
2025-05-02 16:32:38.211 DEBUG 32756 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for any request
2025-05-02 16:32:38.217  INFO 32756 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@d082916, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@67201002, org.springframework.security.web.context.SecurityContextPersistenceFilter@3bf306d3, org.springframework.security.web.header.HeaderWriterFilter@287dde94, org.springframework.web.filter.CorsFilter@5b53c3c5, org.springframework.security.web.authentication.logout.LogoutFilter@5fdff4f1, com.hotel.config.JwtAuthenticationFilter@3adb4cc8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@40273969, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5ec25b61, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6ddc9001, org.springframework.security.web.session.SessionManagementFilter@1415f18d, org.springframework.security.web.access.ExceptionTranslationFilter@1e86b2d1, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@6f8035d6]
2025-05-02 16:32:38.267  WARN 32756 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-02 16:32:38.388 DEBUG 32756 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-05-02 16:32:38.407  INFO 32756 --- [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [static/index.html]
2025-05-02 16:32:38.457 DEBUG 32756 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 165 mappings in 'requestMappingHandlerMapping'
2025-05-02 16:32:38.467 DEBUG 32756 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/admin, /admin/login, /admin/dashboard, /admin/users, /admin/staff, /admin/rooms, /admin/reception/bookings, /admin/reception/checkin, /admin/reception/visitors, /admin/cleaning/tasks, /admin/cleaning/records, /login] in 'viewControllerHandlerMapping'
2025-05-02 16:32:38.478 DEBUG 32756 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /assets/**, /*.js, /*.css, /favicon.ico, /index.html, /images/**, /assets/images/**] in 'resourceHandlerMapping'
2025-05-02 16:32:38.488 DEBUG 32756 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-05-02 16:32:38.618  INFO 32756 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8090 (http) with context path ''
2025-05-02 16:32:38.618  INFO 32756 --- [main] com.hotel.HotelManagementApplication     : Started HotelManagementApplication in 6.073 seconds (JVM running for 6.878)
2025-05-02 16:32:54.295  INFO 32756 --- [http-nio-8090-exec-7] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-02 16:32:54.295  INFO 32756 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-02 16:32:54.295 DEBUG 32756 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-05-02 16:32:54.295 DEBUG 32756 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-05-02 16:32:54.295 DEBUG 32756 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-05-02 16:32:54.295 DEBUG 32756 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@752573df
2025-05-02 16:32:54.301 DEBUG 32756 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@278df226
2025-05-02 16:32:54.301 DEBUG 32756 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-05-02 16:32:54.301  INFO 32756 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed initialization in 6 ms
2025-05-02 16:32:54.308 DEBUG 32756 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing PUT /api/admin/roomtypes/1
2025-05-02 16:32:54.317 DEBUG 32756 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:32:54.385 DEBUG 32756 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:32:54.399 DEBUG 32756 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [PUT /api/admin/roomtypes/1] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 16:32:54.399 DEBUG 32756 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured PUT /api/admin/roomtypes/1
2025-05-02 16:32:54.399 DEBUG 32756 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : PUT "/api/admin/roomtypes/1", parameters={}
2025-05-02 16:32:54.405 DEBUG 32756 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#updateRoomType(Long, RoomType)
2025-05-02 16:32:54.491 DEBUG 32756 --- [http-nio-8090-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [RoomType(id=1, name=行政套房, description=高端奢华行政房, longDescription=null, basePrice=1299, weekendPrice=nu (truncated)...]
2025-05-02 16:32:54.607 DEBUG 32756 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:32:54.607 DEBUG 32756 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data={amenities=无限量杜蕾斯、矿泉水、咖啡、茶叶等, createTime=2025-04-28T11:22:57, name=行政套房, description (truncated)...]
2025-05-02 16:32:54.627 DEBUG 32756 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:32:54.628 DEBUG 32756 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:32:54.947 DEBUG 32756 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/roomtypes
2025-05-02 16:32:54.947 DEBUG 32756 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:32:54.950 DEBUG 32756 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:32:54.951 DEBUG 32756 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/roomtypes] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 16:32:54.951 DEBUG 32756 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/roomtypes
2025-05-02 16:32:54.952 DEBUG 32756 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/roomtypes", parameters={}
2025-05-02 16:32:54.952 DEBUG 32756 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getAllRoomTypes()
2025-05-02 16:32:54.962 DEBUG 32756 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:32:54.962 DEBUG 32756 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{amenities=无限量杜蕾斯、矿泉水、咖啡、茶叶等, createTime=2025-04-28T11:22:57, name=行政套房, descriptio (truncated)...]
2025-05-02 16:32:54.964 DEBUG 32756 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:32:54.965 DEBUG 32756 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:33:13.213 DEBUG 32756 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/admin/roomtypes
2025-05-02 16:33:13.213 DEBUG 32756 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:33:13.218 DEBUG 32756 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:33:13.219 DEBUG 32756 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/admin/roomtypes] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 16:33:13.219 DEBUG 32756 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/admin/roomtypes
2025-05-02 16:33:13.219 DEBUG 32756 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/admin/roomtypes", parameters={}
2025-05-02 16:33:13.220 DEBUG 32756 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#createRoomType(RoomType)
2025-05-02 16:33:13.221 DEBUG 32756 --- [http-nio-8090-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [RoomType(id=null, name=1414, description=, longDescription=null, basePrice=100, weekendPrice=null, h (truncated)...]
2025-05-02 16:33:13.240 DEBUG 32756 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:33:13.240 DEBUG 32756 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data={amenities=, createTime=2025-05-02T16:33:13.225907800, name=1414, description=, upda (truncated)...]
2025-05-02 16:33:13.242 DEBUG 32756 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-05-02 16:33:13.242 DEBUG 32756 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:33:13.562 DEBUG 32756 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/roomtypes
2025-05-02 16:33:13.562 DEBUG 32756 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:33:13.566 DEBUG 32756 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:33:13.567 DEBUG 32756 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/roomtypes] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 16:33:13.567 DEBUG 32756 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/roomtypes
2025-05-02 16:33:13.567 DEBUG 32756 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/roomtypes", parameters={}
2025-05-02 16:33:13.567 DEBUG 32756 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getAllRoomTypes()
2025-05-02 16:33:13.573 DEBUG 32756 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:33:13.574 DEBUG 32756 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{amenities=无限量杜蕾斯、矿泉水、咖啡、茶叶等, createTime=2025-04-28T11:22:57, name=行政套房, descriptio (truncated)...]
2025-05-02 16:33:13.575 DEBUG 32756 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:33:13.576 DEBUG 32756 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:33:17.499 DEBUG 32756 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing DELETE /api/admin/roomtypes/3
2025-05-02 16:33:17.499 DEBUG 32756 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:33:17.505 DEBUG 32756 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:33:17.506 DEBUG 32756 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [DELETE /api/admin/roomtypes/3] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 16:33:17.506 DEBUG 32756 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured DELETE /api/admin/roomtypes/3
2025-05-02 16:33:17.506 DEBUG 32756 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : DELETE "/api/admin/roomtypes/3", parameters={}
2025-05-02 16:33:17.507 DEBUG 32756 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#deleteRoomType(Long)
2025-05-02 16:33:17.555 DEBUG 32756 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:33:17.555 DEBUG 32756 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, success=true, message=删除房型成功}]
2025-05-02 16:33:17.556 DEBUG 32756 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:33:17.557 DEBUG 32756 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:33:17.875 DEBUG 32756 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/roomtypes
2025-05-02 16:33:17.876 DEBUG 32756 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:33:17.880 DEBUG 32756 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:33:17.881 DEBUG 32756 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/roomtypes] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 16:33:17.881 DEBUG 32756 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/roomtypes
2025-05-02 16:33:17.881 DEBUG 32756 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/roomtypes", parameters={}
2025-05-02 16:33:17.882 DEBUG 32756 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getAllRoomTypes()
2025-05-02 16:33:17.887 DEBUG 32756 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:33:17.887 DEBUG 32756 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{amenities=无限量杜蕾斯、矿泉水、咖啡、茶叶等, createTime=2025-04-28T11:22:57, name=行政套房, descriptio (truncated)...]
2025-05-02 16:33:17.888 DEBUG 32756 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:33:17.889 DEBUG 32756 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:33:26.631 DEBUG 32756 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/rooms
2025-05-02 16:33:26.632 DEBUG 32756 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:33:26.637 DEBUG 32756 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:33:26.638 DEBUG 32756 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/rooms] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 16:33:26.638 DEBUG 32756 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/rooms
2025-05-02 16:33:26.638 DEBUG 32756 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/rooms", parameters={}
2025-05-02 16:33:26.638 DEBUG 32756 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminRoomController#getAllRooms(RoomFilterDTO)
2025-05-02 16:33:26.664 DEBUG 32756 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:33:26.665 DEBUG 32756 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data={total=2, list=[{roomNumber=501, lastCleanTime=2025-05-01T15:04:43, notes=, needClea (truncated)...]
2025-05-02 16:33:26.666 DEBUG 32756 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:33:26.666 DEBUG 32756 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:33:26.716 DEBUG 32756 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/roomtypes
2025-05-02 16:33:26.717 DEBUG 32756 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:33:26.721 DEBUG 32756 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:33:26.722 DEBUG 32756 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/roomtypes] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 16:33:26.722 DEBUG 32756 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/roomtypes
2025-05-02 16:33:26.722 DEBUG 32756 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/roomtypes", parameters={}
2025-05-02 16:33:26.723 DEBUG 32756 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getAllRoomTypes()
2025-05-02 16:33:26.731 DEBUG 32756 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:33:26.731 DEBUG 32756 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{amenities=无限量杜蕾斯、矿泉水、咖啡、茶叶等, createTime=2025-04-28T11:22:57, name=行政套房, descriptio (truncated)...]
2025-05-02 16:33:26.733 DEBUG 32756 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:33:26.733 DEBUG 32756 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:33:37.757 DEBUG 32756 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/invitation-codes/all
2025-05-02 16:33:37.758 DEBUG 32756 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:33:37.760 DEBUG 32756 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:33:37.767 DEBUG 32756 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/invitation-codes/all] with attributes [authenticated]
2025-05-02 16:33:37.768 DEBUG 32756 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/invitation-codes/all
2025-05-02 16:33:37.768 DEBUG 32756 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/invitation-codes/all", parameters={}
2025-05-02 16:33:37.769 DEBUG 32756 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#getAllInvitationCodes()
2025-05-02 16:33:37.787 DEBUG 32756 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:33:37.787 DEBUG 32756 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[InvitationCode(id=12, code=L1R1O7TC, role=CLEANER, maxUses=1, currentUses=0, expiryDate=2025-06-01T (truncated)...]
2025-05-02 16:33:37.798 DEBUG 32756 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:33:37.798 DEBUG 32756 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:33:40.664 DEBUG 32756 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/staff?page=0&pageSize=10
2025-05-02 16:33:40.664 DEBUG 32756 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:33:40.669 DEBUG 32756 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:33:40.669 DEBUG 32756 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users/staff?page=0&pageSize=10] with attributes [authenticated]
2025-05-02 16:33:40.669 DEBUG 32756 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/staff?page=0&pageSize=10
2025-05-02 16:33:40.670 DEBUG 32756 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/staff?page=0&pageSize=10", parameters={masked}
2025-05-02 16:33:40.671 DEBUG 32756 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getAllStaffPaginated(int, int, String, String, String)
2025-05-02 16:33:40.692 DEBUG 32756 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:33:40.692 DEBUG 32756 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data={total=5, users=[UserDTO(id=17, username=保洁7号阿姨 (truncated)...]
2025-05-02 16:33:40.698 DEBUG 32756 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:33:40.698 DEBUG 32756 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:33:43.472 DEBUG 32756 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users?page=1&pageSize=10&username=&phone=&status=
2025-05-02 16:33:43.472 DEBUG 32756 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:33:43.476 DEBUG 32756 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:33:43.477 DEBUG 32756 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users?page=1&pageSize=10&username=&phone=&status=] with attributes [authenticated]
2025-05-02 16:33:43.477 DEBUG 32756 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users?page=1&pageSize=10&username=&phone=&status=
2025-05-02 16:33:43.477 DEBUG 32756 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users?page=1&pageSize=10&username=&phone=&status=", parameters={masked}
2025-05-02 16:33:43.477 DEBUG 32756 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getAllUsers(int, int, String, String, String, String)
2025-05-02 16:33:43.497 DEBUG 32756 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:33:43.497 DEBUG 32756 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data={total=17, users=[UserDTO(id=17, username=保洁7号阿 (truncated)...]
2025-05-02 16:33:43.499 DEBUG 32756 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:33:43.499 DEBUG 32756 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-02 16:33:44.580 DEBUG 32756 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-02 16:33:44.580 DEBUG 32756 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-02 16:33:44.580 DEBUG 32756 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-02 16:33:44.580 DEBUG 32756 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasRole('ROLE_ADMIN')]
2025-05-02 16:33:44.588 DEBUG 32756 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-02 16:33:44.588 DEBUG 32756 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-02 16:33:44.588 DEBUG 32756 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-02 16:33:44.639 DEBUG 32756 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-02 16:33:44.639 DEBUG 32756 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{todayRevenue=0, monthlyRevenue=0, upcomingReservations=0, totalUsers=17, availableRooms=2, newUsers (truncated)...]
2025-05-02 16:33:44.639 DEBUG 32756 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-02 16:33:44.639 DEBUG 32756 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
