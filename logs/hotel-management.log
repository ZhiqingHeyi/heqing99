2025-05-10 09:41:34.429  INFO 12700 --- [main] com.hotel.HotelManagementApplication     : Starting HotelManagementApplication using Java 18.0.2 on LAPTOP-HeYIXianJun with PID 12700 (E:\桌面\javahotel\heqing99\target\classes started by 上善若水 in E:\桌面\javahotel\heqing99)
2025-05-10 09:41:34.437 DEBUG 12700 --- [main] com.hotel.HotelManagementApplication     : Running with Spring Boot v2.7.0, Spring v5.3.20
2025-05-10 09:41:34.438  INFO 12700 --- [main] com.hotel.HotelManagementApplication     : No active profile set, falling back to 1 default profile: "default"
2025-05-10 09:41:35.458  INFO 12700 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-10 09:41:35.700  INFO 12700 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 231 ms. Found 19 JPA repository interfaces.
2025-05-10 09:41:36.423  INFO 12700 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8090 (http)
2025-05-10 09:41:36.424  INFO 12700 --- [main] o.a.catalina.core.AprLifecycleListener   : Loaded Apache Tomcat Native library [1.2.30] using APR version [1.7.0].
2025-05-10 09:41:36.425  INFO 12700 --- [main] o.a.catalina.core.AprLifecycleListener   : APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true], UDS [true].
2025-05-10 09:41:36.425  INFO 12700 --- [main] o.a.catalina.core.AprLifecycleListener   : APR/OpenSSL configuration: useAprConnector [false], useOpenSSL [true]
2025-05-10 09:41:36.433  INFO 12700 --- [main] o.a.catalina.core.AprLifecycleListener   : OpenSSL successfully initialized [OpenSSL 1.1.1k  25 Mar 2021]
2025-05-10 09:41:36.443  INFO 12700 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-10 09:41:36.443  INFO 12700 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-05-10 09:41:36.612  INFO 12700 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-10 09:41:36.613  INFO 12700 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2112 ms
2025-05-10 09:41:36.815  INFO 12700 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-10 09:41:36.884  INFO 12700 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.9.Final
2025-05-10 09:41:37.086  INFO 12700 --- [main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2025-05-10 09:41:37.204  INFO 12700 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-10 09:41:37.586  INFO 12700 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-10 09:41:37.607  INFO 12700 --- [main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2025-05-10 09:41:38.858  INFO 12700 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-05-10 09:41:38.866  INFO 12700 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-10 09:41:39.321 DEBUG 12700 --- [main] c.hotel.config.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2025-05-10 09:41:39.321 DEBUG 12700 --- [main] o.springframework.web.filter.CorsFilter  : Filter 'corsFilter' configured for use
2025-05-10 09:41:40.226 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.html']
2025-05-10 09:41:40.233 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.js']
2025-05-10 09:41:40.233 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.css']
2025-05-10 09:41:40.233 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.ico']
2025-05-10 09:41:40.233 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/assets/**']
2025-05-10 09:41:40.234 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/']
2025-05-10 09:41:40.234 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/about']
2025-05-10 09:41:40.234 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/rooms']
2025-05-10 09:41:40.234 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/room/**']
2025-05-10 09:41:40.234 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/contact']
2025-05-10 09:41:40.234 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/booking']
2025-05-10 09:41:40.234 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/register']
2025-05-10 09:41:40.234 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/login']
2025-05-10 09:41:40.235 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/user/**']
2025-05-10 09:41:40.235 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin']
2025-05-10 09:41:40.235 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/login']
2025-05-10 09:41:40.235 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/dashboard/**']
2025-05-10 09:41:40.235 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/users/**']
2025-05-10 09:41:40.235 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/staff/**']
2025-05-10 09:41:40.235 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/reception/**']
2025-05-10 09:41:40.235 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/cleaning/**']
2025-05-10 09:41:40.236 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/login', POST]
2025-05-10 09:41:40.236 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/login', GET]
2025-05-10 09:41:40.236 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/auth/login', POST]
2025-05-10 09:41:40.236 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/refresh-token', POST]
2025-05-10 09:41:40.236 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/register', POST]
2025-05-10 09:41:40.236 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/login', POST]
2025-05-10 09:41:40.236 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/check-username', GET]
2025-05-10 09:41:40.236 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/check-phone', GET]
2025-05-10 09:41:40.236 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/invitation-codes/validate/**', GET]
2025-05-10 09:41:40.236 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/register/staff', POST]
2025-05-10 09:41:40.237 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/rooms/types', GET]
2025-05-10 09:41:40.237 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for Ant [pattern='/api/users/profile', GET]
2025-05-10 09:41:40.237 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for Ant [pattern='/api/users/{id}', PUT]
2025-05-10 09:41:40.237 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for Ant [pattern='/api/users/{id}/password', PUT]
2025-05-10 09:41:40.237 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')] for Ant [pattern='/api/admin/dashboard/stats', GET]
2025-05-10 09:41:40.238 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')] for Ant [pattern='/api/admin/checkin/today-stats', GET]
2025-05-10 09:41:40.238 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')] for Ant [pattern='/api/admin/rooms', GET]
2025-05-10 09:41:40.239 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasRole('ROLE_ADMIN')] for Ant [pattern='/api/users', GET]
2025-05-10 09:41:40.239 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')] for Ant [pattern='/api/reservations', GET]
2025-05-10 09:41:40.239 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')] for Ant [pattern='/api/admin/checkin', POST]
2025-05-10 09:41:40.239 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')] for Ant [pattern='/api/admin/checkout/stats', GET]
2025-05-10 09:41:40.239 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')] for Ant [pattern='/api/admin/checkout/records', GET]
2025-05-10 09:41:40.239 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')] for Ant [pattern='/api/admin/rooms/occupied', GET]
2025-05-10 09:41:40.239 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')] for Ant [pattern='/api/admin/checkout/confirm/**', POST]
2025-05-10 09:41:40.240 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')] for Ant [pattern='/api/admin/checkout/create', POST]
2025-05-10 09:41:40.240 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')] for Ant [pattern='/api/admin/checkout/card-checkout', POST]
2025-05-10 09:41:40.240 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')] for Ant [pattern='/api/admin/checkout/{id}/bill', GET]
2025-05-10 09:41:40.240 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')] for Ant [pattern='/api/admin/rooms/{roomNumber}/current-guest', GET]
2025-05-10 09:41:40.240 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')] for Ant [pattern='/api/admin/rooms/random-occupied', GET]
2025-05-10 09:41:40.240 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST','ROLE_STAFF')] for Ant [pattern='/api/admin/rooms/{roomId}/mark-cleaned', POST]
2025-05-10 09:41:40.240 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasRole('ROLE_ADMIN')] for Ant [pattern='/api/admin/**']
2025-05-10 09:41:40.240 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasRole('ROLE_ADMIN')] for Ant [pattern='/api/users/{id}', DELETE]
2025-05-10 09:41:40.240 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/**', OPTIONS]
2025-05-10 09:41:40.240 DEBUG 12700 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for any request
2025-05-10 09:41:40.246  INFO 12700 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5f815f93, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7a8e484b, org.springframework.security.web.context.SecurityContextPersistenceFilter@628b9af5, org.springframework.security.web.header.HeaderWriterFilter@586af46, org.springframework.web.filter.CorsFilter@1ccce165, org.springframework.security.web.authentication.logout.LogoutFilter@22f1a340, com.hotel.config.JwtAuthenticationFilter@78e59b04, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2a3c3a04, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@78ca8258, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@643f8ebe, org.springframework.security.web.session.SessionManagementFilter@624268ab, org.springframework.security.web.access.ExceptionTranslationFilter@2c1b10f2, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@4e9d1119]
2025-05-10 09:41:40.285  WARN 12700 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-10 09:41:40.408 DEBUG 12700 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-05-10 09:41:40.431  INFO 12700 --- [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [static/index.html]
2025-05-10 09:41:40.502 DEBUG 12700 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 181 mappings in 'requestMappingHandlerMapping'
2025-05-10 09:41:40.506 DEBUG 12700 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/admin, /admin/login, /admin/dashboard, /admin/users, /admin/staff, /admin/rooms, /admin/reception/bookings, /admin/reception/checkin, /admin/reception/visitors, /admin/cleaning/tasks, /admin/cleaning/records, /login] in 'viewControllerHandlerMapping'
2025-05-10 09:41:40.526 DEBUG 12700 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /assets/**, /*.js, /*.css, /favicon.ico, /index.html, /images/**, /assets/images/**] in 'resourceHandlerMapping'
2025-05-10 09:41:40.535 DEBUG 12700 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-05-10 09:41:40.750  INFO 12700 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8090 (http) with context path ''
2025-05-10 09:41:40.762  INFO 12700 --- [main] com.hotel.HotelManagementApplication     : Started HotelManagementApplication in 6.848 seconds (JVM running for 7.895)
2025-05-10 09:44:00.166  INFO 12700 --- [http-nio-8090-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-10 09:44:00.167  INFO 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-10 09:44:00.167 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-05-10 09:44:00.167 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-05-10 09:44:00.167 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-05-10 09:44:00.168 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@5834fd3f
2025-05-10 09:44:00.168 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@25f67aea
2025-05-10 09:44:00.168 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-05-10 09:44:00.169  INFO 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2025-05-10 09:44:00.183 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-10 09:44:00.188 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:44:00.275 ERROR 12700 --- [http-nio-8090-exec-2] com.hotel.util.JwtTokenProvider          : Expired JWT token
2025-05-10 09:44:00.275  WARN 12700 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : JWT Token 无效: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhZG1pbiIsInVzZXJJZCI6MSwicm9sZXMiOiJST0xFX0FETUlOIiwiaWF0IjoxNzQ2NzAwMDY3LCJleHAiOjE3NDY3ODY0Njd9.SARl3XJ_crNOjjxOszVmdc8Jomdp_iqFPTFYYKWlZ-XBTOrQly_ChuBFL2NzYwGRTyBjYWa6eSkYN5GG4YlZSg
2025-05-10 09:44:00.277 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:44:00.277 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-10 09:44:00.283 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-10 09:44:00.284 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-10 09:44:00.286 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-10 09:44:00.290 DEBUG 12700 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-10 09:44:00.341 DEBUG 12700 --- [http-nio-8090-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=18999177256, password=18999177256)]
2025-05-10 09:44:00.419  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:44:00.426  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:44:00.426  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:44:00.494 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-10 09:44:00.562 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:44:00.562 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=16, username=18999177256, role=RECEPTIONIST, token= (truncated)...]
2025-05-10 09:44:00.570 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:44:00.571 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:44:00.582 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/16
2025-05-10 09:44:00.582 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:44:00.585  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:44:00.588  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:44:00.588  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:44:00.588 DEBUG 12700 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 09:44:00.589 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users/16] with attributes [authenticated]
2025-05-10 09:44:00.589 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/16
2025-05-10 09:44:00.589 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/16", parameters={}
2025-05-10 09:44:00.590 DEBUG 12700 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getUserById(Long)
2025-05-10 09:44:00.623 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:44:00.624 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=UserDTO(id=16, username=18999177256, name=爱我爱的我 (truncated)...]
2025-05-10 09:44:00.634 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:44:00.635 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:44:00.962 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/membership/info
2025-05-10 09:44:00.962 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:44:00.963  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:44:00.966  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:44:00.966  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:44:00.966 DEBUG 12700 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 09:44:00.966 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/membership/info] with attributes [authenticated]
2025-05-10 09:44:00.966 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/membership/info
2025-05-10 09:44:00.967 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/membership/info", parameters={}
2025-05-10 09:44:00.967 DEBUG 12700 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.MembershipController#getCurrentUserMembershipInfo()
2025-05-10 09:44:00.974 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:44:00.975 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=MembershipDTO(userId=16, username=18999177256, name=爱我爱的我, memberLevel=普通用户, memberL (truncated)...]
2025-05-10 09:44:00.979 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:44:00.979 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:44:21.079 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-10 09:44:21.080 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:44:21.080 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:44:21.080 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-10 09:44:21.081 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-10 09:44:21.081 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-10 09:44:21.081 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-10 09:44:21.081 DEBUG 12700 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-10 09:44:21.082 DEBUG 12700 --- [http-nio-8090-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=18999177256, password=18999177256)]
2025-05-10 09:44:21.083  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:44:21.087  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:44:21.087  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:44:21.152 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-10 09:44:21.157 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:44:21.158 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=16, username=18999177256, role=RECEPTIONIST, token= (truncated)...]
2025-05-10 09:44:21.158 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:44:21.159 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:44:21.180 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/16
2025-05-10 09:44:21.181 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:44:21.183  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:44:21.185  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:44:21.185  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:44:21.185 DEBUG 12700 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 09:44:21.186 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users/16] with attributes [authenticated]
2025-05-10 09:44:21.186 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/16
2025-05-10 09:44:21.186 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/16", parameters={}
2025-05-10 09:44:21.186 DEBUG 12700 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getUserById(Long)
2025-05-10 09:44:21.192 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:44:21.192 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=UserDTO(id=16, username=18999177256, name=爱我爱的我 (truncated)...]
2025-05-10 09:44:21.193 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:44:21.193 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:44:21.203 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/membership/info
2025-05-10 09:44:21.203 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:44:21.205  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:44:21.208  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:44:21.208  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:44:21.208 DEBUG 12700 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 09:44:21.209 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/membership/info] with attributes [authenticated]
2025-05-10 09:44:21.209 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/membership/info
2025-05-10 09:44:21.209 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/membership/info", parameters={}
2025-05-10 09:44:21.209 DEBUG 12700 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.MembershipController#getCurrentUserMembershipInfo()
2025-05-10 09:44:21.214 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:44:21.214 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=MembershipDTO(userId=16, username=18999177256, name=爱我爱的我, memberLevel=普通用户, memberL (truncated)...]
2025-05-10 09:44:21.215 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:44:21.215 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:44:45.454 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-10 09:44:45.455 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:44:45.456 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:44:45.457 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-10 09:44:45.457 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-10 09:44:45.457 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-10 09:44:45.457 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-10 09:44:45.458 DEBUG 12700 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-10 09:44:45.458 DEBUG 12700 --- [http-nio-8090-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=18999177256, password=18999177256)]
2025-05-10 09:44:45.458  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:44:45.461  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:44:45.462  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:44:45.527 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-10 09:44:45.532 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:44:45.532 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=16, username=18999177256, role=RECEPTIONIST, token= (truncated)...]
2025-05-10 09:44:45.533 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:44:45.533 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:44:45.702 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/16
2025-05-10 09:44:45.702 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:44:45.704  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:44:45.708  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:44:45.708  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:44:45.708 DEBUG 12700 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 09:44:45.708 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users/16] with attributes [authenticated]
2025-05-10 09:44:45.708 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/16
2025-05-10 09:44:45.709 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/16", parameters={}
2025-05-10 09:44:45.709 DEBUG 12700 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getUserById(Long)
2025-05-10 09:44:45.716 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:44:45.716 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=UserDTO(id=16, username=18999177256, name=爱我爱的我 (truncated)...]
2025-05-10 09:44:45.717 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:44:45.717 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:44:45.858 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/membership/info
2025-05-10 09:44:45.859 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:44:45.860  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:44:45.862  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:44:45.863  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:44:45.863 DEBUG 12700 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 09:44:45.863 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/membership/info] with attributes [authenticated]
2025-05-10 09:44:45.864 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/membership/info
2025-05-10 09:44:45.864 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/membership/info", parameters={}
2025-05-10 09:44:45.864 DEBUG 12700 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.MembershipController#getCurrentUserMembershipInfo()
2025-05-10 09:44:45.870 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:44:45.870 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=MembershipDTO(userId=16, username=18999177256, name=爱我爱的我, memberLevel=普通用户, memberL (truncated)...]
2025-05-10 09:44:45.871 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:44:45.872 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:44:53.537 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/28
2025-05-10 09:44:53.537 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:44:53.539 ERROR 12700 --- [http-nio-8090-exec-10] com.hotel.util.JwtTokenProvider          : Expired JWT token
2025-05-10 09:44:53.539  WARN 12700 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : JWT Token 无效: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiLpl67lmI7lmI4iLCJ1c2VySWQiOjI4LCJyb2xlcyI6IlJPTEVfQ1VTVE9NRVIiLCJpYXQiOjE3NDY3MDAwMTksImV4cCI6MTc0Njc4NjQxOX0.0Bfki0hkvYqCd_KtLa-nOOBZm0JGp4V7VoOkfeyR3OkZMm59EX-Jb1ESorg8G0YLFSjTexDyt1V_FDp5eUe72g
2025-05-10 09:44:53.539 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:44:53.539 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Failed to authorize filter invocation [GET /api/users/28] with attributes [authenticated]
2025-05-10 09:44:53.541 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access
2025-05-10 09:44:53.541 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:44:53.544 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /error
2025-05-10 09:44:53.544 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:44:53.544 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:44:53.545 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /error
2025-05-10 09:44:53.551 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/error", parameters={}
2025-05-10 09:44:53.552 DEBUG 12700 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CustomErrorController#handleError(HttpServletRequest, WebRequest)
2025-05-10 09:44:53.556 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:44:53.557 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=Forbidden, message=An error occurred, status=403}]
2025-05-10 09:44:53.559 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 403
2025-05-10 09:44:53.560 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:45:43.487 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/users/register
2025-05-10 09:45:43.487 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:45:43.487 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:45:43.487 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/register] with attributes [permitAll]
2025-05-10 09:45:43.487 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/users/register
2025-05-10 09:45:43.491 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : POST "/api/users/register", parameters={}
2025-05-10 09:45:43.492 DEBUG 12700 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#register(Map)
2025-05-10 09:45:43.495 DEBUG 12700 --- [http-nio-8090-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{username=GgRGR, password=17677889988, confirmPassword=17677889988, name=AEFFAEE, phone=17677889988, (truncated)...]
2025-05-10 09:45:43.665 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:45:43.665 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=注册成功, data={userId=29, username=GgRGR})]
2025-05-10 09:45:43.666 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:45:43.667 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:45:48.747 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-10 09:45:48.748 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:45:48.749 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:45:48.750 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-10 09:45:48.750 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-10 09:45:48.751 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-10 09:45:48.751 DEBUG 12700 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-10 09:45:48.752 DEBUG 12700 --- [http-nio-8090-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=GgRGR, password=17677889988)]
2025-05-10 09:45:48.752  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: GgRGR
2025-05-10 09:45:48.757  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : User found: GgRGR, Role: CUSTOMER
2025-05-10 09:45:48.757  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CUSTOMER]
2025-05-10 09:45:48.825 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-10 09:45:48.832 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:45:48.832 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=29, username=GgRGR, role=CUSTOMER, token=eyJhbGciOi (truncated)...]
2025-05-10 09:45:48.833 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:45:48.834 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:45:48.844 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/29
2025-05-10 09:45:48.845 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:45:48.846  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: GgRGR
2025-05-10 09:45:48.850  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : User found: GgRGR, Role: CUSTOMER
2025-05-10 09:45:48.850  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CUSTOMER]
2025-05-10 09:45:48.851 DEBUG 12700 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 'GgRGR' 认证成功, 设置 SecurityContext
2025-05-10 09:45:48.851 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users/29] with attributes [authenticated]
2025-05-10 09:45:48.851 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/29
2025-05-10 09:45:48.852 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/29", parameters={}
2025-05-10 09:45:48.852 DEBUG 12700 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getUserById(Long)
2025-05-10 09:45:48.860 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:45:48.860 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=UserDTO(id=29, username=GgRGR, name=AEFFAEE, ph (truncated)...]
2025-05-10 09:45:48.861 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:45:48.861 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:45:48.872 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/membership/info
2025-05-10 09:45:48.872 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:45:48.874  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: GgRGR
2025-05-10 09:45:48.877  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : User found: GgRGR, Role: CUSTOMER
2025-05-10 09:45:48.877  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CUSTOMER]
2025-05-10 09:45:48.877 DEBUG 12700 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 'GgRGR' 认证成功, 设置 SecurityContext
2025-05-10 09:45:48.878 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/membership/info] with attributes [authenticated]
2025-05-10 09:45:48.878 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/membership/info
2025-05-10 09:45:48.878 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/membership/info", parameters={}
2025-05-10 09:45:48.879 DEBUG 12700 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.MembershipController#getCurrentUserMembershipInfo()
2025-05-10 09:45:48.885 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:45:48.885 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=MembershipDTO(userId=29, username=GgRGR, name=AEFFAEE, memberLevel=普通用户, memberLevel (truncated)...]
2025-05-10 09:45:48.886 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:45:48.887 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:45:50.174 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/29
2025-05-10 09:45:50.174 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:45:50.175  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: GgRGR
2025-05-10 09:45:50.179  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : User found: GgRGR, Role: CUSTOMER
2025-05-10 09:45:50.180  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CUSTOMER]
2025-05-10 09:45:50.180 DEBUG 12700 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 'GgRGR' 认证成功, 设置 SecurityContext
2025-05-10 09:45:50.181 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users/29] with attributes [authenticated]
2025-05-10 09:45:50.181 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/29
2025-05-10 09:45:50.181 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/29", parameters={}
2025-05-10 09:45:50.182 DEBUG 12700 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getUserById(Long)
2025-05-10 09:45:50.190 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:45:50.190 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=UserDTO(id=29, username=GgRGR, name=AEFFAEE, ph (truncated)...]
2025-05-10 09:45:50.192 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:45:50.192 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:45:53.910 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/rooms/types
2025-05-10 09:45:53.911 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:45:53.911 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/29
2025-05-10 09:45:53.911 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:45:53.911 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:45:53.911 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/rooms/types] with attributes [permitAll]
2025-05-10 09:45:53.912 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/rooms/types
2025-05-10 09:45:53.912 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/rooms/types", parameters={}
2025-05-10 09:45:53.912 DEBUG 12700 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.RoomController#getAllRoomTypes()
2025-05-10 09:45:53.912  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: GgRGR
2025-05-10 09:45:53.916  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : User found: GgRGR, Role: CUSTOMER
2025-05-10 09:45:53.916  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CUSTOMER]
2025-05-10 09:45:53.916 DEBUG 12700 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 'GgRGR' 认证成功, 设置 SecurityContext
2025-05-10 09:45:53.917 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users/29] with attributes [authenticated]
2025-05-10 09:45:53.917 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/29
2025-05-10 09:45:53.917 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/29", parameters={}
2025-05-10 09:45:53.918 DEBUG 12700 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getUserById(Long)
2025-05-10 09:45:53.923 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:45:53.923 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=UserDTO(id=29, username=GgRGR, name=AEFFAEE, ph (truncated)...]
2025-05-10 09:45:53.925 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:45:53.925 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:45:53.978 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:45:53.978 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{area=null, amenities=[无限量矿泉水、咖啡、茶叶等], availableCount=21, images=[], name=行政套房, des (truncated)...]
2025-05-10 09:45:53.981 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:45:53.981 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:46:06.747 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/reservations
2025-05-10 09:46:06.748 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:46:06.750  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: GgRGR
2025-05-10 09:46:06.755  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : User found: GgRGR, Role: CUSTOMER
2025-05-10 09:46:06.755  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CUSTOMER]
2025-05-10 09:46:06.756 DEBUG 12700 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 'GgRGR' 认证成功, 设置 SecurityContext
2025-05-10 09:46:06.757 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/reservations] with attributes [authenticated]
2025-05-10 09:46:06.757 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/reservations
2025-05-10 09:46:06.757 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/reservations", parameters={}
2025-05-10 09:46:06.757 DEBUG 12700 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#createReservation(Map)
2025-05-10 09:46:06.759 DEBUG 12700 --- [http-nio-8090-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{userId=29, roomType=2, checkIn=2025-05-09T16:00:00.000Z, checkOut=2025-05-22T16:00:00.000Z, roomCou (truncated)...]
2025-05-10 09:46:06.760  INFO 12700 --- [http-nio-8090-exec-8] c.h.controller.ReservationController     : 接收到预订请求数据 Map:
2025-05-10 09:46:06.760  INFO 12700 --- [http-nio-8090-exec-8] c.h.controller.ReservationController     : --- Debugging reservationData before service call ---
2025-05-10 09:46:06.760  INFO 12700 --- [http-nio-8090-exec-8] c.h.controller.ReservationController     : Contains 'paymentStatus' key? false
2025-05-10 09:46:06.760  INFO 12700 --- [http-nio-8090-exec-8] c.h.controller.ReservationController     : --- End Debugging reservationData ---
2025-05-10 09:46:06.796  INFO 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : No paymentStatus provided in request. Using default UNPAID.
2025-05-10 09:46:06.826  INFO 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : [POINTS_ON_CREATE] Triggering consumption record for Reservation ID: 37
2025-05-10 09:46:06.834  INFO 12700 --- [http-nio-8090-exec-8] c.h.s.impl.ConsumptionRecordServiceImpl  : [SAVE_POINTS] Calculated pointsEarned: 0 for amount: 8944.00
2025-05-10 09:46:06.834  INFO 12700 --- [http-nio-8090-exec-8] c.h.s.impl.ConsumptionRecordServiceImpl  : [SAVE_POINTS] ConsumptionRecord before save: [FAILED toString()]
2025-05-10 09:46:06.871  INFO 12700 --- [http-nio-8090-exec-8] c.h.s.impl.ConsumptionRecordServiceImpl  : [SAVE_POINTS] Inside addConsumptionRecord. Saved entity ID: 12, Points Earned: 0
2025-05-10 09:46:06.871  INFO 12700 --- [http-nio-8090-exec-8] c.h.s.impl.ConsumptionRecordServiceImpl  : [SAVE_POINTS] ConsumptionRecord saved successfully. ID: 12, Points Earned in returned entity: 0
2025-05-10 09:46:06.872  INFO 12700 --- [http-nio-8090-exec-8] c.h.s.impl.ConsumptionRecordServiceImpl  : [SAVE_POINTS] User points before update: 0, adding: 0, after update: 0
2025-05-10 09:46:06.897  INFO 12700 --- [http-nio-8090-exec-8] c.h.s.impl.ConsumptionRecordServiceImpl  : [SAVE_POINTS] userService.updateUser called successfully for userId: 29
2025-05-10 09:46:06.897  INFO 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : [POINTS_ON_CREATE] Consumption record processing finished for Reservation ID: 37
2025-05-10 09:46:06.923 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:46:06.923 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=预订创建成功, data={discountRate=0.95, reservationId=37, origi (truncated)...]
2025-05-10 09:46:06.928 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:46:06.929 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:46:07.246 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/membership/info
2025-05-10 09:46:07.246 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:46:07.248  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: GgRGR
2025-05-10 09:46:07.252  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : User found: GgRGR, Role: CUSTOMER
2025-05-10 09:46:07.252  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CUSTOMER]
2025-05-10 09:46:07.252 DEBUG 12700 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 'GgRGR' 认证成功, 设置 SecurityContext
2025-05-10 09:46:07.252 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/membership/info] with attributes [authenticated]
2025-05-10 09:46:07.253 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/membership/info
2025-05-10 09:46:07.253 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/membership/info", parameters={}
2025-05-10 09:46:07.254 DEBUG 12700 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.MembershipController#getCurrentUserMembershipInfo()
2025-05-10 09:46:07.261 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:46:07.261 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=MembershipDTO(userId=29, username=GgRGR, name=AEFFAEE, memberLevel=银牌会员, memberLevel (truncated)...]
2025-05-10 09:46:07.262 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:46:07.263 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:46:08.564 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/29
2025-05-10 09:46:08.565 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:46:08.566  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: GgRGR
2025-05-10 09:46:08.571  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : User found: GgRGR, Role: CUSTOMER
2025-05-10 09:46:08.571  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CUSTOMER]
2025-05-10 09:46:08.572 DEBUG 12700 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 'GgRGR' 认证成功, 设置 SecurityContext
2025-05-10 09:46:08.572 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users/29] with attributes [authenticated]
2025-05-10 09:46:08.572 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/29
2025-05-10 09:46:08.572 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/29", parameters={}
2025-05-10 09:46:08.573 DEBUG 12700 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getUserById(Long)
2025-05-10 09:46:08.581 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:46:08.582 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=UserDTO(id=29, username=GgRGR, name=AEFFAEE, ph (truncated)...]
2025-05-10 09:46:08.583 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:46:08.584 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:46:08.881 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations/user?page=1&pageSize=5
2025-05-10 09:46:08.881 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:46:08.882  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: GgRGR
2025-05-10 09:46:08.885  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : User found: GgRGR, Role: CUSTOMER
2025-05-10 09:46:08.885  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CUSTOMER]
2025-05-10 09:46:08.885 DEBUG 12700 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 'GgRGR' 认证成功, 设置 SecurityContext
2025-05-10 09:46:08.885 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations/user?page=1&pageSize=5] with attributes [authenticated]
2025-05-10 09:46:08.885 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations/user?page=1&pageSize=5
2025-05-10 09:46:08.886 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations/user?page=1&pageSize=5", parameters={masked}
2025-05-10 09:46:08.886 DEBUG 12700 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getCurrentUserReservations(int, int, String)
2025-05-10 09:46:08.897  WARN 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : getUserReservationsPaginated TEMPORARILY ignoring status filter 'null' and calling findByUser only.
2025-05-10 09:46:08.919 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:46:08.920 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 1 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:46:08.931 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:46:08.931 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:46:09.241 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations/user?page=1&pageSize=5
2025-05-10 09:46:09.241 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:46:09.243  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: GgRGR
2025-05-10 09:46:09.246  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : User found: GgRGR, Role: CUSTOMER
2025-05-10 09:46:09.246  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CUSTOMER]
2025-05-10 09:46:09.246 DEBUG 12700 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 'GgRGR' 认证成功, 设置 SecurityContext
2025-05-10 09:46:09.246 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations/user?page=1&pageSize=5] with attributes [authenticated]
2025-05-10 09:46:09.246 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations/user?page=1&pageSize=5
2025-05-10 09:46:09.247 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations/user?page=1&pageSize=5", parameters={masked}
2025-05-10 09:46:09.247 DEBUG 12700 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getCurrentUserReservations(int, int, String)
2025-05-10 09:46:09.252  WARN 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : getUserReservationsPaginated TEMPORARILY ignoring status filter 'null' and calling findByUser only.
2025-05-10 09:46:09.260 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:46:09.260 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 1 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:46:09.262 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:46:09.262 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:46:34.576 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-10 09:46:34.577 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:46:34.577 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:46:34.578 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 5A29A4A47A25E456C4F538CE7FF0CCBF
2025-05-10 09:46:34.578 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-10 09:46:34.578 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-10 09:46:34.579 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-10 09:46:34.579 DEBUG 12700 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-10 09:46:34.580 DEBUG 12700 --- [http-nio-8090-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=admin, password=admin123)]
2025-05-10 09:46:34.580  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: admin
2025-05-10 09:46:34.583  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : User found: admin, Role: ADMIN
2025-05-10 09:46:34.583  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_ADMIN]
2025-05-10 09:46:34.658 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-10 09:46:34.662 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:46:34.662 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=1, username=admin, role=ADMIN, token=eyJhbGciOiJIUz (truncated)...]
2025-05-10 09:46:34.664 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:46:34.664 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:46:34.842 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/occupancy-trend?range=week
2025-05-10 09:46:34.842 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:46:34.844  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: admin
2025-05-10 09:46:34.847  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : User found: admin, Role: ADMIN
2025-05-10 09:46:34.847  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_ADMIN]
2025-05-10 09:46:34.847 DEBUG 12700 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-10 09:46:34.855 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/occupancy-trend?range=week] with attributes [hasRole('ROLE_ADMIN')]
2025-05-10 09:46:34.855 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/occupancy-trend?range=week
2025-05-10 09:46:34.856 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/occupancy-trend?range=week", parameters={masked}
2025-05-10 09:46:34.856 DEBUG 12700 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getOccupancyTrend(String)
2025-05-10 09:46:34.965 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:46:34.965 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{xAxis=[周日, 周一, 周二, 周三, 周四, 周五, 周六], data=[0.0, 7.4, 3.7, 18.5, 0.0, 0.0, 0.0]}]
2025-05-10 09:46:34.966 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:46:34.966 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:46:35.142 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/revenue-stats?range=week
2025-05-10 09:46:35.142 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:46:35.143  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: admin
2025-05-10 09:46:35.146  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : User found: admin, Role: ADMIN
2025-05-10 09:46:35.146  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_ADMIN]
2025-05-10 09:46:35.146 DEBUG 12700 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-10 09:46:35.146 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/revenue-stats?range=week] with attributes [hasRole('ROLE_ADMIN')]
2025-05-10 09:46:35.147 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/revenue-stats?range=week
2025-05-10 09:46:35.147 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/revenue-stats?range=week", parameters={masked}
2025-05-10 09:46:35.147 DEBUG 12700 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getRevenueStats(String)
2025-05-10 09:46:35.149  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-04T00:00 到 2025-05-04T23:59:59.999999999
2025-05-10 09:46:35.153  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 09:46:35.154  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 09:46:35.156  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-04T00:00 到 2025-05-04T23:59:59.999999999
2025-05-10 09:46:35.157 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 09:46:35.157 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:46:35.160  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: admin
2025-05-10 09:46:35.163  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : User found: admin, Role: ADMIN
2025-05-10 09:46:35.163  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_ADMIN]
2025-05-10 09:46:35.163 DEBUG 12700 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-10 09:46:35.164 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:46:35.164 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 09:46:35.164 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 09:46:35.165 DEBUG 12700 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 09:46:35.173  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 6
2025-05-10 09:46:35.173 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 29559.60
2025-05-10 09:46:35.173 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 50974.50
2025-05-10 09:46:35.173 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 72389.40
2025-05-10 09:46:35.173 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 93090.47
2025-05-10 09:46:35.173 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 120077.29
2025-05-10 09:46:35.173 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 145271.29
2025-05-10 09:46:35.173  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 145271.29
2025-05-10 09:46:35.176  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-05T00:00 到 2025-05-05T23:59:59.999999999
2025-05-10 09:46:35.179  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 09:46:35.179  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 09:46:35.182  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-05T00:00 到 2025-05-05T23:59:59.999999999
2025-05-10 09:46:35.193  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 2
2025-05-10 09:46:35.193 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 28896.00
2025-05-10 09:46:35.193 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 50792.00
2025-05-10 09:46:35.193  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 50792.00
2025-05-10 09:46:35.196  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-06T00:00 到 2025-05-06T23:59:59.999999999
2025-05-10 09:46:35.199  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 2
2025-05-10 09:46:35.199 DEBUG 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 退房记录ID: 7, 基础金额: 1159.20
2025-05-10 09:46:35.234  WARN 12700 --- [http-nio-8090-exec-6] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1146, SQLState: 42S02
2025-05-10 09:46:35.235 ERROR 12700 --- [http-nio-8090-exec-6] o.h.engine.jdbc.spi.SqlExceptionHelper   : Table 'heqing.additional_charges' doesn't exist
2025-05-10 09:46:35.237  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:46:35.239  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 09:46:35.240  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 09:46:35.248  INFO 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 09:46:35.252  INFO 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 09:46:35.253 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 09:46:35.253  INFO 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 09:46:35.255  INFO 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:46:35.255 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:46:35.256 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{success=false, message=获取收入统计数据失败: could not extract ResultSet; SQL [n/a]; nested exception is org. (truncated)...]
2025-05-10 09:46:35.257 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 500 INTERNAL_SERVER_ERROR
2025-05-10 09:46:35.257 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:46:35.258  INFO 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 09:46:35.258  INFO 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 09:46:35.261  INFO 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 09:46:35.281  INFO 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 09:46:35.281 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 09:46:35.281 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 09:46:35.281 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 09:46:35.281 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 09:46:35.282 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 09:46:35.282 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 09:46:35.282 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 09:46:35.282 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 09:46:35.282 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 09:46:35.282 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 09:46:35.282 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 09:46:35.282 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 09:46:35.282 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 09:46:35.282 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 09:46:35.282 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 09:46:35.282 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 09:46:35.282 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 09:46:35.282 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 09:46:35.282 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 09:46:35.282 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 09:46:35.282 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 09:46:35.282 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 09:46:35.282 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 09:46:35.282 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 09:46:35.282 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 09:46:35.282 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 09:46:35.283 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 09:46:35.283 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 09:46:35.283 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 09:46:35.283 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 09:46:35.283 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 09:46:35.283 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 09:46:35.283 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 09:46:35.283 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 09:46:35.283 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 09:46:35.283 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 09:46:35.283 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 09:46:35.283  INFO 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 09:46:35.287  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:46:35.292  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 09:46:35.293  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 09:46:35.295  INFO 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:46:35.299  INFO 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 09:46:35.299  INFO 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 09:46:35.335  INFO 12700 --- [http-nio-8090-exec-7] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 15, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 09:46:35.335  INFO 12700 --- [http-nio-8090-exec-7] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 15
2025-05-10 09:46:35.335  INFO 12700 --- [http-nio-8090-exec-7] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 09:46:35.335  INFO 12700 --- [http-nio-8090-exec-7] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 09:46:35.339  INFO 12700 --- [http-nio-8090-exec-7] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 19
2025-05-10 09:46:35.340  INFO 12700 --- [http-nio-8090-exec-7] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 09:46:35.342 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:46:35.342 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 09:46:35.344 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:46:35.344 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:46:42.074 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users?page=1&pageSize=10&username=&phone=&status=
2025-05-10 09:46:42.075 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:46:42.076  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: admin
2025-05-10 09:46:42.078  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : User found: admin, Role: ADMIN
2025-05-10 09:46:42.078  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_ADMIN]
2025-05-10 09:46:42.078 DEBUG 12700 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-10 09:46:42.079 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users?page=1&pageSize=10&username=&phone=&status=] with attributes [hasRole('ROLE_ADMIN')]
2025-05-10 09:46:42.079 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users?page=1&pageSize=10&username=&phone=&status=
2025-05-10 09:46:42.079 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users?page=1&pageSize=10&username=&phone=&status=", parameters={masked}
2025-05-10 09:46:42.079 DEBUG 12700 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getAllUsers(int, int, String, String, String, String)
2025-05-10 09:46:42.093 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:46:42.093 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data={total=29, users=[UserDTO(id=29, username=GgRGR (truncated)...]
2025-05-10 09:46:42.095 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:46:42.096 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:46:46.856 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/staff?page=0&pageSize=10
2025-05-10 09:46:46.857 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:46:46.858  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: admin
2025-05-10 09:46:46.861  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : User found: admin, Role: ADMIN
2025-05-10 09:46:46.862  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_ADMIN]
2025-05-10 09:46:46.862 DEBUG 12700 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-10 09:46:46.862 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users/staff?page=0&pageSize=10] with attributes [authenticated]
2025-05-10 09:46:46.863 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/staff?page=0&pageSize=10
2025-05-10 09:46:46.863 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/staff?page=0&pageSize=10", parameters={masked}
2025-05-10 09:46:46.863 DEBUG 12700 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getAllStaffPaginated(int, int, String, String, String)
2025-05-10 09:46:46.880 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:46:46.880 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data={total=8, users=[UserDTO(id=27, username=安抚二哥天天 (truncated)...]
2025-05-10 09:46:46.881 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:46:46.881 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:46:48.939 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/rooms?page=0&size=10
2025-05-10 09:46:48.939 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:46:48.941  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: admin
2025-05-10 09:46:48.944  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : User found: admin, Role: ADMIN
2025-05-10 09:46:48.944  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_ADMIN]
2025-05-10 09:46:48.944 DEBUG 12700 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-10 09:46:48.945 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/rooms?page=0&size=10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:46:48.945 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/rooms?page=0&size=10
2025-05-10 09:46:48.945 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/rooms?page=0&size=10", parameters={masked}
2025-05-10 09:46:48.945 DEBUG 12700 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminRoomController#getAllRooms(RoomFilterDTO)
2025-05-10 09:46:48.966 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:46:48.967 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data={total=54, list=[{roomNumber=501, lastCleanTime=2025-05-07T13:24:18, notes=shsr, nee (truncated)...]
2025-05-10 09:46:48.969 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:46:48.969 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:46:49.188 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/roomtypes
2025-05-10 09:46:49.189 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:46:49.191  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: admin
2025-05-10 09:46:49.194  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : User found: admin, Role: ADMIN
2025-05-10 09:46:49.194  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_ADMIN]
2025-05-10 09:46:49.194 DEBUG 12700 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-10 09:46:49.194 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/roomtypes] with attributes [hasRole('ROLE_ADMIN')]
2025-05-10 09:46:49.194 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/roomtypes
2025-05-10 09:46:49.194 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/roomtypes", parameters={}
2025-05-10 09:46:49.194 DEBUG 12700 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getAllRoomTypes()
2025-05-10 09:46:49.200 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:46:49.201 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{amenities=无限量矿泉水、咖啡、茶叶等, createTime=2025-04-28T11:22:57, name=行政套房, description=高端 (truncated)...]
2025-05-10 09:46:49.202 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:46:49.202 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:46:51.546 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/invitation-codes/all
2025-05-10 09:46:51.546 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:46:51.548  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: admin
2025-05-10 09:46:51.550  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : User found: admin, Role: ADMIN
2025-05-10 09:46:51.550  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_ADMIN]
2025-05-10 09:46:51.551 DEBUG 12700 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-10 09:46:51.552 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/invitation-codes/all] with attributes [authenticated]
2025-05-10 09:46:51.552 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/invitation-codes/all
2025-05-10 09:46:51.552 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/invitation-codes/all", parameters={}
2025-05-10 09:46:51.552 DEBUG 12700 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#getAllInvitationCodes()
2025-05-10 09:46:51.567 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:46:51.567 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[InvitationCode(id=19, code=3YX1TZ21, role=RECEPTIONIST, maxUses=1, currentUses=0, expiryDate=2025-0 (truncated)...]
2025-05-10 09:46:51.571 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:46:51.572 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:03.103 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-10 09:47:03.104 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:03.104 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:47:03.105 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 5A29A4A47A25E456C4F538CE7FF0CCBF
2025-05-10 09:47:03.105 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-10 09:47:03.106 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-10 09:47:03.106 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-10 09:47:03.106 DEBUG 12700 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-10 09:47:03.107 DEBUG 12700 --- [http-nio-8090-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=cleaner, password=cleaner123)]
2025-05-10 09:47:03.107  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: cleaner
2025-05-10 09:47:03.110  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : User found: cleaner, Role: CLEANER
2025-05-10 09:47:03.110  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CLEANER]
2025-05-10 09:47:03.177 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-10 09:47:03.181 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:03.181 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=3, username=cleaner, role=CLEANER, token=eyJhbGciOi (truncated)...]
2025-05-10 09:47:03.182 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:03.182 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:03.352 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cleaning/tasks
2025-05-10 09:47:03.352 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:03.352  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: cleaner
2025-05-10 09:47:03.355  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : User found: cleaner, Role: CLEANER
2025-05-10 09:47:03.355  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CLEANER]
2025-05-10 09:47:03.355 DEBUG 12700 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 'cleaner' 认证成功, 设置 SecurityContext
2025-05-10 09:47:03.356 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/cleaning/tasks] with attributes [authenticated]
2025-05-10 09:47:03.356 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/cleaning/tasks
2025-05-10 09:47:03.356 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/cleaning/tasks", parameters={}
2025-05-10 09:47:03.356 DEBUG 12700 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CleaningTaskController#getTasks(String, int, int)
2025-05-10 09:47:03.362  INFO 12700 --- [http-nio-8090-exec-5] com.hotel.service.impl.TaskServiceImpl   : 开始自动生成清洁任务...
2025-05-10 09:47:03.368  INFO 12700 --- [http-nio-8090-exec-5] com.hotel.service.impl.TaskServiceImpl   : 找到 1 个需要清洁的房间
2025-05-10 09:47:03.372  INFO 12700 --- [http-nio-8090-exec-5] com.hotel.service.impl.TaskServiceImpl   : 将使用默认清洁员: 清洁人员
2025-05-10 09:47:03.385  INFO 12700 --- [http-nio-8090-exec-5] com.hotel.service.impl.TaskServiceImpl   : 为房间 204 创建了清洁任务，分配给清洁员: 清洁人员
2025-05-10 09:47:03.385  INFO 12700 --- [http-nio-8090-exec-5] com.hotel.service.impl.TaskServiceImpl   : 自动生成清洁任务完成，共创建 1 个新任务
2025-05-10 09:47:03.400 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:03.400 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{totalPages=3, generatedTasksCount=1, currentPage=0, content=[Task(id=27, roomNumber=204, roomType=豪 (truncated)...]
2025-05-10 09:47:03.403 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:03.403 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:03.536 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cleaning/tasks/statistics
2025-05-10 09:47:03.536 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:03.537  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: cleaner
2025-05-10 09:47:03.539  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : User found: cleaner, Role: CLEANER
2025-05-10 09:47:03.540  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CLEANER]
2025-05-10 09:47:03.540 DEBUG 12700 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 'cleaner' 认证成功, 设置 SecurityContext
2025-05-10 09:47:03.540 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/cleaning/tasks/statistics] with attributes [authenticated]
2025-05-10 09:47:03.540 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cleaning/tasks/statistics
2025-05-10 09:47:03.540 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/cleaning/tasks/statistics", parameters={}
2025-05-10 09:47:03.540 DEBUG 12700 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CleaningTaskController#getTaskStatistics()
2025-05-10 09:47:03.542  INFO 12700 --- [http-nio-8090-exec-3] com.hotel.service.impl.TaskServiceImpl   : 开始自动生成清洁任务...
2025-05-10 09:47:03.545  INFO 12700 --- [http-nio-8090-exec-3] com.hotel.service.impl.TaskServiceImpl   : 找到 1 个需要清洁的房间
2025-05-10 09:47:03.546  INFO 12700 --- [http-nio-8090-exec-3] com.hotel.service.impl.TaskServiceImpl   : 将使用默认清洁员: 清洁人员
2025-05-10 09:47:03.548  INFO 12700 --- [http-nio-8090-exec-3] com.hotel.service.impl.TaskServiceImpl   : 房间 204 已存在未完成的清洁任务，跳过任务创建
2025-05-10 09:47:03.549  INFO 12700 --- [http-nio-8090-exec-3] com.hotel.service.impl.TaskServiceImpl   : 自动生成清洁任务完成，共创建 0 个新任务
2025-05-10 09:47:03.558 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:03.558 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{data=TaskDTO(id=null, roomNumber=null, roomType=null, cleaner=null, priority=null, status=null, exp (truncated)...]
2025-05-10 09:47:03.564 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:03.564 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:08.704 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/cleaning/tasks/27/start
2025-05-10 09:47:08.705 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:08.706  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: cleaner
2025-05-10 09:47:08.709  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : User found: cleaner, Role: CLEANER
2025-05-10 09:47:08.709  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CLEANER]
2025-05-10 09:47:08.709 DEBUG 12700 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 'cleaner' 认证成功, 设置 SecurityContext
2025-05-10 09:47:08.709 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/cleaning/tasks/27/start] with attributes [authenticated]
2025-05-10 09:47:08.709 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/cleaning/tasks/27/start
2025-05-10 09:47:08.710 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/cleaning/tasks/27/start", parameters={}
2025-05-10 09:47:08.710 DEBUG 12700 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CleaningTaskController#startTask(Long)
2025-05-10 09:47:08.721 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:08.722 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Task(id=27, roomNumber=204, roomType=豪华大床房, cleaner=清洁人员, priority=medium, status=processing, expect (truncated)...]
2025-05-10 09:47:08.723 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:08.723 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:10.679 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/cleaning/records
2025-05-10 09:47:10.684 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:10.685  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: cleaner
2025-05-10 09:47:10.688  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : User found: cleaner, Role: CLEANER
2025-05-10 09:47:10.688  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CLEANER]
2025-05-10 09:47:10.688 DEBUG 12700 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 'cleaner' 认证成功, 设置 SecurityContext
2025-05-10 09:47:10.688 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/cleaning/records] with attributes [authenticated]
2025-05-10 09:47:10.688 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/cleaning/records
2025-05-10 09:47:10.689 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/cleaning/records", parameters={}
2025-05-10 09:47:10.689 DEBUG 12700 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CleaningRecordController#getCleaningRecords(String, LocalDate, LocalDate)
2025-05-10 09:47:10.761 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:10.761 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{total=19, records=[{duration=1.5小时, roomNumber=501, cleaner=清洁人员, startTime=2025-05-01T09:00, id=1, (truncated)...]
2025-05-10 09:47:10.763 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:10.763 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:14.086 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/cleaning/tasks/27/complete
2025-05-10 09:47:14.087 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:14.088  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: cleaner
2025-05-10 09:47:14.091  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : User found: cleaner, Role: CLEANER
2025-05-10 09:47:14.092  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CLEANER]
2025-05-10 09:47:14.092 DEBUG 12700 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 'cleaner' 认证成功, 设置 SecurityContext
2025-05-10 09:47:14.093 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/cleaning/tasks/27/complete] with attributes [authenticated]
2025-05-10 09:47:14.093 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/cleaning/tasks/27/complete
2025-05-10 09:47:14.093 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : POST "/api/cleaning/tasks/27/complete", parameters={}
2025-05-10 09:47:14.093 DEBUG 12700 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CleaningTaskController#completeTask(Long, TaskDTO)
2025-05-10 09:47:14.107 DEBUG 12700 --- [http-nio-8090-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [TaskDTO(id=null, roomNumber=null, roomType=null, cleaner=null, priority=null, status=null, expectedT (truncated)...]
2025-05-10 09:47:14.110  INFO 12700 --- [http-nio-8090-exec-9] com.hotel.service.impl.TaskServiceImpl   : 任务完成：ID=27, 房间=204, 实际用时=30分钟
2025-05-10 09:47:14.120  INFO 12700 --- [http-nio-8090-exec-9] com.hotel.service.impl.TaskServiceImpl   : 已更新房间状态：房间号=204, 状态=AVAILABLE, 需要清洁=false
2025-05-10 09:47:14.128  INFO 12700 --- [http-nio-8090-exec-9] com.hotel.service.impl.TaskServiceImpl   : TaskServiceImpl: Set CleaningRecord status to COMPLETED for room 204
2025-05-10 09:47:14.128  INFO 12700 --- [http-nio-8090-exec-9] c.h.service.impl.CleaningServiceImpl     : Entering createCleaningRecord. Received record status: COMPLETED
2025-05-10 09:47:14.128  INFO 12700 --- [http-nio-8090-exec-9] c.h.service.impl.CleaningServiceImpl     : Status was not null (COMPLETED), keeping existing status.
2025-05-10 09:47:14.139  INFO 12700 --- [http-nio-8090-exec-9] c.h.service.impl.CleaningServiceImpl     : Saved CleaningRecord. ID: 20, Final Status in DB: COMPLETED
2025-05-10 09:47:14.140  INFO 12700 --- [http-nio-8090-exec-9] com.hotel.service.impl.TaskServiceImpl   : TaskServiceImpl: Called createCleaningRecord. Returned record id: 20, status: COMPLETED
2025-05-10 09:47:14.153 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:14.153 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Task(id=27, roomNumber=204, roomType=豪华大床房, cleaner=清洁人员, priority=medium, status=completed, expecte (truncated)...]
2025-05-10 09:47:14.154 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:14.154 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:14.480 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/cleaning/tasks
2025-05-10 09:47:14.481 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:14.482  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: cleaner
2025-05-10 09:47:14.484  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : User found: cleaner, Role: CLEANER
2025-05-10 09:47:14.485  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CLEANER]
2025-05-10 09:47:14.485 DEBUG 12700 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 'cleaner' 认证成功, 设置 SecurityContext
2025-05-10 09:47:14.485 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/cleaning/tasks] with attributes [authenticated]
2025-05-10 09:47:14.485 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/cleaning/tasks
2025-05-10 09:47:14.486 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/cleaning/tasks", parameters={}
2025-05-10 09:47:14.486 DEBUG 12700 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CleaningTaskController#getTasks(String, int, int)
2025-05-10 09:47:14.487  INFO 12700 --- [http-nio-8090-exec-8] com.hotel.service.impl.TaskServiceImpl   : 开始自动生成清洁任务...
2025-05-10 09:47:14.488  INFO 12700 --- [http-nio-8090-exec-8] com.hotel.service.impl.TaskServiceImpl   : 找到 0 个需要清洁的房间
2025-05-10 09:47:14.490  INFO 12700 --- [http-nio-8090-exec-8] com.hotel.service.impl.TaskServiceImpl   : 将使用默认清洁员: 清洁人员
2025-05-10 09:47:14.490  INFO 12700 --- [http-nio-8090-exec-8] com.hotel.service.impl.TaskServiceImpl   : 自动生成清洁任务完成，共创建 0 个新任务
2025-05-10 09:47:14.501 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:14.501 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{totalPages=3, generatedTasksCount=0, currentPage=0, content=[Task(id=27, roomNumber=204, roomType=豪 (truncated)...]
2025-05-10 09:47:14.502 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:14.502 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:14.733 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cleaning/tasks/statistics
2025-05-10 09:47:14.733 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:14.735  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: cleaner
2025-05-10 09:47:14.737  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : User found: cleaner, Role: CLEANER
2025-05-10 09:47:14.737  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CLEANER]
2025-05-10 09:47:14.738 DEBUG 12700 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 'cleaner' 认证成功, 设置 SecurityContext
2025-05-10 09:47:14.738 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/cleaning/tasks/statistics] with attributes [authenticated]
2025-05-10 09:47:14.738 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cleaning/tasks/statistics
2025-05-10 09:47:14.738 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/cleaning/tasks/statistics", parameters={}
2025-05-10 09:47:14.738 DEBUG 12700 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CleaningTaskController#getTaskStatistics()
2025-05-10 09:47:14.739  INFO 12700 --- [http-nio-8090-exec-4] com.hotel.service.impl.TaskServiceImpl   : 开始自动生成清洁任务...
2025-05-10 09:47:14.740  INFO 12700 --- [http-nio-8090-exec-4] com.hotel.service.impl.TaskServiceImpl   : 找到 0 个需要清洁的房间
2025-05-10 09:47:14.742  INFO 12700 --- [http-nio-8090-exec-4] com.hotel.service.impl.TaskServiceImpl   : 将使用默认清洁员: 清洁人员
2025-05-10 09:47:14.742  INFO 12700 --- [http-nio-8090-exec-4] com.hotel.service.impl.TaskServiceImpl   : 自动生成清洁任务完成，共创建 0 个新任务
2025-05-10 09:47:14.749 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:14.750 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{data=TaskDTO(id=null, roomNumber=null, roomType=null, cleaner=null, priority=null, status=null, exp (truncated)...]
2025-05-10 09:47:14.751 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:14.751 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:28.493 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-10 09:47:28.494 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:28.494 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:47:28.494 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 5A29A4A47A25E456C4F538CE7FF0CCBF
2025-05-10 09:47:28.495 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-10 09:47:28.495 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-10 09:47:28.495 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-10 09:47:28.495 DEBUG 12700 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-10 09:47:28.496 DEBUG 12700 --- [http-nio-8090-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=front, password=front123)]
2025-05-10 09:47:28.496  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:28.499  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:28.499  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:28.567 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-10 09:47:28.571 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:28.571 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=2, username=front, role=RECEPTIONIST, token=eyJhbGc (truncated)...]
2025-05-10 09:47:28.572 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:28.572 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:29.020 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/rooms/types
2025-05-10 09:47:29.020 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:29.020 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10
2025-05-10 09:47:29.020 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:29.021  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:29.021  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:29.024  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:29.024  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:29.024 DEBUG 12700 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:29.025 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/rooms/types] with attributes [permitAll]
2025-05-10 09:47:29.025  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:29.025 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/rooms/types
2025-05-10 09:47:29.025  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:29.025 DEBUG 12700 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:29.025 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/rooms/types", parameters={}
2025-05-10 09:47:29.025 DEBUG 12700 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.RoomController#getAllRoomTypes()
2025-05-10 09:47:29.025 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=0&size=10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:29.026 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=0&size=10
2025-05-10 09:47:29.026 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=0&size=10", parameters={masked}
2025-05-10 09:47:29.026 DEBUG 12700 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:47:29.031  INFO 12700 --- [http-nio-8090-exec-2] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 10, Status: null, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:47:29.031 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=10
2025-05-10 09:47:29.048 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=10, TotalElements=37, TotalPages=4
2025-05-10 09:47:29.050 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:29.051 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:47:29.053 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:29.053 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{area=null, amenities=[无限量矿泉水、咖啡、茶叶等], availableCount=21, images=[], name=行政套房, des (truncated)...]
2025-05-10 09:47:29.054 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:29.054 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:29.054 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:29.054 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:29.276 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 09:47:29.276 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:29.277  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:29.279  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:29.279  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:29.279 DEBUG 12700 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:29.280 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:29.280 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 09:47:29.280 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 09:47:29.280 DEBUG 12700 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 09:47:29.326  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:47:29.328  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 09:47:29.329  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 09:47:29.334  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 09:47:29.337  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 09:47:29.337 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 09:47:29.337  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 09:47:29.339  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:47:29.341  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 09:47:29.341  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 09:47:29.344  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 09:47:29.362  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 09:47:29.362 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 09:47:29.362 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 09:47:29.362 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 09:47:29.362 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 09:47:29.362 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 09:47:29.362 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 09:47:29.362 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 09:47:29.362 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 09:47:29.362 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 09:47:29.362 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 09:47:29.363 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 09:47:29.363 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 09:47:29.363 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 09:47:29.363 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 09:47:29.363 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 09:47:29.363 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 09:47:29.363 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 09:47:29.363 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 09:47:29.363 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 09:47:29.363 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 09:47:29.364 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 09:47:29.364 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 09:47:29.364 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 09:47:29.364 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 09:47:29.364 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 09:47:29.364 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 09:47:29.364 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 09:47:29.364 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 09:47:29.364 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 09:47:29.364 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 09:47:29.364 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 09:47:29.364 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 09:47:29.364 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 09:47:29.364 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 09:47:29.364 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 09:47:29.364 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 09:47:29.365 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 09:47:29.365  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 09:47:29.367  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:47:29.370  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 09:47:29.370  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 09:47:29.373  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:47:29.376  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 09:47:29.376  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 09:47:29.399  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 16, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 09:47:29.400  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 16
2025-05-10 09:47:29.400  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 09:47:29.400  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 09:47:29.403  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 20
2025-05-10 09:47:29.403  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 09:47:29.405 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:29.406 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 09:47:29.407 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:29.407 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:29.414 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkin/today-stats
2025-05-10 09:47:29.414 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:29.414 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:47:29.414 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:29.415  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:29.415  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:29.417  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:29.417  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:29.417  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:29.417  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:29.417 DEBUG 12700 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:29.417 DEBUG 12700 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:29.417 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:29.417 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/checkin/today-stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:29.417 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:47:29.417 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/checkin/today-stats
2025-05-10 09:47:29.417 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/checkin/today-stats", parameters={}
2025-05-10 09:47:29.417 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=PENDING&pageSize=1&size=1&page=0", parameters={masked}
2025-05-10 09:47:29.418 DEBUG 12700 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CheckInController#getTodayStats()
2025-05-10 09:47:29.424 DEBUG 12700 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:47:29.425  INFO 12700 --- [http-nio-8090-exec-6] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: PENDING, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:47:29.426 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:47:29.431 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=5, TotalPages=5
2025-05-10 09:47:29.433 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:29.433 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:29.434 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 5 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:47:29.434 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{data={todayCheckin={total=0, pending=0, completed=0, list=[]}, availableRooms=45, occupancyRate=0.0 (truncated)...]
2025-05-10 09:47:29.435 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:29.435 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:29.435 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:29.435 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:29.443 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:47:29.443 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:29.444  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:29.445  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:29.445  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:29.446 DEBUG 12700 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:29.446 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:29.446 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:47:29.446 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1", parameters={masked}
2025-05-10 09:47:29.446 DEBUG 12700 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:47:29.447  INFO 12700 --- [http-nio-8090-exec-7] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:47:29.447 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:47:29.453 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=14, TotalPages=14
2025-05-10 09:47:29.455 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:29.455 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 14 containing com.hotel.dto.Reservati (truncated)...]
2025-05-10 09:47:29.457 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:29.457 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:35.916 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10&status=pending
2025-05-10 09:47:35.916 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:35.917  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:35.920  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:35.920  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:35.920 DEBUG 12700 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:35.920 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=0&size=10&status=pending] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:35.920 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=0&size=10&status=pending
2025-05-10 09:47:35.920 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=0&size=10&status=pending", parameters={masked}
2025-05-10 09:47:35.921 DEBUG 12700 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:47:35.921  INFO 12700 --- [http-nio-8090-exec-9] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 10, Status: pending, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:47:35.921 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=10
2025-05-10 09:47:35.926 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=10, TotalElements=5, TotalPages=1
2025-05-10 09:47:35.928 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:35.928 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 1 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:47:35.929 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:35.929 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:36.180 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 09:47:36.180 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:36.180  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:36.183  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:36.183  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:36.183 DEBUG 12700 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:36.183 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:36.183 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 09:47:36.183 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 09:47:36.184 DEBUG 12700 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 09:47:36.227  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:47:36.229  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 09:47:36.229  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 09:47:36.236  INFO 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 09:47:36.241  INFO 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 09:47:36.241 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 09:47:36.241  INFO 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 09:47:36.243  INFO 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:47:36.245  INFO 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 09:47:36.245  INFO 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 09:47:36.248  INFO 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 09:47:36.260 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkin/today-stats
2025-05-10 09:47:36.261 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:36.261 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:47:36.261 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:36.261  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:36.262  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:36.265  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:36.265  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:36.265 DEBUG 12700 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:36.266 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/checkin/today-stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:36.266 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/checkin/today-stats
2025-05-10 09:47:36.266 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/checkin/today-stats", parameters={}
2025-05-10 09:47:36.266 DEBUG 12700 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CheckInController#getTodayStats()
2025-05-10 09:47:36.266  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:36.266  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:36.266 DEBUG 12700 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:36.267 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:36.267 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:47:36.267 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=PENDING&pageSize=1&size=1&page=0", parameters={masked}
2025-05-10 09:47:36.267 DEBUG 12700 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:47:36.268  INFO 12700 --- [http-nio-8090-exec-10] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: PENDING, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:47:36.268 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:47:36.268  INFO 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 09:47:36.268 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 09:47:36.269 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 09:47:36.269 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 09:47:36.269 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 09:47:36.269 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 09:47:36.269 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 09:47:36.269 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 09:47:36.269 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 09:47:36.269 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 09:47:36.269 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 09:47:36.269 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 09:47:36.269 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 09:47:36.269 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 09:47:36.269 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 09:47:36.269 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 09:47:36.269 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 09:47:36.269 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 09:47:36.269 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 09:47:36.269 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 09:47:36.269 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 09:47:36.269 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 09:47:36.270 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 09:47:36.270 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 09:47:36.270 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 09:47:36.270 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 09:47:36.270 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 09:47:36.270 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 09:47:36.270 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 09:47:36.270 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 09:47:36.270 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 09:47:36.270 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 09:47:36.270 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 09:47:36.270 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 09:47:36.270 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 09:47:36.270 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 09:47:36.270 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 09:47:36.270 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 09:47:36.270  INFO 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 09:47:36.273  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:47:36.275 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=5, TotalPages=5
2025-05-10 09:47:36.276 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:36.276  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 09:47:36.276  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 09:47:36.276 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 5 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:47:36.277 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:36.278 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:36.279  INFO 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:47:36.281 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:36.281 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{data={todayCheckin={total=0, pending=0, completed=0, list=[]}, availableRooms=45, occupancyRate=0.0 (truncated)...]
2025-05-10 09:47:36.282  INFO 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 09:47:36.282  INFO 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 09:47:36.282 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:36.282 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:36.296 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:47:36.296 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:36.297  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:36.299  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:36.299  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:36.300 DEBUG 12700 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:36.300 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:36.300 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:47:36.300 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1", parameters={masked}
2025-05-10 09:47:36.301 DEBUG 12700 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:47:36.301  INFO 12700 --- [http-nio-8090-exec-1] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:47:36.302 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:47:36.304  INFO 12700 --- [http-nio-8090-exec-8] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 16, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 09:47:36.305  INFO 12700 --- [http-nio-8090-exec-8] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 16
2025-05-10 09:47:36.305  INFO 12700 --- [http-nio-8090-exec-8] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 09:47:36.305  INFO 12700 --- [http-nio-8090-exec-8] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 09:47:36.308 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=14, TotalPages=14
2025-05-10 09:47:36.309  INFO 12700 --- [http-nio-8090-exec-8] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 20
2025-05-10 09:47:36.309  INFO 12700 --- [http-nio-8090-exec-8] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 09:47:36.310 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:36.310 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 14 containing com.hotel.dto.Reservati (truncated)...]
2025-05-10 09:47:36.311 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:36.311 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:36.311 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:36.311 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 09:47:36.313 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:36.313 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:39.955 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/reservations/37/confirm
2025-05-10 09:47:39.955 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:39.956  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:39.959  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:39.959  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:39.960 DEBUG 12700 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:39.960 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/reservations/37/confirm] with attributes [authenticated]
2025-05-10 09:47:39.960 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/reservations/37/confirm
2025-05-10 09:47:39.960 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : POST "/api/reservations/37/confirm", parameters={}
2025-05-10 09:47:39.960 DEBUG 12700 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#confirmReservation(Long)
2025-05-10 09:47:39.978 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:39.978 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=预订确认成功, data=ReservationDTO(id=37, roomTypeName=豪华大床房, r (truncated)...]
2025-05-10 09:47:39.979 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:39.979 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:40.220 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10&status=pending
2025-05-10 09:47:40.220 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:40.221  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:40.223  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:40.224  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:40.224 DEBUG 12700 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:40.224 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=0&size=10&status=pending] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:40.224 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=0&size=10&status=pending
2025-05-10 09:47:40.224 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=0&size=10&status=pending", parameters={masked}
2025-05-10 09:47:40.225 DEBUG 12700 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:47:40.225  INFO 12700 --- [http-nio-8090-exec-5] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 10, Status: pending, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:47:40.226 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=10
2025-05-10 09:47:40.230 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=10, TotalElements=4, TotalPages=1
2025-05-10 09:47:40.232 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:40.232 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 1 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:47:40.233 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:40.233 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:40.296 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 09:47:40.296 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:40.297  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:40.299  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:40.299  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:40.299 DEBUG 12700 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:40.300 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:40.300 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 09:47:40.300 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 09:47:40.300 DEBUG 12700 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 09:47:40.339  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:47:40.342  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 09:47:40.342  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 09:47:40.346  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 09:47:40.350  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 09:47:40.351 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 09:47:40.351  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 09:47:40.352  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:47:40.355  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 09:47:40.355  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 09:47:40.357  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 09:47:40.374  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 09:47:40.374 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 09:47:40.374 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 09:47:40.374 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 09:47:40.374 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 09:47:40.374 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 09:47:40.374 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 09:47:40.374 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 09:47:40.374 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 09:47:40.374 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 09:47:40.374 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 09:47:40.374 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 09:47:40.374 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 09:47:40.374 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 09:47:40.375 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 09:47:40.375 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 09:47:40.375 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 09:47:40.375 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 09:47:40.375 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 09:47:40.375 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 09:47:40.375 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 09:47:40.375 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 09:47:40.375 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 09:47:40.375 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 09:47:40.375 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 09:47:40.375 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 09:47:40.375 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 09:47:40.375 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 09:47:40.375 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 09:47:40.376 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 09:47:40.376 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 09:47:40.376 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 09:47:40.376 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 09:47:40.376 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 09:47:40.376 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 09:47:40.376 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 09:47:40.376 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 09:47:40.376 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 09:47:40.376  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 09:47:40.379  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:47:40.381  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 09:47:40.382  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 09:47:40.385  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:47:40.387  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 09:47:40.388  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 09:47:40.413  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 16, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 09:47:40.413  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 16
2025-05-10 09:47:40.414  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 09:47:40.414  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 09:47:40.417  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 20
2025-05-10 09:47:40.417  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 09:47:40.419 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:40.419 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 09:47:40.420 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:40.420 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:40.573 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkin/today-stats
2025-05-10 09:47:40.573 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:47:40.573 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:40.573 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:40.574  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:40.574  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:40.575  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:40.575  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:40.575  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:40.576  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:40.576 DEBUG 12700 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:40.576 DEBUG 12700 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:40.576 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:40.576 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/checkin/today-stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:40.576 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:47:40.576 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/checkin/today-stats
2025-05-10 09:47:40.576 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/checkin/today-stats", parameters={}
2025-05-10 09:47:40.576 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=PENDING&pageSize=1&size=1&page=0", parameters={masked}
2025-05-10 09:47:40.576 DEBUG 12700 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CheckInController#getTodayStats()
2025-05-10 09:47:40.576 DEBUG 12700 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:47:40.577  INFO 12700 --- [http-nio-8090-exec-7] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: PENDING, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:47:40.578 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:47:40.584 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=4, TotalPages=4
2025-05-10 09:47:40.586 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:40.586 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:47:40.587 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:40.587 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:40.591 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:40.591 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{data={todayCheckin={total=0, pending=0, completed=0, list=[]}, availableRooms=45, occupancyRate=0.0 (truncated)...]
2025-05-10 09:47:40.592 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:40.592 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:40.603 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:47:40.603 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:40.604  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:40.606  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:40.607  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:40.607 DEBUG 12700 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:40.607 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:40.607 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:47:40.607 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1", parameters={masked}
2025-05-10 09:47:40.607 DEBUG 12700 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:47:40.608  INFO 12700 --- [http-nio-8090-exec-9] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:47:40.608 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:47:40.613 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=15, TotalPages=15
2025-05-10 09:47:40.615 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:40.615 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 15 containing com.hotel.dto.Reservati (truncated)...]
2025-05-10 09:47:40.616 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:40.616 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:42.855 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10
2025-05-10 09:47:42.855 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:42.857  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:42.859  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:42.859  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:42.859 DEBUG 12700 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:42.860 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=0&size=10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:42.860 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=0&size=10
2025-05-10 09:47:42.860 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=0&size=10", parameters={masked}
2025-05-10 09:47:42.860 DEBUG 12700 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:47:42.861  INFO 12700 --- [http-nio-8090-exec-10] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 10, Status: null, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:47:42.861 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=10
2025-05-10 09:47:42.869 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=10, TotalElements=37, TotalPages=4
2025-05-10 09:47:42.871 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:42.871 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:47:42.872 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:42.873 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:43.106 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 09:47:43.106 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:43.107  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:43.109  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:43.109  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:43.110 DEBUG 12700 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:43.110 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:43.110 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 09:47:43.110 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 09:47:43.110 DEBUG 12700 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 09:47:43.154  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:47:43.156  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 09:47:43.156  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 09:47:43.162  INFO 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 09:47:43.165  INFO 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 09:47:43.165 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 09:47:43.165  INFO 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 09:47:43.168  INFO 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:47:43.170  INFO 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 09:47:43.170  INFO 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 09:47:43.172  INFO 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 09:47:43.189  INFO 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 09:47:43.189 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 09:47:43.189 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 09:47:43.189 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 09:47:43.189 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 09:47:43.189 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 09:47:43.190 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 09:47:43.190 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 09:47:43.190 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 09:47:43.190 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 09:47:43.190 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 09:47:43.190 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 09:47:43.190 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 09:47:43.190 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 09:47:43.190 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 09:47:43.190 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 09:47:43.190 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 09:47:43.191 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 09:47:43.191 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 09:47:43.191 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 09:47:43.191 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 09:47:43.191 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 09:47:43.191 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 09:47:43.191 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 09:47:43.191 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 09:47:43.191 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 09:47:43.191 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 09:47:43.191 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 09:47:43.191 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 09:47:43.191 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 09:47:43.191 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 09:47:43.191 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 09:47:43.191 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 09:47:43.191 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 09:47:43.191 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 09:47:43.191 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 09:47:43.191 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 09:47:43.191 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 09:47:43.191  INFO 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 09:47:43.194  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:47:43.197  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 09:47:43.197  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 09:47:43.199  INFO 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:47:43.202  INFO 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 09:47:43.202  INFO 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 09:47:43.224  INFO 12700 --- [http-nio-8090-exec-4] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 16, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 09:47:43.224  INFO 12700 --- [http-nio-8090-exec-4] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 16
2025-05-10 09:47:43.224  INFO 12700 --- [http-nio-8090-exec-4] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 09:47:43.225  INFO 12700 --- [http-nio-8090-exec-4] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 09:47:43.228  INFO 12700 --- [http-nio-8090-exec-4] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 20
2025-05-10 09:47:43.228  INFO 12700 --- [http-nio-8090-exec-4] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 09:47:43.231 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:43.231 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 09:47:43.232 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:43.232 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:43.238 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkin/today-stats
2025-05-10 09:47:43.238 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:43.240  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:43.241 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:47:43.241 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:43.241  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:43.242  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:43.242 DEBUG 12700 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:43.242  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:43.242 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/checkin/today-stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:43.242 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/checkin/today-stats
2025-05-10 09:47:43.242 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/checkin/today-stats", parameters={}
2025-05-10 09:47:43.243 DEBUG 12700 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CheckInController#getTodayStats()
2025-05-10 09:47:43.245  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:43.246  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:43.246 DEBUG 12700 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:43.246 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:43.246 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:47:43.247 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=PENDING&pageSize=1&size=1&page=0", parameters={masked}
2025-05-10 09:47:43.247 DEBUG 12700 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:47:43.248  INFO 12700 --- [http-nio-8090-exec-8] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: PENDING, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:47:43.248 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:47:43.254 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=4, TotalPages=4
2025-05-10 09:47:43.256 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:43.256 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:47:43.257 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:43.257 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:43.259 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:43.259 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{data={todayCheckin={total=0, pending=0, completed=0, list=[]}, availableRooms=45, occupancyRate=0.0 (truncated)...]
2025-05-10 09:47:43.260 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:43.261 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:43.273 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:47:43.273 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:43.275  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:43.277  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:43.277  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:43.277 DEBUG 12700 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:43.277 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:43.277 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:47:43.277 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1", parameters={masked}
2025-05-10 09:47:43.278 DEBUG 12700 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:47:43.279  INFO 12700 --- [http-nio-8090-exec-2] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:47:43.279 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:47:43.283 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=15, TotalPages=15
2025-05-10 09:47:43.285 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:43.285 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 15 containing com.hotel.dto.Reservati (truncated)...]
2025-05-10 09:47:43.286 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:43.286 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:45.256 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=3&size=10
2025-05-10 09:47:45.257 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:45.258  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:45.260  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:45.260  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:45.260 DEBUG 12700 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:45.260 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=3&size=10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:45.260 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=3&size=10
2025-05-10 09:47:45.261 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=3&size=10", parameters={masked}
2025-05-10 09:47:45.261 DEBUG 12700 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:47:45.262  INFO 12700 --- [http-nio-8090-exec-5] c.h.controller.ReservationController     : Received request for reservations - Page Index: 3, Page Size: 10, Status: null, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:47:45.262 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=3, PageSize=10
2025-05-10 09:47:45.267 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=3, Size=10, TotalElements=37, TotalPages=4
2025-05-10 09:47:45.269 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:45.269 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 4 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:47:45.270 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:45.270 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:45.506 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 09:47:45.507 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:45.508  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:45.510  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:45.510  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:45.510 DEBUG 12700 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:45.511 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:45.511 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 09:47:45.511 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 09:47:45.511 DEBUG 12700 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 09:47:45.548  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:47:45.551  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 09:47:45.551  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 09:47:45.556  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 09:47:45.559  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 09:47:45.559 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 09:47:45.559  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 09:47:45.560  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:47:45.562  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 09:47:45.562  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 09:47:45.564  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 09:47:45.582  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 09:47:45.582 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 09:47:45.582 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 09:47:45.582 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 09:47:45.582 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 09:47:45.582 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 09:47:45.582 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 09:47:45.582 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 09:47:45.582 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 09:47:45.582 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 09:47:45.582 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 09:47:45.582 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 09:47:45.582 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 09:47:45.582 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 09:47:45.582 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 09:47:45.582 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 09:47:45.583 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 09:47:45.583 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 09:47:45.583 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 09:47:45.583 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 09:47:45.583 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 09:47:45.583 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 09:47:45.583 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 09:47:45.583 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 09:47:45.583 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 09:47:45.583 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 09:47:45.583 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 09:47:45.583 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 09:47:45.583 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 09:47:45.583 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 09:47:45.583 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 09:47:45.583 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 09:47:45.583 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 09:47:45.583 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 09:47:45.583 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 09:47:45.584 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 09:47:45.584 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 09:47:45.584 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 09:47:45.584  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 09:47:45.587  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:47:45.589  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 09:47:45.589  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 09:47:45.592  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:47:45.593  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 09:47:45.593  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 09:47:45.612  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 16, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 09:47:45.612  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 16
2025-05-10 09:47:45.612  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 09:47:45.613  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 09:47:45.614  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 20
2025-05-10 09:47:45.616  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 09:47:45.616 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkin/today-stats
2025-05-10 09:47:45.616 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:47:45.617 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:45.617 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:45.617 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:45.617 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 09:47:45.617  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:45.617  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:45.618 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:45.619 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:45.620  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:45.620  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:45.620 DEBUG 12700 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:45.620 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/checkin/today-stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:45.620  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:45.620 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/checkin/today-stats
2025-05-10 09:47:45.620  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:45.620 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/checkin/today-stats", parameters={}
2025-05-10 09:47:45.620 DEBUG 12700 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:45.621 DEBUG 12700 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CheckInController#getTodayStats()
2025-05-10 09:47:45.621 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:45.621 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:47:45.621 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=PENDING&pageSize=1&size=1&page=0", parameters={masked}
2025-05-10 09:47:45.621 DEBUG 12700 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:47:45.621  INFO 12700 --- [http-nio-8090-exec-3] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: PENDING, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:47:45.622 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:47:45.626 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=4, TotalPages=4
2025-05-10 09:47:45.627 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:45.628 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:47:45.629 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:45.629 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:45.632 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:45.632 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{data={todayCheckin={total=0, pending=0, completed=0, list=[]}, availableRooms=45, occupancyRate=0.0 (truncated)...]
2025-05-10 09:47:45.633 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:45.633 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:45.639 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:47:45.640 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:45.640  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:45.642  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:45.642  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:45.642 DEBUG 12700 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:45.643 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:45.643 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:47:45.643 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1", parameters={masked}
2025-05-10 09:47:45.643 DEBUG 12700 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:47:45.644  INFO 12700 --- [http-nio-8090-exec-9] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:47:45.644 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:47:45.649 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=15, TotalPages=15
2025-05-10 09:47:45.651 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:45.651 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 15 containing com.hotel.dto.Reservati (truncated)...]
2025-05-10 09:47:45.652 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:45.652 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:47.582 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/rooms/filter?status=AVAILABLE&pageSize=200&page=0&roomTypeId=2&size=200
2025-05-10 09:47:47.583 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:47.584  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:47.586  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:47.586  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:47.587 DEBUG 12700 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:47.587 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/rooms/filter?status=AVAILABLE&pageSize=200&page=0&roomTypeId=2&size=200] with attributes [authenticated]
2025-05-10 09:47:47.587 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/rooms/filter?status=AVAILABLE&pageSize=200&page=0&roomTypeId=2&size=200
2025-05-10 09:47:47.587 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/rooms/filter?status=AVAILABLE&pageSize=200&page=0&roomTypeId=2&size=200", parameters={masked}
2025-05-10 09:47:47.587 DEBUG 12700 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.RoomController#getRoomsWithFilters(RoomFilterDTO)
2025-05-10 09:47:47.600 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:47.600 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{number=0, size=200, totalPages=1, content=[{roomNumber=501, id=1, floor=5, roomType={name=豪华大床房, id (truncated)...]
2025-05-10 09:47:47.602 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:47.602 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:49.881 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/admin/checkin
2025-05-10 09:47:49.881 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:49.883  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:49.885  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:49.885  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:49.885 DEBUG 12700 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:49.886 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/admin/checkin] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:49.886 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/admin/checkin
2025-05-10 09:47:49.886 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/admin/checkin", parameters={}
2025-05-10 09:47:49.887 DEBUG 12700 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CheckInController#checkIn(CheckInRecord)
2025-05-10 09:47:49.903 DEBUG 12700 --- [http-nio-8090-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [CheckInRecord(id=null, checkInNumber=null, roomId=10, roomNumber=208, roomType=null, guestName=AEFFA (truncated)...]
2025-05-10 09:47:49.911  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.impl.CheckInServiceImpl  : Payment method not provided, defaulting to CASH for CheckInRecord with bookingId: 37
2025-05-10 09:47:49.924  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.impl.CheckInServiceImpl  : 入住登记成功: ID=21, 入住单号=CI202505100001, 预订ID=37
2025-05-10 09:47:49.934 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:49.935 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{data=CheckInRecord(id=21, checkInNumber=CI202505100001, roomId=10, roomNumber=208, roomType=豪华大床房,  (truncated)...]
2025-05-10 09:47:49.941 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-05-10 09:47:49.941 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:50.267 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=3&size=10
2025-05-10 09:47:50.267 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:50.267  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:50.270  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:50.270  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:50.270 DEBUG 12700 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:50.270 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=3&size=10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:50.270 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=3&size=10
2025-05-10 09:47:50.270 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=3&size=10", parameters={masked}
2025-05-10 09:47:50.271 DEBUG 12700 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:47:50.271  INFO 12700 --- [http-nio-8090-exec-8] c.h.controller.ReservationController     : Received request for reservations - Page Index: 3, Page Size: 10, Status: null, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:47:50.271 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=3, PageSize=10
2025-05-10 09:47:50.276 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=3, Size=10, TotalElements=37, TotalPages=4
2025-05-10 09:47:50.278 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:50.279 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 4 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:47:50.281 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:50.281 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:50.531 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 09:47:50.531 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:50.533  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:50.536  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:50.536  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:50.536 DEBUG 12700 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:50.537 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:50.537 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 09:47:50.537 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 09:47:50.537 DEBUG 12700 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 09:47:50.583  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:47:50.586  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 09:47:50.586  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 09:47:50.593  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 09:47:50.597  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 09:47:50.597 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 09:47:50.597  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 09:47:50.600  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:47:50.602  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 09:47:50.602  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 09:47:50.604  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 09:47:50.614 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkin/today-stats
2025-05-10 09:47:50.614 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:50.615 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:47:50.615 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:50.615  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:50.616  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:50.618  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:50.618  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:50.618 DEBUG 12700 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:50.619 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/checkin/today-stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:50.619 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/checkin/today-stats
2025-05-10 09:47:50.619 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/checkin/today-stats", parameters={}
2025-05-10 09:47:50.619 DEBUG 12700 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CheckInController#getTodayStats()
2025-05-10 09:47:50.620  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:50.620  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:50.620 DEBUG 12700 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:50.620 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:50.620 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:47:50.621 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=PENDING&pageSize=1&size=1&page=0", parameters={masked}
2025-05-10 09:47:50.621 DEBUG 12700 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:47:50.622  INFO 12700 --- [http-nio-8090-exec-5] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: PENDING, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:47:50.622 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:47:50.626  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 09:47:50.626 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 09:47:50.626 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 09:47:50.626 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 09:47:50.627 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 09:47:50.627 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 09:47:50.627 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 09:47:50.627 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 09:47:50.627 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 09:47:50.627 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 09:47:50.627 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 09:47:50.627 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 09:47:50.627 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 09:47:50.627 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 09:47:50.627 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 09:47:50.627 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 09:47:50.627 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 09:47:50.627 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 09:47:50.627 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 09:47:50.627 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 09:47:50.627 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 09:47:50.627 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 09:47:50.627 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 09:47:50.627 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 09:47:50.627 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 09:47:50.627 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 09:47:50.627 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 09:47:50.627 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 09:47:50.627 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 09:47:50.628 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 09:47:50.628 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 09:47:50.628 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 09:47:50.628 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 09:47:50.628 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 09:47:50.628 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 09:47:50.628 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 09:47:50.628 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 09:47:50.628 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 09:47:50.628  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 09:47:50.628 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=4, TotalPages=4
2025-05-10 09:47:50.630 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:50.630 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:47:50.630  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:47:50.631 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:50.631 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:50.634  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 09:47:50.634  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 09:47:50.635 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:50.636  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:47:50.636  WARN 12700 --- [http-nio-8090-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1146, SQLState: 42S02
2025-05-10 09:47:50.636 ERROR 12700 --- [http-nio-8090-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : Table 'heqing.additional_charges' doesn't exist
2025-05-10 09:47:50.636 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [org.hibernate.exception.SQLGrammarException: could not extract ResultSet]
2025-05-10 09:47:50.638  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 09:47:50.639  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 09:47:50.639  WARN 12700 --- [http-nio-8090-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1146, SQLState: 42S02
2025-05-10 09:47:50.640 ERROR 12700 --- [http-nio-8090-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : Table 'heqing.additional_charges' doesn't exist
2025-05-10 09:47:50.649  WARN 12700 --- [http-nio-8090-exec-2] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: could not extract ResultSet; nested exception is com.fasterxml.jackson.databind.JsonMappingException: could not extract ResultSet (through reference chain: java.util.HashMap["data"]->java.util.HashMap["todayCheckin"]->java.util.HashMap["list"]->java.util.ArrayList[0]->com.hotel.entity.CheckInRecord["additionalCharges"])]
2025-05-10 09:47:50.649 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 500 INTERNAL_SERVER_ERROR
2025-05-10 09:47:50.649 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:50.650 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /error
2025-05-10 09:47:50.650 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:50.650 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:47:50.650 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /error
2025-05-10 09:47:50.650 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/error", parameters={}
2025-05-10 09:47:50.651 DEBUG 12700 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CustomErrorController#handleError(HttpServletRequest, WebRequest)
2025-05-10 09:47:50.651 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:50.651 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=Internal Server Error, message=An error occurred, status=500}]
2025-05-10 09:47:50.652 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 500
2025-05-10 09:47:50.652 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:50.663  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 16, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 09:47:50.663  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 16
2025-05-10 09:47:50.663  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 09:47:50.663  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 09:47:50.666  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 20
2025-05-10 09:47:50.666  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 09:47:50.668 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:50.669 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 09:47:50.669 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:47:50.669 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:50.670 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:50.670 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:50.671  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:50.672  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:50.672  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:50.672 DEBUG 12700 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:50.673 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:50.673 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:47:50.673 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1", parameters={masked}
2025-05-10 09:47:50.673 DEBUG 12700 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:47:50.674  INFO 12700 --- [http-nio-8090-exec-6] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:47:50.675 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:47:50.679 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=14, TotalPages=14
2025-05-10 09:47:50.681 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:50.682 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 14 containing com.hotel.dto.Reservati (truncated)...]
2025-05-10 09:47:50.683 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:50.683 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:54.968 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10&status=confirmed&exactCheckInDate=2025-05-10&exactDate=checkIn&date=2025-05-10
2025-05-10 09:47:54.968 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10
2025-05-10 09:47:54.969 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:54.969 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:54.970  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:54.970  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:54.972  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:54.972  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:54.972 DEBUG 12700 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:54.972  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:54.973  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:54.973 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=0&size=10&status=confirmed&exactCheckInDate=2025-05-10&exactDate=checkIn&date=2025-05-10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:54.973 DEBUG 12700 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:54.973 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=0&size=10&status=confirmed&exactCheckInDate=2025-05-10&exactDate=checkIn&date=2025-05-10
2025-05-10 09:47:54.973 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=0&size=10&status=confirmed&exactCheckInDate=2025-05-10&exactDate=checkIn&date=2025-05-10", parameters={masked}
2025-05-10 09:47:54.973 DEBUG 12700 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:47:54.973 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=0&size=10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:54.973 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=0&size=10
2025-05-10 09:47:54.973 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=0&size=10", parameters={masked}
2025-05-10 09:47:54.974  INFO 12700 --- [http-nio-8090-exec-7] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 10, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:47:54.974 DEBUG 12700 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:47:54.974 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=10
2025-05-10 09:47:54.974  INFO 12700 --- [http-nio-8090-exec-3] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 10, Status: null, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:47:54.974 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=10
2025-05-10 09:47:54.979 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=10, TotalElements=14, TotalPages=2
2025-05-10 09:47:54.979 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=10, TotalElements=37, TotalPages=4
2025-05-10 09:47:54.981 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:54.981 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:54.986 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:47:54.981 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 2 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:47:54.987 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:54.987 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:54.987 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:54.987 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:55.219 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 09:47:55.219 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:55.219  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:55.221  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:55.221  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:55.222 DEBUG 12700 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:55.222 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:55.222 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 09:47:55.222 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 09:47:55.222 DEBUG 12700 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 09:47:55.266  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:47:55.267  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 09:47:55.267  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 09:47:55.272  INFO 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 09:47:55.275  INFO 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 09:47:55.275 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 09:47:55.275  INFO 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 09:47:55.277  INFO 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:47:55.279  INFO 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 09:47:55.280  INFO 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 09:47:55.281  INFO 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 09:47:55.297  INFO 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 09:47:55.297 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 09:47:55.297 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 09:47:55.297 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 09:47:55.297 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 09:47:55.297 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 09:47:55.297 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 09:47:55.297 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 09:47:55.297 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 09:47:55.297 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 09:47:55.298 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 09:47:55.298 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 09:47:55.298 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 09:47:55.298 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 09:47:55.298 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 09:47:55.298 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 09:47:55.298 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 09:47:55.298 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 09:47:55.298 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 09:47:55.298 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 09:47:55.299 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 09:47:55.299 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 09:47:55.299 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 09:47:55.299 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 09:47:55.299 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 09:47:55.299 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 09:47:55.299 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 09:47:55.299 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 09:47:55.299 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 09:47:55.299 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 09:47:55.299 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 09:47:55.299 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 09:47:55.299 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 09:47:55.299 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 09:47:55.299 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 09:47:55.299 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 09:47:55.299 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 09:47:55.299 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 09:47:55.299  INFO 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 09:47:55.301  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:47:55.303  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 09:47:55.303  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 09:47:55.306  INFO 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:47:55.308  INFO 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 09:47:55.308  INFO 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 09:47:55.329  INFO 12700 --- [http-nio-8090-exec-9] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 16, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 09:47:55.329  INFO 12700 --- [http-nio-8090-exec-9] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 16
2025-05-10 09:47:55.329  INFO 12700 --- [http-nio-8090-exec-9] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 09:47:55.329  INFO 12700 --- [http-nio-8090-exec-9] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 09:47:55.331  INFO 12700 --- [http-nio-8090-exec-9] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 20
2025-05-10 09:47:55.331  INFO 12700 --- [http-nio-8090-exec-9] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 09:47:55.334 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:55.334 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 09:47:55.334 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:55.335 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:55.345 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:47:55.345 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkin/today-stats
2025-05-10 09:47:55.345 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:55.345 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:55.346  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:55.346  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:55.348  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:55.348  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:55.348 DEBUG 12700 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:55.348  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:55.348  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:55.348 DEBUG 12700 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:55.348 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/checkin/today-stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:55.348 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/checkin/today-stats
2025-05-10 09:47:55.348 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:55.349 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/checkin/today-stats", parameters={}
2025-05-10 09:47:55.349 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:47:55.349 DEBUG 12700 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CheckInController#getTodayStats()
2025-05-10 09:47:55.349 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=PENDING&pageSize=1&size=1&page=0", parameters={masked}
2025-05-10 09:47:55.349 DEBUG 12700 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:47:55.350  INFO 12700 --- [http-nio-8090-exec-4] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: PENDING, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:47:55.350 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:47:55.355 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=4, TotalPages=4
2025-05-10 09:47:55.357 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:55.357 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:47:55.358 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:55.358 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:55.364 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:55.368  WARN 12700 --- [http-nio-8090-exec-10] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1146, SQLState: 42S02
2025-05-10 09:47:55.368 ERROR 12700 --- [http-nio-8090-exec-10] o.h.engine.jdbc.spi.SqlExceptionHelper   : Table 'heqing.additional_charges' doesn't exist
2025-05-10 09:47:55.368 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [org.hibernate.exception.SQLGrammarException: could not extract ResultSet]
2025-05-10 09:47:55.370  WARN 12700 --- [http-nio-8090-exec-10] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1146, SQLState: 42S02
2025-05-10 09:47:55.370 ERROR 12700 --- [http-nio-8090-exec-10] o.h.engine.jdbc.spi.SqlExceptionHelper   : Table 'heqing.additional_charges' doesn't exist
2025-05-10 09:47:55.370  WARN 12700 --- [http-nio-8090-exec-10] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: could not extract ResultSet; nested exception is com.fasterxml.jackson.databind.JsonMappingException: could not extract ResultSet (through reference chain: java.util.HashMap["data"]->java.util.HashMap["todayCheckin"]->java.util.HashMap["list"]->java.util.ArrayList[0]->com.hotel.entity.CheckInRecord["additionalCharges"])]
2025-05-10 09:47:55.370 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 500 INTERNAL_SERVER_ERROR
2025-05-10 09:47:55.371 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:55.371 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /error
2025-05-10 09:47:55.371 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:55.371 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:47:55.371 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /error
2025-05-10 09:47:55.372 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/error", parameters={}
2025-05-10 09:47:55.372 DEBUG 12700 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CustomErrorController#handleError(HttpServletRequest, WebRequest)
2025-05-10 09:47:55.372 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:55.372 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=Internal Server Error, message=An error occurred, status=500}]
2025-05-10 09:47:55.373 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 500
2025-05-10 09:47:55.373 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:55.388 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:47:55.388 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:55.389  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:55.390  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:55.390  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:55.392 DEBUG 12700 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:55.392 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:55.392 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:47:55.392 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1", parameters={masked}
2025-05-10 09:47:55.392 DEBUG 12700 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:47:55.393  INFO 12700 --- [http-nio-8090-exec-8] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:47:55.393 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:47:55.399 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=14, TotalPages=14
2025-05-10 09:47:55.402 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:55.402 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 14 containing com.hotel.dto.Reservati (truncated)...]
2025-05-10 09:47:55.403 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:55.404 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:56.749 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10&status=confirmed&exactCheckInDate=2025-05-10&exactDate=checkIn&date=2025-05-10
2025-05-10 09:47:56.749 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10
2025-05-10 09:47:56.750 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:56.750 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:56.751  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:56.751  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:56.753  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:56.753  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:56.754  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:56.754  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:56.754 DEBUG 12700 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:56.754 DEBUG 12700 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:56.754 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=0&size=10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:56.754 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=0&size=10&status=confirmed&exactCheckInDate=2025-05-10&exactDate=checkIn&date=2025-05-10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:56.754 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=0&size=10
2025-05-10 09:47:56.754 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=0&size=10&status=confirmed&exactCheckInDate=2025-05-10&exactDate=checkIn&date=2025-05-10
2025-05-10 09:47:56.755 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=0&size=10&status=confirmed&exactCheckInDate=2025-05-10&exactDate=checkIn&date=2025-05-10", parameters={masked}
2025-05-10 09:47:56.755 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=0&size=10", parameters={masked}
2025-05-10 09:47:56.755 DEBUG 12700 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:47:56.755 DEBUG 12700 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:47:56.756  INFO 12700 --- [http-nio-8090-exec-5] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 10, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:47:56.756 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=10
2025-05-10 09:47:56.756  INFO 12700 --- [http-nio-8090-exec-2] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 10, Status: null, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:47:56.756 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=10
2025-05-10 09:47:56.763 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=10, TotalElements=37, TotalPages=4
2025-05-10 09:47:56.763 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=10, TotalElements=14, TotalPages=2
2025-05-10 09:47:56.765 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:56.765 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:56.765 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:47:56.765 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 2 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:47:56.766 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:56.766 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:56.766 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:56.766 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:57.010 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 09:47:57.010 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:57.010  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:57.013  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:57.013  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:57.013 DEBUG 12700 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:57.013 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:57.013 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 09:47:57.013 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 09:47:57.014 DEBUG 12700 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 09:47:57.054  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:47:57.056  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 09:47:57.056  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 09:47:57.061  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 09:47:57.064  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 09:47:57.064 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 09:47:57.064  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 09:47:57.066  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:47:57.068  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 09:47:57.068  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 09:47:57.070  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 09:47:57.088  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 09:47:57.088 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 09:47:57.089 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 09:47:57.089 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 09:47:57.089 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 09:47:57.089 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 09:47:57.089 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 09:47:57.089 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 09:47:57.089 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 09:47:57.089 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 09:47:57.089 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 09:47:57.089 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 09:47:57.089 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 09:47:57.089 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 09:47:57.089 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 09:47:57.089 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 09:47:57.089 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 09:47:57.089 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 09:47:57.090 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 09:47:57.090 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 09:47:57.090 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 09:47:57.090 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 09:47:57.090 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 09:47:57.090 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 09:47:57.090 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 09:47:57.090 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 09:47:57.090 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 09:47:57.090 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 09:47:57.090 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 09:47:57.090 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 09:47:57.090 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 09:47:57.091 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 09:47:57.091 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 09:47:57.091 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 09:47:57.091 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 09:47:57.091 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 09:47:57.091 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 09:47:57.091 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 09:47:57.091  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 09:47:57.093  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:47:57.096  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 09:47:57.096  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 09:47:57.098  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:47:57.100  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 09:47:57.100  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 09:47:57.111 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkin/today-stats
2025-05-10 09:47:57.111 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:47:57.112 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:57.112 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:57.112  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:57.113  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:57.114  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:57.114  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:57.114  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:57.114  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:57.114 DEBUG 12700 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:57.114 DEBUG 12700 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:57.115 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:57.115 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/checkin/today-stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:57.115 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/checkin/today-stats
2025-05-10 09:47:57.115 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:47:57.116 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/checkin/today-stats", parameters={}
2025-05-10 09:47:57.116 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=PENDING&pageSize=1&size=1&page=0", parameters={masked}
2025-05-10 09:47:57.116 DEBUG 12700 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CheckInController#getTodayStats()
2025-05-10 09:47:57.116 DEBUG 12700 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:47:57.117  INFO 12700 --- [http-nio-8090-exec-7] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: PENDING, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:47:57.117 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:47:57.122 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=4, TotalPages=4
2025-05-10 09:47:57.124  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 16, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 09:47:57.124 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:57.124  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 16
2025-05-10 09:47:57.124  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 09:47:57.124  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 09:47:57.124 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:47:57.126 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:57.126 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:57.127  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 20
2025-05-10 09:47:57.128  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 09:47:57.130 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:57.130 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 09:47:57.130 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:57.132 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:57.132 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:57.133  WARN 12700 --- [http-nio-8090-exec-6] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1146, SQLState: 42S02
2025-05-10 09:47:57.133 ERROR 12700 --- [http-nio-8090-exec-6] o.h.engine.jdbc.spi.SqlExceptionHelper   : Table 'heqing.additional_charges' doesn't exist
2025-05-10 09:47:57.133 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [org.hibernate.exception.SQLGrammarException: could not extract ResultSet]
2025-05-10 09:47:57.135  WARN 12700 --- [http-nio-8090-exec-6] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1146, SQLState: 42S02
2025-05-10 09:47:57.135 ERROR 12700 --- [http-nio-8090-exec-6] o.h.engine.jdbc.spi.SqlExceptionHelper   : Table 'heqing.additional_charges' doesn't exist
2025-05-10 09:47:57.135  WARN 12700 --- [http-nio-8090-exec-6] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: could not extract ResultSet; nested exception is com.fasterxml.jackson.databind.JsonMappingException: could not extract ResultSet (through reference chain: java.util.HashMap["data"]->java.util.HashMap["todayCheckin"]->java.util.HashMap["list"]->java.util.ArrayList[0]->com.hotel.entity.CheckInRecord["additionalCharges"])]
2025-05-10 09:47:57.135 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 500 INTERNAL_SERVER_ERROR
2025-05-10 09:47:57.136 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:57.136 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /error
2025-05-10 09:47:57.136 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:57.136 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:47:57.136 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /error
2025-05-10 09:47:57.137 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/error", parameters={}
2025-05-10 09:47:57.137 DEBUG 12700 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CustomErrorController#handleError(HttpServletRequest, WebRequest)
2025-05-10 09:47:57.137 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:57.138 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=Internal Server Error, message=An error occurred, status=500}]
2025-05-10 09:47:57.138 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 500
2025-05-10 09:47:57.138 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:47:57.154 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:47:57.154 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:47:57.155  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:47:57.156  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:47:57.156  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:47:57.156 DEBUG 12700 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:47:57.157 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:47:57.157 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:47:57.157 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1", parameters={masked}
2025-05-10 09:47:57.158 DEBUG 12700 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:47:57.159  INFO 12700 --- [http-nio-8090-exec-3] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:47:57.159 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:47:57.165 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=14, TotalPages=14
2025-05-10 09:47:57.167 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:47:57.167 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 14 containing com.hotel.dto.Reservati (truncated)...]
2025-05-10 09:47:57.168 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:47:57.169 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:48:00.370 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10&status=confirmed&exactCheckInDate=2025-05-10&exactDate=checkIn&date=2025-05-10
2025-05-10 09:48:00.370 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10
2025-05-10 09:48:00.370 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:48:00.370 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:48:00.371  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:48:00.371  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:48:00.373  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:48:00.373  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:48:00.374  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:48:00.374  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:48:00.374 DEBUG 12700 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:48:00.374 DEBUG 12700 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:48:00.374 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=0&size=10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:48:00.374 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=0&size=10&status=confirmed&exactCheckInDate=2025-05-10&exactDate=checkIn&date=2025-05-10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:48:00.374 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=0&size=10
2025-05-10 09:48:00.374 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=0&size=10&status=confirmed&exactCheckInDate=2025-05-10&exactDate=checkIn&date=2025-05-10
2025-05-10 09:48:00.375 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=0&size=10&status=confirmed&exactCheckInDate=2025-05-10&exactDate=checkIn&date=2025-05-10", parameters={masked}
2025-05-10 09:48:00.375 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=0&size=10", parameters={masked}
2025-05-10 09:48:00.375 DEBUG 12700 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:48:00.375 DEBUG 12700 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:48:00.375  INFO 12700 --- [http-nio-8090-exec-9] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 10, Status: null, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:48:00.375 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=10
2025-05-10 09:48:00.376  INFO 12700 --- [http-nio-8090-exec-4] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 10, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:48:00.376 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=10
2025-05-10 09:48:00.382 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=10, TotalElements=37, TotalPages=4
2025-05-10 09:48:00.382 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=10, TotalElements=14, TotalPages=2
2025-05-10 09:48:00.383 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:48:00.383 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:48:00.384 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:48:00.384 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 2 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:48:00.384 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:48:00.384 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:48:00.384 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:48:00.384 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:48:00.632 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 09:48:00.632 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:48:00.633  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:48:00.634  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:48:00.634  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:48:00.635 DEBUG 12700 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:48:00.635 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:48:00.635 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 09:48:00.635 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 09:48:00.635 DEBUG 12700 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 09:48:00.668  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:48:00.670  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 09:48:00.670  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 09:48:00.674  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 09:48:00.677  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 09:48:00.678 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 09:48:00.678  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 09:48:00.679  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:48:00.681  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 09:48:00.681  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 09:48:00.683  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 09:48:00.698  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 09:48:00.698 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 09:48:00.698 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 09:48:00.698 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 09:48:00.698 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 09:48:00.698 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 09:48:00.698 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 09:48:00.698 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 09:48:00.698 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 09:48:00.698 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 09:48:00.698 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 09:48:00.698 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 09:48:00.698 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 09:48:00.698 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 09:48:00.698 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 09:48:00.698 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 09:48:00.699 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 09:48:00.699 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 09:48:00.699 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 09:48:00.699 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 09:48:00.699 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 09:48:00.699 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 09:48:00.699 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 09:48:00.699 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 09:48:00.699 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 09:48:00.699 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 09:48:00.699 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 09:48:00.699 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 09:48:00.699 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 09:48:00.699 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 09:48:00.699 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 09:48:00.699 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 09:48:00.699 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 09:48:00.699 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 09:48:00.699 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 09:48:00.699 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 09:48:00.699 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 09:48:00.699 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 09:48:00.699  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 09:48:00.701  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:48:00.702  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 09:48:00.702  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 09:48:00.704  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:48:00.707  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 09:48:00.707  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 09:48:00.730  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 16, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 09:48:00.730  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 16
2025-05-10 09:48:00.730  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 09:48:00.731  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 09:48:00.734  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 20
2025-05-10 09:48:00.734  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 09:48:00.736 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:48:00.737 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 09:48:00.737 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:48:00.738 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:48:00.750 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkin/today-stats
2025-05-10 09:48:00.750 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:48:00.750 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:48:00.750 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:48:00.751 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10
2025-05-10 09:48:00.751  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:48:00.751 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:48:00.751  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:48:00.751  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:48:00.752  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:48:00.752  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:48:00.752  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:48:00.753  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:48:00.753 DEBUG 12700 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:48:00.753 DEBUG 12700 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:48:00.753 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:48:00.753 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/checkin/today-stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:48:00.753 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:48:00.753 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/checkin/today-stats
2025-05-10 09:48:00.753 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/checkin/today-stats", parameters={}
2025-05-10 09:48:00.753 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=PENDING&pageSize=1&size=1&page=0", parameters={masked}
2025-05-10 09:48:00.753  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:48:00.753  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:48:00.753 DEBUG 12700 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CheckInController#getTodayStats()
2025-05-10 09:48:00.753 DEBUG 12700 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:48:00.753 DEBUG 12700 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:48:00.754 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=0&size=10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:48:00.754 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=0&size=10
2025-05-10 09:48:00.754 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=0&size=10", parameters={masked}
2025-05-10 09:48:00.754  INFO 12700 --- [http-nio-8090-exec-2] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: PENDING, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:48:00.754 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:48:00.754 DEBUG 12700 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:48:00.755  INFO 12700 --- [http-nio-8090-exec-5] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 10, Status: null, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:48:00.755 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=10
2025-05-10 09:48:00.759 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=4, TotalPages=4
2025-05-10 09:48:00.760 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:48:00.760 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=10, TotalElements=37, TotalPages=4
2025-05-10 09:48:00.760 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:48:00.761 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:48:00.761 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:48:00.762 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:48:00.762 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:48:00.765 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:48:00.765 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:48:00.766 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:48:00.768  WARN 12700 --- [http-nio-8090-exec-8] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1146, SQLState: 42S02
2025-05-10 09:48:00.768 ERROR 12700 --- [http-nio-8090-exec-8] o.h.engine.jdbc.spi.SqlExceptionHelper   : Table 'heqing.additional_charges' doesn't exist
2025-05-10 09:48:00.768 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [org.hibernate.exception.SQLGrammarException: could not extract ResultSet]
2025-05-10 09:48:00.770  WARN 12700 --- [http-nio-8090-exec-8] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1146, SQLState: 42S02
2025-05-10 09:48:00.770 ERROR 12700 --- [http-nio-8090-exec-8] o.h.engine.jdbc.spi.SqlExceptionHelper   : Table 'heqing.additional_charges' doesn't exist
2025-05-10 09:48:00.770  WARN 12700 --- [http-nio-8090-exec-8] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: could not extract ResultSet; nested exception is com.fasterxml.jackson.databind.JsonMappingException: could not extract ResultSet (through reference chain: java.util.HashMap["data"]->java.util.HashMap["todayCheckin"]->java.util.HashMap["list"]->java.util.ArrayList[0]->com.hotel.entity.CheckInRecord["additionalCharges"])]
2025-05-10 09:48:00.770 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 500 INTERNAL_SERVER_ERROR
2025-05-10 09:48:00.770 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:48:00.771 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /error
2025-05-10 09:48:00.771 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:48:00.771 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:48:00.771 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /error
2025-05-10 09:48:00.771 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/error", parameters={}
2025-05-10 09:48:00.771 DEBUG 12700 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CustomErrorController#handleError(HttpServletRequest, WebRequest)
2025-05-10 09:48:00.772 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:48:00.772 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=Internal Server Error, message=An error occurred, status=500}]
2025-05-10 09:48:00.772 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 500
2025-05-10 09:48:00.772 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:48:01.006 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10&status=confirmed&exactCheckInDate=2025-05-10&exactDate=checkIn&date=2025-05-10
2025-05-10 09:48:01.006 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 09:48:01.006 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:48:01.006 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:48:01.007  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:48:01.007  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:48:01.008  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:48:01.008  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:48:01.009  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:48:01.009  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:48:01.009 DEBUG 12700 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:48:01.009 DEBUG 12700 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:48:01.010 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=0&size=10&status=confirmed&exactCheckInDate=2025-05-10&exactDate=checkIn&date=2025-05-10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:48:01.010 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:48:01.010 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=0&size=10&status=confirmed&exactCheckInDate=2025-05-10&exactDate=checkIn&date=2025-05-10
2025-05-10 09:48:01.010 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 09:48:01.010 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 09:48:01.010 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=0&size=10&status=confirmed&exactCheckInDate=2025-05-10&exactDate=checkIn&date=2025-05-10", parameters={masked}
2025-05-10 09:48:01.010 DEBUG 12700 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:48:01.010 DEBUG 12700 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 09:48:01.011  INFO 12700 --- [http-nio-8090-exec-7] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 10, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:48:01.011 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=10
2025-05-10 09:48:01.016 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=10, TotalElements=14, TotalPages=2
2025-05-10 09:48:01.017 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:48:01.017 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 2 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:48:01.019 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:48:01.019 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:48:01.046  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:48:01.048  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 09:48:01.048  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 09:48:01.054  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 09:48:01.057  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 09:48:01.057 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 09:48:01.057  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 09:48:01.058  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:48:01.060  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 09:48:01.060  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 09:48:01.061  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 09:48:01.075  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 09:48:01.075 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 09:48:01.075 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 09:48:01.075 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 09:48:01.075 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 09:48:01.075 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 09:48:01.075 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 09:48:01.075 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 09:48:01.075 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 09:48:01.075 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 09:48:01.075 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 09:48:01.075 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 09:48:01.076 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 09:48:01.076 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 09:48:01.076 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 09:48:01.076 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 09:48:01.076 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 09:48:01.076 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 09:48:01.076 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 09:48:01.076 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 09:48:01.076 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 09:48:01.076 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 09:48:01.076 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 09:48:01.076 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 09:48:01.076 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 09:48:01.076 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 09:48:01.076 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 09:48:01.076 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 09:48:01.076 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 09:48:01.076 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 09:48:01.076 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 09:48:01.076 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 09:48:01.076 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 09:48:01.076 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 09:48:01.076 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 09:48:01.076 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 09:48:01.076 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 09:48:01.077 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 09:48:01.077  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 09:48:01.079  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:48:01.082  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 09:48:01.082  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 09:48:01.084  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:48:01.085  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 09:48:01.085  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 09:48:01.102 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkin/today-stats
2025-05-10 09:48:01.102 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:48:01.102 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:48:01.102 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:48:01.102 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:48:01.103 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:48:01.103  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:48:01.103  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:48:01.103  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:48:01.104  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 16, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 09:48:01.104  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 16
2025-05-10 09:48:01.104  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 09:48:01.104  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:48:01.104  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:48:01.104  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 09:48:01.104  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:48:01.104  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:48:01.105 DEBUG 12700 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:48:01.105 DEBUG 12700 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:48:01.105 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:48:01.105 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/checkin/today-stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:48:01.105 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:48:01.105 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/checkin/today-stats
2025-05-10 09:48:01.105 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/checkin/today-stats", parameters={}
2025-05-10 09:48:01.105 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=PENDING&pageSize=1&size=1&page=0", parameters={masked}
2025-05-10 09:48:01.105 DEBUG 12700 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:48:01.105 DEBUG 12700 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CheckInController#getTodayStats()
2025-05-10 09:48:01.106  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:48:01.106  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:48:01.106  INFO 12700 --- [http-nio-8090-exec-3] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: PENDING, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:48:01.106 DEBUG 12700 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:48:01.106 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:48:01.106 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:48:01.107 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:48:01.107 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1", parameters={masked}
2025-05-10 09:48:01.107  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 20
2025-05-10 09:48:01.107 DEBUG 12700 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:48:01.107  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 09:48:01.108  INFO 12700 --- [http-nio-8090-exec-4] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:48:01.108 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:48:01.109 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:48:01.110 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 09:48:01.110 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:48:01.110 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:48:01.112 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=4, TotalPages=4
2025-05-10 09:48:01.114 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:48:01.114 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=14, TotalPages=14
2025-05-10 09:48:01.114 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:48:01.115 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:48:01.116 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:48:01.116 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:48:01.116 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 14 containing com.hotel.dto.Reservati (truncated)...]
2025-05-10 09:48:01.117 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:48:01.117 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:48:01.119 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:48:01.120  WARN 12700 --- [http-nio-8090-exec-6] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1146, SQLState: 42S02
2025-05-10 09:48:01.120 ERROR 12700 --- [http-nio-8090-exec-6] o.h.engine.jdbc.spi.SqlExceptionHelper   : Table 'heqing.additional_charges' doesn't exist
2025-05-10 09:48:01.120 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [org.hibernate.exception.SQLGrammarException: could not extract ResultSet]
2025-05-10 09:48:01.122  WARN 12700 --- [http-nio-8090-exec-6] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1146, SQLState: 42S02
2025-05-10 09:48:01.122 ERROR 12700 --- [http-nio-8090-exec-6] o.h.engine.jdbc.spi.SqlExceptionHelper   : Table 'heqing.additional_charges' doesn't exist
2025-05-10 09:48:01.123  WARN 12700 --- [http-nio-8090-exec-6] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: could not extract ResultSet; nested exception is com.fasterxml.jackson.databind.JsonMappingException: could not extract ResultSet (through reference chain: java.util.HashMap["data"]->java.util.HashMap["todayCheckin"]->java.util.HashMap["list"]->java.util.ArrayList[0]->com.hotel.entity.CheckInRecord["additionalCharges"])]
2025-05-10 09:48:01.123 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 500 INTERNAL_SERVER_ERROR
2025-05-10 09:48:01.123 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:48:01.123 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /error
2025-05-10 09:48:01.123 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:48:01.123 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:48:01.123 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /error
2025-05-10 09:48:01.124 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/error", parameters={}
2025-05-10 09:48:01.124 DEBUG 12700 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CustomErrorController#handleError(HttpServletRequest, WebRequest)
2025-05-10 09:48:01.124 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:48:01.124 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=Internal Server Error, message=An error occurred, status=500}]
2025-05-10 09:48:01.125 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 500
2025-05-10 09:48:01.125 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:48:01.132 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:48:01.132 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:48:01.133  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:48:01.134  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:48:01.134  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:48:01.135 DEBUG 12700 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:48:01.135 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:48:01.135 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:48:01.135 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1", parameters={masked}
2025-05-10 09:48:01.135 DEBUG 12700 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:48:01.136  INFO 12700 --- [http-nio-8090-exec-9] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:48:01.136 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:48:01.140 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=14, TotalPages=14
2025-05-10 09:48:01.142 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:48:01.142 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 14 containing com.hotel.dto.Reservati (truncated)...]
2025-05-10 09:48:01.143 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:48:01.143 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:48:02.532 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10&status=checked-in&exactCheckOutDate=2025-05-10&exactDate=checkOut&date=2025-05-10
2025-05-10 09:48:02.532 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10
2025-05-10 09:48:02.533 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:48:02.533 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:48:02.534  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:48:02.534  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:48:02.536  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:48:02.536  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:48:02.536  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:48:02.536  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:48:02.536 DEBUG 12700 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:48:02.536 DEBUG 12700 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:48:02.536 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=0&size=10&status=checked-in&exactCheckOutDate=2025-05-10&exactDate=checkOut&date=2025-05-10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:48:02.536 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=0&size=10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:48:02.537 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=0&size=10
2025-05-10 09:48:02.537 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=0&size=10&status=checked-in&exactCheckOutDate=2025-05-10&exactDate=checkOut&date=2025-05-10
2025-05-10 09:48:02.537 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=0&size=10", parameters={masked}
2025-05-10 09:48:02.537 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=0&size=10&status=checked-in&exactCheckOutDate=2025-05-10&exactDate=checkOut&date=2025-05-10", parameters={masked}
2025-05-10 09:48:02.537 DEBUG 12700 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:48:02.537 DEBUG 12700 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:48:02.538  INFO 12700 --- [http-nio-8090-exec-10] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 10, Status: null, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:48:02.538  INFO 12700 --- [http-nio-8090-exec-2] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 10, Status: checked-in, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:48:02.538 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=10
2025-05-10 09:48:02.538 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=10
2025-05-10 09:48:02.539  WARN 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : Invalid reservation status string provided for getAllReservations: checked-in
2025-05-10 09:48:02.544 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=10, TotalElements=37, TotalPages=4
2025-05-10 09:48:02.544 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=10, TotalElements=37, TotalPages=4
2025-05-10 09:48:02.546 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:48:02.546 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:48:02.546 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:48:02.546 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:48:02.547 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:48:02.547 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:48:02.547 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:48:02.547 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:48:02.781 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 09:48:02.781 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:48:02.782  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:48:02.784  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:48:02.786  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:48:02.786 DEBUG 12700 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:48:02.786 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:48:02.786 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 09:48:02.787 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 09:48:02.787 DEBUG 12700 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 09:48:02.825  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:48:02.827  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 09:48:02.827  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 09:48:02.832  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 09:48:02.835  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 09:48:02.835 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 09:48:02.835  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 09:48:02.837  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:48:02.839  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 09:48:02.839  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 09:48:02.841  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 09:48:02.858  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 09:48:02.858 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 09:48:02.858 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 09:48:02.858 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 09:48:02.858 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 09:48:02.858 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 09:48:02.858 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 09:48:02.859 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 09:48:02.859 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 09:48:02.859 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 09:48:02.859 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 09:48:02.859 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 09:48:02.859 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 09:48:02.859 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 09:48:02.859 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 09:48:02.859 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 09:48:02.859 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 09:48:02.859 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 09:48:02.859 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 09:48:02.859 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 09:48:02.859 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 09:48:02.860 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 09:48:02.860 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 09:48:02.860 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 09:48:02.860 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 09:48:02.860 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 09:48:02.860 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 09:48:02.860 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 09:48:02.860 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 09:48:02.860 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 09:48:02.860 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 09:48:02.860 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 09:48:02.860 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 09:48:02.860 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 09:48:02.860 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 09:48:02.860 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 09:48:02.860 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 09:48:02.860 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 09:48:02.860  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 09:48:02.863  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:48:02.866  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 09:48:02.866  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 09:48:02.868  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:48:02.871  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 09:48:02.871  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 09:48:02.872 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkin/today-stats
2025-05-10 09:48:02.873 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:48:02.873  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:48:02.876  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:48:02.876 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:48:02.876  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:48:02.876 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:48:02.876 DEBUG 12700 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:48:02.876 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/checkin/today-stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:48:02.876 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/checkin/today-stats
2025-05-10 09:48:02.877 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/checkin/today-stats", parameters={}
2025-05-10 09:48:02.877  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:48:02.877 DEBUG 12700 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CheckInController#getTodayStats()
2025-05-10 09:48:02.878  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:48:02.879  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:48:02.879 DEBUG 12700 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:48:02.879 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:48:02.879 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:48:02.879 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=PENDING&pageSize=1&size=1&page=0", parameters={masked}
2025-05-10 09:48:02.880 DEBUG 12700 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:48:02.881  INFO 12700 --- [http-nio-8090-exec-7] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: PENDING, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:48:02.881 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:48:02.886 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=4, TotalPages=4
2025-05-10 09:48:02.888 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:48:02.888 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:48:02.889 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:48:02.890 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:48:02.891 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:48:02.892  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 16, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 09:48:02.893  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 16
2025-05-10 09:48:02.893  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 09:48:02.893  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 09:48:02.894  WARN 12700 --- [http-nio-8090-exec-8] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1146, SQLState: 42S02
2025-05-10 09:48:02.894 ERROR 12700 --- [http-nio-8090-exec-8] o.h.engine.jdbc.spi.SqlExceptionHelper   : Table 'heqing.additional_charges' doesn't exist
2025-05-10 09:48:02.895 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [org.hibernate.exception.SQLGrammarException: could not extract ResultSet]
2025-05-10 09:48:02.896  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 20
2025-05-10 09:48:02.896  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 09:48:02.896  WARN 12700 --- [http-nio-8090-exec-8] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1146, SQLState: 42S02
2025-05-10 09:48:02.896 ERROR 12700 --- [http-nio-8090-exec-8] o.h.engine.jdbc.spi.SqlExceptionHelper   : Table 'heqing.additional_charges' doesn't exist
2025-05-10 09:48:02.897  WARN 12700 --- [http-nio-8090-exec-8] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: could not extract ResultSet; nested exception is com.fasterxml.jackson.databind.JsonMappingException: could not extract ResultSet (through reference chain: java.util.HashMap["data"]->java.util.HashMap["todayCheckin"]->java.util.HashMap["list"]->java.util.ArrayList[0]->com.hotel.entity.CheckInRecord["additionalCharges"])]
2025-05-10 09:48:02.897 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 500 INTERNAL_SERVER_ERROR
2025-05-10 09:48:02.897 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:48:02.898 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:48:02.898 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /error
2025-05-10 09:48:02.898 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:48:02.898 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:48:02.898 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 09:48:02.898 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /error
2025-05-10 09:48:02.898 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/error", parameters={}
2025-05-10 09:48:02.898 DEBUG 12700 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CustomErrorController#handleError(HttpServletRequest, WebRequest)
2025-05-10 09:48:02.899 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:48:02.899 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:48:02.899 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:48:02.899 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=Internal Server Error, message=An error occurred, status=500}]
2025-05-10 09:48:02.900 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 500
2025-05-10 09:48:02.900 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:48:02.922 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:48:02.922 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:48:02.923  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:48:02.925  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:48:02.925  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:48:02.925 DEBUG 12700 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:48:02.926 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:48:02.926 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:48:02.926 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=PENDING&pageSize=1&size=1&page=0", parameters={masked}
2025-05-10 09:48:02.926 DEBUG 12700 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:48:02.927  INFO 12700 --- [http-nio-8090-exec-1] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: PENDING, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:48:02.927 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:48:02.933 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=4, TotalPages=4
2025-05-10 09:48:02.935 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:48:02.935 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:48:02.936 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:48:02.936 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:48:03.222 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 09:48:03.222 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkin/today-stats
2025-05-10 09:48:03.222 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:48:03.222 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:48:03.222  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:48:03.222  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:48:03.225  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:48:03.225  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:48:03.225  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:48:03.225  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:48:03.225 DEBUG 12700 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:48:03.225 DEBUG 12700 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:48:03.225 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/checkin/today-stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:48:03.225 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:48:03.225 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/checkin/today-stats
2025-05-10 09:48:03.226 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 09:48:03.226 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/checkin/today-stats", parameters={}
2025-05-10 09:48:03.226 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 09:48:03.226 DEBUG 12700 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CheckInController#getTodayStats()
2025-05-10 09:48:03.226 DEBUG 12700 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 09:48:03.236 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:48:03.236 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:48:03.237  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:48:03.238  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:48:03.239  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:48:03.239 DEBUG 12700 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:48:03.239 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:48:03.239 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:48:03.240 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:48:03.240 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1", parameters={masked}
2025-05-10 09:48:03.240 DEBUG 12700 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:48:03.241  INFO 12700 --- [http-nio-8090-exec-6] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:48:03.241 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:48:03.245 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=14, TotalPages=14
2025-05-10 09:48:03.246 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:48:03.246 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 14 containing com.hotel.dto.Reservati (truncated)...]
2025-05-10 09:48:03.247 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:48:03.247 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:48:03.251  WARN 12700 --- [http-nio-8090-exec-4] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1146, SQLState: 42S02
2025-05-10 09:48:03.251 ERROR 12700 --- [http-nio-8090-exec-4] o.h.engine.jdbc.spi.SqlExceptionHelper   : Table 'heqing.additional_charges' doesn't exist
2025-05-10 09:48:03.251 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [org.hibernate.exception.SQLGrammarException: could not extract ResultSet]
2025-05-10 09:48:03.252  WARN 12700 --- [http-nio-8090-exec-4] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1146, SQLState: 42S02
2025-05-10 09:48:03.253 ERROR 12700 --- [http-nio-8090-exec-4] o.h.engine.jdbc.spi.SqlExceptionHelper   : Table 'heqing.additional_charges' doesn't exist
2025-05-10 09:48:03.253  WARN 12700 --- [http-nio-8090-exec-4] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: could not extract ResultSet; nested exception is com.fasterxml.jackson.databind.JsonMappingException: could not extract ResultSet (through reference chain: java.util.HashMap["data"]->java.util.HashMap["todayCheckin"]->java.util.HashMap["list"]->java.util.ArrayList[0]->com.hotel.entity.CheckInRecord["additionalCharges"])]
2025-05-10 09:48:03.253 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 500 INTERNAL_SERVER_ERROR
2025-05-10 09:48:03.253 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:48:03.254 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /error
2025-05-10 09:48:03.254 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:48:03.254 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:48:03.254 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /error
2025-05-10 09:48:03.254 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/error", parameters={}
2025-05-10 09:48:03.255 DEBUG 12700 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CustomErrorController#handleError(HttpServletRequest, WebRequest)
2025-05-10 09:48:03.255 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:48:03.255 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=Internal Server Error, message=An error occurred, status=500}]
2025-05-10 09:48:03.256 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 500
2025-05-10 09:48:03.256 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:48:03.266  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:48:03.269  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 09:48:03.269  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 09:48:03.273  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 09:48:03.277  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 09:48:03.277 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 09:48:03.277  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 09:48:03.278  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:48:03.281  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 09:48:03.281  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 09:48:03.284  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 09:48:03.303  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 09:48:03.303 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 09:48:03.303 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 09:48:03.303 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 09:48:03.303 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 09:48:03.303 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 09:48:03.303 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 09:48:03.303 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 09:48:03.303 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 09:48:03.303 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 09:48:03.303 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 09:48:03.303 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 09:48:03.303 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 09:48:03.303 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 09:48:03.303 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 09:48:03.303 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 09:48:03.303 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 09:48:03.303 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 09:48:03.303 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 09:48:03.304 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 09:48:03.304 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 09:48:03.304 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 09:48:03.304 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 09:48:03.304 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 09:48:03.304 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 09:48:03.304 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 09:48:03.304 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 09:48:03.304 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 09:48:03.304 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 09:48:03.304 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 09:48:03.304 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 09:48:03.304 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 09:48:03.304 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 09:48:03.305 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 09:48:03.305 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 09:48:03.305 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 09:48:03.305 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 09:48:03.305 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 09:48:03.305  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 09:48:03.307  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:48:03.310  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 09:48:03.311  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 09:48:03.312  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:48:03.315  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 09:48:03.315  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 09:48:03.335  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 16, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 09:48:03.335  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 16
2025-05-10 09:48:03.335  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 09:48:03.335  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 09:48:03.338  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 20
2025-05-10 09:48:03.338  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 09:48:03.340 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:48:03.340 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 09:48:03.340 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:48:03.340 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:48:03.577 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:48:03.577 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:48:03.577  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:48:03.579  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:48:03.579  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:48:03.579 DEBUG 12700 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:48:03.579 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:48:03.579 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:48:03.580 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1", parameters={masked}
2025-05-10 09:48:03.580 DEBUG 12700 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:48:03.581  INFO 12700 --- [http-nio-8090-exec-9] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:48:03.581 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:48:03.585 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=14, TotalPages=14
2025-05-10 09:48:03.587 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:48:03.588 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 14 containing com.hotel.dto.Reservati (truncated)...]
2025-05-10 09:48:03.589 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:48:03.589 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:48:09.977 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/rooms/filter?pageSize=1000&page=0&size=1000
2025-05-10 09:48:09.977 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:48:09.978  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:48:09.980  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:48:09.980  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:48:09.980 DEBUG 12700 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:48:09.981 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/rooms/filter?pageSize=1000&page=0&size=1000] with attributes [authenticated]
2025-05-10 09:48:09.981 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/rooms/filter?pageSize=1000&page=0&size=1000
2025-05-10 09:48:09.981 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/rooms/filter?pageSize=1000&page=0&size=1000", parameters={masked}
2025-05-10 09:48:09.981 DEBUG 12700 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.RoomController#getRoomsWithFilters(RoomFilterDTO)
2025-05-10 09:48:09.993 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:48:09.993 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{number=0, size=1000, totalPages=1, content=[{roomNumber=501, id=1, floor=5, roomType={name=豪华大床房, i (truncated)...]
2025-05-10 09:48:09.995 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:48:09.996 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:48:35.010 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/rooms/filter?pageSize=1000&page=0&status=CLEANING&size=1000
2025-05-10 09:48:35.011 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:48:35.011  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:48:35.014  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:48:35.014  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:48:35.014 DEBUG 12700 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:48:35.015 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/rooms/filter?pageSize=1000&page=0&status=CLEANING&size=1000] with attributes [authenticated]
2025-05-10 09:48:35.015 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/rooms/filter?pageSize=1000&page=0&status=CLEANING&size=1000
2025-05-10 09:48:35.015 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/rooms/filter?pageSize=1000&page=0&status=CLEANING&size=1000", parameters={masked}
2025-05-10 09:48:35.015 DEBUG 12700 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.RoomController#getRoomsWithFilters(RoomFilterDTO)
2025-05-10 09:48:35.028 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:48:35.029 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{number=0, size=1000, totalPages=1, content=[{roomNumber=202, id=4, floor=2, roomType={name=行政套房, id (truncated)...]
2025-05-10 09:48:35.030 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:48:35.030 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:48:42.549 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/rooms/filter?pageSize=1000&page=0&status=OCCUPIED&size=1000
2025-05-10 09:48:42.550 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:48:42.550  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:48:42.553  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:48:42.553  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:48:42.553 DEBUG 12700 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:48:42.554 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/rooms/filter?pageSize=1000&page=0&status=OCCUPIED&size=1000] with attributes [authenticated]
2025-05-10 09:48:42.554 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/rooms/filter?pageSize=1000&page=0&status=OCCUPIED&size=1000
2025-05-10 09:48:42.554 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/rooms/filter?pageSize=1000&page=0&status=OCCUPIED&size=1000", parameters={masked}
2025-05-10 09:48:42.554 DEBUG 12700 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.RoomController#getRoomsWithFilters(RoomFilterDTO)
2025-05-10 09:48:42.561 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:48:42.561 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{number=0, size=1000, totalPages=1, content=[{roomNumber=208, id=10, floor=2, roomType={name=豪华大床房,  (truncated)...]
2025-05-10 09:48:42.562 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:48:42.562 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:48:44.717 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/rooms/filter?pageSize=1000&page=0&status=CLEANING&size=1000
2025-05-10 09:48:44.718 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:48:44.719  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:48:44.722  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:48:44.722  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:48:44.722 DEBUG 12700 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:48:44.722 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/rooms/filter?pageSize=1000&page=0&status=CLEANING&size=1000] with attributes [authenticated]
2025-05-10 09:48:44.722 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/rooms/filter?pageSize=1000&page=0&status=CLEANING&size=1000
2025-05-10 09:48:44.722 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/rooms/filter?pageSize=1000&page=0&status=CLEANING&size=1000", parameters={masked}
2025-05-10 09:48:44.722 DEBUG 12700 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.RoomController#getRoomsWithFilters(RoomFilterDTO)
2025-05-10 09:48:44.733 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:48:44.733 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{number=0, size=1000, totalPages=1, content=[{roomNumber=202, id=4, floor=2, roomType={name=行政套房, id (truncated)...]
2025-05-10 09:48:44.734 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:48:44.734 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:48:52.029 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/rooms/types
2025-05-10 09:48:52.030 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:48:52.030  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:48:52.033  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:48:52.034  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:48:52.034 DEBUG 12700 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:48:52.034 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/rooms/types] with attributes [permitAll]
2025-05-10 09:48:52.034 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/rooms/types
2025-05-10 09:48:52.034 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/rooms/types", parameters={}
2025-05-10 09:48:52.034 DEBUG 12700 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.RoomController#getAllRoomTypes()
2025-05-10 09:48:52.048 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:48:52.048 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{area=null, amenities=[无限量矿泉水、咖啡、茶叶等], availableCount=21, images=[], name=行政套房, des (truncated)...]
2025-05-10 09:48:52.049 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:48:52.050 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:48:52.297 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 09:48:52.297 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:48:52.298  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:48:52.299  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:48:52.299  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:48:52.300 DEBUG 12700 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:48:52.300 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:48:52.300 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 09:48:52.300 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 09:48:52.300 DEBUG 12700 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 09:48:52.339  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:48:52.341  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 09:48:52.341  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 09:48:52.346  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 09:48:52.350  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 09:48:52.350 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 09:48:52.350  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 09:48:52.352  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:48:52.354  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 09:48:52.354  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 09:48:52.356  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 09:48:52.374  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 09:48:52.374 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 09:48:52.374 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 09:48:52.374 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 09:48:52.374 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 09:48:52.374 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 09:48:52.374 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 09:48:52.374 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 09:48:52.374 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 09:48:52.375 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 09:48:52.375 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 09:48:52.375 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 09:48:52.375 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 09:48:52.375 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 09:48:52.375 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 09:48:52.375 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 09:48:52.375 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 09:48:52.375 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 09:48:52.375 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 09:48:52.375 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 09:48:52.375 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 09:48:52.375 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 09:48:52.375 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 09:48:52.375 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 09:48:52.375 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 09:48:52.376 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 09:48:52.376 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 09:48:52.376 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 09:48:52.376 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 09:48:52.376 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 09:48:52.376 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 09:48:52.376 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 09:48:52.376 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 09:48:52.376 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 09:48:52.376 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 09:48:52.376 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 09:48:52.376 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 09:48:52.376 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 09:48:52.376  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 09:48:52.379  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:48:52.381  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 09:48:52.381  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 09:48:52.383  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:48:52.386  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 09:48:52.386  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 09:48:52.405  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 16, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 09:48:52.405  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 16
2025-05-10 09:48:52.405  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 09:48:52.405  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 09:48:52.408  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 20
2025-05-10 09:48:52.408  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 09:48:52.409 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:48:52.410 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 09:48:52.410 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:48:52.411 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:48:55.253 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkout/stats
2025-05-10 09:48:55.254 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:48:55.254  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:48:55.256  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:48:55.256  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:48:55.256 DEBUG 12700 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:48:55.257 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/checkout/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:48:55.257 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/checkout/stats
2025-05-10 09:48:55.257 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/checkout/stats", parameters={}
2025-05-10 09:48:55.257 DEBUG 12700 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminCheckoutController#getCheckoutStats()
2025-05-10 09:48:55.268 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:48:55.269 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data={monthlyCheckouts=0, pendingCleanings=0, todayCheckouts=0}, success=true, message=获取 (truncated)...]
2025-05-10 09:48:55.269 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:48:55.269 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:48:55.570 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkout/records?page=0&pageSize=10&roomNumber=&guestName=&checkoutDate=
2025-05-10 09:48:55.570 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/rooms/occupied
2025-05-10 09:48:55.570 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:48:55.570 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:48:55.570  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:48:55.570  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:48:55.573  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:48:55.573  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:48:55.573  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:48:55.573  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:48:55.573 DEBUG 12700 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:48:55.573 DEBUG 12700 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:48:55.574 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/rooms/occupied] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:48:55.574 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/checkout/records?page=0&pageSize=10&roomNumber=&guestName=&checkoutDate=] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:48:55.574 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/rooms/occupied
2025-05-10 09:48:55.574 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/checkout/records?page=0&pageSize=10&roomNumber=&guestName=&checkoutDate=
2025-05-10 09:48:55.574 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/checkout/records?page=0&pageSize=10&roomNumber=&guestName=&checkoutDate=", parameters={masked}
2025-05-10 09:48:55.574 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/rooms/occupied", parameters={}
2025-05-10 09:48:55.574 DEBUG 12700 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminCheckoutController#getCheckoutRecords(String, String, String, int, int)
2025-05-10 09:48:55.574 DEBUG 12700 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminRoomController#getOccupiedRooms()
2025-05-10 09:48:55.576  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.impl.CheckInServiceImpl  : Fetching checkout records for current month: 2025-05-01 to 2025-05-10
2025-05-10 09:48:55.586 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:48:55.587 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data={total=0, records=[]}, success=true, message=获取退房记录成功}]
2025-05-10 09:48:55.587 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:48:55.588 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:48:55.590 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:48:55.590 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{roomNumber=208, guestPhone=17677889988, floor=2, roomType=豪华大床房, guestName=AEFFAEE (truncated)...]
2025-05-10 09:48:55.591 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:48:55.592 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:48:56.167 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/visitor/all?page=0&size=10
2025-05-10 09:48:56.167 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:48:56.167 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/visitor/count/today
2025-05-10 09:48:56.167 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:48:56.167  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:48:56.168  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: front
2025-05-10 09:48:56.170  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:48:56.170  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : User found: front, Role: RECEPTIONIST
2025-05-10 09:48:56.170  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:48:56.170  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:48:56.170 DEBUG 12700 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:48:56.170 DEBUG 12700 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 'front' 认证成功, 设置 SecurityContext
2025-05-10 09:48:56.170 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/visitor/count/today] with attributes [authenticated]
2025-05-10 09:48:56.170 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/visitor/all?page=0&size=10] with attributes [authenticated]
2025-05-10 09:48:56.170 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/visitor/count/today
2025-05-10 09:48:56.170 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/visitor/all?page=0&size=10
2025-05-10 09:48:56.171 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/visitor/count/today", parameters={}
2025-05-10 09:48:56.171 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/visitor/all?page=0&size=10", parameters={masked}
2025-05-10 09:48:56.171 DEBUG 12700 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.VisitorController#countTodayVisitors()
2025-05-10 09:48:56.171 DEBUG 12700 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.VisitorController#getAllVisitorRecordsPageable(String, String, String, LocalDateTime, LocalDateTime, int, int, String[])
2025-05-10 09:48:56.179 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:48:56.179 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [0]
2025-05-10 09:48:56.180 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:48:56.180 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:48:56.184 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:48:56.185 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing com.hotel.entity.VisitorRecord instances]
2025-05-10 09:48:56.316 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:48:56.316 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:49:02.511 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-10 09:49:02.511 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:49:02.512 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:49:02.512 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 5A29A4A47A25E456C4F538CE7FF0CCBF
2025-05-10 09:49:02.512 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-10 09:49:02.512 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-10 09:49:02.512 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-10 09:49:02.513 DEBUG 12700 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-10 09:49:02.513 DEBUG 12700 --- [http-nio-8090-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=cleaner, password=cleaner123)]
2025-05-10 09:49:02.513  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: cleaner
2025-05-10 09:49:02.515  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : User found: cleaner, Role: CLEANER
2025-05-10 09:49:02.516  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CLEANER]
2025-05-10 09:49:02.584 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-10 09:49:02.587 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:49:02.587 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=3, username=cleaner, role=CLEANER, token=eyJhbGciOi (truncated)...]
2025-05-10 09:49:02.588 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:49:02.588 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:49:02.941 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/cleaning/tasks
2025-05-10 09:49:02.941 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:49:02.942  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: cleaner
2025-05-10 09:49:02.943  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : User found: cleaner, Role: CLEANER
2025-05-10 09:49:02.943  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CLEANER]
2025-05-10 09:49:02.943 DEBUG 12700 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 'cleaner' 认证成功, 设置 SecurityContext
2025-05-10 09:49:02.944 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/cleaning/tasks] with attributes [authenticated]
2025-05-10 09:49:02.944 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/cleaning/tasks
2025-05-10 09:49:02.944 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/cleaning/tasks", parameters={}
2025-05-10 09:49:02.944 DEBUG 12700 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CleaningTaskController#getTasks(String, int, int)
2025-05-10 09:49:02.946  INFO 12700 --- [http-nio-8090-exec-7] com.hotel.service.impl.TaskServiceImpl   : 开始自动生成清洁任务...
2025-05-10 09:49:02.948  INFO 12700 --- [http-nio-8090-exec-7] com.hotel.service.impl.TaskServiceImpl   : 找到 0 个需要清洁的房间
2025-05-10 09:49:02.949  INFO 12700 --- [http-nio-8090-exec-7] com.hotel.service.impl.TaskServiceImpl   : 将使用默认清洁员: 清洁人员
2025-05-10 09:49:02.950  INFO 12700 --- [http-nio-8090-exec-7] com.hotel.service.impl.TaskServiceImpl   : 自动生成清洁任务完成，共创建 0 个新任务
2025-05-10 09:49:02.956 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:49:02.957 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{totalPages=3, generatedTasksCount=0, currentPage=0, content=[Task(id=27, roomNumber=204, roomType=豪 (truncated)...]
2025-05-10 09:49:02.958 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:49:02.958 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:49:03.207 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cleaning/tasks/statistics
2025-05-10 09:49:03.207 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:49:03.207  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: cleaner
2025-05-10 09:49:03.209  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : User found: cleaner, Role: CLEANER
2025-05-10 09:49:03.210  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CLEANER]
2025-05-10 09:49:03.210 DEBUG 12700 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 'cleaner' 认证成功, 设置 SecurityContext
2025-05-10 09:49:03.210 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/cleaning/tasks/statistics] with attributes [authenticated]
2025-05-10 09:49:03.211 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/cleaning/tasks/statistics
2025-05-10 09:49:03.211 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/cleaning/tasks/statistics", parameters={}
2025-05-10 09:49:03.211 DEBUG 12700 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CleaningTaskController#getTaskStatistics()
2025-05-10 09:49:03.211  INFO 12700 --- [http-nio-8090-exec-5] com.hotel.service.impl.TaskServiceImpl   : 开始自动生成清洁任务...
2025-05-10 09:49:03.212  INFO 12700 --- [http-nio-8090-exec-5] com.hotel.service.impl.TaskServiceImpl   : 找到 0 个需要清洁的房间
2025-05-10 09:49:03.213  INFO 12700 --- [http-nio-8090-exec-5] com.hotel.service.impl.TaskServiceImpl   : 将使用默认清洁员: 清洁人员
2025-05-10 09:49:03.214  INFO 12700 --- [http-nio-8090-exec-5] com.hotel.service.impl.TaskServiceImpl   : 自动生成清洁任务完成，共创建 0 个新任务
2025-05-10 09:49:03.218 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:49:03.218 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{data=TaskDTO(id=null, roomNumber=null, roomType=null, cleaner=null, priority=null, status=null, exp (truncated)...]
2025-05-10 09:49:03.219 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:49:03.219 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:49:11.822 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/cleaning/tasks
2025-05-10 09:49:11.823 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:49:11.823  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: cleaner
2025-05-10 09:49:11.826  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : User found: cleaner, Role: CLEANER
2025-05-10 09:49:11.827  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CLEANER]
2025-05-10 09:49:11.827 DEBUG 12700 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 'cleaner' 认证成功, 设置 SecurityContext
2025-05-10 09:49:11.828 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/cleaning/tasks] with attributes [authenticated]
2025-05-10 09:49:11.828 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/cleaning/tasks
2025-05-10 09:49:11.828 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/cleaning/tasks", parameters={}
2025-05-10 09:49:11.828 DEBUG 12700 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CleaningTaskController#getTasks(String, int, int)
2025-05-10 09:49:11.830  INFO 12700 --- [http-nio-8090-exec-8] com.hotel.service.impl.TaskServiceImpl   : 开始自动生成清洁任务...
2025-05-10 09:49:11.832  INFO 12700 --- [http-nio-8090-exec-8] com.hotel.service.impl.TaskServiceImpl   : 找到 0 个需要清洁的房间
2025-05-10 09:49:11.834  INFO 12700 --- [http-nio-8090-exec-8] com.hotel.service.impl.TaskServiceImpl   : 将使用默认清洁员: 清洁人员
2025-05-10 09:49:11.834  INFO 12700 --- [http-nio-8090-exec-8] com.hotel.service.impl.TaskServiceImpl   : 自动生成清洁任务完成，共创建 0 个新任务
2025-05-10 09:49:11.845 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:49:11.846 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{totalPages=3, generatedTasksCount=0, currentPage=0, content=[Task(id=27, roomNumber=204, roomType=豪 (truncated)...]
2025-05-10 09:49:11.848 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:49:11.848 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:49:11.890 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cleaning/tasks/statistics
2025-05-10 09:49:11.890 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:49:11.891  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: cleaner
2025-05-10 09:49:11.892  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : User found: cleaner, Role: CLEANER
2025-05-10 09:49:11.893  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CLEANER]
2025-05-10 09:49:11.893 DEBUG 12700 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 'cleaner' 认证成功, 设置 SecurityContext
2025-05-10 09:49:11.893 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/cleaning/tasks/statistics] with attributes [authenticated]
2025-05-10 09:49:11.893 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cleaning/tasks/statistics
2025-05-10 09:49:11.894 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/cleaning/tasks/statistics", parameters={}
2025-05-10 09:49:11.894 DEBUG 12700 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CleaningTaskController#getTaskStatistics()
2025-05-10 09:49:11.894  INFO 12700 --- [http-nio-8090-exec-1] com.hotel.service.impl.TaskServiceImpl   : 开始自动生成清洁任务...
2025-05-10 09:49:11.896  INFO 12700 --- [http-nio-8090-exec-1] com.hotel.service.impl.TaskServiceImpl   : 找到 0 个需要清洁的房间
2025-05-10 09:49:11.898  INFO 12700 --- [http-nio-8090-exec-1] com.hotel.service.impl.TaskServiceImpl   : 将使用默认清洁员: 清洁人员
2025-05-10 09:49:11.898  INFO 12700 --- [http-nio-8090-exec-1] com.hotel.service.impl.TaskServiceImpl   : 自动生成清洁任务完成，共创建 0 个新任务
2025-05-10 09:49:11.902 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:49:11.902 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{data=TaskDTO(id=null, roomNumber=null, roomType=null, cleaner=null, priority=null, status=null, exp (truncated)...]
2025-05-10 09:49:11.903 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:49:11.904 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:51:30.344 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/cleaning/records
2025-05-10 09:51:30.344 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:51:30.346  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: cleaner
2025-05-10 09:51:30.348  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : User found: cleaner, Role: CLEANER
2025-05-10 09:51:30.348  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CLEANER]
2025-05-10 09:51:30.348 DEBUG 12700 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 'cleaner' 认证成功, 设置 SecurityContext
2025-05-10 09:51:30.349 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/cleaning/records] with attributes [authenticated]
2025-05-10 09:51:30.349 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/cleaning/records
2025-05-10 09:51:30.349 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/cleaning/records", parameters={}
2025-05-10 09:51:30.349 DEBUG 12700 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CleaningRecordController#getCleaningRecords(String, LocalDate, LocalDate)
2025-05-10 09:51:30.398 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:51:30.398 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{total=20, records=[{duration=1.5小时, roomNumber=501, cleaner=清洁人员, startTime=2025-05-01T09:00, id=1, (truncated)...]
2025-05-10 09:51:30.399 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:51:30.399 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:52:51.746 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/visitor/all?page=0&size=10
2025-05-10 09:52:51.746 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/visitor/count/today
2025-05-10 09:52:51.746 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:52:51.746 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:52:51.748 ERROR 12700 --- [http-nio-8090-exec-4] com.hotel.util.JwtTokenProvider          : Expired JWT token
2025-05-10 09:52:51.748  WARN 12700 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : JWT Token 无效: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiLliY3lj7DlprnlprkwMDEiLCJ1c2VySWQiOjE5LCJyb2xlcyI6IlJPTEVfUkVDRVBUSU9OSVNUIiwiaWF0IjoxNzQ2NzAwNjU1LCJleHAiOjE3NDY3ODcwNTV9.cQUMjSjLZZdBi0LcFIFMlvLGadwzLZNuaYbc0jUtTyy_1njvBC1C6C6pBk2dMCJlU6A1u2wXbRdKsU4JQq-NDw
2025-05-10 09:52:51.748 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:52:51.748 ERROR 12700 --- [http-nio-8090-exec-3] com.hotel.util.JwtTokenProvider          : Expired JWT token
2025-05-10 09:52:51.748  WARN 12700 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : JWT Token 无效: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiLliY3lj7DlprnlprkwMDEiLCJ1c2VySWQiOjE5LCJyb2xlcyI6IlJPTEVfUkVDRVBUSU9OSVNUIiwiaWF0IjoxNzQ2NzAwNjU1LCJleHAiOjE3NDY3ODcwNTV9.cQUMjSjLZZdBi0LcFIFMlvLGadwzLZNuaYbc0jUtTyy_1njvBC1C6C6pBk2dMCJlU6A1u2wXbRdKsU4JQq-NDw
2025-05-10 09:52:51.749 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:52:51.749 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Failed to authorize filter invocation [GET /api/visitor/all?page=0&size=10] with attributes [authenticated]
2025-05-10 09:52:51.749 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access
2025-05-10 09:52:51.749 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Failed to authorize filter invocation [GET /api/visitor/count/today] with attributes [authenticated]
2025-05-10 09:52:51.751 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access
2025-05-10 09:52:51.750 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:52:51.751 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:52:51.752 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /error
2025-05-10 09:52:51.752 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:52:51.752 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:52:51.752 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /error
2025-05-10 09:52:51.752 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /error?page=0&size=10
2025-05-10 09:52:51.753 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:52:51.753 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:52:51.753 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /error?page=0&size=10
2025-05-10 09:52:51.754 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/error", parameters={}
2025-05-10 09:52:51.754 DEBUG 12700 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CustomErrorController#handleError(HttpServletRequest, WebRequest)
2025-05-10 09:52:51.754 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/error?page=0&size=10", parameters={masked}
2025-05-10 09:52:51.754 DEBUG 12700 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CustomErrorController#handleError(HttpServletRequest, WebRequest)
2025-05-10 09:52:51.755 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:52:51.755 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:52:51.755 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=Forbidden, message=An error occurred, status=403}]
2025-05-10 09:52:51.755 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=Forbidden, message=An error occurred, status=403}]
2025-05-10 09:52:51.756 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 403
2025-05-10 09:52:51.756 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 403
2025-05-10 09:52:51.756 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:52:51.756 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:52:55.448 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkout/records?page=0&pageSize=10&roomNumber=&guestName=&checkoutDate=
2025-05-10 09:52:55.448 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkout/stats
2025-05-10 09:52:55.448 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:52:55.448 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:52:55.449 ERROR 12700 --- [http-nio-8090-exec-9] com.hotel.util.JwtTokenProvider          : Expired JWT token
2025-05-10 09:52:55.449 ERROR 12700 --- [http-nio-8090-exec-10] com.hotel.util.JwtTokenProvider          : Expired JWT token
2025-05-10 09:52:55.449 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/rooms/occupied
2025-05-10 09:52:55.449  WARN 12700 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : JWT Token 无效: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiLliY3lj7DlprnlprkwMDEiLCJ1c2VySWQiOjE5LCJyb2xlcyI6IlJPTEVfUkVDRVBUSU9OSVNUIiwiaWF0IjoxNzQ2NzAwNjU1LCJleHAiOjE3NDY3ODcwNTV9.cQUMjSjLZZdBi0LcFIFMlvLGadwzLZNuaYbc0jUtTyy_1njvBC1C6C6pBk2dMCJlU6A1u2wXbRdKsU4JQq-NDw
2025-05-10 09:52:55.449 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:52:55.449  WARN 12700 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : JWT Token 无效: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiLliY3lj7DlprnlprkwMDEiLCJ1c2VySWQiOjE5LCJyb2xlcyI6IlJPTEVfUkVDRVBUSU9OSVNUIiwiaWF0IjoxNzQ2NzAwNjU1LCJleHAiOjE3NDY3ODcwNTV9.cQUMjSjLZZdBi0LcFIFMlvLGadwzLZNuaYbc0jUtTyy_1njvBC1C6C6pBk2dMCJlU6A1u2wXbRdKsU4JQq-NDw
2025-05-10 09:52:55.449 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:52:55.450 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:52:55.450 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Failed to authorize filter invocation [GET /api/admin/checkout/records?page=0&pageSize=10&roomNumber=&guestName=&checkoutDate=] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:52:55.450 ERROR 12700 --- [http-nio-8090-exec-2] com.hotel.util.JwtTokenProvider          : Expired JWT token
2025-05-10 09:52:55.450 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access
2025-05-10 09:52:55.450 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:52:55.450  WARN 12700 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : JWT Token 无效: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiLliY3lj7DlprnlprkwMDEiLCJ1c2VySWQiOjE5LCJyb2xlcyI6IlJPTEVfUkVDRVBUSU9OSVNUIiwiaWF0IjoxNzQ2NzAwNjU1LCJleHAiOjE3NDY3ODcwNTV9.cQUMjSjLZZdBi0LcFIFMlvLGadwzLZNuaYbc0jUtTyy_1njvBC1C6C6pBk2dMCJlU6A1u2wXbRdKsU4JQq-NDw
2025-05-10 09:52:55.450 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Failed to authorize filter invocation [GET /api/admin/checkout/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:52:55.451 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:52:55.451 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access
2025-05-10 09:52:55.451 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /error?page=0&pageSize=10&roomNumber=&guestName=&checkoutDate=
2025-05-10 09:52:55.451 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:52:55.451 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Failed to authorize filter invocation [GET /api/admin/rooms/occupied] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:52:55.451 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:52:55.452 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:52:55.452 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access
2025-05-10 09:52:55.452 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /error?page=0&pageSize=10&roomNumber=&guestName=&checkoutDate=
2025-05-10 09:52:55.452 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:52:55.452 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /error
2025-05-10 09:52:55.452 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:52:55.452 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:52:55.452 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /error
2025-05-10 09:52:55.452 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /error
2025-05-10 09:52:55.452 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:52:55.453 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:52:55.453 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/error?page=0&pageSize=10&roomNumber=&guestName=&checkoutDate=", parameters={masked}
2025-05-10 09:52:55.453 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /error
2025-05-10 09:52:55.453 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/error", parameters={}
2025-05-10 09:52:55.453 DEBUG 12700 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CustomErrorController#handleError(HttpServletRequest, WebRequest)
2025-05-10 09:52:55.453 DEBUG 12700 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CustomErrorController#handleError(HttpServletRequest, WebRequest)
2025-05-10 09:52:55.453 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/error", parameters={}
2025-05-10 09:52:55.453 DEBUG 12700 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CustomErrorController#handleError(HttpServletRequest, WebRequest)
2025-05-10 09:52:55.453 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:52:55.453 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:52:55.454 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=Forbidden, message=An error occurred, status=403}]
2025-05-10 09:52:55.454 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=Forbidden, message=An error occurred, status=403}]
2025-05-10 09:52:55.454 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:52:55.454 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=Forbidden, message=An error occurred, status=403}]
2025-05-10 09:52:55.454 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 403
2025-05-10 09:52:55.454 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 403
2025-05-10 09:52:55.455 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:52:55.455 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:52:55.455 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 403
2025-05-10 09:52:55.455 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:53:14.682 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-10 09:53:14.683 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:53:14.683 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:53:14.684 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-10 09:53:14.684 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-10 09:53:14.684 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-10 09:53:14.684 DEBUG 12700 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-10 09:53:14.685 DEBUG 12700 --- [http-nio-8090-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=15699887856, password=15699887856)]
2025-05-10 09:53:14.686  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 15699887856
2025-05-10 09:53:14.688  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : User not found by username, trying phone: 15699887856
2025-05-10 09:53:14.691  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 09:53:14.691  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:53:14.765 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-10 09:53:14.768 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:53:14.769 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=19, username=前台妹妹001, role=RECEPTIONIST, token=eyJh (truncated)...]
2025-05-10 09:53:14.769 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:53:14.770 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:53:15.015 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10
2025-05-10 09:53:15.015 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:53:15.015 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/rooms/types
2025-05-10 09:53:15.015 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:53:15.016  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 09:53:15.016  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 09:53:15.018  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 09:53:15.018  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 09:53:15.019  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:53:15.019  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:53:15.019 DEBUG 12700 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 09:53:15.019 DEBUG 12700 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 09:53:15.020 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/rooms/types] with attributes [permitAll]
2025-05-10 09:53:15.020 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=0&size=10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:53:15.020 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/rooms/types
2025-05-10 09:53:15.020 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=0&size=10
2025-05-10 09:53:15.020 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/rooms/types", parameters={}
2025-05-10 09:53:15.020 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=0&size=10", parameters={masked}
2025-05-10 09:53:15.020 DEBUG 12700 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:53:15.020 DEBUG 12700 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.RoomController#getAllRoomTypes()
2025-05-10 09:53:15.021  INFO 12700 --- [http-nio-8090-exec-5] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 10, Status: null, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:53:15.021 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=10
2025-05-10 09:53:15.028 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=10, TotalElements=37, TotalPages=4
2025-05-10 09:53:15.030 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:53:15.031 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:53:15.032 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:53:15.032 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:53:15.040 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:53:15.041 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{area=null, amenities=[无限量矿泉水、咖啡、茶叶等], availableCount=21, images=[], name=行政套房, des (truncated)...]
2025-05-10 09:53:15.042 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:53:15.042 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:53:15.178 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 09:53:15.178 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:53:15.179 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkin/today-stats
2025-05-10 09:53:15.179 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:53:15.179  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 09:53:15.179 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:53:15.179 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:53:15.179  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 09:53:15.180  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 09:53:15.181  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 09:53:15.181  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 09:53:15.182  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:53:15.182  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:53:15.182 DEBUG 12700 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 09:53:15.182 DEBUG 12700 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 09:53:15.182  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 09:53:15.182  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:53:15.183 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/checkin/today-stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:53:15.183 DEBUG 12700 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 09:53:15.183 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:53:15.183 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/checkin/today-stats
2025-05-10 09:53:15.183 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 09:53:15.183 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/checkin/today-stats", parameters={}
2025-05-10 09:53:15.183 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 09:53:15.183 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:53:15.183 DEBUG 12700 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CheckInController#getTodayStats()
2025-05-10 09:53:15.183 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:53:15.183 DEBUG 12700 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 09:53:15.184 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=PENDING&pageSize=1&size=1&page=0", parameters={masked}
2025-05-10 09:53:15.184 DEBUG 12700 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:53:15.185  INFO 12700 --- [http-nio-8090-exec-3] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: PENDING, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:53:15.186 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:53:15.192 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=4, TotalPages=4
2025-05-10 09:53:15.194 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:53:15.194 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:53:15.195 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:53:15.195 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:53:15.199 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:53:15.202  WARN 12700 --- [http-nio-8090-exec-6] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1146, SQLState: 42S02
2025-05-10 09:53:15.202 ERROR 12700 --- [http-nio-8090-exec-6] o.h.engine.jdbc.spi.SqlExceptionHelper   : Table 'heqing.additional_charges' doesn't exist
2025-05-10 09:53:15.202 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [org.hibernate.exception.SQLGrammarException: could not extract ResultSet]
2025-05-10 09:53:15.204  WARN 12700 --- [http-nio-8090-exec-6] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1146, SQLState: 42S02
2025-05-10 09:53:15.205 ERROR 12700 --- [http-nio-8090-exec-6] o.h.engine.jdbc.spi.SqlExceptionHelper   : Table 'heqing.additional_charges' doesn't exist
2025-05-10 09:53:15.206  WARN 12700 --- [http-nio-8090-exec-6] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: could not extract ResultSet; nested exception is com.fasterxml.jackson.databind.JsonMappingException: could not extract ResultSet (through reference chain: java.util.HashMap["data"]->java.util.HashMap["todayCheckin"]->java.util.HashMap["list"]->java.util.ArrayList[0]->com.hotel.entity.CheckInRecord["additionalCharges"])]
2025-05-10 09:53:15.206 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 500 INTERNAL_SERVER_ERROR
2025-05-10 09:53:15.207 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:53:15.207 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /error
2025-05-10 09:53:15.207 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:53:15.207 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:53:15.208 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /error
2025-05-10 09:53:15.208 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/error", parameters={}
2025-05-10 09:53:15.208 DEBUG 12700 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CustomErrorController#handleError(HttpServletRequest, WebRequest)
2025-05-10 09:53:15.209 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:53:15.209 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=Internal Server Error, message=An error occurred, status=500}]
2025-05-10 09:53:15.210 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 500
2025-05-10 09:53:15.211 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:53:15.248  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:53:15.251  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 09:53:15.251  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 09:53:15.260 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:53:15.260 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:53:15.261  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 09:53:15.262  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 09:53:15.267  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 09:53:15.267  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 09:53:15.267  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:53:15.267 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 09:53:15.267  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 09:53:15.267 DEBUG 12700 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 09:53:15.267 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:53:15.267 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:53:15.267 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1", parameters={masked}
2025-05-10 09:53:15.268 DEBUG 12700 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:53:15.269  INFO 12700 --- [http-nio-8090-exec-4] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:53:15.270 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:53:15.270  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:53:15.274  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 09:53:15.275  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 09:53:15.278  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 09:53:15.280 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=14, TotalPages=14
2025-05-10 09:53:15.283 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:53:15.284 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 14 containing com.hotel.dto.Reservati (truncated)...]
2025-05-10 09:53:15.286 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:53:15.286 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:53:15.302  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 09:53:15.302 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 09:53:15.302 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 09:53:15.302 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 09:53:15.302 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 09:53:15.302 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 09:53:15.302 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 09:53:15.302 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 09:53:15.302 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 09:53:15.303 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 09:53:15.303 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 09:53:15.303 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 09:53:15.303 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 09:53:15.303 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 09:53:15.303 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 09:53:15.303 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 09:53:15.303 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 09:53:15.303 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 09:53:15.303 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 09:53:15.303 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 09:53:15.303 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 09:53:15.303 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 09:53:15.304 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 09:53:15.304 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 09:53:15.304 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 09:53:15.304 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 09:53:15.304 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 09:53:15.304 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 09:53:15.304 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 09:53:15.304 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 09:53:15.304 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 09:53:15.304 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 09:53:15.304 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 09:53:15.304 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 09:53:15.304 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 09:53:15.304 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 09:53:15.305 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 09:53:15.305 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 09:53:15.305  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 09:53:15.309  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:53:15.313  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 09:53:15.313  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 09:53:15.317  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:53:15.320  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 09:53:15.320  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 09:53:15.356  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 16, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 09:53:15.357  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 16
2025-05-10 09:53:15.357  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 09:53:15.357  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 09:53:15.360  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 20
2025-05-10 09:53:15.360  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 09:53:15.362 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:53:15.362 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 09:53:15.364 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:53:15.364 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:53:22.709 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-10 09:53:22.709 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:53:22.710 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:53:22.710 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-10 09:53:22.710 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-10 09:53:22.710 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-10 09:53:22.711 DEBUG 12700 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-10 09:53:22.711 DEBUG 12700 --- [http-nio-8090-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=15699887856, password=15699887856)]
2025-05-10 09:53:22.711  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 15699887856
2025-05-10 09:53:22.713  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : User not found by username, trying phone: 15699887856
2025-05-10 09:53:22.715  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 09:53:22.715  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:53:22.789 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-10 09:53:22.794 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:53:22.794 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=19, username=前台妹妹001, role=RECEPTIONIST, token=eyJh (truncated)...]
2025-05-10 09:53:22.795 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:53:22.795 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:53:23.031 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10
2025-05-10 09:53:23.031 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:53:23.032 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/rooms/types
2025-05-10 09:53:23.032  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 09:53:23.032 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:53:23.033  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 09:53:23.035  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 09:53:23.035  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:53:23.035 DEBUG 12700 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 09:53:23.036 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=0&size=10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:53:23.036  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 09:53:23.036 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=0&size=10
2025-05-10 09:53:23.036  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:53:23.037 DEBUG 12700 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 09:53:23.037 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=0&size=10", parameters={masked}
2025-05-10 09:53:23.037 DEBUG 12700 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:53:23.037 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/rooms/types] with attributes [permitAll]
2025-05-10 09:53:23.037 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/rooms/types
2025-05-10 09:53:23.037 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/rooms/types", parameters={}
2025-05-10 09:53:23.038 DEBUG 12700 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.RoomController#getAllRoomTypes()
2025-05-10 09:53:23.038  INFO 12700 --- [http-nio-8090-exec-9] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 10, Status: null, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:53:23.038 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=10
2025-05-10 09:53:23.045 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=10, TotalElements=37, TotalPages=4
2025-05-10 09:53:23.047 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:53:23.047 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:53:23.049 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:53:23.049 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:53:23.056 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:53:23.057 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{area=null, amenities=[无限量矿泉水、咖啡、茶叶等], availableCount=21, images=[], name=行政套房, des (truncated)...]
2025-05-10 09:53:23.057 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:53:23.058 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:53:23.204 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 09:53:23.205 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:53:23.206 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkin/today-stats
2025-05-10 09:53:23.206  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 09:53:23.206 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:53:23.206 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:53:23.206 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:53:23.207  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 09:53:23.207  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 09:53:23.208  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 09:53:23.208  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:53:23.208 DEBUG 12700 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 09:53:23.209 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:53:23.209 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 09:53:23.209 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 09:53:23.210  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 09:53:23.210  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 09:53:23.210  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:53:23.210  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:53:23.210 DEBUG 12700 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 09:53:23.210 DEBUG 12700 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 09:53:23.210 DEBUG 12700 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 09:53:23.211 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:53:23.211 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/checkin/today-stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:53:23.211 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:53:23.211 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/checkin/today-stats
2025-05-10 09:53:23.211 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/checkin/today-stats", parameters={}
2025-05-10 09:53:23.211 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=PENDING&pageSize=1&size=1&page=0", parameters={masked}
2025-05-10 09:53:23.211 DEBUG 12700 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CheckInController#getTodayStats()
2025-05-10 09:53:23.211 DEBUG 12700 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:53:23.212  INFO 12700 --- [http-nio-8090-exec-8] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: PENDING, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:53:23.212 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:53:23.219 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=4, TotalPages=4
2025-05-10 09:53:23.221 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:53:23.221 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:53:23.223 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:53:23.223 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:53:23.231 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:53:23.233  WARN 12700 --- [http-nio-8090-exec-5] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1146, SQLState: 42S02
2025-05-10 09:53:23.233 ERROR 12700 --- [http-nio-8090-exec-5] o.h.engine.jdbc.spi.SqlExceptionHelper   : Table 'heqing.additional_charges' doesn't exist
2025-05-10 09:53:23.234 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [org.hibernate.exception.SQLGrammarException: could not extract ResultSet]
2025-05-10 09:53:23.236  WARN 12700 --- [http-nio-8090-exec-5] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1146, SQLState: 42S02
2025-05-10 09:53:23.236 ERROR 12700 --- [http-nio-8090-exec-5] o.h.engine.jdbc.spi.SqlExceptionHelper   : Table 'heqing.additional_charges' doesn't exist
2025-05-10 09:53:23.237  WARN 12700 --- [http-nio-8090-exec-5] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: could not extract ResultSet; nested exception is com.fasterxml.jackson.databind.JsonMappingException: could not extract ResultSet (through reference chain: java.util.HashMap["data"]->java.util.HashMap["todayCheckin"]->java.util.HashMap["list"]->java.util.ArrayList[0]->com.hotel.entity.CheckInRecord["additionalCharges"])]
2025-05-10 09:53:23.238 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 500 INTERNAL_SERVER_ERROR
2025-05-10 09:53:23.238 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:53:23.238 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /error
2025-05-10 09:53:23.238 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:53:23.238 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:53:23.239 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /error
2025-05-10 09:53:23.239 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/error", parameters={}
2025-05-10 09:53:23.239 DEBUG 12700 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CustomErrorController#handleError(HttpServletRequest, WebRequest)
2025-05-10 09:53:23.240 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:53:23.240 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=Internal Server Error, message=An error occurred, status=500}]
2025-05-10 09:53:23.241 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 500
2025-05-10 09:53:23.241 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:53:23.274  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:53:23.277  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 09:53:23.278  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 09:53:23.280 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:53:23.281 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:53:23.282  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 09:53:23.285  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 09:53:23.286  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:53:23.286 DEBUG 12700 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 09:53:23.286 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:53:23.287 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:53:23.287 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1", parameters={masked}
2025-05-10 09:53:23.287 DEBUG 12700 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:53:23.287  INFO 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 09:53:23.288  INFO 12700 --- [http-nio-8090-exec-3] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:53:23.288 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:53:23.292  INFO 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 09:53:23.292 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 09:53:23.292  INFO 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 09:53:23.295  INFO 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:53:23.296 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=14, TotalPages=14
2025-05-10 09:53:23.298  INFO 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 09:53:23.298  INFO 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 09:53:23.298 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:53:23.299 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 14 containing com.hotel.dto.Reservati (truncated)...]
2025-05-10 09:53:23.300 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:53:23.301 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:53:23.303  INFO 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 09:53:23.327  INFO 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 09:53:23.327 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 09:53:23.327 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 09:53:23.327 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 09:53:23.327 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 09:53:23.327 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 09:53:23.327 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 09:53:23.327 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 09:53:23.327 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 09:53:23.327 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 09:53:23.328 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 09:53:23.328 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 09:53:23.328 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 09:53:23.328 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 09:53:23.328 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 09:53:23.328 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 09:53:23.328 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 09:53:23.328 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 09:53:23.328 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 09:53:23.328 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 09:53:23.328 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 09:53:23.329 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 09:53:23.329 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 09:53:23.329 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 09:53:23.329 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 09:53:23.329 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 09:53:23.329 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 09:53:23.329 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 09:53:23.329 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 09:53:23.330 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 09:53:23.330 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 09:53:23.330 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 09:53:23.330 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 09:53:23.330 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 09:53:23.330 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 09:53:23.330 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 09:53:23.330 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 09:53:23.330 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 09:53:23.331  INFO 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 09:53:23.335  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:53:23.339  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 09:53:23.339  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 09:53:23.343  INFO 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:53:23.346  INFO 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 09:53:23.346  INFO 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 09:53:23.378  INFO 12700 --- [http-nio-8090-exec-7] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 16, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 09:53:23.379  INFO 12700 --- [http-nio-8090-exec-7] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 16
2025-05-10 09:53:23.379  INFO 12700 --- [http-nio-8090-exec-7] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 09:53:23.379  INFO 12700 --- [http-nio-8090-exec-7] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 09:53:23.382  INFO 12700 --- [http-nio-8090-exec-7] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 20
2025-05-10 09:53:23.383  INFO 12700 --- [http-nio-8090-exec-7] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 09:53:23.386 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:53:23.386 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 09:53:23.387 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:53:23.387 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:53:30.892 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-10 09:53:30.893 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:53:30.893 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:53:30.894 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-10 09:53:30.894 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-10 09:53:30.895 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-10 09:53:30.895 DEBUG 12700 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-10 09:53:30.896 DEBUG 12700 --- [http-nio-8090-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=15699887856, password=15699887856)]
2025-05-10 09:53:30.896  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 15699887856
2025-05-10 09:53:30.898  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : User not found by username, trying phone: 15699887856
2025-05-10 09:53:30.900  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 09:53:30.901  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:53:30.976 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-10 09:53:30.980 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:53:30.980 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=19, username=前台妹妹001, role=RECEPTIONIST, token=eyJh (truncated)...]
2025-05-10 09:53:30.982 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:53:30.982 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:53:31.259 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10
2025-05-10 09:53:31.259 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/rooms/types
2025-05-10 09:53:31.259 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:53:31.259 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:53:31.260  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 09:53:31.260  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 09:53:31.263  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 09:53:31.263  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:53:31.263  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 09:53:31.263  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:53:31.263 DEBUG 12700 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 09:53:31.264 DEBUG 12700 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 09:53:31.264 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/rooms/types] with attributes [permitAll]
2025-05-10 09:53:31.264 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=0&size=10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:53:31.264 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/rooms/types
2025-05-10 09:53:31.264 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=0&size=10
2025-05-10 09:53:31.264 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/rooms/types", parameters={}
2025-05-10 09:53:31.264 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=0&size=10", parameters={masked}
2025-05-10 09:53:31.264 DEBUG 12700 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:53:31.264 DEBUG 12700 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.RoomController#getAllRoomTypes()
2025-05-10 09:53:31.265  INFO 12700 --- [http-nio-8090-exec-4] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 10, Status: null, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:53:31.265 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=10
2025-05-10 09:53:31.272 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=10, TotalElements=37, TotalPages=4
2025-05-10 09:53:31.274 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:53:31.275 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:53:31.276 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:53:31.276 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:53:31.285 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:53:31.285 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{area=null, amenities=[无限量矿泉水、咖啡、茶叶等], availableCount=21, images=[], name=行政套房, des (truncated)...]
2025-05-10 09:53:31.286 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:53:31.286 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:53:31.427 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 09:53:31.427 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:53:31.428  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 09:53:31.428 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkin/today-stats
2025-05-10 09:53:31.428 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:53:31.428 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:53:31.428 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:53:31.429  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 09:53:31.429  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 09:53:31.432  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 09:53:31.432  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 09:53:31.432  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 09:53:31.432  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:53:31.432  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:53:31.432  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:53:31.432 DEBUG 12700 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 09:53:31.432 DEBUG 12700 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 09:53:31.432 DEBUG 12700 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 09:53:31.433 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/checkin/today-stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:53:31.433 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:53:31.433 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/checkin/today-stats
2025-05-10 09:53:31.433 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:53:31.433 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:53:31.433 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 09:53:31.433 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/checkin/today-stats", parameters={}
2025-05-10 09:53:31.433 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=PENDING&pageSize=1&size=1&page=0", parameters={masked}
2025-05-10 09:53:31.433 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 09:53:31.434 DEBUG 12700 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 09:53:31.434 DEBUG 12700 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CheckInController#getTodayStats()
2025-05-10 09:53:31.434 DEBUG 12700 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:53:31.434  INFO 12700 --- [http-nio-8090-exec-2] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: PENDING, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:53:31.435 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:53:31.441 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=4, TotalPages=4
2025-05-10 09:53:31.443 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:53:31.443 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:53:31.445 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:53:31.445 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:53:31.452 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:53:31.455  WARN 12700 --- [http-nio-8090-exec-9] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1146, SQLState: 42S02
2025-05-10 09:53:31.455 ERROR 12700 --- [http-nio-8090-exec-9] o.h.engine.jdbc.spi.SqlExceptionHelper   : Table 'heqing.additional_charges' doesn't exist
2025-05-10 09:53:31.455 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [org.hibernate.exception.SQLGrammarException: could not extract ResultSet]
2025-05-10 09:53:31.458  WARN 12700 --- [http-nio-8090-exec-9] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1146, SQLState: 42S02
2025-05-10 09:53:31.458 ERROR 12700 --- [http-nio-8090-exec-9] o.h.engine.jdbc.spi.SqlExceptionHelper   : Table 'heqing.additional_charges' doesn't exist
2025-05-10 09:53:31.459  WARN 12700 --- [http-nio-8090-exec-9] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: could not extract ResultSet; nested exception is com.fasterxml.jackson.databind.JsonMappingException: could not extract ResultSet (through reference chain: java.util.HashMap["data"]->java.util.HashMap["todayCheckin"]->java.util.HashMap["list"]->java.util.ArrayList[0]->com.hotel.entity.CheckInRecord["additionalCharges"])]
2025-05-10 09:53:31.459 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 500 INTERNAL_SERVER_ERROR
2025-05-10 09:53:31.459 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:53:31.460 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /error
2025-05-10 09:53:31.460 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:53:31.460 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:53:31.460 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /error
2025-05-10 09:53:31.460 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/error", parameters={}
2025-05-10 09:53:31.460 DEBUG 12700 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CustomErrorController#handleError(HttpServletRequest, WebRequest)
2025-05-10 09:53:31.462 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:53:31.462 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=Internal Server Error, message=An error occurred, status=500}]
2025-05-10 09:53:31.463 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 500
2025-05-10 09:53:31.463 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:53:31.498  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:53:31.501  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 09:53:31.501  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 09:53:31.510 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:53:31.511  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 09:53:31.511 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:53:31.512  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 09:53:31.515  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 09:53:31.515  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 09:53:31.515 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 09:53:31.515  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:53:31.515  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 09:53:31.516 DEBUG 12700 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 09:53:31.516 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:53:31.516 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:53:31.517 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1", parameters={masked}
2025-05-10 09:53:31.517 DEBUG 12700 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:53:31.519  INFO 12700 --- [http-nio-8090-exec-8] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:53:31.519  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:53:31.519 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:53:31.522  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 09:53:31.522  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 09:53:31.525  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 09:53:31.528 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=14, TotalPages=14
2025-05-10 09:53:31.530 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:53:31.531 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 14 containing com.hotel.dto.Reservati (truncated)...]
2025-05-10 09:53:31.533 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:53:31.533 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:53:31.548  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 09:53:31.548 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 09:53:31.548 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 09:53:31.548 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 09:53:31.548 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 09:53:31.548 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 09:53:31.548 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 09:53:31.548 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 09:53:31.548 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 09:53:31.548 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 09:53:31.548 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 09:53:31.548 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 09:53:31.549 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 09:53:31.549 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 09:53:31.549 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 09:53:31.549 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 09:53:31.549 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 09:53:31.549 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 09:53:31.549 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 09:53:31.549 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 09:53:31.549 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 09:53:31.549 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 09:53:31.549 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 09:53:31.549 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 09:53:31.549 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 09:53:31.549 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 09:53:31.549 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 09:53:31.549 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 09:53:31.549 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 09:53:31.549 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 09:53:31.549 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 09:53:31.549 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 09:53:31.549 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 09:53:31.549 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 09:53:31.549 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 09:53:31.550 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 09:53:31.550 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 09:53:31.550 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 09:53:31.550  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 09:53:31.553  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:53:31.558  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 09:53:31.558  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 09:53:31.561  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:53:31.565  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 09:53:31.565  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 09:53:31.606  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 16, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 09:53:31.606  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 16
2025-05-10 09:53:31.606  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 09:53:31.606  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 09:53:31.613  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 20
2025-05-10 09:53:31.614  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 09:53:31.617 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:53:31.617 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 09:53:31.618 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:53:31.619 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:53:36.795 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-10 09:53:36.795 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:53:36.796 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:53:36.796 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-10 09:53:36.796 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-10 09:53:36.797 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-10 09:53:36.797 DEBUG 12700 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-10 09:53:36.797 DEBUG 12700 --- [http-nio-8090-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=15699887856, password=15699887856)]
2025-05-10 09:53:36.797  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 15699887856
2025-05-10 09:53:36.799  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : User not found by username, trying phone: 15699887856
2025-05-10 09:53:36.801  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 09:53:36.801  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:53:36.874 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-10 09:53:36.877 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:53:36.877 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=19, username=前台妹妹001, role=RECEPTIONIST, token=eyJh (truncated)...]
2025-05-10 09:53:36.878 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:53:36.878 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:53:37.046 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10
2025-05-10 09:53:37.046 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:53:37.046 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/rooms/types
2025-05-10 09:53:37.046 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:53:37.046  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 09:53:37.046  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 09:53:37.048  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 09:53:37.049  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:53:37.049  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 09:53:37.049 DEBUG 12700 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 09:53:37.049  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:53:37.049 DEBUG 12700 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 09:53:37.049 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=0&size=10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:53:37.049 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=0&size=10
2025-05-10 09:53:37.049 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/rooms/types] with attributes [permitAll]
2025-05-10 09:53:37.049 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/rooms/types
2025-05-10 09:53:37.049 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=0&size=10", parameters={masked}
2025-05-10 09:53:37.049 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/rooms/types", parameters={}
2025-05-10 09:53:37.049 DEBUG 12700 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:53:37.049 DEBUG 12700 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.RoomController#getAllRoomTypes()
2025-05-10 09:53:37.050  INFO 12700 --- [http-nio-8090-exec-3] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 10, Status: null, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:53:37.050 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=10
2025-05-10 09:53:37.056 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=10, TotalElements=37, TotalPages=4
2025-05-10 09:53:37.057 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:53:37.058 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:53:37.059 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:53:37.060 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:53:37.066 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:53:37.067 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{area=null, amenities=[无限量矿泉水、咖啡、茶叶等], availableCount=21, images=[], name=行政套房, des (truncated)...]
2025-05-10 09:53:37.067 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:53:37.067 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:53:37.178 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 09:53:37.178 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:53:37.178  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 09:53:37.182  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 09:53:37.182  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:53:37.182 DEBUG 12700 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 09:53:37.182 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:53:37.182 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 09:53:37.182 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 09:53:37.183 DEBUG 12700 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 09:53:37.183 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkin/today-stats
2025-05-10 09:53:37.183 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:53:37.183 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:53:37.184 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:53:37.185  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 09:53:37.185  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 09:53:37.187  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 09:53:37.187  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 09:53:37.187  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:53:37.187 DEBUG 12700 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 09:53:37.187  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:53:37.187 DEBUG 12700 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 09:53:37.188 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/checkin/today-stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:53:37.188 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:53:37.188 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/checkin/today-stats
2025-05-10 09:53:37.188 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:53:37.189 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/checkin/today-stats", parameters={}
2025-05-10 09:53:37.189 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=PENDING&pageSize=1&size=1&page=0", parameters={masked}
2025-05-10 09:53:37.189 DEBUG 12700 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CheckInController#getTodayStats()
2025-05-10 09:53:37.189 DEBUG 12700 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:53:37.190  INFO 12700 --- [http-nio-8090-exec-1] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: PENDING, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:53:37.191 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:53:37.197 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=4, TotalPages=4
2025-05-10 09:53:37.199 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:53:37.200 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:53:37.201 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:53:37.201 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:53:37.207 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:53:37.209  WARN 12700 --- [http-nio-8090-exec-4] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1146, SQLState: 42S02
2025-05-10 09:53:37.209 ERROR 12700 --- [http-nio-8090-exec-4] o.h.engine.jdbc.spi.SqlExceptionHelper   : Table 'heqing.additional_charges' doesn't exist
2025-05-10 09:53:37.209 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [org.hibernate.exception.SQLGrammarException: could not extract ResultSet]
2025-05-10 09:53:37.211  WARN 12700 --- [http-nio-8090-exec-4] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1146, SQLState: 42S02
2025-05-10 09:53:37.211 ERROR 12700 --- [http-nio-8090-exec-4] o.h.engine.jdbc.spi.SqlExceptionHelper   : Table 'heqing.additional_charges' doesn't exist
2025-05-10 09:53:37.212  WARN 12700 --- [http-nio-8090-exec-4] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: could not extract ResultSet; nested exception is com.fasterxml.jackson.databind.JsonMappingException: could not extract ResultSet (through reference chain: java.util.HashMap["data"]->java.util.HashMap["todayCheckin"]->java.util.HashMap["list"]->java.util.ArrayList[0]->com.hotel.entity.CheckInRecord["additionalCharges"])]
2025-05-10 09:53:37.212 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 500 INTERNAL_SERVER_ERROR
2025-05-10 09:53:37.212 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:53:37.212 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /error
2025-05-10 09:53:37.212 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:53:37.213 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:53:37.213 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /error
2025-05-10 09:53:37.213 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/error", parameters={}
2025-05-10 09:53:37.213 DEBUG 12700 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CustomErrorController#handleError(HttpServletRequest, WebRequest)
2025-05-10 09:53:37.214 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:53:37.214 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=Internal Server Error, message=An error occurred, status=500}]
2025-05-10 09:53:37.215 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 500
2025-05-10 09:53:37.215 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:53:37.236  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:53:37.237 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:53:37.237 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:53:37.238  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 09:53:37.239  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 09:53:37.240  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 09:53:37.240  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 09:53:37.240  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:53:37.240 DEBUG 12700 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 09:53:37.241 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:53:37.241 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:53:37.241 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1", parameters={masked}
2025-05-10 09:53:37.241 DEBUG 12700 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:53:37.242  INFO 12700 --- [http-nio-8090-exec-2] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:53:37.242 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:53:37.246  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 09:53:37.249 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=14, TotalPages=14
2025-05-10 09:53:37.250  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 09:53:37.250 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 09:53:37.250  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 09:53:37.250 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:53:37.251 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 14 containing com.hotel.dto.Reservati (truncated)...]
2025-05-10 09:53:37.252 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:53:37.252 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:53:37.253  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:53:37.255  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 09:53:37.256  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 09:53:37.258  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 09:53:37.279  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 09:53:37.279 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 09:53:37.279 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 09:53:37.279 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 09:53:37.279 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 09:53:37.280 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 09:53:37.280 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 09:53:37.280 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 09:53:37.280 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 09:53:37.280 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 09:53:37.280 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 09:53:37.281 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 09:53:37.281 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 09:53:37.281 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 09:53:37.281 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 09:53:37.281 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 09:53:37.281 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 09:53:37.281 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 09:53:37.281 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 09:53:37.281 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 09:53:37.281 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 09:53:37.281 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 09:53:37.281 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 09:53:37.281 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 09:53:37.281 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 09:53:37.281 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 09:53:37.281 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 09:53:37.281 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 09:53:37.281 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 09:53:37.281 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 09:53:37.281 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 09:53:37.281 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 09:53:37.281 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 09:53:37.281 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 09:53:37.281 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 09:53:37.281 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 09:53:37.282 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 09:53:37.282 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 09:53:37.282  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 09:53:37.285  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:53:37.289  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 09:53:37.289  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 09:53:37.291  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:53:37.294  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 09:53:37.295  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 09:53:37.323  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 16, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 09:53:37.324  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 16
2025-05-10 09:53:37.324  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 09:53:37.324  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 09:53:37.327  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 20
2025-05-10 09:53:37.328  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 09:53:37.330 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:53:37.330 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 09:53:37.332 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:53:37.332 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:53:44.428 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-10 09:53:44.429 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:53:44.429 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:53:44.429 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-10 09:53:44.429 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-10 09:53:44.429 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-10 09:53:44.430 DEBUG 12700 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-10 09:53:44.430 DEBUG 12700 --- [http-nio-8090-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=15698758866, password=15698758866)]
2025-05-10 09:53:44.430  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 15698758866
2025-05-10 09:53:44.432  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : User not found by username, trying phone: 15698758866
2025-05-10 09:53:44.434  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : User found: 保洁7号阿姨, Role: CLEANER
2025-05-10 09:53:44.434  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CLEANER]
2025-05-10 09:53:44.504 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-10 09:53:44.507 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:53:44.508 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=17, username=保洁7号阿姨, role=CLEANER, token=eyJhbGciOi (truncated)...]
2025-05-10 09:53:44.509 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:53:44.509 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:53:44.553 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/cleaning/tasks
2025-05-10 09:53:44.554 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:53:44.554  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 保洁7号阿姨
2025-05-10 09:53:44.556  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : User found: 保洁7号阿姨, Role: CLEANER
2025-05-10 09:53:44.556  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CLEANER]
2025-05-10 09:53:44.556 DEBUG 12700 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 '保洁7号阿姨' 认证成功, 设置 SecurityContext
2025-05-10 09:53:44.556 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/cleaning/tasks] with attributes [authenticated]
2025-05-10 09:53:44.556 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/cleaning/tasks
2025-05-10 09:53:44.556 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/cleaning/tasks", parameters={}
2025-05-10 09:53:44.557 DEBUG 12700 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CleaningTaskController#getTasks(String, int, int)
2025-05-10 09:53:44.557  INFO 12700 --- [http-nio-8090-exec-8] com.hotel.service.impl.TaskServiceImpl   : 开始自动生成清洁任务...
2025-05-10 09:53:44.559  INFO 12700 --- [http-nio-8090-exec-8] com.hotel.service.impl.TaskServiceImpl   : 找到 0 个需要清洁的房间
2025-05-10 09:53:44.560  INFO 12700 --- [http-nio-8090-exec-8] com.hotel.service.impl.TaskServiceImpl   : 将使用默认清洁员: 清洁人员
2025-05-10 09:53:44.560  INFO 12700 --- [http-nio-8090-exec-8] com.hotel.service.impl.TaskServiceImpl   : 自动生成清洁任务完成，共创建 0 个新任务
2025-05-10 09:53:44.568 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:53:44.568 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{totalPages=3, generatedTasksCount=0, currentPage=0, content=[Task(id=27, roomNumber=204, roomType=豪 (truncated)...]
2025-05-10 09:53:44.569 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:53:44.569 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:53:44.588 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/cleaning/tasks/statistics
2025-05-10 09:53:44.588 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:53:44.589  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 保洁7号阿姨
2025-05-10 09:53:44.590  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : User found: 保洁7号阿姨, Role: CLEANER
2025-05-10 09:53:44.590  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CLEANER]
2025-05-10 09:53:44.590 DEBUG 12700 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 '保洁7号阿姨' 认证成功, 设置 SecurityContext
2025-05-10 09:53:44.591 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/cleaning/tasks/statistics] with attributes [authenticated]
2025-05-10 09:53:44.591 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/cleaning/tasks/statistics
2025-05-10 09:53:44.591 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/cleaning/tasks/statistics", parameters={}
2025-05-10 09:53:44.591 DEBUG 12700 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CleaningTaskController#getTaskStatistics()
2025-05-10 09:53:44.591  INFO 12700 --- [http-nio-8090-exec-10] com.hotel.service.impl.TaskServiceImpl   : 开始自动生成清洁任务...
2025-05-10 09:53:44.593  INFO 12700 --- [http-nio-8090-exec-10] com.hotel.service.impl.TaskServiceImpl   : 找到 0 个需要清洁的房间
2025-05-10 09:53:44.594  INFO 12700 --- [http-nio-8090-exec-10] com.hotel.service.impl.TaskServiceImpl   : 将使用默认清洁员: 清洁人员
2025-05-10 09:53:44.594  INFO 12700 --- [http-nio-8090-exec-10] com.hotel.service.impl.TaskServiceImpl   : 自动生成清洁任务完成，共创建 0 个新任务
2025-05-10 09:53:44.600 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:53:44.600 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{data=TaskDTO(id=null, roomNumber=null, roomType=null, cleaner=null, priority=null, status=null, exp (truncated)...]
2025-05-10 09:53:44.600 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:53:44.600 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:58:47.212 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10
2025-05-10 09:58:47.212 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/rooms/types
2025-05-10 09:58:47.212 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:58:47.212 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:58:47.213 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:58:47.213 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:58:47.213 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-10 09:58:47.213 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-10 09:58:47.213 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/rooms/types] with attributes [permitAll]
2025-05-10 09:58:47.213 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Failed to authorize filter invocation [GET /api/reservations?page=0&size=10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:58:47.214 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/rooms/types
2025-05-10 09:58:47.214 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access
2025-05-10 09:58:47.214 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/rooms/types", parameters={}
2025-05-10 09:58:47.214 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:58:47.214 DEBUG 12700 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.RoomController#getAllRoomTypes()
2025-05-10 09:58:47.215 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /error?page=0&size=10
2025-05-10 09:58:47.215 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:58:47.215 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:58:47.215 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /error?page=0&size=10
2025-05-10 09:58:47.216 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/error?page=0&size=10", parameters={masked}
2025-05-10 09:58:47.216 DEBUG 12700 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CustomErrorController#handleError(HttpServletRequest, WebRequest)
2025-05-10 09:58:47.217 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:58:47.217 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=Forbidden, message=An error occurred, status=403}]
2025-05-10 09:58:47.218 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 403
2025-05-10 09:58:47.218 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:58:47.234 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:58:47.234 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{area=null, amenities=[无限量矿泉水、咖啡、茶叶等], availableCount=21, images=[], name=行政套房, des (truncated)...]
2025-05-10 09:58:47.236 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:58:47.236 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:58:49.597 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10
2025-05-10 09:58:49.598 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:58:49.598 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:58:49.598 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-10 09:58:49.599 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Failed to authorize filter invocation [GET /api/reservations?page=0&size=10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:58:49.599 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access
2025-05-10 09:58:49.599 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:58:49.600 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /error?page=0&size=10
2025-05-10 09:58:49.600 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:58:49.600 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:58:49.600 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /error?page=0&size=10
2025-05-10 09:58:49.600 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/error?page=0&size=10", parameters={masked}
2025-05-10 09:58:49.601 DEBUG 12700 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CustomErrorController#handleError(HttpServletRequest, WebRequest)
2025-05-10 09:58:49.602 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:58:49.602 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=Forbidden, message=An error occurred, status=403}]
2025-05-10 09:58:49.603 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 403
2025-05-10 09:58:49.603 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:58:51.617 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10
2025-05-10 09:58:51.617 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:58:51.617 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:58:51.618 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-10 09:58:51.618 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Failed to authorize filter invocation [GET /api/reservations?page=0&size=10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:58:51.619 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access
2025-05-10 09:58:51.619 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:58:51.619 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /error?page=0&size=10
2025-05-10 09:58:51.619 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:58:51.619 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:58:51.619 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /error?page=0&size=10
2025-05-10 09:58:51.620 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/error?page=0&size=10", parameters={masked}
2025-05-10 09:58:51.621 DEBUG 12700 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CustomErrorController#handleError(HttpServletRequest, WebRequest)
2025-05-10 09:58:51.621 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:58:51.621 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=Forbidden, message=An error occurred, status=403}]
2025-05-10 09:58:51.622 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 403
2025-05-10 09:58:51.622 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:58:54.593 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/rooms/types
2025-05-10 09:58:54.593 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10
2025-05-10 09:58:54.593 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:58:54.594 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:58:54.594 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:58:54.594 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:58:54.594 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-10 09:58:54.594 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-10 09:58:54.595 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/rooms/types] with attributes [permitAll]
2025-05-10 09:58:54.595 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Failed to authorize filter invocation [GET /api/reservations?page=0&size=10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:58:54.595 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/rooms/types
2025-05-10 09:58:54.596 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access
2025-05-10 09:58:54.596 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/rooms/types", parameters={}
2025-05-10 09:58:54.596 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:58:54.596 DEBUG 12700 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.RoomController#getAllRoomTypes()
2025-05-10 09:58:54.596 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /error?page=0&size=10
2025-05-10 09:58:54.597 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:58:54.597 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:58:54.597 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /error?page=0&size=10
2025-05-10 09:58:54.597 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/error?page=0&size=10", parameters={masked}
2025-05-10 09:58:54.598 DEBUG 12700 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CustomErrorController#handleError(HttpServletRequest, WebRequest)
2025-05-10 09:58:54.598 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:58:54.599 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=Forbidden, message=An error occurred, status=403}]
2025-05-10 09:58:54.600 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 403
2025-05-10 09:58:54.600 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:58:54.627 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:58:54.628 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{area=null, amenities=[无限量矿泉水、咖啡、茶叶等], availableCount=21, images=[], name=行政套房, des (truncated)...]
2025-05-10 09:58:54.629 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:58:54.629 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:58:56.705 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10
2025-05-10 09:58:56.706 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:58:56.706 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:58:56.706 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-10 09:58:56.706 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Failed to authorize filter invocation [GET /api/reservations?page=0&size=10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:58:56.706 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access
2025-05-10 09:58:56.706 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:58:56.707 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /error?page=0&size=10
2025-05-10 09:58:56.707 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:58:56.707 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:58:56.707 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /error?page=0&size=10
2025-05-10 09:58:56.707 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/error?page=0&size=10", parameters={masked}
2025-05-10 09:58:56.708 DEBUG 12700 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CustomErrorController#handleError(HttpServletRequest, WebRequest)
2025-05-10 09:58:56.708 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:58:56.708 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=Forbidden, message=An error occurred, status=403}]
2025-05-10 09:58:56.709 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 403
2025-05-10 09:58:56.709 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:58:59.041 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10
2025-05-10 09:58:59.042 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:58:59.042 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:58:59.042 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-10 09:58:59.043 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Failed to authorize filter invocation [GET /api/reservations?page=0&size=10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:58:59.043 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access
2025-05-10 09:58:59.043 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:58:59.043 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /error?page=0&size=10
2025-05-10 09:58:59.043 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:58:59.043 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:58:59.044 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /error?page=0&size=10
2025-05-10 09:58:59.044 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/error?page=0&size=10", parameters={masked}
2025-05-10 09:58:59.045 DEBUG 12700 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CustomErrorController#handleError(HttpServletRequest, WebRequest)
2025-05-10 09:58:59.045 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:58:59.045 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=Forbidden, message=An error occurred, status=403}]
2025-05-10 09:58:59.046 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 403
2025-05-10 09:58:59.046 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:59:01.503 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-10 09:59:01.504 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:59:01.504 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:59:01.505 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-10 09:59:01.505 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-10 09:59:01.505 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-10 09:59:01.506 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-10 09:59:01.506 DEBUG 12700 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-10 09:59:01.507 DEBUG 12700 --- [http-nio-8090-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=18999177256, password=18999177256)]
2025-05-10 09:59:01.507  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:59:01.509  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:59:01.510  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:59:01.586 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-10 09:59:01.589 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:59:01.590 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=16, username=18999177256, role=RECEPTIONIST, token= (truncated)...]
2025-05-10 09:59:01.590 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:59:01.591 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:59:02.031 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/rooms/types
2025-05-10 09:59:02.031 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10
2025-05-10 09:59:02.032 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:59:02.032 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:59:02.032  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:59:02.032  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:59:02.034  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:59:02.034  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:59:02.035  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:59:02.035 DEBUG 12700 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 09:59:02.035  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:59:02.036 DEBUG 12700 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 09:59:02.036 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=0&size=10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:59:02.037 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=0&size=10
2025-05-10 09:59:02.037 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/rooms/types] with attributes [permitAll]
2025-05-10 09:59:02.037 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/rooms/types
2025-05-10 09:59:02.037 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/rooms/types", parameters={}
2025-05-10 09:59:02.037 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=0&size=10", parameters={masked}
2025-05-10 09:59:02.037 DEBUG 12700 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.RoomController#getAllRoomTypes()
2025-05-10 09:59:02.037 DEBUG 12700 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:59:02.038  INFO 12700 --- [http-nio-8090-exec-10] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 10, Status: null, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:59:02.038 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=10
2025-05-10 09:59:02.046 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=10, TotalElements=37, TotalPages=4
2025-05-10 09:59:02.048 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:59:02.049 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:59:02.050 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:59:02.050 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:59:02.056 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:59:02.057 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{area=null, amenities=[无限量矿泉水、咖啡、茶叶等], availableCount=21, images=[], name=行政套房, des (truncated)...]
2025-05-10 09:59:02.057 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:59:02.058 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:59:02.290 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 09:59:02.290 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:59:02.290  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:59:02.293  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:59:02.293  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:59:02.293 DEBUG 12700 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 09:59:02.293 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:59:02.293 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 09:59:02.293 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 09:59:02.294 DEBUG 12700 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 09:59:02.340  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:59:02.343  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 09:59:02.343  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 09:59:02.350  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 09:59:02.354  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 09:59:02.354 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 09:59:02.354  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 09:59:02.357  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:59:02.359  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 09:59:02.359  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 09:59:02.362  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 09:59:02.382  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 09:59:02.382 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 09:59:02.382 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 09:59:02.382 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 09:59:02.383 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 09:59:02.383 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 09:59:02.383 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 09:59:02.383 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 09:59:02.383 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 09:59:02.383 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 09:59:02.383 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 09:59:02.383 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 09:59:02.383 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 09:59:02.383 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 09:59:02.383 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 09:59:02.383 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 09:59:02.383 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 09:59:02.384 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 09:59:02.384 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 09:59:02.384 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 09:59:02.384 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 09:59:02.384 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 09:59:02.384 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 09:59:02.385 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 09:59:02.385 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 09:59:02.385 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 09:59:02.385 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 09:59:02.385 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 09:59:02.385 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 09:59:02.385 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 09:59:02.385 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 09:59:02.385 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 09:59:02.385 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 09:59:02.385 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 09:59:02.385 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 09:59:02.385 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 09:59:02.386 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 09:59:02.386 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 09:59:02.386  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 09:59:02.389  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:59:02.392  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 09:59:02.392  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 09:59:02.395  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:59:02.399  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 09:59:02.399  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 09:59:02.423  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 16, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 09:59:02.423  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 16
2025-05-10 09:59:02.423  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 09:59:02.423  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 09:59:02.426  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 20
2025-05-10 09:59:02.426  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 09:59:02.429 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:59:02.429 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 09:59:02.430 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:59:02.431 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:59:02.464 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkin/today-stats
2025-05-10 09:59:02.464 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:59:02.464 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:59:02.464 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:59:02.465  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:59:02.465  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:59:02.467  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:59:02.467  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:59:02.467 DEBUG 12700 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 09:59:02.467  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:59:02.467  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:59:02.467 DEBUG 12700 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 09:59:02.467 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/checkin/today-stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:59:02.467 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/checkin/today-stats
2025-05-10 09:59:02.468 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/checkin/today-stats", parameters={}
2025-05-10 09:59:02.468 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:59:02.468 DEBUG 12700 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CheckInController#getTodayStats()
2025-05-10 09:59:02.468 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:59:02.468 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=PENDING&pageSize=1&size=1&page=0", parameters={masked}
2025-05-10 09:59:02.468 DEBUG 12700 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:59:02.469  INFO 12700 --- [http-nio-8090-exec-1] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: PENDING, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:59:02.469 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:59:02.476 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=4, TotalPages=4
2025-05-10 09:59:02.478 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:59:02.479 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:59:02.480 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:59:02.480 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:59:02.484 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:59:02.486  WARN 12700 --- [http-nio-8090-exec-7] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1146, SQLState: 42S02
2025-05-10 09:59:02.486 ERROR 12700 --- [http-nio-8090-exec-7] o.h.engine.jdbc.spi.SqlExceptionHelper   : Table 'heqing.additional_charges' doesn't exist
2025-05-10 09:59:02.486 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [org.hibernate.exception.SQLGrammarException: could not extract ResultSet]
2025-05-10 09:59:02.490  WARN 12700 --- [http-nio-8090-exec-7] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1146, SQLState: 42S02
2025-05-10 09:59:02.490 ERROR 12700 --- [http-nio-8090-exec-7] o.h.engine.jdbc.spi.SqlExceptionHelper   : Table 'heqing.additional_charges' doesn't exist
2025-05-10 09:59:02.490  WARN 12700 --- [http-nio-8090-exec-7] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: could not extract ResultSet; nested exception is com.fasterxml.jackson.databind.JsonMappingException: could not extract ResultSet (through reference chain: java.util.HashMap["data"]->java.util.HashMap["todayCheckin"]->java.util.HashMap["list"]->java.util.ArrayList[0]->com.hotel.entity.CheckInRecord["additionalCharges"])]
2025-05-10 09:59:02.491 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 500 INTERNAL_SERVER_ERROR
2025-05-10 09:59:02.491 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:59:02.491 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /error
2025-05-10 09:59:02.492 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:59:02.492 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:59:02.492 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /error
2025-05-10 09:59:02.492 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/error", parameters={}
2025-05-10 09:59:02.492 DEBUG 12700 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CustomErrorController#handleError(HttpServletRequest, WebRequest)
2025-05-10 09:59:02.493 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:59:02.493 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=Internal Server Error, message=An error occurred, status=500}]
2025-05-10 09:59:02.495 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 500
2025-05-10 09:59:02.495 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:59:02.516 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:59:02.516 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:59:02.517  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:59:02.519  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:59:02.519  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:59:02.519 DEBUG 12700 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 09:59:02.520 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:59:02.520 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:59:02.520 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1", parameters={masked}
2025-05-10 09:59:02.521 DEBUG 12700 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:59:02.522  INFO 12700 --- [http-nio-8090-exec-4] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:59:02.522 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:59:02.530 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=14, TotalPages=14
2025-05-10 09:59:02.531 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:59:02.531 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 14 containing com.hotel.dto.Reservati (truncated)...]
2025-05-10 09:59:02.532 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:59:02.532 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:59:05.236 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/rooms/types
2025-05-10 09:59:05.236 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10
2025-05-10 09:59:05.236 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:59:05.236 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:59:05.237  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:59:05.237  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:59:05.238  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:59:05.238  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:59:05.238  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:59:05.239  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:59:05.239 DEBUG 12700 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 09:59:05.239 DEBUG 12700 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 09:59:05.239 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=0&size=10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:59:05.239 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/rooms/types] with attributes [permitAll]
2025-05-10 09:59:05.239 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=0&size=10
2025-05-10 09:59:05.239 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=0&size=10", parameters={masked}
2025-05-10 09:59:05.239 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/rooms/types
2025-05-10 09:59:05.240 DEBUG 12700 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:59:05.240 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/rooms/types", parameters={}
2025-05-10 09:59:05.240 DEBUG 12700 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.RoomController#getAllRoomTypes()
2025-05-10 09:59:05.240  INFO 12700 --- [http-nio-8090-exec-2] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 10, Status: null, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:59:05.240 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=10
2025-05-10 09:59:05.247 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=10, TotalElements=37, TotalPages=4
2025-05-10 09:59:05.248 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:59:05.249 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:59:05.250 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:59:05.250 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:59:05.255 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:59:05.256 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{area=null, amenities=[无限量矿泉水、咖啡、茶叶等], availableCount=21, images=[], name=行政套房, des (truncated)...]
2025-05-10 09:59:05.257 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:59:05.257 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:59:05.351 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 09:59:05.351 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkin/today-stats
2025-05-10 09:59:05.352 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:59:05.352 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:59:05.352 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:59:05.352 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:59:05.352  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:59:05.352  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:59:05.352  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:59:05.354  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:59:05.354  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:59:05.354  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:59:05.354  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:59:05.354  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:59:05.354  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:59:05.354 DEBUG 12700 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 09:59:05.354 DEBUG 12700 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 09:59:05.354 DEBUG 12700 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 09:59:05.355 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:59:05.355 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/checkin/today-stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:59:05.355 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 09:59:05.355 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/checkin/today-stats
2025-05-10 09:59:05.355 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:59:05.355 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/checkin/today-stats", parameters={}
2025-05-10 09:59:05.355 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 09:59:05.355 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:59:05.355 DEBUG 12700 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CheckInController#getTodayStats()
2025-05-10 09:59:05.355 DEBUG 12700 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 09:59:05.355 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=PENDING&pageSize=1&size=1&page=0", parameters={masked}
2025-05-10 09:59:05.356 DEBUG 12700 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:59:05.356  INFO 12700 --- [http-nio-8090-exec-10] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: PENDING, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:59:05.356 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:59:05.370 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=4, TotalPages=4
2025-05-10 09:59:05.370 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:59:05.372 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:59:05.372  WARN 12700 --- [http-nio-8090-exec-8] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1146, SQLState: 42S02
2025-05-10 09:59:05.372 ERROR 12700 --- [http-nio-8090-exec-8] o.h.engine.jdbc.spi.SqlExceptionHelper   : Table 'heqing.additional_charges' doesn't exist
2025-05-10 09:59:05.372 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:59:05.372 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [org.hibernate.exception.SQLGrammarException: could not extract ResultSet]
2025-05-10 09:59:05.373 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:59:05.373 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:59:05.374  WARN 12700 --- [http-nio-8090-exec-8] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1146, SQLState: 42S02
2025-05-10 09:59:05.374 ERROR 12700 --- [http-nio-8090-exec-8] o.h.engine.jdbc.spi.SqlExceptionHelper   : Table 'heqing.additional_charges' doesn't exist
2025-05-10 09:59:05.375  WARN 12700 --- [http-nio-8090-exec-8] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: could not extract ResultSet; nested exception is com.fasterxml.jackson.databind.JsonMappingException: could not extract ResultSet (through reference chain: java.util.HashMap["data"]->java.util.HashMap["todayCheckin"]->java.util.HashMap["list"]->java.util.ArrayList[0]->com.hotel.entity.CheckInRecord["additionalCharges"])]
2025-05-10 09:59:05.375 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 500 INTERNAL_SERVER_ERROR
2025-05-10 09:59:05.375 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:59:05.376 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /error
2025-05-10 09:59:05.376 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:59:05.376 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:59:05.376 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /error
2025-05-10 09:59:05.376 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/error", parameters={}
2025-05-10 09:59:05.376 DEBUG 12700 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CustomErrorController#handleError(HttpServletRequest, WebRequest)
2025-05-10 09:59:05.377 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:59:05.377 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=Internal Server Error, message=An error occurred, status=500}]
2025-05-10 09:59:05.378 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 500
2025-05-10 09:59:05.378 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:59:05.403  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:59:05.406  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 09:59:05.406  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 09:59:05.408 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:59:05.408 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:59:05.409  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:59:05.411  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:59:05.411  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:59:05.411 DEBUG 12700 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 09:59:05.413 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:59:05.413 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:59:05.413 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1", parameters={masked}
2025-05-10 09:59:05.413 DEBUG 12700 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:59:05.414  INFO 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 09:59:05.414  INFO 12700 --- [http-nio-8090-exec-5] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:59:05.414 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:59:05.418  INFO 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 09:59:05.418 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 09:59:05.418  INFO 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 09:59:05.420  INFO 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:59:05.421 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=14, TotalPages=14
2025-05-10 09:59:05.423  INFO 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 09:59:05.423  INFO 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 09:59:05.423 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:59:05.423 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 14 containing com.hotel.dto.Reservati (truncated)...]
2025-05-10 09:59:05.424 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:59:05.424 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:59:05.425  INFO 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 09:59:05.444  INFO 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 09:59:05.444 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 09:59:05.444 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 09:59:05.444 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 09:59:05.444 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 09:59:05.444 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 09:59:05.444 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 09:59:05.444 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 09:59:05.444 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 09:59:05.444 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 09:59:05.444 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 09:59:05.444 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 09:59:05.444 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 09:59:05.444 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 09:59:05.444 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 09:59:05.444 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 09:59:05.444 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 09:59:05.444 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 09:59:05.445 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 09:59:05.445 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 09:59:05.445 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 09:59:05.445 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 09:59:05.445 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 09:59:05.445 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 09:59:05.445 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 09:59:05.445 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 09:59:05.445 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 09:59:05.445 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 09:59:05.445 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 09:59:05.445 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 09:59:05.445 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 09:59:05.445 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 09:59:05.445 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 09:59:05.445 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 09:59:05.445 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 09:59:05.445 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 09:59:05.445 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 09:59:05.446 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 09:59:05.446  INFO 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 09:59:05.447  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:59:05.451  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 09:59:05.451  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 09:59:05.453  INFO 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:59:05.455  INFO 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 09:59:05.455  INFO 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 09:59:05.475  INFO 12700 --- [http-nio-8090-exec-9] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 16, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 09:59:05.475  INFO 12700 --- [http-nio-8090-exec-9] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 16
2025-05-10 09:59:05.475  INFO 12700 --- [http-nio-8090-exec-9] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 09:59:05.475  INFO 12700 --- [http-nio-8090-exec-9] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 09:59:05.478  INFO 12700 --- [http-nio-8090-exec-9] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 20
2025-05-10 09:59:05.478  INFO 12700 --- [http-nio-8090-exec-9] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 09:59:05.480 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:59:05.480 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 09:59:05.481 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:59:05.481 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:59:11.040 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-10 09:59:11.040 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:59:11.041 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:59:11.041 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-10 09:59:11.041 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-10 09:59:11.041 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-10 09:59:11.041 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-10 09:59:11.041 DEBUG 12700 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-10 09:59:11.042 DEBUG 12700 --- [http-nio-8090-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=18999177256, password=18999177256)]
2025-05-10 09:59:11.042  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:59:11.044  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:59:11.044  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:59:11.111 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-10 09:59:11.114 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:59:11.114 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=16, username=18999177256, role=RECEPTIONIST, token= (truncated)...]
2025-05-10 09:59:11.115 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:59:11.115 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:59:11.543 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/rooms/types
2025-05-10 09:59:11.543 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10
2025-05-10 09:59:11.543 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:59:11.543 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:59:11.544  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:59:11.544  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:59:11.547  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:59:11.547  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:59:11.548  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:59:11.548  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:59:11.548 DEBUG 12700 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 09:59:11.548 DEBUG 12700 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 09:59:11.548 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=0&size=10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:59:11.548 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/rooms/types] with attributes [permitAll]
2025-05-10 09:59:11.548 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=0&size=10
2025-05-10 09:59:11.548 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/rooms/types
2025-05-10 09:59:11.548 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=0&size=10", parameters={masked}
2025-05-10 09:59:11.548 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/rooms/types", parameters={}
2025-05-10 09:59:11.549 DEBUG 12700 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:59:11.549 DEBUG 12700 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.RoomController#getAllRoomTypes()
2025-05-10 09:59:11.549  INFO 12700 --- [http-nio-8090-exec-1] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 10, Status: null, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:59:11.550 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=10
2025-05-10 09:59:11.556 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=10, TotalElements=37, TotalPages=4
2025-05-10 09:59:11.557 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:59:11.557 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:59:11.558 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:59:11.558 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:59:11.564 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:59:11.564 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{area=null, amenities=[无限量矿泉水、咖啡、茶叶等], availableCount=21, images=[], name=行政套房, des (truncated)...]
2025-05-10 09:59:11.565 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:59:11.565 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:59:11.806 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 09:59:11.807 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:59:11.807  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:59:11.809  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:59:11.809  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:59:11.809 DEBUG 12700 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 09:59:11.810 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:59:11.810 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 09:59:11.810 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 09:59:11.810 DEBUG 12700 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 09:59:11.849  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:59:11.852  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 09:59:11.852  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 09:59:11.857  INFO 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 09:59:11.860  INFO 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 09:59:11.860 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 09:59:11.860  INFO 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 09:59:11.862  INFO 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:59:11.863  INFO 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 09:59:11.864  INFO 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 09:59:11.865  INFO 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 09:59:11.881  INFO 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 09:59:11.881 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 09:59:11.881 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 09:59:11.881 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 09:59:11.881 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 09:59:11.881 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 09:59:11.881 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 09:59:11.881 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 09:59:11.881 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 09:59:11.881 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 09:59:11.881 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 09:59:11.881 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 09:59:11.881 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 09:59:11.881 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 09:59:11.881 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 09:59:11.881 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 09:59:11.881 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 09:59:11.882 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 09:59:11.882 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 09:59:11.882 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 09:59:11.882 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 09:59:11.882 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 09:59:11.882 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 09:59:11.882 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 09:59:11.882 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 09:59:11.883 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 09:59:11.883 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 09:59:11.883 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 09:59:11.883 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 09:59:11.883 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 09:59:11.884 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 09:59:11.884 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 09:59:11.884 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 09:59:11.884 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 09:59:11.884 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 09:59:11.884 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 09:59:11.884 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 09:59:11.884 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 09:59:11.884  INFO 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 09:59:11.887  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:59:11.889  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 09:59:11.889  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 09:59:11.891  INFO 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:59:11.893  INFO 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 09:59:11.893  INFO 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 09:59:11.914  INFO 12700 --- [http-nio-8090-exec-4] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 16, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 09:59:11.914  INFO 12700 --- [http-nio-8090-exec-4] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 16
2025-05-10 09:59:11.914  INFO 12700 --- [http-nio-8090-exec-4] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 09:59:11.914  INFO 12700 --- [http-nio-8090-exec-4] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 09:59:11.918  INFO 12700 --- [http-nio-8090-exec-4] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 20
2025-05-10 09:59:11.919  INFO 12700 --- [http-nio-8090-exec-4] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 09:59:11.922 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:59:11.922 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 09:59:11.923 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:59:11.923 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:59:11.935 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkin/today-stats
2025-05-10 09:59:11.935 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:59:11.935 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:59:11.935 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:59:11.935  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:59:11.935  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:59:11.937  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:59:11.937  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:59:11.937  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:59:11.937  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:59:11.937 DEBUG 12700 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 09:59:11.937 DEBUG 12700 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 09:59:11.938 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/checkin/today-stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:59:11.938 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/checkin/today-stats
2025-05-10 09:59:11.938 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:59:11.938 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/checkin/today-stats", parameters={}
2025-05-10 09:59:11.938 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:59:11.938 DEBUG 12700 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CheckInController#getTodayStats()
2025-05-10 09:59:11.938 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=PENDING&pageSize=1&size=1&page=0", parameters={masked}
2025-05-10 09:59:11.938 DEBUG 12700 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:59:11.939  INFO 12700 --- [http-nio-8090-exec-6] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: PENDING, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:59:11.939 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:59:11.945 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=4, TotalPages=4
2025-05-10 09:59:11.947 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:59:11.947 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:59:11.948 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:59:11.949 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:59:11.953 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:59:11.955  WARN 12700 --- [http-nio-8090-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1146, SQLState: 42S02
2025-05-10 09:59:11.955 ERROR 12700 --- [http-nio-8090-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : Table 'heqing.additional_charges' doesn't exist
2025-05-10 09:59:11.955 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [org.hibernate.exception.SQLGrammarException: could not extract ResultSet]
2025-05-10 09:59:11.957  WARN 12700 --- [http-nio-8090-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1146, SQLState: 42S02
2025-05-10 09:59:11.958 ERROR 12700 --- [http-nio-8090-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : Table 'heqing.additional_charges' doesn't exist
2025-05-10 09:59:11.958  WARN 12700 --- [http-nio-8090-exec-2] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: could not extract ResultSet; nested exception is com.fasterxml.jackson.databind.JsonMappingException: could not extract ResultSet (through reference chain: java.util.HashMap["data"]->java.util.HashMap["todayCheckin"]->java.util.HashMap["list"]->java.util.ArrayList[0]->com.hotel.entity.CheckInRecord["additionalCharges"])]
2025-05-10 09:59:11.959 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 500 INTERNAL_SERVER_ERROR
2025-05-10 09:59:11.959 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:59:11.959 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /error
2025-05-10 09:59:11.959 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:59:11.959 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:59:11.960 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /error
2025-05-10 09:59:11.960 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/error", parameters={}
2025-05-10 09:59:11.960 DEBUG 12700 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CustomErrorController#handleError(HttpServletRequest, WebRequest)
2025-05-10 09:59:11.961 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:59:11.961 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=Internal Server Error, message=An error occurred, status=500}]
2025-05-10 09:59:11.962 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 500
2025-05-10 09:59:11.962 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:59:11.985 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:59:11.985 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:59:11.986  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:59:11.988  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:59:11.988  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:59:11.988 DEBUG 12700 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 09:59:11.989 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:59:11.989 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:59:11.989 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1", parameters={masked}
2025-05-10 09:59:11.989 DEBUG 12700 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:59:11.990  INFO 12700 --- [http-nio-8090-exec-10] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:59:11.990 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:59:11.997 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=14, TotalPages=14
2025-05-10 09:59:11.999 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:59:11.999 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 14 containing com.hotel.dto.Reservati (truncated)...]
2025-05-10 09:59:12.000 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:59:12.000 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:59:37.806 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-10 09:59:37.806 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:59:37.806 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:59:37.806 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-10 09:59:37.806 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-10 09:59:37.806 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-10 09:59:37.806 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-10 09:59:37.806 DEBUG 12700 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-10 09:59:37.807 DEBUG 12700 --- [http-nio-8090-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=18999177256, password=18999177256)]
2025-05-10 09:59:37.807  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:59:37.809  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:59:37.809  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:59:37.888 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-10 09:59:37.892 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:59:37.892 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=16, username=18999177256, role=RECEPTIONIST, token= (truncated)...]
2025-05-10 09:59:37.893 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:59:37.893 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:59:38.056 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10
2025-05-10 09:59:38.056 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:59:38.056  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:59:38.058  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:59:38.058  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:59:38.058 DEBUG 12700 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 09:59:38.059 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=0&size=10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:59:38.059 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=0&size=10
2025-05-10 09:59:38.059 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=0&size=10", parameters={masked}
2025-05-10 09:59:38.059 DEBUG 12700 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:59:38.060  INFO 12700 --- [http-nio-8090-exec-5] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 10, Status: null, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:59:38.060 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=10
2025-05-10 09:59:38.065 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=10, TotalElements=37, TotalPages=4
2025-05-10 09:59:38.067 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:59:38.067 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:59:38.069 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:59:38.069 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:59:38.353 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 09:59:38.353 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/rooms/types
2025-05-10 09:59:38.354 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:59:38.354 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:59:38.354  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:59:38.354  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:59:38.356  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:59:38.356  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:59:38.356  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:59:38.356  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:59:38.356 DEBUG 12700 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 09:59:38.356 DEBUG 12700 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 09:59:38.356 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/rooms/types] with attributes [permitAll]
2025-05-10 09:59:38.356 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:59:38.356 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/rooms/types
2025-05-10 09:59:38.356 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 09:59:38.356 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/rooms/types", parameters={}
2025-05-10 09:59:38.356 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 09:59:38.356 DEBUG 12700 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.RoomController#getAllRoomTypes()
2025-05-10 09:59:38.356 DEBUG 12700 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 09:59:38.368 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:59:38.368 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{area=null, amenities=[无限量矿泉水、咖啡、茶叶等], availableCount=21, images=[], name=行政套房, des (truncated)...]
2025-05-10 09:59:38.368 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:59:38.369 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:59:38.395  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:59:38.397  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 09:59:38.397  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 09:59:38.402  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 09:59:38.404  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 09:59:38.405 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 09:59:38.405  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 09:59:38.406  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:59:38.408  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 09:59:38.408  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 09:59:38.409  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 09:59:38.422  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 09:59:38.422 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 09:59:38.422 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 09:59:38.422 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 09:59:38.422 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 09:59:38.422 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 09:59:38.422 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 09:59:38.422 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 09:59:38.422 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 09:59:38.422 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 09:59:38.422 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 09:59:38.422 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 09:59:38.422 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 09:59:38.422 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 09:59:38.422 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 09:59:38.422 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 09:59:38.422 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 09:59:38.422 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 09:59:38.422 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 09:59:38.422 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 09:59:38.422 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 09:59:38.422 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 09:59:38.422 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 09:59:38.422 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 09:59:38.423 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 09:59:38.423 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 09:59:38.423 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 09:59:38.423 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 09:59:38.423 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 09:59:38.423 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 09:59:38.423 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 09:59:38.423 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 09:59:38.423 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 09:59:38.423 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 09:59:38.423 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 09:59:38.423 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 09:59:38.423 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 09:59:38.423 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 09:59:38.423  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 09:59:38.424  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:59:38.428  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 09:59:38.428  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 09:59:38.429  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:59:38.431  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 09:59:38.431  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 09:59:38.445  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 16, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 09:59:38.445  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 16
2025-05-10 09:59:38.445  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 09:59:38.445  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 09:59:38.447  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 20
2025-05-10 09:59:38.448  INFO 12700 --- [http-nio-8090-exec-3] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 09:59:38.449 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:59:38.449 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 09:59:38.450 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:59:38.450 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:59:38.477 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:59:38.477 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkin/today-stats
2025-05-10 09:59:38.477 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:59:38.477 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:59:38.478  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:59:38.478  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:59:38.479  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:59:38.479  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:59:38.479 DEBUG 12700 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 09:59:38.479  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:59:38.479 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:59:38.479  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:59:38.479 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:59:38.479 DEBUG 12700 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 09:59:38.479 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=PENDING&pageSize=1&size=1&page=0", parameters={masked}
2025-05-10 09:59:38.480 DEBUG 12700 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:59:38.480 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/checkin/today-stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:59:38.480 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/checkin/today-stats
2025-05-10 09:59:38.480 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/checkin/today-stats", parameters={}
2025-05-10 09:59:38.480 DEBUG 12700 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CheckInController#getTodayStats()
2025-05-10 09:59:38.480  INFO 12700 --- [http-nio-8090-exec-7] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: PENDING, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:59:38.480 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:59:38.485 DEBUG 12700 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=4, TotalPages=4
2025-05-10 09:59:38.486 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:59:38.487 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:59:38.488 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:59:38.488 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:59:38.493 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:59:38.494  WARN 12700 --- [http-nio-8090-exec-1] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1146, SQLState: 42S02
2025-05-10 09:59:38.495 ERROR 12700 --- [http-nio-8090-exec-1] o.h.engine.jdbc.spi.SqlExceptionHelper   : Table 'heqing.additional_charges' doesn't exist
2025-05-10 09:59:38.495 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [org.hibernate.exception.SQLGrammarException: could not extract ResultSet]
2025-05-10 09:59:38.497  WARN 12700 --- [http-nio-8090-exec-1] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1146, SQLState: 42S02
2025-05-10 09:59:38.497 ERROR 12700 --- [http-nio-8090-exec-1] o.h.engine.jdbc.spi.SqlExceptionHelper   : Table 'heqing.additional_charges' doesn't exist
2025-05-10 09:59:38.497  WARN 12700 --- [http-nio-8090-exec-1] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: could not extract ResultSet; nested exception is com.fasterxml.jackson.databind.JsonMappingException: could not extract ResultSet (through reference chain: java.util.HashMap["data"]->java.util.HashMap["todayCheckin"]->java.util.HashMap["list"]->java.util.ArrayList[0]->com.hotel.entity.CheckInRecord["additionalCharges"])]
2025-05-10 09:59:38.497 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 500 INTERNAL_SERVER_ERROR
2025-05-10 09:59:38.497 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:59:38.497 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /error
2025-05-10 09:59:38.497 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:59:38.497 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:59:38.498 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /error
2025-05-10 09:59:38.498 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/error", parameters={}
2025-05-10 09:59:38.498 DEBUG 12700 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CustomErrorController#handleError(HttpServletRequest, WebRequest)
2025-05-10 09:59:38.498 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:59:38.498 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=Internal Server Error, message=An error occurred, status=500}]
2025-05-10 09:59:38.499 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 500
2025-05-10 09:59:38.499 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:59:38.513 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:59:38.513 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:59:38.513  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:59:38.515  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:59:38.515  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:59:38.515 DEBUG 12700 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 09:59:38.515 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:59:38.515 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:59:38.515 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1", parameters={masked}
2025-05-10 09:59:38.516 DEBUG 12700 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:59:38.516  INFO 12700 --- [http-nio-8090-exec-4] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:59:38.517 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:59:38.521 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=14, TotalPages=14
2025-05-10 09:59:38.522 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:59:38.522 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 14 containing com.hotel.dto.Reservati (truncated)...]
2025-05-10 09:59:38.523 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:59:38.523 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:59:41.443 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10
2025-05-10 09:59:41.443 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/rooms/types
2025-05-10 09:59:41.444 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:59:41.444 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:59:41.444  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:59:41.444  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:59:41.446  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:59:41.446  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:59:41.446  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:59:41.446  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:59:41.446 DEBUG 12700 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 09:59:41.446 DEBUG 12700 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 09:59:41.447 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=0&size=10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:59:41.447 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/rooms/types] with attributes [permitAll]
2025-05-10 09:59:41.447 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=0&size=10
2025-05-10 09:59:41.447 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/rooms/types
2025-05-10 09:59:41.447 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/rooms/types", parameters={}
2025-05-10 09:59:41.447 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=0&size=10", parameters={masked}
2025-05-10 09:59:41.447 DEBUG 12700 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.RoomController#getAllRoomTypes()
2025-05-10 09:59:41.447 DEBUG 12700 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:59:41.448  INFO 12700 --- [http-nio-8090-exec-6] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 10, Status: null, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:59:41.448 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=10
2025-05-10 09:59:41.453 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=10, TotalElements=37, TotalPages=4
2025-05-10 09:59:41.454 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:59:41.455 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:59:41.455 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:59:41.455 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:59:41.461 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:59:41.461 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{area=null, amenities=[无限量矿泉水、咖啡、茶叶等], availableCount=21, images=[], name=行政套房, des (truncated)...]
2025-05-10 09:59:41.461 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:59:41.462 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:59:41.553 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkin/today-stats
2025-05-10 09:59:41.553 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 09:59:41.554 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:59:41.554 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:59:41.554 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:59:41.554 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:59:41.555  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:59:41.555  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:59:41.556  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:59:41.557  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:59:41.557  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:59:41.558  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:59:41.558 DEBUG 12700 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 09:59:41.558  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:59:41.558 DEBUG 12700 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 09:59:41.558 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:59:41.558  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:59:41.558 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 09:59:41.558  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:59:41.558 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/checkin/today-stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:59:41.559 DEBUG 12700 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 09:59:41.559 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/checkin/today-stats
2025-05-10 09:59:41.559 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 09:59:41.559 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/checkin/today-stats", parameters={}
2025-05-10 09:59:41.559 DEBUG 12700 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CheckInController#getTodayStats()
2025-05-10 09:59:41.559 DEBUG 12700 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 09:59:41.559 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:59:41.559 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 09:59:41.559 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=PENDING&pageSize=1&size=1&page=0", parameters={masked}
2025-05-10 09:59:41.559 DEBUG 12700 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:59:41.560  INFO 12700 --- [http-nio-8090-exec-5] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: PENDING, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:59:41.560 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:59:41.566 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=4, TotalPages=4
2025-05-10 09:59:41.567 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:59:41.567 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 09:59:41.568 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:59:41.568 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:59:41.571 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:59:41.573  WARN 12700 --- [http-nio-8090-exec-8] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1146, SQLState: 42S02
2025-05-10 09:59:41.573 ERROR 12700 --- [http-nio-8090-exec-8] o.h.engine.jdbc.spi.SqlExceptionHelper   : Table 'heqing.additional_charges' doesn't exist
2025-05-10 09:59:41.573 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [org.hibernate.exception.SQLGrammarException: could not extract ResultSet]
2025-05-10 09:59:41.575  WARN 12700 --- [http-nio-8090-exec-8] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1146, SQLState: 42S02
2025-05-10 09:59:41.576 ERROR 12700 --- [http-nio-8090-exec-8] o.h.engine.jdbc.spi.SqlExceptionHelper   : Table 'heqing.additional_charges' doesn't exist
2025-05-10 09:59:41.576  WARN 12700 --- [http-nio-8090-exec-8] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: could not extract ResultSet; nested exception is com.fasterxml.jackson.databind.JsonMappingException: could not extract ResultSet (through reference chain: java.util.HashMap["data"]->java.util.HashMap["todayCheckin"]->java.util.HashMap["list"]->java.util.ArrayList[0]->com.hotel.entity.CheckInRecord["additionalCharges"])]
2025-05-10 09:59:41.576 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 500 INTERNAL_SERVER_ERROR
2025-05-10 09:59:41.576 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:59:41.577 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /error
2025-05-10 09:59:41.577 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:59:41.577 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 09:59:41.577 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /error
2025-05-10 09:59:41.577 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : "ERROR" dispatch for GET "/error", parameters={}
2025-05-10 09:59:41.578 DEBUG 12700 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CustomErrorController#handleError(HttpServletRequest, WebRequest)
2025-05-10 09:59:41.578 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:59:41.578 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=Internal Server Error, message=An error occurred, status=500}]
2025-05-10 09:59:41.579 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Exiting from "ERROR" dispatch, status 500
2025-05-10 09:59:41.579 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:59:41.602  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:59:41.604  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 09:59:41.604  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 09:59:41.616  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 09:59:41.621  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 09:59:41.621 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 09:59:41.621  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 09:59:41.623  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 09:59:41.625  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 09:59:41.626  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 09:59:41.626 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:59:41.626 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 09:59:41.627  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 09:59:41.628  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 09:59:41.629  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 09:59:41.629  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 09:59:41.629 DEBUG 12700 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 09:59:41.629 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 09:59:41.629 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 09:59:41.630 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1", parameters={masked}
2025-05-10 09:59:41.630 DEBUG 12700 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 09:59:41.631  INFO 12700 --- [http-nio-8090-exec-9] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 09:59:41.631 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 09:59:41.637 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=14, TotalPages=14
2025-05-10 09:59:41.638 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:59:41.638 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 14 containing com.hotel.dto.Reservati (truncated)...]
2025-05-10 09:59:41.639 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:59:41.640 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 09:59:41.646  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 09:59:41.646 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 09:59:41.646 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 09:59:41.646 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 09:59:41.646 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 09:59:41.646 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 09:59:41.646 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 09:59:41.646 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 09:59:41.646 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 09:59:41.646 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 09:59:41.646 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 09:59:41.646 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 09:59:41.646 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 09:59:41.647 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 09:59:41.647 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 09:59:41.648 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 09:59:41.648 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 09:59:41.648 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 09:59:41.648 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 09:59:41.648 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 09:59:41.648 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 09:59:41.648 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 09:59:41.648 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 09:59:41.648 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 09:59:41.648 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 09:59:41.648 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 09:59:41.648 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 09:59:41.648 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 09:59:41.648 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 09:59:41.648 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 09:59:41.648 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 09:59:41.649 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 09:59:41.649 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 09:59:41.649 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 09:59:41.649 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 09:59:41.649 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 09:59:41.649 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 09:59:41.649 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 09:59:41.649  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 09:59:41.651  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:59:41.654  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 09:59:41.654  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 09:59:41.656  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 09:59:41.658  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 09:59:41.658  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 09:59:41.679  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 16, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 09:59:41.679  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 16
2025-05-10 09:59:41.679  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 09:59:41.679  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 09:59:41.682  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 20
2025-05-10 09:59:41.682  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 09:59:41.684 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 09:59:41.684 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 09:59:41.685 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 09:59:41.685 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:11:12.431 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cleaning/tasks
2025-05-10 10:11:12.431 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:11:12.432  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: cleaner
2025-05-10 10:11:12.434  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : User found: cleaner, Role: CLEANER
2025-05-10 10:11:12.434  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CLEANER]
2025-05-10 10:11:12.434 DEBUG 12700 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 'cleaner' 认证成功, 设置 SecurityContext
2025-05-10 10:11:12.435 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/cleaning/tasks] with attributes [authenticated]
2025-05-10 10:11:12.435 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cleaning/tasks
2025-05-10 10:11:12.435 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/cleaning/tasks", parameters={}
2025-05-10 10:11:12.435 DEBUG 12700 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CleaningTaskController#getTasks(String, int, int)
2025-05-10 10:11:12.436  INFO 12700 --- [http-nio-8090-exec-3] com.hotel.service.impl.TaskServiceImpl   : 开始自动生成清洁任务...
2025-05-10 10:11:12.437  INFO 12700 --- [http-nio-8090-exec-3] com.hotel.service.impl.TaskServiceImpl   : 找到 0 个需要清洁的房间
2025-05-10 10:11:12.439  INFO 12700 --- [http-nio-8090-exec-3] com.hotel.service.impl.TaskServiceImpl   : 将使用默认清洁员: 清洁人员
2025-05-10 10:11:12.439  INFO 12700 --- [http-nio-8090-exec-3] com.hotel.service.impl.TaskServiceImpl   : 自动生成清洁任务完成，共创建 0 个新任务
2025-05-10 10:11:12.445 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:11:12.446 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{totalPages=3, generatedTasksCount=0, currentPage=0, content=[Task(id=27, roomNumber=204, roomType=豪 (truncated)...]
2025-05-10 10:11:12.447 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:11:12.447 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:11:12.487 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/cleaning/tasks/statistics
2025-05-10 10:11:12.487 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:11:12.488  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: cleaner
2025-05-10 10:11:12.489  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : User found: cleaner, Role: CLEANER
2025-05-10 10:11:12.490  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CLEANER]
2025-05-10 10:11:12.490 DEBUG 12700 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 'cleaner' 认证成功, 设置 SecurityContext
2025-05-10 10:11:12.491 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/cleaning/tasks/statistics] with attributes [authenticated]
2025-05-10 10:11:12.491 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/cleaning/tasks/statistics
2025-05-10 10:11:12.492 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/cleaning/tasks/statistics", parameters={}
2025-05-10 10:11:12.492 DEBUG 12700 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CleaningTaskController#getTaskStatistics()
2025-05-10 10:11:12.492  INFO 12700 --- [http-nio-8090-exec-7] com.hotel.service.impl.TaskServiceImpl   : 开始自动生成清洁任务...
2025-05-10 10:11:12.494  INFO 12700 --- [http-nio-8090-exec-7] com.hotel.service.impl.TaskServiceImpl   : 找到 0 个需要清洁的房间
2025-05-10 10:11:12.496  INFO 12700 --- [http-nio-8090-exec-7] com.hotel.service.impl.TaskServiceImpl   : 将使用默认清洁员: 清洁人员
2025-05-10 10:11:12.496  INFO 12700 --- [http-nio-8090-exec-7] com.hotel.service.impl.TaskServiceImpl   : 自动生成清洁任务完成，共创建 0 个新任务
2025-05-10 10:11:12.502 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:11:12.502 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{data=TaskDTO(id=null, roomNumber=null, roomType=null, cleaner=null, priority=null, status=null, exp (truncated)...]
2025-05-10 10:11:12.503 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:11:12.504 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:13:18.993 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-10 10:13:18.993 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:13:18.994 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 10:13:18.994 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-10 10:13:18.994 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-10 10:13:18.994 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-10 10:13:18.994 DEBUG 12700 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-10 10:13:18.995 DEBUG 12700 --- [http-nio-8090-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=15699887856, password=15699887856)]
2025-05-10 10:13:18.995  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 15699887856
2025-05-10 10:13:18.997  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : User not found by username, trying phone: 15699887856
2025-05-10 10:13:18.998  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 10:13:18.999  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:13:19.066 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-10 10:13:19.069 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:13:19.070 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=19, username=前台妹妹001, role=RECEPTIONIST, token=eyJh (truncated)...]
2025-05-10 10:13:19.070 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:13:19.070 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:13:19.217 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10
2025-05-10 10:13:19.218 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:13:19.218 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/rooms/types
2025-05-10 10:13:19.218  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 10:13:19.219 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:13:19.219  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 10:13:19.220  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 10:13:19.221  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:13:19.221 DEBUG 12700 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 10:13:19.221  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 10:13:19.221  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:13:19.221 DEBUG 12700 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 10:13:19.221 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=0&size=10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:13:19.221 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=0&size=10
2025-05-10 10:13:19.221 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/rooms/types] with attributes [permitAll]
2025-05-10 10:13:19.221 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=0&size=10", parameters={masked}
2025-05-10 10:13:19.221 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/rooms/types
2025-05-10 10:13:19.222 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/rooms/types", parameters={}
2025-05-10 10:13:19.222 DEBUG 12700 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:13:19.222 DEBUG 12700 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.RoomController#getAllRoomTypes()
2025-05-10 10:13:19.222  INFO 12700 --- [http-nio-8090-exec-4] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 10, Status: null, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:13:19.222 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=10
2025-05-10 10:13:19.228 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=10, TotalElements=37, TotalPages=4
2025-05-10 10:13:19.230 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:13:19.230 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 10:13:19.231 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:13:19.231 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:13:19.236 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:13:19.236 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{area=null, amenities=[无限量矿泉水、咖啡、茶叶等], availableCount=21, images=[], name=行政套房, des (truncated)...]
2025-05-10 10:13:19.237 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:13:19.237 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:13:19.341 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 10:13:19.341 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:13:19.342 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 10:13:19.342  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 10:13:19.342 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkin/today-stats
2025-05-10 10:13:19.342 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:13:19.343 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:13:19.343  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 10:13:19.343  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 10:13:19.344  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 10:13:19.344  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:13:19.344 DEBUG 12700 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 10:13:19.345 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:13:19.345  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 10:13:19.345 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 10:13:19.345  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:13:19.345 DEBUG 12700 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 10:13:19.345 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 10:13:19.346 DEBUG 12700 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 10:13:19.346 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:13:19.346  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 10:13:19.346 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 10:13:19.346  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:13:19.347 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=PENDING&pageSize=1&size=1&page=0", parameters={masked}
2025-05-10 10:13:19.347 DEBUG 12700 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 10:13:19.347 DEBUG 12700 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:13:19.348  INFO 12700 --- [http-nio-8090-exec-8] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: PENDING, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:13:19.348 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 10:13:19.348 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/checkin/today-stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:13:19.348 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/checkin/today-stats
2025-05-10 10:13:19.348 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/checkin/today-stats", parameters={}
2025-05-10 10:13:19.349 DEBUG 12700 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CheckInController#getTodayStats()
2025-05-10 10:13:19.354 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=4, TotalPages=4
2025-05-10 10:13:19.356 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:13:19.357 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 10:13:19.358 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:13:19.358 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:13:19.369 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:13:19.377 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{data={todayCheckin={total=1, pending=0, completed=1, list=[CheckInRecord(id=21, checkInNumber=CI202 (truncated)...]
2025-05-10 10:13:19.380 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:13:19.380 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:13:19.391  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:13:19.394  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 10:13:19.394  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 10:13:19.400  INFO 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 10:13:19.403  INFO 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 10:13:19.403 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 10:13:19.403  INFO 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 10:13:19.405  INFO 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:13:19.407  INFO 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 10:13:19.408  INFO 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 10:13:19.408 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 10:13:19.408 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:13:19.408  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 10:13:19.410  INFO 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 10:13:19.410  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 10:13:19.411  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:13:19.411 DEBUG 12700 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 10:13:19.411 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:13:19.411 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 10:13:19.412 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1", parameters={masked}
2025-05-10 10:13:19.412 DEBUG 12700 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:13:19.413  INFO 12700 --- [http-nio-8090-exec-9] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:13:19.414 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 10:13:19.421 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=14, TotalPages=14
2025-05-10 10:13:19.423 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:13:19.424 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 14 containing com.hotel.dto.Reservati (truncated)...]
2025-05-10 10:13:19.425 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:13:19.425 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:13:19.431  INFO 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 10:13:19.431 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 10:13:19.431 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 10:13:19.431 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 10:13:19.431 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 10:13:19.431 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 10:13:19.431 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 10:13:19.431 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 10:13:19.432 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 10:13:19.432 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 10:13:19.432 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 10:13:19.432 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 10:13:19.432 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 10:13:19.432 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 10:13:19.432 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 10:13:19.432 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 10:13:19.432 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 10:13:19.432 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 10:13:19.432 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 10:13:19.432 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 10:13:19.432 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 10:13:19.432 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 10:13:19.432 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 10:13:19.433 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 10:13:19.433 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 10:13:19.433 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 10:13:19.433 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 10:13:19.433 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 10:13:19.433 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 10:13:19.433 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 10:13:19.433 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 10:13:19.433 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 10:13:19.433 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 10:13:19.433 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 10:13:19.433 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 10:13:19.433 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 10:13:19.433 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 10:13:19.433 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 10:13:19.433  INFO 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 10:13:19.437  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:13:19.439  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 10:13:19.440  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 10:13:19.442  INFO 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:13:19.445  INFO 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 10:13:19.445  INFO 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 10:13:19.472  INFO 12700 --- [http-nio-8090-exec-2] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 16, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 10:13:19.472  INFO 12700 --- [http-nio-8090-exec-2] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 16
2025-05-10 10:13:19.472  INFO 12700 --- [http-nio-8090-exec-2] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 10:13:19.473  INFO 12700 --- [http-nio-8090-exec-2] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 10:13:19.475  INFO 12700 --- [http-nio-8090-exec-2] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 20
2025-05-10 10:13:19.475  INFO 12700 --- [http-nio-8090-exec-2] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 10:13:19.477 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:13:19.477 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 10:13:19.478 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:13:19.478 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:13:29.291 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-10 10:13:29.291 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:13:29.292 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 10:13:29.292 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-10 10:13:29.292 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-10 10:13:29.292 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-10 10:13:29.293 DEBUG 12700 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-10 10:13:29.293 DEBUG 12700 --- [http-nio-8090-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=15699887856, password=15699887856)]
2025-05-10 10:13:29.293  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 15699887856
2025-05-10 10:13:29.295  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : User not found by username, trying phone: 15699887856
2025-05-10 10:13:29.297  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 10:13:29.297  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:13:29.365 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-10 10:13:29.368 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:13:29.368 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=19, username=前台妹妹001, role=RECEPTIONIST, token=eyJh (truncated)...]
2025-05-10 10:13:29.369 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:13:29.369 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:13:29.536 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10
2025-05-10 10:13:29.536 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:13:29.536 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/rooms/types
2025-05-10 10:13:29.536 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:13:29.537  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 10:13:29.537  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 10:13:29.539  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 10:13:29.539  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:13:29.539 DEBUG 12700 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 10:13:29.539  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 10:13:29.539  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:13:29.539 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=0&size=10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:13:29.539 DEBUG 12700 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 10:13:29.539 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=0&size=10
2025-05-10 10:13:29.539 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=0&size=10", parameters={masked}
2025-05-10 10:13:29.539 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/rooms/types] with attributes [permitAll]
2025-05-10 10:13:29.539 DEBUG 12700 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:13:29.539 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/rooms/types
2025-05-10 10:13:29.540 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/rooms/types", parameters={}
2025-05-10 10:13:29.540 DEBUG 12700 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.RoomController#getAllRoomTypes()
2025-05-10 10:13:29.540  INFO 12700 --- [http-nio-8090-exec-3] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 10, Status: null, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:13:29.540 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=10
2025-05-10 10:13:29.545 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=10, TotalElements=37, TotalPages=4
2025-05-10 10:13:29.546 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:13:29.547 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 10:13:29.547 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:13:29.547 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:13:29.552 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:13:29.552 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{area=null, amenities=[无限量矿泉水、咖啡、茶叶等], availableCount=21, images=[], name=行政套房, des (truncated)...]
2025-05-10 10:13:29.553 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:13:29.553 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:13:29.633 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 10:13:29.633 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkin/today-stats
2025-05-10 10:13:29.633 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 10:13:29.633 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:13:29.633 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:13:29.633 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:13:29.634  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 10:13:29.634  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 10:13:29.634  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 10:13:29.635  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 10:13:29.635  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 10:13:29.635  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:13:29.635  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:13:29.636 DEBUG 12700 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 10:13:29.636 DEBUG 12700 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 10:13:29.636  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 10:13:29.636  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:13:29.636 DEBUG 12700 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 10:13:29.636 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/checkin/today-stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:13:29.636 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:13:29.636 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/checkin/today-stats
2025-05-10 10:13:29.636 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 10:13:29.636 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/checkin/today-stats", parameters={}
2025-05-10 10:13:29.637 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=PENDING&pageSize=1&size=1&page=0", parameters={masked}
2025-05-10 10:13:29.637 DEBUG 12700 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CheckInController#getTodayStats()
2025-05-10 10:13:29.637 DEBUG 12700 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:13:29.637  INFO 12700 --- [http-nio-8090-exec-4] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: PENDING, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:13:29.638 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 10:13:29.638 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:13:29.638 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 10:13:29.638 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 10:13:29.638 DEBUG 12700 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 10:13:29.643 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=4, TotalPages=4
2025-05-10 10:13:29.644 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:13:29.645 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 10:13:29.645 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:13:29.645 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:13:29.651 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:13:29.652 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{data={todayCheckin={total=1, pending=0, completed=1, list=[CheckInRecord(id=21, checkInNumber=CI202 (truncated)...]
2025-05-10 10:13:29.653 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:13:29.653 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:13:29.674 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 10:13:29.674 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:13:29.675  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 10:13:29.676  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 10:13:29.676  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:13:29.676 DEBUG 12700 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 10:13:29.676 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:13:29.676 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 10:13:29.676 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1", parameters={masked}
2025-05-10 10:13:29.677 DEBUG 12700 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:13:29.677  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:13:29.677  INFO 12700 --- [http-nio-8090-exec-8] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:13:29.677 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 10:13:29.679  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 10:13:29.679  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 10:13:29.682 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=14, TotalPages=14
2025-05-10 10:13:29.683 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:13:29.683  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 10:13:29.683 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 14 containing com.hotel.dto.Reservati (truncated)...]
2025-05-10 10:13:29.684 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:13:29.684 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:13:29.686  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 10:13:29.687 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 10:13:29.687  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 10:13:29.688  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:13:29.689  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 10:13:29.689  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 10:13:29.690  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 10:13:29.705  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 10:13:29.705 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 10:13:29.705 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 10:13:29.705 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 10:13:29.705 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 10:13:29.705 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 10:13:29.705 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 10:13:29.705 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 10:13:29.705 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 10:13:29.705 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 10:13:29.705 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 10:13:29.705 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 10:13:29.705 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 10:13:29.705 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 10:13:29.705 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 10:13:29.705 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 10:13:29.705 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 10:13:29.706 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 10:13:29.706 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 10:13:29.706 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 10:13:29.706 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 10:13:29.706 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 10:13:29.706 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 10:13:29.706 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 10:13:29.706 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 10:13:29.706 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 10:13:29.706 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 10:13:29.706 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 10:13:29.707 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 10:13:29.707 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 10:13:29.707 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 10:13:29.707 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 10:13:29.707 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 10:13:29.707 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 10:13:29.707 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 10:13:29.707 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 10:13:29.707 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 10:13:29.707 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 10:13:29.707  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 10:13:29.710  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:13:29.712  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 10:13:29.712  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 10:13:29.714  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:13:29.717  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 10:13:29.717  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 10:13:29.739  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 16, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 10:13:29.739  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 16
2025-05-10 10:13:29.739  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 10:13:29.739  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 10:13:29.743  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 20
2025-05-10 10:13:29.743  INFO 12700 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 10:13:29.744 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:13:29.744 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 10:13:29.745 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:13:29.745 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:13:35.255 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-10 10:13:35.255 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:13:35.255 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 10:13:35.256 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-10 10:13:35.256 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-10 10:13:35.256 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-10 10:13:35.256 DEBUG 12700 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-10 10:13:35.256 DEBUG 12700 --- [http-nio-8090-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=15699887856, password=15699887856)]
2025-05-10 10:13:35.257  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 15699887856
2025-05-10 10:13:35.258  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : User not found by username, trying phone: 15699887856
2025-05-10 10:13:35.259  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 10:13:35.259  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:13:35.326 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-10 10:13:35.328 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:13:35.328 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=19, username=前台妹妹001, role=RECEPTIONIST, token=eyJh (truncated)...]
2025-05-10 10:13:35.328 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:13:35.328 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:13:35.474 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10
2025-05-10 10:13:35.474 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/rooms/types
2025-05-10 10:13:35.474 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:13:35.474 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:13:35.475  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 10:13:35.475  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 10:13:35.477  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 10:13:35.477  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 10:13:35.477  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:13:35.477  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:13:35.477 DEBUG 12700 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 10:13:35.477 DEBUG 12700 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 10:13:35.478 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/rooms/types] with attributes [permitAll]
2025-05-10 10:13:35.478 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=0&size=10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:13:35.478 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/rooms/types
2025-05-10 10:13:35.478 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=0&size=10
2025-05-10 10:13:35.478 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=0&size=10", parameters={masked}
2025-05-10 10:13:35.478 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/rooms/types", parameters={}
2025-05-10 10:13:35.478 DEBUG 12700 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.RoomController#getAllRoomTypes()
2025-05-10 10:13:35.478 DEBUG 12700 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:13:35.479  INFO 12700 --- [http-nio-8090-exec-9] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 10, Status: null, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:13:35.479 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=10
2025-05-10 10:13:35.485 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=10, TotalElements=37, TotalPages=4
2025-05-10 10:13:35.487 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:13:35.487 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 10:13:35.488 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:13:35.488 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:13:35.494 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:13:35.494 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{area=null, amenities=[无限量矿泉水、咖啡、茶叶等], availableCount=21, images=[], name=行政套房, des (truncated)...]
2025-05-10 10:13:35.494 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:13:35.494 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:13:35.583 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 10:13:35.583 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:13:35.584  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 10:13:35.585 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkin/today-stats
2025-05-10 10:13:35.585 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 10:13:35.585 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:13:35.585 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:13:35.585  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 10:13:35.585  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:13:35.585 DEBUG 12700 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 10:13:35.586  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 10:13:35.586  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 10:13:35.586 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:13:35.586 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 10:13:35.586 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 10:13:35.587 DEBUG 12700 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 10:13:35.587  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 10:13:35.587  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 10:13:35.588  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:13:35.588  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:13:35.588 DEBUG 12700 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 10:13:35.588 DEBUG 12700 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 10:13:35.588 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:13:35.588 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/checkin/today-stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:13:35.588 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 10:13:35.589 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/checkin/today-stats
2025-05-10 10:13:35.589 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=PENDING&pageSize=1&size=1&page=0", parameters={masked}
2025-05-10 10:13:35.589 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/checkin/today-stats", parameters={}
2025-05-10 10:13:35.589 DEBUG 12700 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:13:35.589 DEBUG 12700 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CheckInController#getTodayStats()
2025-05-10 10:13:35.590  INFO 12700 --- [http-nio-8090-exec-3] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: PENDING, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:13:35.590 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 10:13:35.597 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=4, TotalPages=4
2025-05-10 10:13:35.599 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:13:35.599 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 10:13:35.600 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:13:35.600 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:13:35.606 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:13:35.608 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{data={todayCheckin={total=1, pending=0, completed=1, list=[CheckInRecord(id=21, checkInNumber=CI202 (truncated)...]
2025-05-10 10:13:35.609 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:13:35.609 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:13:35.636 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 10:13:35.637  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:13:35.637 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:13:35.638  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 10:13:35.639  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 10:13:35.639  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 10:13:35.639  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 10:13:35.639  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:13:35.640 DEBUG 12700 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 10:13:35.640 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:13:35.640 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 10:13:35.640 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1", parameters={masked}
2025-05-10 10:13:35.641 DEBUG 12700 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:13:35.642  INFO 12700 --- [http-nio-8090-exec-4] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:13:35.642 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 10:13:35.643  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 10:13:35.647 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=14, TotalPages=14
2025-05-10 10:13:35.647  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 10:13:35.647 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 10:13:35.647  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 10:13:35.649 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:13:35.649  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:13:35.649 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 14 containing com.hotel.dto.Reservati (truncated)...]
2025-05-10 10:13:35.649 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:13:35.650 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:13:35.651  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 10:13:35.651  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 10:13:35.652  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 10:13:35.668  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 10:13:35.668 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 10:13:35.668 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 10:13:35.668 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 10:13:35.668 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 10:13:35.668 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 10:13:35.668 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 10:13:35.669 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 10:13:35.669 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 10:13:35.669 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 10:13:35.669 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 10:13:35.669 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 10:13:35.669 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 10:13:35.669 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 10:13:35.669 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 10:13:35.669 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 10:13:35.669 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 10:13:35.669 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 10:13:35.669 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 10:13:35.669 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 10:13:35.669 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 10:13:35.669 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 10:13:35.669 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 10:13:35.669 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 10:13:35.669 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 10:13:35.669 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 10:13:35.669 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 10:13:35.669 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 10:13:35.669 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 10:13:35.669 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 10:13:35.669 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 10:13:35.669 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 10:13:35.669 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 10:13:35.669 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 10:13:35.669 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 10:13:35.669 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 10:13:35.669 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 10:13:35.670 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 10:13:35.670  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 10:13:35.672  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:13:35.674  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 10:13:35.675  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 10:13:35.678  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:13:35.681  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 10:13:35.681  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 10:13:35.709  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 16, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 10:13:35.709  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 16
2025-05-10 10:13:35.709  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 10:13:35.709  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 10:13:35.712  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 20
2025-05-10 10:13:35.712  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 10:13:35.714 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:13:35.714 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 10:13:35.715 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:13:35.715 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:13:41.967 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-10 10:13:41.972 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:13:41.973 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 10:13:41.973 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-10 10:13:41.973 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-10 10:13:41.973 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-10 10:13:41.973 DEBUG 12700 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-10 10:13:41.974 DEBUG 12700 --- [http-nio-8090-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=15699887856, password=15699887856)]
2025-05-10 10:13:41.974  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 15699887856
2025-05-10 10:13:41.976  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : User not found by username, trying phone: 15699887856
2025-05-10 10:13:41.977  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 10:13:41.977  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:13:42.044 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-10 10:13:42.047 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:13:42.047 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=19, username=前台妹妹001, role=RECEPTIONIST, token=eyJh (truncated)...]
2025-05-10 10:13:42.048 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:13:42.048 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:13:42.191 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10
2025-05-10 10:13:42.191 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:13:42.192 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/rooms/types
2025-05-10 10:13:42.192 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:13:42.192  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 10:13:42.192  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 10:13:42.194  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 10:13:42.194  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:13:42.194 DEBUG 12700 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 10:13:42.195  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 10:13:42.195 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=0&size=10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:13:42.195  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:13:42.195 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=0&size=10
2025-05-10 10:13:42.195 DEBUG 12700 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 10:13:42.195 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=0&size=10", parameters={masked}
2025-05-10 10:13:42.195 DEBUG 12700 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:13:42.196 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/rooms/types] with attributes [permitAll]
2025-05-10 10:13:42.196 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/rooms/types
2025-05-10 10:13:42.196 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/rooms/types", parameters={}
2025-05-10 10:13:42.196  INFO 12700 --- [http-nio-8090-exec-8] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 10, Status: null, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:13:42.196 DEBUG 12700 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.RoomController#getAllRoomTypes()
2025-05-10 10:13:42.196 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=10
2025-05-10 10:13:42.202 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=10, TotalElements=37, TotalPages=4
2025-05-10 10:13:42.203 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:13:42.203 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 10:13:42.204 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:13:42.204 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:13:42.211 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:13:42.212 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{area=null, amenities=[无限量矿泉水、咖啡、茶叶等], availableCount=21, images=[], name=行政套房, des (truncated)...]
2025-05-10 10:13:42.214 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:13:42.214 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:13:42.281 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 10:13:42.282 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:13:42.282 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 10:13:42.282 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkin/today-stats
2025-05-10 10:13:42.282 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:13:42.282 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:13:42.283  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 10:13:42.283  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 10:13:42.283  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 10:13:42.285  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 10:13:42.285  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 10:13:42.285  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:13:42.285  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:13:42.285 DEBUG 12700 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 10:13:42.285 DEBUG 12700 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 10:13:42.285  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 10:13:42.285  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:13:42.285 DEBUG 12700 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 10:13:42.285 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:13:42.285 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/checkin/today-stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:13:42.285 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:13:42.285 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/checkin/today-stats
2025-05-10 10:13:42.285 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 10:13:42.285 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 10:13:42.286 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/checkin/today-stats", parameters={}
2025-05-10 10:13:42.286 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=PENDING&pageSize=1&size=1&page=0", parameters={masked}
2025-05-10 10:13:42.286 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 10:13:42.286 DEBUG 12700 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:13:42.286 DEBUG 12700 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 10:13:42.286 DEBUG 12700 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CheckInController#getTodayStats()
2025-05-10 10:13:42.286  INFO 12700 --- [http-nio-8090-exec-2] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: PENDING, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:13:42.287 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 10:13:42.292 DEBUG 12700 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=4, TotalPages=4
2025-05-10 10:13:42.294 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:13:42.294 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 10:13:42.295 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:13:42.296 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:13:42.300 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:13:42.302 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{data={todayCheckin={total=1, pending=0, completed=1, list=[CheckInRecord(id=21, checkInNumber=CI202 (truncated)...]
2025-05-10 10:13:42.303 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:13:42.303 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:13:42.313 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 10:13:42.313 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:13:42.314  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 前台妹妹001
2025-05-10 10:13:42.315  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : User found: 前台妹妹001, Role: RECEPTIONIST
2025-05-10 10:13:42.315  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:13:42.315 DEBUG 12700 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 '前台妹妹001' 认证成功, 设置 SecurityContext
2025-05-10 10:13:42.316 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:13:42.316 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 10:13:42.316 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1", parameters={masked}
2025-05-10 10:13:42.316 DEBUG 12700 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:13:42.317  INFO 12700 --- [http-nio-8090-exec-3] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:13:42.317 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 10:13:42.323 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=14, TotalPages=14
2025-05-10 10:13:42.324 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:13:42.324 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 14 containing com.hotel.dto.Reservati (truncated)...]
2025-05-10 10:13:42.325 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:13:42.325 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:13:42.329  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:13:42.331  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 10:13:42.331  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 10:13:42.336  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 10:13:42.340  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 10:13:42.341 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 10:13:42.341  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 10:13:42.342  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:13:42.344  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 10:13:42.344  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 10:13:42.346  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 10:13:42.363  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 10:13:42.363 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 10:13:42.363 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 10:13:42.363 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 10:13:42.363 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 10:13:42.363 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 10:13:42.363 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 10:13:42.363 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 10:13:42.363 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 10:13:42.363 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 10:13:42.363 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 10:13:42.363 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 10:13:42.363 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 10:13:42.364 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 10:13:42.364 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 10:13:42.364 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 10:13:42.364 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 10:13:42.364 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 10:13:42.364 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 10:13:42.364 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 10:13:42.364 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 10:13:42.364 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 10:13:42.364 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 10:13:42.364 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 10:13:42.364 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 10:13:42.364 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 10:13:42.364 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 10:13:42.364 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 10:13:42.365 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 10:13:42.365 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 10:13:42.365 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 10:13:42.365 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 10:13:42.365 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 10:13:42.365 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 10:13:42.365 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 10:13:42.365 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 10:13:42.365 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 10:13:42.365 DEBUG 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 10:13:42.365  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 10:13:42.367  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:13:42.370  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 10:13:42.370  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 10:13:42.371  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:13:42.373  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 10:13:42.374  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 10:13:42.392  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 16, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 10:13:42.393  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 16
2025-05-10 10:13:42.393  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 10:13:42.393  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 10:13:42.395  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 20
2025-05-10 10:13:42.395  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 10:13:42.397 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:13:42.398 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 10:13:42.398 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:13:42.399 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:13:48.400 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-10 10:13:48.400 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:13:48.401 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 10:13:48.402 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-10 10:13:48.402 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-10 10:13:48.402 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-10 10:13:48.402 DEBUG 12700 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-10 10:13:48.403 DEBUG 12700 --- [http-nio-8090-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=admin, password=admin123)]
2025-05-10 10:13:48.403  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: admin
2025-05-10 10:13:48.405  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : User found: admin, Role: ADMIN
2025-05-10 10:13:48.405  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_ADMIN]
2025-05-10 10:13:48.471 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-10 10:13:48.474 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:13:48.475 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=1, username=admin, role=ADMIN, token=eyJhbGciOiJIUz (truncated)...]
2025-05-10 10:13:48.475 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:13:48.475 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:13:48.601 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/occupancy-trend?range=week
2025-05-10 10:13:48.601 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:13:48.601  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: admin
2025-05-10 10:13:48.603  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : User found: admin, Role: ADMIN
2025-05-10 10:13:48.604  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_ADMIN]
2025-05-10 10:13:48.604 DEBUG 12700 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-10 10:13:48.604 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 10:13:48.604 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/revenue-stats?range=week
2025-05-10 10:13:48.604 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/occupancy-trend?range=week] with attributes [hasRole('ROLE_ADMIN')]
2025-05-10 10:13:48.604 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:13:48.604 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:13:48.604 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/occupancy-trend?range=week
2025-05-10 10:13:48.604 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/occupancy-trend?range=week", parameters={masked}
2025-05-10 10:13:48.605  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: admin
2025-05-10 10:13:48.605  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: admin
2025-05-10 10:13:48.605 DEBUG 12700 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getOccupancyTrend(String)
2025-05-10 10:13:48.606  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : User found: admin, Role: ADMIN
2025-05-10 10:13:48.606  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_ADMIN]
2025-05-10 10:13:48.606  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : User found: admin, Role: ADMIN
2025-05-10 10:13:48.607  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_ADMIN]
2025-05-10 10:13:48.607 DEBUG 12700 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-10 10:13:48.607 DEBUG 12700 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-10 10:13:48.607 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/revenue-stats?range=week] with attributes [hasRole('ROLE_ADMIN')]
2025-05-10 10:13:48.607 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:13:48.608 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/revenue-stats?range=week
2025-05-10 10:13:48.608 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 10:13:48.608 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 10:13:48.608 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/revenue-stats?range=week", parameters={masked}
2025-05-10 10:13:48.608 DEBUG 12700 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 10:13:48.608 DEBUG 12700 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getRevenueStats(String)
2025-05-10 10:13:48.609  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-04T00:00 到 2025-05-04T23:59:59.999999999
2025-05-10 10:13:48.611  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 10:13:48.611  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 10:13:48.613  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-04T00:00 到 2025-05-04T23:59:59.999999999
2025-05-10 10:13:48.620  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 6
2025-05-10 10:13:48.620 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 29559.60
2025-05-10 10:13:48.620 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 50974.50
2025-05-10 10:13:48.620 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 72389.40
2025-05-10 10:13:48.620 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 93090.47
2025-05-10 10:13:48.621 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 120077.29
2025-05-10 10:13:48.621 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 145271.29
2025-05-10 10:13:48.621  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 145271.29
2025-05-10 10:13:48.622  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-05T00:00 到 2025-05-05T23:59:59.999999999
2025-05-10 10:13:48.624  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 10:13:48.624  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 10:13:48.626  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-05T00:00 到 2025-05-05T23:59:59.999999999
2025-05-10 10:13:48.633  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 2
2025-05-10 10:13:48.633 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 28896.00
2025-05-10 10:13:48.633 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 50792.00
2025-05-10 10:13:48.634  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 50792.00
2025-05-10 10:13:48.636  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-06T00:00 到 2025-05-06T23:59:59.999999999
2025-05-10 10:13:48.638  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 2
2025-05-10 10:13:48.638 DEBUG 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 退房记录ID: 7, 基础金额: 1159.20
2025-05-10 10:13:48.647 DEBUG 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 退房记录ID: 8, 基础金额: 1288.00
2025-05-10 10:13:48.648  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 2447.20
2025-05-10 10:13:48.650 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:13:48.650  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-06T00:00 到 2025-05-06T23:59:59.999999999
2025-05-10 10:13:48.651 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{xAxis=[周日, 周一, 周二, 周三, 周四, 周五, 周六], data=[0.0, 7.4, 3.7, 18.5, 0.0, 0.0, 1.9]}]
2025-05-10 10:13:48.651  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:13:48.652 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:13:48.652 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:13:48.653  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 10:13:48.653  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 10:13:48.656  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 2
2025-05-10 10:13:48.656 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 19320.00
2025-05-10 10:13:48.656 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 30328.00
2025-05-10 10:13:48.656  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 30328.00
2025-05-10 10:13:48.658  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-07T00:00 到 2025-05-07T23:59:59.999999999
2025-05-10 10:13:48.658  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 10:13:48.660  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 3
2025-05-10 10:13:48.660 DEBUG 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 退房记录ID: 5, 基础金额: 18032.00
2025-05-10 10:13:48.661  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 10:13:48.661 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 10:13:48.661  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 10:13:48.662 DEBUG 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 退房记录ID: 6, 基础金额: 3477.60
2025-05-10 10:13:48.664  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:13:48.664 DEBUG 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 退房记录ID: 20, 基础金额: 49400.00
2025-05-10 10:13:48.666  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 70909.60
2025-05-10 10:13:48.666  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 10:13:48.666  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 10:13:48.668  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-07T00:00 到 2025-05-07T23:59:59.999999999
2025-05-10 10:13:48.668  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 10:13:48.685  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 10:13:48.685 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 10:13:48.685 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 10:13:48.685 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 10:13:48.685 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 10:13:48.685 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 10:13:48.685 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 10:13:48.685 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 10:13:48.685 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 10:13:48.685 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 10:13:48.685 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 10:13:48.685 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 10:13:48.685 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 10:13:48.685 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 10:13:48.685 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 10:13:48.685 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 10:13:48.685 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 10:13:48.685 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 10:13:48.685 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 10:13:48.685 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 10:13:48.685 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 10:13:48.685 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 10:13:48.685 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 10:13:48.685 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 10:13:48.685 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 10:13:48.685 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 10:13:48.685 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 10:13:48.685 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 10:13:48.685 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 10:13:48.686 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 10:13:48.686 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 10:13:48.686 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 10:13:48.686 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 10:13:48.686 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 10:13:48.686 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 10:13:48.686 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 10:13:48.686 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 10:13:48.686 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 10:13:48.687  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 10:13:48.687  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 13
2025-05-10 10:13:48.687 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 1976.00
2025-05-10 10:13:48.687 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 34312.00
2025-05-10 10:13:48.687 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 67904.00
2025-05-10 10:13:48.687 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 75808.00
2025-05-10 10:13:48.688 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 76496.00
2025-05-10 10:13:48.688 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 112272.00
2025-05-10 10:13:48.688 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 128080.00
2025-05-10 10:13:48.688 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 160416.00
2025-05-10 10:13:48.688 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 2815745.04
2025-05-10 10:13:48.688 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3301321.04
2025-05-10 10:13:48.688 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3350721.04
2025-05-10 10:13:48.688 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4318009.04
2025-05-10 10:13:48.688 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4327314.84
2025-05-10 10:13:48.688  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 4327314.84
2025-05-10 10:13:48.689  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:13:48.691  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-08T00:00 到 2025-05-08T23:59:59.999999999
2025-05-10 10:13:48.692  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 10:13:48.692  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 10:13:48.693  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 1
2025-05-10 10:13:48.693 DEBUG 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 退房记录ID: 17, 基础金额: 35776.00
2025-05-10 10:13:48.694  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:13:48.695  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 35776.00
2025-05-10 10:13:48.696  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 10:13:48.696  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 10:13:48.697  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-08T00:00 到 2025-05-08T23:59:59.999999999
2025-05-10 10:13:48.702  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 10:13:48.702 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 946680.00
2025-05-10 10:13:48.702  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 946680.00
2025-05-10 10:13:48.704  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:13:48.706  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 10:13:48.706  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 10:13:48.707  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:13:48.709  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 10:13:48.709  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 10:13:48.711  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 10:13:48.713  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 10:13:48.713  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 10:13:48.714  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 16, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 10:13:48.715  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 16
2025-05-10 10:13:48.715  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 10:13:48.715  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 10:13:48.715  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 10:13:48.717  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 20
2025-05-10 10:13:48.718  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 10:13:48.719  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 10:13:48.719 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 10:13:48.719  INFO 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 10:13:48.719 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:13:48.720 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 10:13:48.720 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:13:48.720 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:13:48.721 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:13:48.721 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{reservationData=[145271.29, 50792.00, 30328.00, 4327314.84, 946680.00, 0, 8944.00], checkInData=[0, (truncated)...]
2025-05-10 10:13:48.722 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:13:48.722 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:13:52.013 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users?page=1&pageSize=10&username=&phone=&status=
2025-05-10 10:13:52.013 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:13:52.014  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: admin
2025-05-10 10:13:52.016  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : User found: admin, Role: ADMIN
2025-05-10 10:13:52.016  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_ADMIN]
2025-05-10 10:13:52.016 DEBUG 12700 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-10 10:13:52.016 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users?page=1&pageSize=10&username=&phone=&status=] with attributes [hasRole('ROLE_ADMIN')]
2025-05-10 10:13:52.016 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users?page=1&pageSize=10&username=&phone=&status=
2025-05-10 10:13:52.016 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users?page=1&pageSize=10&username=&phone=&status=", parameters={masked}
2025-05-10 10:13:52.017 DEBUG 12700 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getAllUsers(int, int, String, String, String, String)
2025-05-10 10:13:52.032 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:13:52.034 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data={total=29, users=[UserDTO(id=29, username=GgRGR (truncated)...]
2025-05-10 10:13:52.034 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:13:52.034 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:13:53.630 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/staff?page=0&pageSize=10
2025-05-10 10:13:53.630 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:13:53.631  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: admin
2025-05-10 10:13:53.633  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : User found: admin, Role: ADMIN
2025-05-10 10:13:53.633  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_ADMIN]
2025-05-10 10:13:53.633 DEBUG 12700 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-10 10:13:53.633 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/users/staff?page=0&pageSize=10] with attributes [authenticated]
2025-05-10 10:13:53.633 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/staff?page=0&pageSize=10
2025-05-10 10:13:53.633 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/staff?page=0&pageSize=10", parameters={masked}
2025-05-10 10:13:53.634 DEBUG 12700 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#getAllStaffPaginated(int, int, String, String, String)
2025-05-10 10:13:53.639 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:13:53.639 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data={total=8, users=[UserDTO(id=27, username=安抚二哥天天 (truncated)...]
2025-05-10 10:13:53.640 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:13:53.640 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:13:54.943 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/rooms?page=0&size=10
2025-05-10 10:13:54.944 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:13:54.944  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: admin
2025-05-10 10:13:54.945  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : User found: admin, Role: ADMIN
2025-05-10 10:13:54.946  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_ADMIN]
2025-05-10 10:13:54.946 DEBUG 12700 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-10 10:13:54.946 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/rooms?page=0&size=10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:13:54.946 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/rooms?page=0&size=10
2025-05-10 10:13:54.947 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/rooms?page=0&size=10", parameters={masked}
2025-05-10 10:13:54.947 DEBUG 12700 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminRoomController#getAllRooms(RoomFilterDTO)
2025-05-10 10:13:54.960 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:13:54.960 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data={total=54, list=[{roomNumber=501, lastCleanTime=2025-05-07T13:24:18, notes=shsr, nee (truncated)...]
2025-05-10 10:13:54.965 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:13:54.965 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:13:55.017 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/roomtypes
2025-05-10 10:13:55.017 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:13:55.018  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: admin
2025-05-10 10:13:55.019  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : User found: admin, Role: ADMIN
2025-05-10 10:13:55.020  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_ADMIN]
2025-05-10 10:13:55.020 DEBUG 12700 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-10 10:13:55.020 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/roomtypes] with attributes [hasRole('ROLE_ADMIN')]
2025-05-10 10:13:55.020 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/roomtypes
2025-05-10 10:13:55.020 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/roomtypes", parameters={}
2025-05-10 10:13:55.021 DEBUG 12700 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getAllRoomTypes()
2025-05-10 10:13:55.026 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:13:55.027 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{amenities=无限量矿泉水、咖啡、茶叶等, createTime=2025-04-28T11:22:57, name=行政套房, description=高端 (truncated)...]
2025-05-10 10:13:55.027 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:13:55.028 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:13:56.762 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/invitation-codes/all
2025-05-10 10:13:56.763 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:13:56.763  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: admin
2025-05-10 10:13:56.765  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : User found: admin, Role: ADMIN
2025-05-10 10:13:56.765  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_ADMIN]
2025-05-10 10:13:56.765 DEBUG 12700 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-10 10:13:56.766 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/invitation-codes/all] with attributes [authenticated]
2025-05-10 10:13:56.766 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/invitation-codes/all
2025-05-10 10:13:56.766 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/invitation-codes/all", parameters={}
2025-05-10 10:13:56.767 DEBUG 12700 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#getAllInvitationCodes()
2025-05-10 10:13:56.780 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:13:56.780 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[InvitationCode(id=19, code=3YX1TZ21, role=RECEPTIONIST, maxUses=1, currentUses=0, expiryDate=2025-0 (truncated)...]
2025-05-10 10:13:56.781 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:13:56.781 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:14:03.575 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/invitation-codes
2025-05-10 10:14:03.575 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:14:03.575  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: admin
2025-05-10 10:14:03.578  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : User found: admin, Role: ADMIN
2025-05-10 10:14:03.578  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_ADMIN]
2025-05-10 10:14:03.578 DEBUG 12700 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-10 10:14:03.579 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/invitation-codes] with attributes [authenticated]
2025-05-10 10:14:03.579 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/invitation-codes
2025-05-10 10:14:03.579 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/invitation-codes", parameters={}
2025-05-10 10:14:03.580 DEBUG 12700 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#createInvitationCode(Map)
2025-05-10 10:14:03.585 DEBUG 12700 --- [http-nio-8090-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{role=RECEPTIONIST, maxUses=1, expiryDate=2025-06-09T15:59:59.999Z}]
2025-05-10 10:14:03.699 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:14:03.699 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [InvitationCode(id=20, code=SZBRBN60, role=RECEPTIONIST, maxUses=1, currentUses=0, expiryDate=2025-06 (truncated)...]
2025-05-10 10:14:03.700 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:14:03.700 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:14:03.707 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/invitation-codes
2025-05-10 10:14:03.707 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:14:03.707  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: admin
2025-05-10 10:14:03.708  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : User found: admin, Role: ADMIN
2025-05-10 10:14:03.709  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_ADMIN]
2025-05-10 10:14:03.709 DEBUG 12700 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-10 10:14:03.709 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/invitation-codes] with attributes [authenticated]
2025-05-10 10:14:03.709 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/invitation-codes
2025-05-10 10:14:03.709 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : POST "/api/invitation-codes", parameters={}
2025-05-10 10:14:03.709 DEBUG 12700 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#createInvitationCode(Map)
2025-05-10 10:14:03.710 DEBUG 12700 --- [http-nio-8090-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{role=RECEPTIONIST, maxUses=1, expiryDate=2025-06-09T15:59:59.999Z}]
2025-05-10 10:14:03.717 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:14:03.717 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [InvitationCode(id=21, code=EKQSU7JP, role=RECEPTIONIST, maxUses=1, currentUses=0, expiryDate=2025-06 (truncated)...]
2025-05-10 10:14:03.718 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:14:03.718 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:14:03.728 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/invitation-codes
2025-05-10 10:14:03.728 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:14:03.729  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: admin
2025-05-10 10:14:03.730  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : User found: admin, Role: ADMIN
2025-05-10 10:14:03.730  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_ADMIN]
2025-05-10 10:14:03.731 DEBUG 12700 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-10 10:14:03.731 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/invitation-codes] with attributes [authenticated]
2025-05-10 10:14:03.731 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/invitation-codes
2025-05-10 10:14:03.731 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/invitation-codes", parameters={}
2025-05-10 10:14:03.731 DEBUG 12700 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#createInvitationCode(Map)
2025-05-10 10:14:03.732 DEBUG 12700 --- [http-nio-8090-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{role=RECEPTIONIST, maxUses=1, expiryDate=2025-06-09T15:59:59.999Z}]
2025-05-10 10:14:03.737 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:14:03.738 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [InvitationCode(id=22, code=UL7J806F, role=RECEPTIONIST, maxUses=1, currentUses=0, expiryDate=2025-06 (truncated)...]
2025-05-10 10:14:03.739 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:14:03.739 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:14:03.747 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/invitation-codes
2025-05-10 10:14:03.747 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:14:03.747  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: admin
2025-05-10 10:14:03.749  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : User found: admin, Role: ADMIN
2025-05-10 10:14:03.749  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_ADMIN]
2025-05-10 10:14:03.749 DEBUG 12700 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-10 10:14:03.749 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/invitation-codes] with attributes [authenticated]
2025-05-10 10:14:03.749 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/invitation-codes
2025-05-10 10:14:03.749 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : POST "/api/invitation-codes", parameters={}
2025-05-10 10:14:03.749 DEBUG 12700 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#createInvitationCode(Map)
2025-05-10 10:14:03.750 DEBUG 12700 --- [http-nio-8090-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{role=RECEPTIONIST, maxUses=1, expiryDate=2025-06-09T15:59:59.999Z}]
2025-05-10 10:14:03.756 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:14:03.756 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [InvitationCode(id=23, code=QLW713HL, role=RECEPTIONIST, maxUses=1, currentUses=0, expiryDate=2025-06 (truncated)...]
2025-05-10 10:14:03.757 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:14:03.757 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:14:03.773 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/invitation-codes/all
2025-05-10 10:14:03.773 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:14:03.774  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: admin
2025-05-10 10:14:03.775  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : User found: admin, Role: ADMIN
2025-05-10 10:14:03.775  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_ADMIN]
2025-05-10 10:14:03.775 DEBUG 12700 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-10 10:14:03.776 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/invitation-codes/all] with attributes [authenticated]
2025-05-10 10:14:03.776 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/invitation-codes/all
2025-05-10 10:14:03.776 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/invitation-codes/all", parameters={}
2025-05-10 10:14:03.776 DEBUG 12700 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.InvitationCodeController#getAllInvitationCodes()
2025-05-10 10:14:03.781 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:14:03.782 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[InvitationCode(id=23, code=QLW713HL, role=RECEPTIONIST, maxUses=1, currentUses=0, expiryDate=2025-0 (truncated)...]
2025-05-10 10:14:03.783 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:14:03.783 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:14:22.899 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing PUT /api/rooms/4/status
2025-05-10 10:14:22.900 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:14:22.900  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: admin
2025-05-10 10:14:22.902  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : User found: admin, Role: ADMIN
2025-05-10 10:14:22.902  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_ADMIN]
2025-05-10 10:14:22.902 DEBUG 12700 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-10 10:14:22.902 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [PUT /api/rooms/4/status] with attributes [authenticated]
2025-05-10 10:14:22.902 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured PUT /api/rooms/4/status
2025-05-10 10:14:22.903 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : PUT "/api/rooms/4/status", parameters={}
2025-05-10 10:14:22.906 DEBUG 12700 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.RoomController#updateRoomStatus(Long, Map)
2025-05-10 10:14:22.911 DEBUG 12700 --- [http-nio-8090-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{status=NEEDS_CLEANING}]
2025-05-10 10:14:22.932 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:14:22.951 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [java.lang.StackOverflowError]
2025-05-10 10:14:22.996 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:14:22.996 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:14:23.008 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/rooms?page=0&size=10
2025-05-10 10:14:23.008 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:14:23.009  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: admin
2025-05-10 10:14:23.011  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : User found: admin, Role: ADMIN
2025-05-10 10:14:23.011  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_ADMIN]
2025-05-10 10:14:23.011 DEBUG 12700 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 'admin' 认证成功, 设置 SecurityContext
2025-05-10 10:14:23.012 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/rooms?page=0&size=10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:14:23.012 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/rooms?page=0&size=10
2025-05-10 10:14:23.012 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/rooms?page=0&size=10", parameters={masked}
2025-05-10 10:14:23.012 DEBUG 12700 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminRoomController#getAllRooms(RoomFilterDTO)
2025-05-10 10:14:23.020 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:14:23.020 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data={total=54, list=[{roomNumber=501, lastCleanTime=2025-05-07T13:24:18, notes=shsr, nee (truncated)...]
2025-05-10 10:14:23.021 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:14:23.021 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:14:27.739 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/cleaning/tasks
2025-05-10 10:14:27.739 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:14:27.740  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: cleaner
2025-05-10 10:14:27.742  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : User found: cleaner, Role: CLEANER
2025-05-10 10:14:27.742  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CLEANER]
2025-05-10 10:14:27.742 DEBUG 12700 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 'cleaner' 认证成功, 设置 SecurityContext
2025-05-10 10:14:27.743 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/cleaning/tasks] with attributes [authenticated]
2025-05-10 10:14:27.743 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/cleaning/tasks
2025-05-10 10:14:27.743 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/cleaning/tasks", parameters={}
2025-05-10 10:14:27.743 DEBUG 12700 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CleaningTaskController#getTasks(String, int, int)
2025-05-10 10:14:27.744  INFO 12700 --- [http-nio-8090-exec-2] com.hotel.service.impl.TaskServiceImpl   : 开始自动生成清洁任务...
2025-05-10 10:14:27.747  INFO 12700 --- [http-nio-8090-exec-2] com.hotel.service.impl.TaskServiceImpl   : 找到 1 个需要清洁的房间
2025-05-10 10:14:27.749  INFO 12700 --- [http-nio-8090-exec-2] com.hotel.service.impl.TaskServiceImpl   : 将使用默认清洁员: 清洁人员
2025-05-10 10:14:27.755  INFO 12700 --- [http-nio-8090-exec-2] com.hotel.service.impl.TaskServiceImpl   : 为房间 202 创建了清洁任务，分配给清洁员: 清洁人员
2025-05-10 10:14:27.755  INFO 12700 --- [http-nio-8090-exec-2] com.hotel.service.impl.TaskServiceImpl   : 自动生成清洁任务完成，共创建 1 个新任务
2025-05-10 10:14:27.768 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:14:27.768 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{totalPages=3, generatedTasksCount=1, currentPage=0, content=[Task(id=28, roomNumber=202, roomType=行 (truncated)...]
2025-05-10 10:14:27.769 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:14:27.769 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:14:27.821 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/cleaning/tasks/statistics
2025-05-10 10:14:27.821 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:14:27.822  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: cleaner
2025-05-10 10:14:27.824  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : User found: cleaner, Role: CLEANER
2025-05-10 10:14:27.825  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CLEANER]
2025-05-10 10:14:27.825 DEBUG 12700 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 'cleaner' 认证成功, 设置 SecurityContext
2025-05-10 10:14:27.825 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/cleaning/tasks/statistics] with attributes [authenticated]
2025-05-10 10:14:27.825 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/cleaning/tasks/statistics
2025-05-10 10:14:27.825 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/cleaning/tasks/statistics", parameters={}
2025-05-10 10:14:27.825 DEBUG 12700 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CleaningTaskController#getTaskStatistics()
2025-05-10 10:14:27.825  INFO 12700 --- [http-nio-8090-exec-9] com.hotel.service.impl.TaskServiceImpl   : 开始自动生成清洁任务...
2025-05-10 10:14:27.829  INFO 12700 --- [http-nio-8090-exec-9] com.hotel.service.impl.TaskServiceImpl   : 找到 1 个需要清洁的房间
2025-05-10 10:14:27.830  INFO 12700 --- [http-nio-8090-exec-9] com.hotel.service.impl.TaskServiceImpl   : 将使用默认清洁员: 清洁人员
2025-05-10 10:14:27.833  INFO 12700 --- [http-nio-8090-exec-9] com.hotel.service.impl.TaskServiceImpl   : 房间 202 已存在未完成的清洁任务，跳过任务创建
2025-05-10 10:14:27.833  INFO 12700 --- [http-nio-8090-exec-9] com.hotel.service.impl.TaskServiceImpl   : 自动生成清洁任务完成，共创建 0 个新任务
2025-05-10 10:14:27.838 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:14:27.838 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{data=TaskDTO(id=null, roomNumber=null, roomType=null, cleaner=null, priority=null, status=null, exp (truncated)...]
2025-05-10 10:14:27.838 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:14:27.839 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:14:36.624 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/cleaning/tasks/26/start
2025-05-10 10:14:36.624 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:14:36.625  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: cleaner
2025-05-10 10:14:36.626  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : User found: cleaner, Role: CLEANER
2025-05-10 10:14:36.626  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CLEANER]
2025-05-10 10:14:36.627 DEBUG 12700 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 'cleaner' 认证成功, 设置 SecurityContext
2025-05-10 10:14:36.627 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/cleaning/tasks/26/start] with attributes [authenticated]
2025-05-10 10:14:36.627 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/cleaning/tasks/26/start
2025-05-10 10:14:36.627 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/cleaning/tasks/26/start", parameters={}
2025-05-10 10:14:36.628 DEBUG 12700 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CleaningTaskController#startTask(Long)
2025-05-10 10:14:36.635 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:14:36.635 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Task(id=26, roomNumber=208, roomType=豪华大床房, cleaner=清洁人员, priority=medium, status=processing, expect (truncated)...]
2025-05-10 10:14:36.635 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:14:36.635 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:14:39.879 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/cleaning/tasks/26/complete
2025-05-10 10:14:39.880 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:14:39.880  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: cleaner
2025-05-10 10:14:39.882  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : User found: cleaner, Role: CLEANER
2025-05-10 10:14:39.882  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CLEANER]
2025-05-10 10:14:39.882 DEBUG 12700 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 'cleaner' 认证成功, 设置 SecurityContext
2025-05-10 10:14:39.882 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/cleaning/tasks/26/complete] with attributes [authenticated]
2025-05-10 10:14:39.883 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/cleaning/tasks/26/complete
2025-05-10 10:14:39.883 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/cleaning/tasks/26/complete", parameters={}
2025-05-10 10:14:39.883 DEBUG 12700 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CleaningTaskController#completeTask(Long, TaskDTO)
2025-05-10 10:14:39.884 DEBUG 12700 --- [http-nio-8090-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [TaskDTO(id=null, roomNumber=null, roomType=null, cleaner=null, priority=null, status=null, expectedT (truncated)...]
2025-05-10 10:14:39.886  INFO 12700 --- [http-nio-8090-exec-5] com.hotel.service.impl.TaskServiceImpl   : 任务完成：ID=26, 房间=208, 实际用时=30分钟
2025-05-10 10:14:39.889  INFO 12700 --- [http-nio-8090-exec-5] com.hotel.service.impl.TaskServiceImpl   : 已更新房间状态：房间号=208, 状态=AVAILABLE, 需要清洁=false
2025-05-10 10:14:39.892  INFO 12700 --- [http-nio-8090-exec-5] com.hotel.service.impl.TaskServiceImpl   : TaskServiceImpl: Set CleaningRecord status to COMPLETED for room 208
2025-05-10 10:14:39.893  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.CleaningServiceImpl     : Entering createCleaningRecord. Received record status: COMPLETED
2025-05-10 10:14:39.893  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.CleaningServiceImpl     : Status was not null (COMPLETED), keeping existing status.
2025-05-10 10:14:39.897  INFO 12700 --- [http-nio-8090-exec-5] c.h.service.impl.CleaningServiceImpl     : Saved CleaningRecord. ID: 21, Final Status in DB: COMPLETED
2025-05-10 10:14:39.897  INFO 12700 --- [http-nio-8090-exec-5] com.hotel.service.impl.TaskServiceImpl   : TaskServiceImpl: Called createCleaningRecord. Returned record id: 21, status: COMPLETED
2025-05-10 10:14:39.905 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:14:39.905 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Task(id=26, roomNumber=208, roomType=豪华大床房, cleaner=清洁人员, priority=medium, status=completed, expecte (truncated)...]
2025-05-10 10:14:39.906 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:14:39.906 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:14:40.129 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/cleaning/tasks
2025-05-10 10:14:40.129 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:14:40.130  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: cleaner
2025-05-10 10:14:40.131  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : User found: cleaner, Role: CLEANER
2025-05-10 10:14:40.131  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CLEANER]
2025-05-10 10:14:40.132 DEBUG 12700 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 'cleaner' 认证成功, 设置 SecurityContext
2025-05-10 10:14:40.132 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/cleaning/tasks] with attributes [authenticated]
2025-05-10 10:14:40.132 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/cleaning/tasks
2025-05-10 10:14:40.132 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/cleaning/tasks", parameters={}
2025-05-10 10:14:40.132 DEBUG 12700 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CleaningTaskController#getTasks(String, int, int)
2025-05-10 10:14:40.133  INFO 12700 --- [http-nio-8090-exec-7] com.hotel.service.impl.TaskServiceImpl   : 开始自动生成清洁任务...
2025-05-10 10:14:40.136  INFO 12700 --- [http-nio-8090-exec-7] com.hotel.service.impl.TaskServiceImpl   : 找到 1 个需要清洁的房间
2025-05-10 10:14:40.137  INFO 12700 --- [http-nio-8090-exec-7] com.hotel.service.impl.TaskServiceImpl   : 将使用默认清洁员: 清洁人员
2025-05-10 10:14:40.139  INFO 12700 --- [http-nio-8090-exec-7] com.hotel.service.impl.TaskServiceImpl   : 房间 202 已存在未完成的清洁任务，跳过任务创建
2025-05-10 10:14:40.139  INFO 12700 --- [http-nio-8090-exec-7] com.hotel.service.impl.TaskServiceImpl   : 自动生成清洁任务完成，共创建 0 个新任务
2025-05-10 10:14:40.146 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:14:40.146 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{totalPages=3, generatedTasksCount=0, currentPage=0, content=[Task(id=28, roomNumber=202, roomType=行 (truncated)...]
2025-05-10 10:14:40.146 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:14:40.147 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:14:40.237 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cleaning/tasks/statistics
2025-05-10 10:14:40.237 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:14:40.238  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: cleaner
2025-05-10 10:14:40.239  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : User found: cleaner, Role: CLEANER
2025-05-10 10:14:40.239  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CLEANER]
2025-05-10 10:14:40.239 DEBUG 12700 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 'cleaner' 认证成功, 设置 SecurityContext
2025-05-10 10:14:40.240 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/cleaning/tasks/statistics] with attributes [authenticated]
2025-05-10 10:14:40.240 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cleaning/tasks/statistics
2025-05-10 10:14:40.240 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/cleaning/tasks/statistics", parameters={}
2025-05-10 10:14:40.240 DEBUG 12700 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CleaningTaskController#getTaskStatistics()
2025-05-10 10:14:40.240  INFO 12700 --- [http-nio-8090-exec-4] com.hotel.service.impl.TaskServiceImpl   : 开始自动生成清洁任务...
2025-05-10 10:14:40.243  INFO 12700 --- [http-nio-8090-exec-4] com.hotel.service.impl.TaskServiceImpl   : 找到 1 个需要清洁的房间
2025-05-10 10:14:40.244  INFO 12700 --- [http-nio-8090-exec-4] com.hotel.service.impl.TaskServiceImpl   : 将使用默认清洁员: 清洁人员
2025-05-10 10:14:40.245  INFO 12700 --- [http-nio-8090-exec-4] com.hotel.service.impl.TaskServiceImpl   : 房间 202 已存在未完成的清洁任务，跳过任务创建
2025-05-10 10:14:40.245  INFO 12700 --- [http-nio-8090-exec-4] com.hotel.service.impl.TaskServiceImpl   : 自动生成清洁任务完成，共创建 0 个新任务
2025-05-10 10:14:40.250 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:14:40.250 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{data=TaskDTO(id=null, roomNumber=null, roomType=null, cleaner=null, priority=null, status=null, exp (truncated)...]
2025-05-10 10:14:40.251 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:14:40.251 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:14:59.669 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-10 10:14:59.669 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:14:59.670 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 10:14:59.670 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-10 10:14:59.671 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-10 10:14:59.671 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-10 10:14:59.671 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-10 10:14:59.671 DEBUG 12700 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-10 10:14:59.672 DEBUG 12700 --- [http-nio-8090-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=18999177256, password=18999177256)]
2025-05-10 10:14:59.672  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:14:59.673  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:14:59.673  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:14:59.739 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-10 10:14:59.741 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:14:59.741 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=16, username=18999177256, role=RECEPTIONIST, token= (truncated)...]
2025-05-10 10:14:59.742 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:14:59.742 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:14:59.922 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10
2025-05-10 10:14:59.922 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:14:59.923  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:14:59.925  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:14:59.926  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:14:59.926 DEBUG 12700 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:14:59.926 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=0&size=10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:14:59.926 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=0&size=10
2025-05-10 10:14:59.927 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=0&size=10", parameters={masked}
2025-05-10 10:14:59.927 DEBUG 12700 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:14:59.928  INFO 12700 --- [http-nio-8090-exec-6] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 10, Status: null, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:14:59.928 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=10
2025-05-10 10:14:59.935 DEBUG 12700 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=10, TotalElements=37, TotalPages=4
2025-05-10 10:14:59.937 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:14:59.937 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 10:14:59.938 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:14:59.938 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:15:00.216 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 10:15:00.216 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/rooms/types
2025-05-10 10:15:00.217 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:15:00.217 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:15:00.217  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:15:00.217  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:15:00.220  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:15:00.220  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:15:00.220  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:15:00.220  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:15:00.220 DEBUG 12700 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:15:00.220 DEBUG 12700 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:15:00.221 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/rooms/types] with attributes [permitAll]
2025-05-10 10:15:00.221 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/rooms/types
2025-05-10 10:15:00.221 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/rooms/types", parameters={}
2025-05-10 10:15:00.221 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:15:00.221 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 10:15:00.221 DEBUG 12700 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.RoomController#getAllRoomTypes()
2025-05-10 10:15:00.221 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 10:15:00.222 DEBUG 12700 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 10:15:00.236 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:15:00.236 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{area=null, amenities=[无限量矿泉水、咖啡、茶叶等], availableCount=20, images=[], name=行政套房, des (truncated)...]
2025-05-10 10:15:00.237 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:15:00.237 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:15:00.258  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:15:00.260  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 10:15:00.260  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 10:15:00.264  INFO 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 10:15:00.267  INFO 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 10:15:00.267 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 10:15:00.267  INFO 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 10:15:00.268  INFO 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:15:00.270  INFO 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 10:15:00.270  INFO 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 10:15:00.272  INFO 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 10:15:00.285  INFO 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 10:15:00.285 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 10:15:00.285 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 10:15:00.285 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 10:15:00.285 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 10:15:00.285 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 10:15:00.285 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 10:15:00.285 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 10:15:00.285 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 10:15:00.285 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 10:15:00.285 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 10:15:00.285 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 10:15:00.285 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 10:15:00.285 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 10:15:00.285 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 10:15:00.285 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 10:15:00.286 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 10:15:00.286 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 10:15:00.286 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 10:15:00.286 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 10:15:00.286 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 10:15:00.286 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 10:15:00.286 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 10:15:00.286 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 10:15:00.286 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 10:15:00.286 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 10:15:00.286 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 10:15:00.286 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 10:15:00.286 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 10:15:00.286 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 10:15:00.286 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 10:15:00.287 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 10:15:00.287 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 10:15:00.287 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 10:15:00.287 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 10:15:00.287 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 10:15:00.287 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 10:15:00.287 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 10:15:00.287  INFO 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 10:15:00.290  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:15:00.292  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 10:15:00.292  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 10:15:00.294  INFO 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:15:00.297  INFO 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 10:15:00.297  INFO 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 10:15:00.313  INFO 12700 --- [http-nio-8090-exec-8] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 17, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 10:15:00.313  INFO 12700 --- [http-nio-8090-exec-8] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 17
2025-05-10 10:15:00.314  INFO 12700 --- [http-nio-8090-exec-8] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 10:15:00.314  INFO 12700 --- [http-nio-8090-exec-8] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 10:15:00.316  INFO 12700 --- [http-nio-8090-exec-8] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 21
2025-05-10 10:15:00.316  INFO 12700 --- [http-nio-8090-exec-8] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 10:15:00.318 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:15:00.318 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 10:15:00.319 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:15:00.319 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:15:00.342 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 10:15:00.342 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkin/today-stats
2025-05-10 10:15:00.342 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:15:00.342 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:15:00.342  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:15:00.342  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:15:00.344  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:15:00.344  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:15:00.345 DEBUG 12700 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:15:00.345 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:15:00.345  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:15:00.345 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 10:15:00.345  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:15:00.345 DEBUG 12700 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:15:00.345 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=PENDING&pageSize=1&size=1&page=0", parameters={masked}
2025-05-10 10:15:00.345 DEBUG 12700 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:15:00.346 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/checkin/today-stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:15:00.346 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/checkin/today-stats
2025-05-10 10:15:00.346 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/checkin/today-stats", parameters={}
2025-05-10 10:15:00.346 DEBUG 12700 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CheckInController#getTodayStats()
2025-05-10 10:15:00.346  INFO 12700 --- [http-nio-8090-exec-9] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: PENDING, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:15:00.346 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 10:15:00.350 DEBUG 12700 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=4, TotalPages=4
2025-05-10 10:15:00.352 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:15:00.352 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 10:15:00.353 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:15:00.353 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:15:00.358 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:15:00.359 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{data={todayCheckin={total=1, pending=0, completed=1, list=[CheckInRecord(id=21, checkInNumber=CI202 (truncated)...]
2025-05-10 10:15:00.360 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:15:00.360 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:15:00.369 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 10:15:00.369 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:15:00.369  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:15:00.371  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:15:00.371  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:15:00.371 DEBUG 12700 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:15:00.371 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:15:00.371 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 10:15:00.372 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1", parameters={masked}
2025-05-10 10:15:00.372 DEBUG 12700 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:15:00.372  INFO 12700 --- [http-nio-8090-exec-3] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:15:00.372 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 10:15:00.377 DEBUG 12700 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=14, TotalPages=14
2025-05-10 10:15:00.378 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:15:00.379 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 14 containing com.hotel.dto.Reservati (truncated)...]
2025-05-10 10:15:00.379 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:15:00.379 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:15:07.471 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/rooms/filter?status=AVAILABLE&pageSize=200&page=0&roomTypeId=4&size=200
2025-05-10 10:15:07.472 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:15:07.472  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:15:07.474  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:15:07.474  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:15:07.474 DEBUG 12700 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:15:07.474 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/rooms/filter?status=AVAILABLE&pageSize=200&page=0&roomTypeId=4&size=200] with attributes [authenticated]
2025-05-10 10:15:07.475 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/rooms/filter?status=AVAILABLE&pageSize=200&page=0&roomTypeId=4&size=200
2025-05-10 10:15:07.475 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/rooms/filter?status=AVAILABLE&pageSize=200&page=0&roomTypeId=4&size=200", parameters={masked}
2025-05-10 10:15:07.475 DEBUG 12700 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.RoomController#getRoomsWithFilters(RoomFilterDTO)
2025-05-10 10:15:07.485 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:15:07.486 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{number=0, size=200, totalPages=1, content=[{roomNumber=303, id=14, floor=3, roomType={name=家庭套房, id (truncated)...]
2025-05-10 10:15:07.486 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:15:07.486 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:15:10.246 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/admin/checkin
2025-05-10 10:15:10.247 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:15:10.248  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:15:10.250  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:15:10.250  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:15:10.250 DEBUG 12700 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:15:10.250 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/admin/checkin] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:15:10.250 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/admin/checkin
2025-05-10 10:15:10.250 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : POST "/api/admin/checkin", parameters={}
2025-05-10 10:15:10.250 DEBUG 12700 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CheckInController#checkIn(CheckInRecord)
2025-05-10 10:15:10.252 DEBUG 12700 --- [http-nio-8090-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [CheckInRecord(id=null, checkInNumber=null, roomId=21, roomNumber=310, roomType=null, guestName=qqq,  (truncated)...]
2025-05-10 10:15:10.262  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.impl.CheckInServiceImpl  : Payment method not provided, defaulting to CASH for CheckInRecord with bookingId: 5
2025-05-10 10:15:10.268  INFO 12700 --- [http-nio-8090-exec-7] c.hotel.service.impl.CheckInServiceImpl  : 入住登记成功: ID=22, 入住单号=CI202505100002, 预订ID=5
2025-05-10 10:15:10.277 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:15:10.277 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{data=CheckInRecord(id=22, checkInNumber=CI202505100002, roomId=21, roomNumber=310, roomType=家庭套房, g (truncated)...]
2025-05-10 10:15:10.278 DEBUG 12700 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-05-10 10:15:10.278 DEBUG 12700 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:15:10.601 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10
2025-05-10 10:15:10.601 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:15:10.601  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:15:10.603  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:15:10.603  INFO 12700 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:15:10.604 DEBUG 12700 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:15:10.604 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=0&size=10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:15:10.604 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=0&size=10
2025-05-10 10:15:10.604 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=0&size=10", parameters={masked}
2025-05-10 10:15:10.604 DEBUG 12700 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:15:10.605  INFO 12700 --- [http-nio-8090-exec-4] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 10, Status: null, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:15:10.605 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=10
2025-05-10 10:15:10.610 DEBUG 12700 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=10, TotalElements=37, TotalPages=4
2025-05-10 10:15:10.611 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:15:10.611 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 10:15:10.612 DEBUG 12700 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:15:10.612 DEBUG 12700 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:15:10.863 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 10:15:10.863 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:15:10.863  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:15:10.865  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:15:10.865  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:15:10.865 DEBUG 12700 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:15:10.865 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:15:10.865 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 10:15:10.866 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 10:15:10.866 DEBUG 12700 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 10:15:10.908  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:15:10.910  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 10:15:10.910  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 10:15:10.915  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 10:15:10.919  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 10:15:10.919 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 10:15:10.919  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 10:15:10.921  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:15:10.923  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 10:15:10.923  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 10:15:10.925  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 10:15:10.940  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 10:15:10.941 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 10:15:10.941 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 10:15:10.941 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 10:15:10.941 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 10:15:10.941 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 10:15:10.941 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 10:15:10.941 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 10:15:10.941 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 10:15:10.941 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 10:15:10.941 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 10:15:10.941 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 10:15:10.941 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 10:15:10.941 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 10:15:10.941 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 10:15:10.941 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 10:15:10.941 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 10:15:10.941 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 10:15:10.941 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 10:15:10.941 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 10:15:10.941 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 10:15:10.942 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 10:15:10.942 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 10:15:10.942 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 10:15:10.942 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 10:15:10.942 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 10:15:10.942 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 10:15:10.942 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 10:15:10.942 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 10:15:10.942 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 10:15:10.942 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 10:15:10.942 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 10:15:10.942 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 10:15:10.942 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 10:15:10.942 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 10:15:10.942 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 10:15:10.942 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 10:15:10.943 DEBUG 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 10:15:10.943  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 10:15:10.945  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:15:10.948  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 10:15:10.948  INFO 12700 --- [http-nio-8090-exec-10] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 10:15:10.949  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:15:10.951  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 10:15:10.951  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 10:15:10.966 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 10:15:10.966 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkin/today-stats
2025-05-10 10:15:10.966 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:15:10.966 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:15:10.966  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:15:10.966  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:15:10.968  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:15:10.968  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:15:10.968  INFO 12700 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:15:10.968  INFO 12700 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:15:10.968 DEBUG 12700 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:15:10.969 DEBUG 12700 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:15:10.969 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:15:10.969 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/checkin/today-stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:15:10.969 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 10:15:10.969 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/checkin/today-stats
2025-05-10 10:15:10.970 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/checkin/today-stats", parameters={}
2025-05-10 10:15:10.970 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=PENDING&pageSize=1&size=1&page=0", parameters={masked}
2025-05-10 10:15:10.970 DEBUG 12700 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CheckInController#getTodayStats()
2025-05-10 10:15:10.970 DEBUG 12700 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:15:10.970  INFO 12700 --- [http-nio-8090-exec-1] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: PENDING, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:15:10.971 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 10:15:10.975  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 17, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 10:15:10.975  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 17
2025-05-10 10:15:10.975  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 10:15:10.975  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 10:15:10.977 DEBUG 12700 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=4, TotalPages=4
2025-05-10 10:15:10.978  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 21
2025-05-10 10:15:10.978  INFO 12700 --- [http-nio-8090-exec-10] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 10:15:10.978 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:15:10.978 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 10:15:10.979 DEBUG 12700 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:15:10.980 DEBUG 12700 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:15:10.980 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:15:10.981 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 10:15:10.981 DEBUG 12700 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:15:10.982 DEBUG 12700 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:15:10.985 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:15:10.988 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{data={todayCheckin={total=2, pending=0, completed=2, list=[CheckInRecord(id=21, checkInNumber=CI202 (truncated)...]
2025-05-10 10:15:10.989 DEBUG 12700 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:15:10.989 DEBUG 12700 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:15:11.012 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 10:15:11.012 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:15:11.013  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:15:11.014  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:15:11.014  INFO 12700 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:15:11.014 DEBUG 12700 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:15:11.014 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:15:11.014 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 10:15:11.015 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1", parameters={masked}
2025-05-10 10:15:11.015 DEBUG 12700 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:15:11.015  INFO 12700 --- [http-nio-8090-exec-8] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:15:11.015 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 10:15:11.020 DEBUG 12700 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=13, TotalPages=13
2025-05-10 10:15:11.021 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:15:11.021 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 13 containing com.hotel.dto.Reservati (truncated)...]
2025-05-10 10:15:11.022 DEBUG 12700 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:15:11.022 DEBUG 12700 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:15:15.804 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/cleaning/tasks
2025-05-10 10:15:15.805 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:15:15.805  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: cleaner
2025-05-10 10:15:15.807  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : User found: cleaner, Role: CLEANER
2025-05-10 10:15:15.807  INFO 12700 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CLEANER]
2025-05-10 10:15:15.807 DEBUG 12700 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 'cleaner' 认证成功, 设置 SecurityContext
2025-05-10 10:15:15.807 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/cleaning/tasks] with attributes [authenticated]
2025-05-10 10:15:15.807 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/cleaning/tasks
2025-05-10 10:15:15.807 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/cleaning/tasks", parameters={}
2025-05-10 10:15:15.807 DEBUG 12700 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CleaningTaskController#getTasks(String, int, int)
2025-05-10 10:15:15.808  INFO 12700 --- [http-nio-8090-exec-9] com.hotel.service.impl.TaskServiceImpl   : 开始自动生成清洁任务...
2025-05-10 10:15:15.811  INFO 12700 --- [http-nio-8090-exec-9] com.hotel.service.impl.TaskServiceImpl   : 找到 1 个需要清洁的房间
2025-05-10 10:15:15.813  INFO 12700 --- [http-nio-8090-exec-9] com.hotel.service.impl.TaskServiceImpl   : 将使用默认清洁员: 清洁人员
2025-05-10 10:15:15.814  INFO 12700 --- [http-nio-8090-exec-9] com.hotel.service.impl.TaskServiceImpl   : 房间 202 已存在未完成的清洁任务，跳过任务创建
2025-05-10 10:15:15.815  INFO 12700 --- [http-nio-8090-exec-9] com.hotel.service.impl.TaskServiceImpl   : 自动生成清洁任务完成，共创建 0 个新任务
2025-05-10 10:15:15.825 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:15:15.826 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{totalPages=3, generatedTasksCount=0, currentPage=0, content=[Task(id=28, roomNumber=202, roomType=行 (truncated)...]
2025-05-10 10:15:15.827 DEBUG 12700 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:15:15.827 DEBUG 12700 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:15:15.885 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/cleaning/tasks/statistics
2025-05-10 10:15:15.885 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:15:15.886  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: cleaner
2025-05-10 10:15:15.888  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : User found: cleaner, Role: CLEANER
2025-05-10 10:15:15.888  INFO 12700 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CLEANER]
2025-05-10 10:15:15.888 DEBUG 12700 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 'cleaner' 认证成功, 设置 SecurityContext
2025-05-10 10:15:15.889 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/cleaning/tasks/statistics] with attributes [authenticated]
2025-05-10 10:15:15.889 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/cleaning/tasks/statistics
2025-05-10 10:15:15.889 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/cleaning/tasks/statistics", parameters={}
2025-05-10 10:15:15.889 DEBUG 12700 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CleaningTaskController#getTaskStatistics()
2025-05-10 10:15:15.890  INFO 12700 --- [http-nio-8090-exec-2] com.hotel.service.impl.TaskServiceImpl   : 开始自动生成清洁任务...
2025-05-10 10:15:15.894  INFO 12700 --- [http-nio-8090-exec-2] com.hotel.service.impl.TaskServiceImpl   : 找到 1 个需要清洁的房间
2025-05-10 10:15:15.895  INFO 12700 --- [http-nio-8090-exec-2] com.hotel.service.impl.TaskServiceImpl   : 将使用默认清洁员: 清洁人员
2025-05-10 10:15:15.897  INFO 12700 --- [http-nio-8090-exec-2] com.hotel.service.impl.TaskServiceImpl   : 房间 202 已存在未完成的清洁任务，跳过任务创建
2025-05-10 10:15:15.898  INFO 12700 --- [http-nio-8090-exec-2] com.hotel.service.impl.TaskServiceImpl   : 自动生成清洁任务完成，共创建 0 个新任务
2025-05-10 10:15:15.905 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:15:15.906 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{data=TaskDTO(id=null, roomNumber=null, roomType=null, cleaner=null, priority=null, status=null, exp (truncated)...]
2025-05-10 10:15:15.906 DEBUG 12700 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:15:15.907 DEBUG 12700 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:15:29.943 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cleaning/tasks
2025-05-10 10:15:29.943 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:15:29.943  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: cleaner
2025-05-10 10:15:29.945  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : User found: cleaner, Role: CLEANER
2025-05-10 10:15:29.946  INFO 12700 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CLEANER]
2025-05-10 10:15:29.946 DEBUG 12700 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 'cleaner' 认证成功, 设置 SecurityContext
2025-05-10 10:15:29.946 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/cleaning/tasks] with attributes [authenticated]
2025-05-10 10:15:29.947 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cleaning/tasks
2025-05-10 10:15:29.947 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/cleaning/tasks", parameters={}
2025-05-10 10:15:29.947 DEBUG 12700 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CleaningTaskController#getTasks(String, int, int)
2025-05-10 10:15:29.948  INFO 12700 --- [http-nio-8090-exec-3] com.hotel.service.impl.TaskServiceImpl   : 开始自动生成清洁任务...
2025-05-10 10:15:29.951  INFO 12700 --- [http-nio-8090-exec-3] com.hotel.service.impl.TaskServiceImpl   : 找到 1 个需要清洁的房间
2025-05-10 10:15:29.953  INFO 12700 --- [http-nio-8090-exec-3] com.hotel.service.impl.TaskServiceImpl   : 将使用默认清洁员: 清洁人员
2025-05-10 10:15:29.955  INFO 12700 --- [http-nio-8090-exec-3] com.hotel.service.impl.TaskServiceImpl   : 房间 202 已存在未完成的清洁任务，跳过任务创建
2025-05-10 10:15:29.955  INFO 12700 --- [http-nio-8090-exec-3] com.hotel.service.impl.TaskServiceImpl   : 自动生成清洁任务完成，共创建 0 个新任务
2025-05-10 10:15:29.964 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:15:29.964 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{totalPages=3, generatedTasksCount=0, currentPage=0, content=[Task(id=28, roomNumber=202, roomType=行 (truncated)...]
2025-05-10 10:15:29.966 DEBUG 12700 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:15:29.966 DEBUG 12700 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:15:30.027 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cleaning/tasks/statistics
2025-05-10 10:15:30.028 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:15:30.029  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: cleaner
2025-05-10 10:15:30.032  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : User found: cleaner, Role: CLEANER
2025-05-10 10:15:30.032  INFO 12700 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CLEANER]
2025-05-10 10:15:30.032 DEBUG 12700 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 'cleaner' 认证成功, 设置 SecurityContext
2025-05-10 10:15:30.033 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/cleaning/tasks/statistics] with attributes [authenticated]
2025-05-10 10:15:30.033 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/cleaning/tasks/statistics
2025-05-10 10:15:30.033 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/cleaning/tasks/statistics", parameters={}
2025-05-10 10:15:30.033 DEBUG 12700 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CleaningTaskController#getTaskStatistics()
2025-05-10 10:15:30.033  INFO 12700 --- [http-nio-8090-exec-5] com.hotel.service.impl.TaskServiceImpl   : 开始自动生成清洁任务...
2025-05-10 10:15:30.038  INFO 12700 --- [http-nio-8090-exec-5] com.hotel.service.impl.TaskServiceImpl   : 找到 1 个需要清洁的房间
2025-05-10 10:15:30.040  INFO 12700 --- [http-nio-8090-exec-5] com.hotel.service.impl.TaskServiceImpl   : 将使用默认清洁员: 清洁人员
2025-05-10 10:15:30.042  INFO 12700 --- [http-nio-8090-exec-5] com.hotel.service.impl.TaskServiceImpl   : 房间 202 已存在未完成的清洁任务，跳过任务创建
2025-05-10 10:15:30.042  INFO 12700 --- [http-nio-8090-exec-5] com.hotel.service.impl.TaskServiceImpl   : 自动生成清洁任务完成，共创建 0 个新任务
2025-05-10 10:15:30.050 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:15:30.050 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{data=TaskDTO(id=null, roomNumber=null, roomType=null, cleaner=null, priority=null, status=null, exp (truncated)...]
2025-05-10 10:15:30.050 DEBUG 12700 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:15:30.051 DEBUG 12700 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:18:50.073  INFO 12700 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-10 10:18:50.082  INFO 12700 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-10 10:18:50.090  INFO 12700 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-10 10:28:57.767  INFO 2736 --- [main] com.hotel.HotelManagementApplication     : Starting HotelManagementApplication using Java 18.0.2 on LAPTOP-HeYIXianJun with PID 2736 (E:\桌面\javahotel\heqing99\target\classes started by 上善若水 in E:\桌面\javahotel\heqing99)
2025-05-10 10:28:57.770 DEBUG 2736 --- [main] com.hotel.HotelManagementApplication     : Running with Spring Boot v2.7.0, Spring v5.3.20
2025-05-10 10:28:57.771  INFO 2736 --- [main] com.hotel.HotelManagementApplication     : No active profile set, falling back to 1 default profile: "default"
2025-05-10 10:28:58.748  INFO 2736 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-10 10:28:58.941  INFO 2736 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 181 ms. Found 19 JPA repository interfaces.
2025-05-10 10:28:59.477  INFO 2736 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8090 (http)
2025-05-10 10:28:59.478  INFO 2736 --- [main] o.a.catalina.core.AprLifecycleListener   : Loaded Apache Tomcat Native library [1.2.30] using APR version [1.7.0].
2025-05-10 10:28:59.478  INFO 2736 --- [main] o.a.catalina.core.AprLifecycleListener   : APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true], UDS [true].
2025-05-10 10:28:59.478  INFO 2736 --- [main] o.a.catalina.core.AprLifecycleListener   : APR/OpenSSL configuration: useAprConnector [false], useOpenSSL [true]
2025-05-10 10:28:59.542  INFO 2736 --- [main] o.a.catalina.core.AprLifecycleListener   : OpenSSL successfully initialized [OpenSSL 1.1.1k  25 Mar 2021]
2025-05-10 10:28:59.561  INFO 2736 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-10 10:28:59.562  INFO 2736 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.63]
2025-05-10 10:28:59.695  INFO 2736 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-10 10:28:59.695  INFO 2736 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1873 ms
2025-05-10 10:28:59.869  INFO 2736 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-10 10:28:59.938  INFO 2736 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.9.Final
2025-05-10 10:29:00.120  INFO 2736 --- [main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2025-05-10 10:29:00.235  INFO 2736 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-10 10:29:00.567  INFO 2736 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-10 10:29:00.582  INFO 2736 --- [main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2025-05-10 10:29:01.715  INFO 2736 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-05-10 10:29:01.723  INFO 2736 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-10 10:29:02.178 DEBUG 2736 --- [main] c.hotel.config.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2025-05-10 10:29:02.178 DEBUG 2736 --- [main] o.springframework.web.filter.CorsFilter  : Filter 'corsFilter' configured for use
2025-05-10 10:29:03.047 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.html']
2025-05-10 10:29:03.054 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.js']
2025-05-10 10:29:03.055 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.css']
2025-05-10 10:29:03.055 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/*.ico']
2025-05-10 10:29:03.055 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/assets/**']
2025-05-10 10:29:03.055 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/']
2025-05-10 10:29:03.056 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/about']
2025-05-10 10:29:03.056 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/rooms']
2025-05-10 10:29:03.056 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/room/**']
2025-05-10 10:29:03.056 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/contact']
2025-05-10 10:29:03.056 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/booking']
2025-05-10 10:29:03.057 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/register']
2025-05-10 10:29:03.057 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/login']
2025-05-10 10:29:03.057 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/user/**']
2025-05-10 10:29:03.057 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin']
2025-05-10 10:29:03.058 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/login']
2025-05-10 10:29:03.059 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/dashboard/**']
2025-05-10 10:29:03.059 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/users/**']
2025-05-10 10:29:03.059 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/staff/**']
2025-05-10 10:29:03.059 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/reception/**']
2025-05-10 10:29:03.059 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/cleaning/**']
2025-05-10 10:29:03.059 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/login', POST]
2025-05-10 10:29:03.059 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/admin/login', GET]
2025-05-10 10:29:03.060 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/auth/login', POST]
2025-05-10 10:29:03.060 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/refresh-token', POST]
2025-05-10 10:29:03.060 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/register', POST]
2025-05-10 10:29:03.060 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/login', POST]
2025-05-10 10:29:03.060 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/check-username', GET]
2025-05-10 10:29:03.060 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/check-phone', GET]
2025-05-10 10:29:03.061 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/invitation-codes/validate/**', GET]
2025-05-10 10:29:03.061 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/users/register/staff', POST]
2025-05-10 10:29:03.061 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/rooms/types', GET]
2025-05-10 10:29:03.061 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for Ant [pattern='/api/users/profile', GET]
2025-05-10 10:29:03.061 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for Ant [pattern='/api/users/{id}', PUT]
2025-05-10 10:29:03.061 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for Ant [pattern='/api/users/{id}/password', PUT]
2025-05-10 10:29:03.061 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')] for Ant [pattern='/api/admin/dashboard/stats', GET]
2025-05-10 10:29:03.064 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')] for Ant [pattern='/api/admin/checkin/today-stats', GET]
2025-05-10 10:29:03.064 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')] for Ant [pattern='/api/admin/rooms', GET]
2025-05-10 10:29:03.064 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasRole('ROLE_ADMIN')] for Ant [pattern='/api/users', GET]
2025-05-10 10:29:03.064 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')] for Ant [pattern='/api/reservations', GET]
2025-05-10 10:29:03.065 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')] for Ant [pattern='/api/admin/checkin', POST]
2025-05-10 10:29:03.065 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')] for Ant [pattern='/api/admin/checkout/stats', GET]
2025-05-10 10:29:03.065 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')] for Ant [pattern='/api/admin/checkout/records', GET]
2025-05-10 10:29:03.065 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')] for Ant [pattern='/api/admin/rooms/occupied', GET]
2025-05-10 10:29:03.065 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')] for Ant [pattern='/api/admin/checkout/confirm/**', POST]
2025-05-10 10:29:03.066 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')] for Ant [pattern='/api/admin/checkout/create', POST]
2025-05-10 10:29:03.066 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')] for Ant [pattern='/api/admin/checkout/card-checkout', POST]
2025-05-10 10:29:03.066 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')] for Ant [pattern='/api/admin/checkout/{id}/bill', GET]
2025-05-10 10:29:03.066 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')] for Ant [pattern='/api/admin/rooms/{roomNumber}/current-guest', GET]
2025-05-10 10:29:03.066 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')] for Ant [pattern='/api/admin/rooms/random-occupied', GET]
2025-05-10 10:29:03.066 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST','ROLE_STAFF')] for Ant [pattern='/api/admin/rooms/{roomId}/mark-cleaned', POST]
2025-05-10 10:29:03.066 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasRole('ROLE_ADMIN')] for Ant [pattern='/api/admin/**']
2025-05-10 10:29:03.066 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [hasRole('ROLE_ADMIN')] for Ant [pattern='/api/users/{id}', DELETE]
2025-05-10 10:29:03.067 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/**', OPTIONS]
2025-05-10 10:29:03.067 DEBUG 2736 --- [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for any request
2025-05-10 10:29:03.073  INFO 2736 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@480f1311, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@60c68c7b, org.springframework.security.web.context.SecurityContextPersistenceFilter@7c045627, org.springframework.security.web.header.HeaderWriterFilter@f69e35a, org.springframework.web.filter.CorsFilter@aca2a0b, org.springframework.security.web.authentication.logout.LogoutFilter@19a799cb, com.hotel.config.JwtAuthenticationFilter@54cce500, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@51158fb1, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@62682ece, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1315d910, org.springframework.security.web.session.SessionManagementFilter@65528bcf, org.springframework.security.web.access.ExceptionTranslationFilter@3abd7b20, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@580a5b6e]
2025-05-10 10:29:03.120  WARN 2736 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-10 10:29:03.255 DEBUG 2736 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-05-10 10:29:03.281  INFO 2736 --- [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [static/index.html]
2025-05-10 10:29:03.347 DEBUG 2736 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 181 mappings in 'requestMappingHandlerMapping'
2025-05-10 10:29:03.347 DEBUG 2736 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/admin, /admin/login, /admin/dashboard, /admin/users, /admin/staff, /admin/rooms, /admin/reception/bookings, /admin/reception/checkin, /admin/reception/visitors, /admin/cleaning/tasks, /admin/cleaning/records, /login] in 'viewControllerHandlerMapping'
2025-05-10 10:29:03.372 DEBUG 2736 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /assets/**, /*.js, /*.css, /favicon.ico, /index.html, /images/**, /assets/images/**] in 'resourceHandlerMapping'
2025-05-10 10:29:03.380 DEBUG 2736 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-05-10 10:29:03.563  INFO 2736 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8090 (http) with context path ''
2025-05-10 10:29:03.573  INFO 2736 --- [main] com.hotel.HotelManagementApplication     : Started HotelManagementApplication in 6.324 seconds (JVM running for 7.198)
2025-05-10 10:30:59.291  INFO 2736 --- [http-nio-8090-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-10 10:30:59.291  INFO 2736 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-10 10:30:59.291 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-05-10 10:30:59.291 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-05-10 10:30:59.292 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-05-10 10:30:59.292 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@264c9994
2025-05-10 10:30:59.292 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@283595db
2025-05-10 10:30:59.293 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-05-10 10:30:59.293  INFO 2736 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2025-05-10 10:30:59.305 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/cleaning/tasks
2025-05-10 10:30:59.312 DEBUG 2736 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:30:59.400  INFO 2736 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: cleaner
2025-05-10 10:30:59.403  INFO 2736 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : User found: cleaner, Role: CLEANER
2025-05-10 10:30:59.404  INFO 2736 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CLEANER]
2025-05-10 10:30:59.405 DEBUG 2736 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 'cleaner' 认证成功, 设置 SecurityContext
2025-05-10 10:30:59.416 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/cleaning/tasks] with attributes [authenticated]
2025-05-10 10:30:59.417 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/cleaning/tasks
2025-05-10 10:30:59.419 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/cleaning/tasks", parameters={}
2025-05-10 10:30:59.424 DEBUG 2736 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CleaningTaskController#getTasks(String, int, int)
2025-05-10 10:30:59.449  INFO 2736 --- [http-nio-8090-exec-2] c.h.controller.CleaningTaskController    : 获取清洁任务列表，参数：status=null, page=0, size=10
2025-05-10 10:30:59.459  INFO 2736 --- [http-nio-8090-exec-2] com.hotel.service.impl.TaskServiceImpl   : 开始自动生成清洁任务...
2025-05-10 10:30:59.481  INFO 2736 --- [http-nio-8090-exec-2] com.hotel.service.impl.TaskServiceImpl   : 找到 1 个需要清洁的房间
2025-05-10 10:30:59.505  INFO 2736 --- [http-nio-8090-exec-2] com.hotel.service.impl.TaskServiceImpl   : 将使用默认清洁员: 清洁人员
2025-05-10 10:30:59.510  INFO 2736 --- [http-nio-8090-exec-2] com.hotel.service.impl.TaskServiceImpl   : 房间 202 已存在未完成的清洁任务，跳过任务创建
2025-05-10 10:30:59.511  INFO 2736 --- [http-nio-8090-exec-2] com.hotel.service.impl.TaskServiceImpl   : 自动生成清洁任务完成，共创建 0 个新任务
2025-05-10 10:30:59.516  INFO 2736 --- [http-nio-8090-exec-2] com.hotel.service.impl.TaskServiceImpl   : 开始同步CLEANING状态房间为processing状态任务...
2025-05-10 10:30:59.524  INFO 2736 --- [http-nio-8090-exec-2] com.hotel.service.impl.TaskServiceImpl   : 找到 4 个正在清洁中的房间
2025-05-10 10:30:59.558  INFO 2736 --- [http-nio-8090-exec-2] com.hotel.service.impl.TaskServiceImpl   : 为房间 304 创建了新的处理中任务
2025-05-10 10:30:59.565  INFO 2736 --- [http-nio-8090-exec-2] com.hotel.service.impl.TaskServiceImpl   : 为房间 307 创建了新的处理中任务
2025-05-10 10:30:59.572  INFO 2736 --- [http-nio-8090-exec-2] com.hotel.service.impl.TaskServiceImpl   : 为房间 403 创建了新的处理中任务
2025-05-10 10:30:59.578  INFO 2736 --- [http-nio-8090-exec-2] com.hotel.service.impl.TaskServiceImpl   : 为房间 421 创建了新的处理中任务
2025-05-10 10:30:59.579  INFO 2736 --- [http-nio-8090-exec-2] com.hotel.service.impl.TaskServiceImpl   : 同步CLEANING状态房间为processing状态任务完成
2025-05-10 10:30:59.612 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:30:59.614 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{totalPages=3, generatedTasksCount=0, currentPage=0, content=[Task(id=32, roomNumber=421, roomType=家 (truncated)...]
2025-05-10 10:30:59.667 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:30:59.668 DEBUG 2736 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:30:59.690 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cleaning/tasks/statistics
2025-05-10 10:30:59.690 DEBUG 2736 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:30:59.692  INFO 2736 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: cleaner
2025-05-10 10:30:59.696  INFO 2736 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : User found: cleaner, Role: CLEANER
2025-05-10 10:30:59.697  INFO 2736 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CLEANER]
2025-05-10 10:30:59.697 DEBUG 2736 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 'cleaner' 认证成功, 设置 SecurityContext
2025-05-10 10:30:59.697 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/cleaning/tasks/statistics] with attributes [authenticated]
2025-05-10 10:30:59.697 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cleaning/tasks/statistics
2025-05-10 10:30:59.698 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/cleaning/tasks/statistics", parameters={}
2025-05-10 10:30:59.698 DEBUG 2736 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CleaningTaskController#getTaskStatistics()
2025-05-10 10:30:59.699  INFO 2736 --- [http-nio-8090-exec-1] com.hotel.service.impl.TaskServiceImpl   : 开始自动生成清洁任务...
2025-05-10 10:30:59.703  INFO 2736 --- [http-nio-8090-exec-1] com.hotel.service.impl.TaskServiceImpl   : 找到 1 个需要清洁的房间
2025-05-10 10:30:59.705  INFO 2736 --- [http-nio-8090-exec-1] com.hotel.service.impl.TaskServiceImpl   : 将使用默认清洁员: 清洁人员
2025-05-10 10:30:59.707  INFO 2736 --- [http-nio-8090-exec-1] com.hotel.service.impl.TaskServiceImpl   : 房间 202 已存在未完成的清洁任务，跳过任务创建
2025-05-10 10:30:59.707  INFO 2736 --- [http-nio-8090-exec-1] com.hotel.service.impl.TaskServiceImpl   : 自动生成清洁任务完成，共创建 0 个新任务
2025-05-10 10:30:59.726 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:30:59.727 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{data=TaskDTO(id=null, roomNumber=null, roomType=null, cleaner=null, priority=null, status=null, exp (truncated)...]
2025-05-10 10:30:59.737 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:30:59.737 DEBUG 2736 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:31:19.518 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-10 10:31:19.519 DEBUG 2736 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:31:19.527 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 10:31:19.528 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-10 10:31:19.528 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-10 10:31:19.528 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-10 10:31:19.529 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-10 10:31:19.529 DEBUG 2736 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-10 10:31:19.555 DEBUG 2736 --- [http-nio-8090-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=18999177256, password=18999177256)]
2025-05-10 10:31:19.637  INFO 2736 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:31:19.640  INFO 2736 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:31:19.641  INFO 2736 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:31:19.707 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-10 10:31:19.730 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:31:19.730 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=16, username=18999177256, role=RECEPTIONIST, token= (truncated)...]
2025-05-10 10:31:19.733 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:31:19.734 DEBUG 2736 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:31:19.935 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10
2025-05-10 10:31:19.935 DEBUG 2736 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:31:19.937  INFO 2736 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:31:19.940  INFO 2736 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:31:19.940  INFO 2736 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:31:19.940 DEBUG 2736 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:31:19.947 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=0&size=10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:31:19.948 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=0&size=10
2025-05-10 10:31:19.948 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=0&size=10", parameters={masked}
2025-05-10 10:31:19.948 DEBUG 2736 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:31:19.961  INFO 2736 --- [http-nio-8090-exec-4] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 10, Status: null, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:31:19.961 DEBUG 2736 --- [http-nio-8090-exec-4] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=10
2025-05-10 10:31:19.988 DEBUG 2736 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=10, TotalElements=37, TotalPages=4
2025-05-10 10:31:19.996 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:31:19.997 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 10:31:20.013 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:31:20.014 DEBUG 2736 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:31:20.246 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/rooms/types
2025-05-10 10:31:20.246 DEBUG 2736 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:31:20.248  INFO 2736 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:31:20.251  INFO 2736 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:31:20.251  INFO 2736 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:31:20.252 DEBUG 2736 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:31:20.252 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/rooms/types] with attributes [permitAll]
2025-05-10 10:31:20.252 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/rooms/types
2025-05-10 10:31:20.253 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/rooms/types", parameters={}
2025-05-10 10:31:20.253 DEBUG 2736 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.RoomController#getAllRoomTypes()
2025-05-10 10:31:20.312 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:31:20.313 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{area=null, amenities=[无限量矿泉水、咖啡、茶叶等], availableCount=20, images=[], name=行政套房, des (truncated)...]
2025-05-10 10:31:20.315 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:31:20.315 DEBUG 2736 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:31:20.404 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 10:31:20.404 DEBUG 2736 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:31:20.404 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 10:31:20.404 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkin/today-stats
2025-05-10 10:31:20.404 DEBUG 2736 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:31:20.404 DEBUG 2736 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:31:20.406  INFO 2736 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:31:20.406  INFO 2736 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:31:20.406  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:31:20.408  INFO 2736 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:31:20.408  INFO 2736 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:31:20.408 DEBUG 2736 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:31:20.409 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/checkin/today-stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:31:20.409 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/checkin/today-stats
2025-05-10 10:31:20.409 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/checkin/today-stats", parameters={}
2025-05-10 10:31:20.410 DEBUG 2736 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CheckInController#getTodayStats()
2025-05-10 10:31:20.410  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:31:20.410  INFO 2736 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:31:20.411  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:31:20.411  INFO 2736 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:31:20.411 DEBUG 2736 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:31:20.411 DEBUG 2736 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:31:20.411 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:31:20.411 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:31:20.412 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 10:31:20.412 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 10:31:20.412 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 10:31:20.412 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=PENDING&pageSize=1&size=1&page=0", parameters={masked}
2025-05-10 10:31:20.412 DEBUG 2736 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 10:31:20.413 DEBUG 2736 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:31:20.423  INFO 2736 --- [http-nio-8090-exec-8] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: PENDING, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:31:20.423 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 10:31:20.434 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=4, TotalPages=4
2025-05-10 10:31:20.437 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:31:20.437 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 10:31:20.439 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:31:20.439 DEBUG 2736 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:31:20.447 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:31:20.455 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{data={todayCheckin={total=2, pending=0, completed=2, list=[CheckInRecord(id=21, checkInNumber=CI202 (truncated)...]
2025-05-10 10:31:20.467 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:31:20.468 DEBUG 2736 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:31:20.493  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:31:20.498  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 10:31:20.498  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 10:31:20.504  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 10:31:20.510  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 10:31:20.511 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 10:31:20.511  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 10:31:20.513  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:31:20.515  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 10:31:20.516  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 10:31:20.519  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 10:31:20.544  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 10:31:20.545 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 10:31:20.545 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 10:31:20.545 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 10:31:20.545 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 10:31:20.545 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 10:31:20.545 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 10:31:20.545 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 10:31:20.545 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 10:31:20.545 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 10:31:20.545 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 10:31:20.545 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 10:31:20.546 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 10:31:20.546 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 10:31:20.546 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 10:31:20.546 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 10:31:20.546 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 10:31:20.547 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 10:31:20.547 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 10:31:20.547 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 10:31:20.547 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 10:31:20.547 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 10:31:20.547 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 10:31:20.547 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 10:31:20.547 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 10:31:20.547 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 10:31:20.547 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 10:31:20.547 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 10:31:20.547 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 10:31:20.547 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 10:31:20.548 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 10:31:20.548 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 10:31:20.548 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 10:31:20.548 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 10:31:20.548 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 10:31:20.548 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 10:31:20.548 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 10:31:20.548 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 10:31:20.548  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 10:31:20.552  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:31:20.557  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 10:31:20.558  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 10:31:20.561  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:31:20.564  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 10:31:20.565  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 10:31:20.601  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 17, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 10:31:20.601  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 17
2025-05-10 10:31:20.601  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 10:31:20.601  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 10:31:20.605  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 21
2025-05-10 10:31:20.605  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 10:31:20.610 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:31:20.610 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 10:31:20.612 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:31:20.612 DEBUG 2736 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:31:20.784 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 10:31:20.784 DEBUG 2736 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:31:20.786  INFO 2736 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:31:20.789  INFO 2736 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:31:20.789  INFO 2736 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:31:20.789 DEBUG 2736 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:31:20.789 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:31:20.790 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 10:31:20.790 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1", parameters={masked}
2025-05-10 10:31:20.790 DEBUG 2736 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:31:20.791  INFO 2736 --- [http-nio-8090-exec-9] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:31:20.791 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 10:31:20.798 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=13, TotalPages=13
2025-05-10 10:31:20.800 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:31:20.801 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 13 containing com.hotel.dto.Reservati (truncated)...]
2025-05-10 10:31:20.802 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:31:20.802 DEBUG 2736 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:31:27.741 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-10 10:31:27.741 DEBUG 2736 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:31:27.742 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 10:31:27.742 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-10 10:31:27.743 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-10 10:31:27.743 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-10 10:31:27.744 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-10 10:31:27.744 DEBUG 2736 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-10 10:31:27.745 DEBUG 2736 --- [http-nio-8090-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=ddd, password=15555555555)]
2025-05-10 10:31:27.745  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: ddd
2025-05-10 10:31:27.749  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : User found: ddd, Role: CUSTOMER
2025-05-10 10:31:27.749  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CUSTOMER]
2025-05-10 10:31:27.827 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-10 10:31:27.832 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:31:27.832 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=10, username=ddd, role=CUSTOMER, token=eyJhbGciOiJI (truncated)...]
2025-05-10 10:31:27.833 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:31:27.834 DEBUG 2736 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:31:31.068 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-10 10:31:31.068 DEBUG 2736 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:31:31.069 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 10:31:31.069 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-10 10:31:31.070 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-10 10:31:31.070 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-10 10:31:31.070 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-10 10:31:31.071 DEBUG 2736 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-10 10:31:31.071 DEBUG 2736 --- [http-nio-8090-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=ddd, password=15555555555)]
2025-05-10 10:31:31.072  INFO 2736 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: ddd
2025-05-10 10:31:31.075  INFO 2736 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : User found: ddd, Role: CUSTOMER
2025-05-10 10:31:31.075  INFO 2736 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CUSTOMER]
2025-05-10 10:31:31.147 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-10 10:31:31.152 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:31:31.152 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=10, username=ddd, role=CUSTOMER, token=eyJhbGciOiJI (truncated)...]
2025-05-10 10:31:31.153 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:31:31.153 DEBUG 2736 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:31:32.632 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-10 10:31:32.633 DEBUG 2736 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:31:32.634 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 10:31:32.634 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-10 10:31:32.634 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-10 10:31:32.634 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-10 10:31:32.635 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-10 10:31:32.635 DEBUG 2736 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-10 10:31:32.636 DEBUG 2736 --- [http-nio-8090-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=ddd, password=15555555555)]
2025-05-10 10:31:32.636  INFO 2736 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: ddd
2025-05-10 10:31:32.640  INFO 2736 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : User found: ddd, Role: CUSTOMER
2025-05-10 10:31:32.640  INFO 2736 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CUSTOMER]
2025-05-10 10:31:32.714 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-10 10:31:32.719 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:31:32.719 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=10, username=ddd, role=CUSTOMER, token=eyJhbGciOiJI (truncated)...]
2025-05-10 10:31:32.720 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:31:32.721 DEBUG 2736 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:31:36.020 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-10 10:31:36.021 DEBUG 2736 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:31:36.022 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 10:31:36.022 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-10 10:31:36.022 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-10 10:31:36.022 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-10 10:31:36.022 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-10 10:31:36.022 DEBUG 2736 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-10 10:31:36.023 DEBUG 2736 --- [http-nio-8090-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=18999177256, password=18999177256)]
2025-05-10 10:31:36.023  INFO 2736 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:31:36.027  INFO 2736 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:31:36.027  INFO 2736 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:31:36.095 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-10 10:31:36.099 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:31:36.100 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=16, username=18999177256, role=RECEPTIONIST, token= (truncated)...]
2025-05-10 10:31:36.100 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:31:36.101 DEBUG 2736 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:31:36.556 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10
2025-05-10 10:31:36.556 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/rooms/types
2025-05-10 10:31:36.556 DEBUG 2736 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:31:36.556 DEBUG 2736 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:31:36.558  INFO 2736 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:31:36.558  INFO 2736 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:31:36.562  INFO 2736 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:31:36.562  INFO 2736 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:31:36.562 DEBUG 2736 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:31:36.563  INFO 2736 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:31:36.563 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=0&size=10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:31:36.563  INFO 2736 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:31:36.563 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=0&size=10
2025-05-10 10:31:36.563 DEBUG 2736 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:31:36.563 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=0&size=10", parameters={masked}
2025-05-10 10:31:36.564 DEBUG 2736 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:31:36.564 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/rooms/types] with attributes [permitAll]
2025-05-10 10:31:36.564 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/rooms/types
2025-05-10 10:31:36.564 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/rooms/types", parameters={}
2025-05-10 10:31:36.564 DEBUG 2736 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.RoomController#getAllRoomTypes()
2025-05-10 10:31:36.564  INFO 2736 --- [http-nio-8090-exec-4] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 10, Status: null, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:31:36.565 DEBUG 2736 --- [http-nio-8090-exec-4] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=10
2025-05-10 10:31:36.574 DEBUG 2736 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=10, TotalElements=37, TotalPages=4
2025-05-10 10:31:36.576 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:31:36.576 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 10:31:36.577 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:31:36.578 DEBUG 2736 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:31:36.593 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:31:36.593 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{area=null, amenities=[无限量矿泉水、咖啡、茶叶等], availableCount=20, images=[], name=行政套房, des (truncated)...]
2025-05-10 10:31:36.594 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:31:36.595 DEBUG 2736 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:31:36.817 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 10:31:36.817 DEBUG 2736 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:31:36.819  INFO 2736 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:31:36.821  INFO 2736 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:31:36.821  INFO 2736 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:31:36.821 DEBUG 2736 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:31:36.822 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:31:36.822 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 10:31:36.822 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 10:31:36.822 DEBUG 2736 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 10:31:36.865  INFO 2736 --- [http-nio-8090-exec-8] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:31:36.868  INFO 2736 --- [http-nio-8090-exec-8] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 10:31:36.868  INFO 2736 --- [http-nio-8090-exec-8] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 10:31:36.873  INFO 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 10:31:36.877  INFO 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 10:31:36.877 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 10:31:36.877  INFO 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 10:31:36.879  INFO 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:31:36.882  INFO 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 10:31:36.882  INFO 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 10:31:36.883  INFO 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 10:31:36.902  INFO 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 10:31:36.902 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 10:31:36.902 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 10:31:36.902 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 10:31:36.902 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 10:31:36.902 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 10:31:36.902 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 10:31:36.902 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 10:31:36.902 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 10:31:36.902 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 10:31:36.902 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 10:31:36.902 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 10:31:36.903 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 10:31:36.903 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 10:31:36.903 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 10:31:36.903 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 10:31:36.903 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 10:31:36.903 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 10:31:36.903 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 10:31:36.903 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 10:31:36.903 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 10:31:36.903 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 10:31:36.904 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 10:31:36.904 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 10:31:36.904 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 10:31:36.904 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 10:31:36.904 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 10:31:36.904 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 10:31:36.904 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 10:31:36.904 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 10:31:36.904 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 10:31:36.904 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 10:31:36.904 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 10:31:36.904 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 10:31:36.904 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 10:31:36.904 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 10:31:36.905 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 10:31:36.905 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 10:31:36.905  INFO 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 10:31:36.907  INFO 2736 --- [http-nio-8090-exec-8] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:31:36.910  INFO 2736 --- [http-nio-8090-exec-8] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 10:31:36.910  INFO 2736 --- [http-nio-8090-exec-8] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 10:31:36.913  INFO 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:31:36.916  INFO 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 10:31:36.916  INFO 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 10:31:36.943  INFO 2736 --- [http-nio-8090-exec-8] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 17, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 10:31:36.943  INFO 2736 --- [http-nio-8090-exec-8] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 17
2025-05-10 10:31:36.943  INFO 2736 --- [http-nio-8090-exec-8] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 10:31:36.943  INFO 2736 --- [http-nio-8090-exec-8] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 10:31:36.946  INFO 2736 --- [http-nio-8090-exec-8] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 21
2025-05-10 10:31:36.946  INFO 2736 --- [http-nio-8090-exec-8] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 10:31:36.948 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:31:36.949 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 10:31:36.950 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:31:36.950 DEBUG 2736 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:31:36.962 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkin/today-stats
2025-05-10 10:31:36.963 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 10:31:36.963 DEBUG 2736 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:31:36.963 DEBUG 2736 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:31:36.964  INFO 2736 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:31:36.964  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:31:36.966  INFO 2736 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:31:36.966  INFO 2736 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:31:36.967  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:31:36.967 DEBUG 2736 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:31:36.967  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:31:36.967 DEBUG 2736 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:31:36.967 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:31:36.967 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/checkin/today-stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:31:36.967 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 10:31:36.967 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/checkin/today-stats
2025-05-10 10:31:36.967 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/checkin/today-stats", parameters={}
2025-05-10 10:31:36.967 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=PENDING&pageSize=1&size=1&page=0", parameters={masked}
2025-05-10 10:31:36.967 DEBUG 2736 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CheckInController#getTodayStats()
2025-05-10 10:31:36.967 DEBUG 2736 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:31:36.969  INFO 2736 --- [http-nio-8090-exec-6] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: PENDING, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:31:36.969 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 10:31:36.976 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=4, TotalPages=4
2025-05-10 10:31:36.977 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:31:36.977 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 10:31:36.979 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:31:36.979 DEBUG 2736 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:31:36.985 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:31:36.988 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{data={todayCheckin={total=2, pending=0, completed=2, list=[CheckInRecord(id=21, checkInNumber=CI202 (truncated)...]
2025-05-10 10:31:36.989 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:31:36.989 DEBUG 2736 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:31:36.998 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 10:31:36.998 DEBUG 2736 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:31:37.000  INFO 2736 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:31:37.002  INFO 2736 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:31:37.002  INFO 2736 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:31:37.002 DEBUG 2736 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:31:37.003 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:31:37.003 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 10:31:37.003 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1", parameters={masked}
2025-05-10 10:31:37.003 DEBUG 2736 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:31:37.004  INFO 2736 --- [http-nio-8090-exec-9] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:31:37.004 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 10:31:37.010 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=13, TotalPages=13
2025-05-10 10:31:37.012 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:31:37.016 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 13 containing com.hotel.dto.Reservati (truncated)...]
2025-05-10 10:31:37.017 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:31:37.017 DEBUG 2736 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:31:41.068 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-10 10:31:41.068 DEBUG 2736 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:31:41.069 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 10:31:41.069 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-10 10:31:41.069 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-10 10:31:41.069 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-10 10:31:41.070 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-10 10:31:41.070 DEBUG 2736 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-10 10:31:41.071 DEBUG 2736 --- [http-nio-8090-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=18999177256, password=18999177256)]
2025-05-10 10:31:41.071  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:31:41.074  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:31:41.074  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:31:41.139 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-10 10:31:41.144 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:31:41.145 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=16, username=18999177256, role=RECEPTIONIST, token= (truncated)...]
2025-05-10 10:31:41.145 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:31:41.146 DEBUG 2736 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:31:41.311 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10
2025-05-10 10:31:41.311 DEBUG 2736 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:31:41.312  INFO 2736 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:31:41.315  INFO 2736 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:31:41.315  INFO 2736 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:31:41.315 DEBUG 2736 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:31:41.316 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=0&size=10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:31:41.316 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=0&size=10
2025-05-10 10:31:41.316 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=0&size=10", parameters={masked}
2025-05-10 10:31:41.316 DEBUG 2736 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:31:41.317  INFO 2736 --- [http-nio-8090-exec-2] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 10, Status: null, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:31:41.317 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=10
2025-05-10 10:31:41.324 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=10, TotalElements=37, TotalPages=4
2025-05-10 10:31:41.326 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:31:41.326 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 10:31:41.328 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:31:41.328 DEBUG 2736 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:31:41.568 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 10:31:41.568 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/rooms/types
2025-05-10 10:31:41.568 DEBUG 2736 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:31:41.568 DEBUG 2736 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:31:41.571  INFO 2736 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:31:41.571  INFO 2736 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:31:41.574  INFO 2736 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:31:41.574  INFO 2736 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:31:41.574 DEBUG 2736 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:31:41.574  INFO 2736 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:31:41.574  INFO 2736 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:31:41.574 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:31:41.574 DEBUG 2736 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:31:41.575 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 10:31:41.575 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 10:31:41.575 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/rooms/types] with attributes [permitAll]
2025-05-10 10:31:41.575 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/rooms/types
2025-05-10 10:31:41.575 DEBUG 2736 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 10:31:41.575 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/rooms/types", parameters={}
2025-05-10 10:31:41.576 DEBUG 2736 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.RoomController#getAllRoomTypes()
2025-05-10 10:31:41.596 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:31:41.596 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{area=null, amenities=[无限量矿泉水、咖啡、茶叶等], availableCount=20, images=[], name=行政套房, des (truncated)...]
2025-05-10 10:31:41.597 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:31:41.597 DEBUG 2736 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:31:41.622  INFO 2736 --- [http-nio-8090-exec-3] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:31:41.625  INFO 2736 --- [http-nio-8090-exec-3] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 10:31:41.625  INFO 2736 --- [http-nio-8090-exec-3] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 10:31:41.630  INFO 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 10:31:41.634  INFO 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 10:31:41.634 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 10:31:41.634  INFO 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 10:31:41.636  INFO 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:31:41.638  INFO 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 10:31:41.638  INFO 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 10:31:41.640  INFO 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 10:31:41.661  INFO 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 10:31:41.661 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 10:31:41.661 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 10:31:41.661 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 10:31:41.661 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 10:31:41.661 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 10:31:41.661 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 10:31:41.661 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 10:31:41.661 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 10:31:41.661 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 10:31:41.661 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 10:31:41.661 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 10:31:41.661 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 10:31:41.662 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 10:31:41.662 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 10:31:41.662 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 10:31:41.662 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 10:31:41.662 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 10:31:41.662 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 10:31:41.662 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 10:31:41.662 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 10:31:41.662 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 10:31:41.662 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 10:31:41.662 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 10:31:41.662 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 10:31:41.662 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 10:31:41.662 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 10:31:41.662 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 10:31:41.662 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 10:31:41.662 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 10:31:41.662 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 10:31:41.662 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 10:31:41.663 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 10:31:41.663 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 10:31:41.663 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 10:31:41.663 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 10:31:41.664 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 10:31:41.664 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 10:31:41.664  INFO 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 10:31:41.667  INFO 2736 --- [http-nio-8090-exec-3] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:31:41.670  INFO 2736 --- [http-nio-8090-exec-3] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 10:31:41.671  INFO 2736 --- [http-nio-8090-exec-3] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 10:31:41.673  INFO 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:31:41.676  INFO 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 10:31:41.677  INFO 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 10:31:41.691 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkin/today-stats
2025-05-10 10:31:41.691 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 10:31:41.691 DEBUG 2736 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:31:41.691 DEBUG 2736 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:31:41.692  INFO 2736 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:31:41.692  INFO 2736 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:31:41.694  INFO 2736 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:31:41.694  INFO 2736 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:31:41.694  INFO 2736 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:31:41.694  INFO 2736 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:31:41.694 DEBUG 2736 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:31:41.694 DEBUG 2736 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:31:41.695 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/checkin/today-stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:31:41.695 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:31:41.695 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/checkin/today-stats
2025-05-10 10:31:41.695 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 10:31:41.695 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/checkin/today-stats", parameters={}
2025-05-10 10:31:41.695 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=PENDING&pageSize=1&size=1&page=0", parameters={masked}
2025-05-10 10:31:41.695 DEBUG 2736 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CheckInController#getTodayStats()
2025-05-10 10:31:41.695 DEBUG 2736 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:31:41.696  INFO 2736 --- [http-nio-8090-exec-10] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: PENDING, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:31:41.696 DEBUG 2736 --- [http-nio-8090-exec-10] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 10:31:41.702  INFO 2736 --- [http-nio-8090-exec-3] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 17, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 10:31:41.702 DEBUG 2736 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=4, TotalPages=4
2025-05-10 10:31:41.702  INFO 2736 --- [http-nio-8090-exec-3] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 17
2025-05-10 10:31:41.702  INFO 2736 --- [http-nio-8090-exec-3] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 10:31:41.702  INFO 2736 --- [http-nio-8090-exec-3] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 10:31:41.704 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:31:41.704 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 10:31:41.705  INFO 2736 --- [http-nio-8090-exec-3] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 21
2025-05-10 10:31:41.705  INFO 2736 --- [http-nio-8090-exec-3] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 10:31:41.705 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:31:41.706 DEBUG 2736 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:31:41.708 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:31:41.708 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 10:31:41.709 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:31:41.709 DEBUG 2736 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:31:41.712 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:31:41.715 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{data={todayCheckin={total=2, pending=0, completed=2, list=[CheckInRecord(id=21, checkInNumber=CI202 (truncated)...]
2025-05-10 10:31:41.716 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:31:41.716 DEBUG 2736 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:31:41.729 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 10:31:41.729 DEBUG 2736 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:31:41.731  INFO 2736 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:31:41.733  INFO 2736 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:31:41.733  INFO 2736 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:31:41.733 DEBUG 2736 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:31:41.733 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:31:41.733 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 10:31:41.734 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1", parameters={masked}
2025-05-10 10:31:41.734 DEBUG 2736 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:31:41.734  INFO 2736 --- [http-nio-8090-exec-8] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:31:41.734 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 10:31:41.740 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=13, TotalPages=13
2025-05-10 10:31:41.741 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:31:41.741 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 13 containing com.hotel.dto.Reservati (truncated)...]
2025-05-10 10:31:41.742 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:31:41.742 DEBUG 2736 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:31:46.194 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/users/login
2025-05-10 10:31:46.195 DEBUG 2736 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:31:46.195 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-05-10 10:31:46.196 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 0FACCC199114921A0EACF71F29B7441E
2025-05-10 10:31:46.196 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/users/login] with attributes [permitAll]
2025-05-10 10:31:46.196 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/users/login
2025-05-10 10:31:46.196 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/users/login", parameters={}
2025-05-10 10:31:46.196 DEBUG 2736 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.UserController#login(LoginRequest)
2025-05-10 10:31:46.197 DEBUG 2736 --- [http-nio-8090-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequest(username=18999177256, password=18999177256)]
2025-05-10 10:31:46.197  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:31:46.199  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:31:46.199  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:31:46.275 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-05-10 10:31:46.279 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:31:46.279 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponse(success=true, message=登录成功, userId=16, username=18999177256, role=RECEPTIONIST, token= (truncated)...]
2025-05-10 10:31:46.281 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:31:46.281 DEBUG 2736 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:31:46.459 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10
2025-05-10 10:31:46.459 DEBUG 2736 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:31:46.460  INFO 2736 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:31:46.463  INFO 2736 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:31:46.463  INFO 2736 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:31:46.463 DEBUG 2736 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:31:46.464 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=0&size=10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:31:46.464 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=0&size=10
2025-05-10 10:31:46.465 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=0&size=10", parameters={masked}
2025-05-10 10:31:46.465 DEBUG 2736 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:31:46.466  INFO 2736 --- [http-nio-8090-exec-7] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 10, Status: null, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:31:46.466 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=10
2025-05-10 10:31:46.476 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=10, TotalElements=37, TotalPages=4
2025-05-10 10:31:46.478 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:31:46.478 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 10:31:46.479 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:31:46.480 DEBUG 2736 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:31:46.708 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 10:31:46.708 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/rooms/types
2025-05-10 10:31:46.709 DEBUG 2736 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:31:46.709 DEBUG 2736 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:31:46.710  INFO 2736 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:31:46.710  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:31:46.713  INFO 2736 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:31:46.713  INFO 2736 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:31:46.713 DEBUG 2736 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:31:46.714 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/rooms/types] with attributes [permitAll]
2025-05-10 10:31:46.714  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:31:46.714 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/rooms/types
2025-05-10 10:31:46.714  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:31:46.714 DEBUG 2736 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:31:46.714 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/rooms/types", parameters={}
2025-05-10 10:31:46.714 DEBUG 2736 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.RoomController#getAllRoomTypes()
2025-05-10 10:31:46.714 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:31:46.715 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 10:31:46.715 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 10:31:46.715 DEBUG 2736 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 10:31:46.735 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:31:46.736 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{area=null, amenities=[无限量矿泉水、咖啡、茶叶等], availableCount=20, images=[], name=行政套房, des (truncated)...]
2025-05-10 10:31:46.737 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:31:46.737 DEBUG 2736 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:31:46.767  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:31:46.769  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 10:31:46.769  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 10:31:46.775  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 10:31:46.779  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 10:31:46.780 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 10:31:46.780  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 10:31:46.782  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:31:46.784  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 10:31:46.785  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 10:31:46.786  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 10:31:46.806  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 10:31:46.806 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 10:31:46.806 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 10:31:46.806 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 10:31:46.806 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 10:31:46.806 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 10:31:46.806 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 10:31:46.806 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 10:31:46.806 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 10:31:46.806 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 10:31:46.806 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 10:31:46.806 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 10:31:46.806 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 10:31:46.806 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 10:31:46.806 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 10:31:46.806 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 10:31:46.806 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 10:31:46.806 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 10:31:46.806 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 10:31:46.806 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 10:31:46.807 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 10:31:46.807 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 10:31:46.807 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 10:31:46.807 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 10:31:46.807 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 10:31:46.807 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 10:31:46.807 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 10:31:46.808 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 10:31:46.808 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 10:31:46.808 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 10:31:46.808 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 10:31:46.808 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 10:31:46.808 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 10:31:46.808 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 10:31:46.808 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 10:31:46.808 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 10:31:46.809 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 10:31:46.809 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 10:31:46.809  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 10:31:46.811  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:31:46.814  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 10:31:46.814  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 10:31:46.817  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:31:46.819  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 10:31:46.819  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 10:31:46.840  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 17, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 10:31:46.840  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 17
2025-05-10 10:31:46.840  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 10:31:46.840  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 10:31:46.843  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 21
2025-05-10 10:31:46.843  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 10:31:46.846 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:31:46.847 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 10:31:46.848 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:31:46.848 DEBUG 2736 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:31:46.859 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkin/today-stats
2025-05-10 10:31:46.859 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 10:31:46.859 DEBUG 2736 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:31:46.859 DEBUG 2736 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:31:46.860  INFO 2736 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:31:46.860  INFO 2736 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:31:46.862  INFO 2736 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:31:46.862  INFO 2736 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:31:46.862  INFO 2736 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:31:46.862  INFO 2736 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:31:46.862 DEBUG 2736 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:31:46.862 DEBUG 2736 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:31:46.863 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/checkin/today-stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:31:46.863 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:31:46.863 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/checkin/today-stats
2025-05-10 10:31:46.863 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 10:31:46.863 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/checkin/today-stats", parameters={}
2025-05-10 10:31:46.863 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=PENDING&pageSize=1&size=1&page=0", parameters={masked}
2025-05-10 10:31:46.863 DEBUG 2736 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CheckInController#getTodayStats()
2025-05-10 10:31:46.863 DEBUG 2736 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:31:46.864  INFO 2736 --- [http-nio-8090-exec-1] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: PENDING, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:31:46.864 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 10:31:46.869 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=4, TotalPages=4
2025-05-10 10:31:46.870 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:31:46.870 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 10:31:46.871 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:31:46.871 DEBUG 2736 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:31:46.877 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:31:46.880 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{data={todayCheckin={total=2, pending=0, completed=2, list=[CheckInRecord(id=21, checkInNumber=CI202 (truncated)...]
2025-05-10 10:31:46.881 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:31:46.881 DEBUG 2736 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:31:46.890 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 10:31:46.891 DEBUG 2736 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:31:46.892  INFO 2736 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:31:46.893  INFO 2736 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:31:46.893  INFO 2736 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:31:46.893 DEBUG 2736 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:31:46.894 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:31:46.894 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 10:31:46.894 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1", parameters={masked}
2025-05-10 10:31:46.894 DEBUG 2736 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:31:46.895  INFO 2736 --- [http-nio-8090-exec-10] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:31:46.895 DEBUG 2736 --- [http-nio-8090-exec-10] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 10:31:46.900 DEBUG 2736 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=13, TotalPages=13
2025-05-10 10:31:46.901 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:31:46.901 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 13 containing com.hotel.dto.Reservati (truncated)...]
2025-05-10 10:31:46.902 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:31:46.902 DEBUG 2736 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:01.426 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10&status=confirmed&exactCheckInDate=2025-05-10&exactDate=checkIn&date=2025-05-10
2025-05-10 10:32:01.426 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10
2025-05-10 10:32:01.427 DEBUG 2736 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:01.427 DEBUG 2736 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:01.427  INFO 2736 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:01.428  INFO 2736 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:01.431  INFO 2736 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:01.431  INFO 2736 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:01.432  INFO 2736 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:01.432  INFO 2736 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:01.432 DEBUG 2736 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:01.432 DEBUG 2736 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:01.432 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=0&size=10&status=confirmed&exactCheckInDate=2025-05-10&exactDate=checkIn&date=2025-05-10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:32:01.432 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=0&size=10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:32:01.433 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=0&size=10&status=confirmed&exactCheckInDate=2025-05-10&exactDate=checkIn&date=2025-05-10
2025-05-10 10:32:01.433 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=0&size=10
2025-05-10 10:32:01.433 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=0&size=10", parameters={masked}
2025-05-10 10:32:01.433 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=0&size=10&status=confirmed&exactCheckInDate=2025-05-10&exactDate=checkIn&date=2025-05-10", parameters={masked}
2025-05-10 10:32:01.433 DEBUG 2736 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:32:01.433 DEBUG 2736 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:32:01.434  INFO 2736 --- [http-nio-8090-exec-3] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 10, Status: null, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:32:01.434  INFO 2736 --- [http-nio-8090-exec-4] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 10, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:32:01.434 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=10
2025-05-10 10:32:01.435 DEBUG 2736 --- [http-nio-8090-exec-4] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=10
2025-05-10 10:32:01.442 DEBUG 2736 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=10, TotalElements=13, TotalPages=2
2025-05-10 10:32:01.442 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=10, TotalElements=37, TotalPages=4
2025-05-10 10:32:01.444 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:01.444 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:01.444 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 2 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 10:32:01.444 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 10:32:01.446 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:01.446 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:01.446 DEBUG 2736 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:01.446 DEBUG 2736 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:01.673 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 10:32:01.673 DEBUG 2736 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:01.674  INFO 2736 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:01.677  INFO 2736 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:01.677  INFO 2736 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:01.677 DEBUG 2736 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:01.677 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:32:01.677 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 10:32:01.677 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 10:32:01.678 DEBUG 2736 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 10:32:01.720  INFO 2736 --- [http-nio-8090-exec-8] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:32:01.723  INFO 2736 --- [http-nio-8090-exec-8] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 10:32:01.723  INFO 2736 --- [http-nio-8090-exec-8] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 10:32:01.730  INFO 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 10:32:01.733  INFO 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 10:32:01.733 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 10:32:01.733  INFO 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 10:32:01.735  INFO 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:32:01.737  INFO 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 10:32:01.737  INFO 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 10:32:01.739  INFO 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 10:32:01.756  INFO 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 10:32:01.756 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 10:32:01.757 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 10:32:01.757 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 10:32:01.757 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 10:32:01.757 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 10:32:01.757 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 10:32:01.757 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 10:32:01.757 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 10:32:01.757 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 10:32:01.757 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 10:32:01.757 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 10:32:01.757 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 10:32:01.757 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 10:32:01.757 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 10:32:01.757 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 10:32:01.757 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 10:32:01.757 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 10:32:01.757 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 10:32:01.757 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 10:32:01.757 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 10:32:01.757 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 10:32:01.758 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 10:32:01.758 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 10:32:01.758 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 10:32:01.758 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 10:32:01.758 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 10:32:01.758 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 10:32:01.758 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 10:32:01.758 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 10:32:01.758 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 10:32:01.758 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 10:32:01.759 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 10:32:01.759 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 10:32:01.759 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 10:32:01.759 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 10:32:01.759 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 10:32:01.759 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 10:32:01.759  INFO 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 10:32:01.761  INFO 2736 --- [http-nio-8090-exec-8] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:32:01.763  INFO 2736 --- [http-nio-8090-exec-8] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 10:32:01.764  INFO 2736 --- [http-nio-8090-exec-8] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 10:32:01.766  INFO 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:32:01.769  INFO 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 10:32:01.769  INFO 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 10:32:01.789  INFO 2736 --- [http-nio-8090-exec-8] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 17, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 10:32:01.789  INFO 2736 --- [http-nio-8090-exec-8] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 17
2025-05-10 10:32:01.789  INFO 2736 --- [http-nio-8090-exec-8] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 10:32:01.789  INFO 2736 --- [http-nio-8090-exec-8] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 10:32:01.791  INFO 2736 --- [http-nio-8090-exec-8] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 21
2025-05-10 10:32:01.792  INFO 2736 --- [http-nio-8090-exec-8] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 10:32:01.794 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:01.794 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 10:32:01.795 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:01.795 DEBUG 2736 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:01.860 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 10:32:01.860 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkin/today-stats
2025-05-10 10:32:01.861 DEBUG 2736 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:01.861 DEBUG 2736 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:01.862  INFO 2736 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:01.862  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:01.863  INFO 2736 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:01.863  INFO 2736 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:01.864 DEBUG 2736 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:01.864  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:01.864  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:01.864 DEBUG 2736 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:01.864 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:32:01.864 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 10:32:01.864 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/checkin/today-stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:32:01.864 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=PENDING&pageSize=1&size=1&page=0", parameters={masked}
2025-05-10 10:32:01.864 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/checkin/today-stats
2025-05-10 10:32:01.864 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/checkin/today-stats", parameters={}
2025-05-10 10:32:01.864 DEBUG 2736 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:32:01.864 DEBUG 2736 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CheckInController#getTodayStats()
2025-05-10 10:32:01.865  INFO 2736 --- [http-nio-8090-exec-7] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: PENDING, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:32:01.865 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 10:32:01.872 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=4, TotalPages=4
2025-05-10 10:32:01.873 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:01.874 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 10:32:01.875 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:01.875 DEBUG 2736 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:01.879 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:01.881 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{data={todayCheckin={total=2, pending=0, completed=2, list=[CheckInRecord(id=21, checkInNumber=CI202 (truncated)...]
2025-05-10 10:32:01.882 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:01.882 DEBUG 2736 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:01.893 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 10:32:01.893 DEBUG 2736 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:01.895  INFO 2736 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:01.896  INFO 2736 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:01.896  INFO 2736 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:01.896 DEBUG 2736 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:01.897 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:32:01.897 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 10:32:01.897 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1", parameters={masked}
2025-05-10 10:32:01.897 DEBUG 2736 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:32:01.898  INFO 2736 --- [http-nio-8090-exec-9] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:32:01.898 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 10:32:01.903 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=13, TotalPages=13
2025-05-10 10:32:01.905 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:01.905 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 13 containing com.hotel.dto.Reservati (truncated)...]
2025-05-10 10:32:01.906 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:01.906 DEBUG 2736 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:04.379 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10&status=pending
2025-05-10 10:32:04.380 DEBUG 2736 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:04.382  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:04.384  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:04.384  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:04.384 DEBUG 2736 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:04.385 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=0&size=10&status=pending] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:32:04.385 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=0&size=10&status=pending
2025-05-10 10:32:04.385 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=0&size=10&status=pending", parameters={masked}
2025-05-10 10:32:04.385 DEBUG 2736 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:32:04.386  INFO 2736 --- [http-nio-8090-exec-5] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 10, Status: pending, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:32:04.386 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=10
2025-05-10 10:32:04.389 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=10, TotalElements=4, TotalPages=1
2025-05-10 10:32:04.391 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:04.392 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 1 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 10:32:04.393 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:04.394 DEBUG 2736 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:04.625 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 10:32:04.625 DEBUG 2736 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:04.627  INFO 2736 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:04.629  INFO 2736 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:04.629  INFO 2736 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:04.629 DEBUG 2736 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:04.630 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:32:04.630 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 10:32:04.630 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 10:32:04.630 DEBUG 2736 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 10:32:04.677  INFO 2736 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:32:04.680  INFO 2736 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 10:32:04.680  INFO 2736 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 10:32:04.686  INFO 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 10:32:04.690  INFO 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 10:32:04.690 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 10:32:04.690  INFO 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 10:32:04.692  INFO 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:32:04.695  INFO 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 10:32:04.695  INFO 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 10:32:04.698  INFO 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 10:32:04.723  INFO 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 10:32:04.723 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 10:32:04.723 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 10:32:04.723 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 10:32:04.723 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 10:32:04.723 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 10:32:04.723 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 10:32:04.723 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 10:32:04.724 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 10:32:04.724 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 10:32:04.724 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 10:32:04.724 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 10:32:04.726 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 10:32:04.726 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 10:32:04.726 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 10:32:04.726 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 10:32:04.726 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 10:32:04.726 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 10:32:04.726 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 10:32:04.726 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 10:32:04.726 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 10:32:04.726 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 10:32:04.726 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 10:32:04.726 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 10:32:04.726 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 10:32:04.726 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 10:32:04.726 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 10:32:04.726 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 10:32:04.726 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 10:32:04.726 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 10:32:04.726 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 10:32:04.726 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 10:32:04.726 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 10:32:04.727 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 10:32:04.727 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 10:32:04.727 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 10:32:04.727 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 10:32:04.727 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 10:32:04.727  INFO 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 10:32:04.730  INFO 2736 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:32:04.733  INFO 2736 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 10:32:04.733  INFO 2736 --- [http-nio-8090-exec-1] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 10:32:04.736  INFO 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:32:04.739  INFO 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 10:32:04.739  INFO 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 10:32:04.759 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkin/today-stats
2025-05-10 10:32:04.759 DEBUG 2736 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:04.759 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 10:32:04.759 DEBUG 2736 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:04.760  INFO 2736 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:04.760  INFO 2736 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:04.762  INFO 2736 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:04.762  INFO 2736 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:04.762  INFO 2736 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:04.762  INFO 2736 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:04.762 DEBUG 2736 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:04.762 DEBUG 2736 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:04.763 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:32:04.763 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/checkin/today-stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:32:04.763 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 10:32:04.763 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/checkin/today-stats
2025-05-10 10:32:04.763 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/checkin/today-stats", parameters={}
2025-05-10 10:32:04.763 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=PENDING&pageSize=1&size=1&page=0", parameters={masked}
2025-05-10 10:32:04.763 DEBUG 2736 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CheckInController#getTodayStats()
2025-05-10 10:32:04.763 DEBUG 2736 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:32:04.764  INFO 2736 --- [http-nio-8090-exec-10] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: PENDING, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:32:04.765 DEBUG 2736 --- [http-nio-8090-exec-10] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 10:32:04.766  INFO 2736 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 17, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 10:32:04.766  INFO 2736 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 17
2025-05-10 10:32:04.766  INFO 2736 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 10:32:04.766  INFO 2736 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 10:32:04.769  INFO 2736 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 21
2025-05-10 10:32:04.769  INFO 2736 --- [http-nio-8090-exec-1] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 10:32:04.771 DEBUG 2736 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=4, TotalPages=4
2025-05-10 10:32:04.772 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:04.772 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 10:32:04.773 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:04.774 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:04.774 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 10:32:04.774 DEBUG 2736 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:04.775 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:04.775 DEBUG 2736 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:04.782 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:04.785 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{data={todayCheckin={total=2, pending=0, completed=2, list=[CheckInRecord(id=21, checkInNumber=CI202 (truncated)...]
2025-05-10 10:32:04.787 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:04.787 DEBUG 2736 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:04.803 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 10:32:04.803 DEBUG 2736 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:04.805  INFO 2736 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:04.807  INFO 2736 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:04.807  INFO 2736 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:04.807 DEBUG 2736 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:04.808 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:32:04.808 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 10:32:04.808 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1", parameters={masked}
2025-05-10 10:32:04.808 DEBUG 2736 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:32:04.810  INFO 2736 --- [http-nio-8090-exec-4] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:32:04.810 DEBUG 2736 --- [http-nio-8090-exec-4] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 10:32:04.816 DEBUG 2736 --- [http-nio-8090-exec-4] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=13, TotalPages=13
2025-05-10 10:32:04.817 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:04.818 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 13 containing com.hotel.dto.Reservati (truncated)...]
2025-05-10 10:32:04.819 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:04.819 DEBUG 2736 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:09.045 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/reservations/34/confirm
2025-05-10 10:32:09.046 DEBUG 2736 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:09.047  INFO 2736 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:09.050  INFO 2736 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:09.050  INFO 2736 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:09.050 DEBUG 2736 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:09.050 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/reservations/34/confirm] with attributes [authenticated]
2025-05-10 10:32:09.050 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/reservations/34/confirm
2025-05-10 10:32:09.050 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/reservations/34/confirm", parameters={}
2025-05-10 10:32:09.051 DEBUG 2736 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#confirmReservation(Long)
2025-05-10 10:32:09.124 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:09.125 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=预订确认成功, data=ReservationDTO(id=34, roomTypeName=家庭套房, ro (truncated)...]
2025-05-10 10:32:09.127 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:09.128 DEBUG 2736 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:09.309 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10&status=pending
2025-05-10 10:32:09.309 DEBUG 2736 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:09.310  INFO 2736 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:09.313  INFO 2736 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:09.313  INFO 2736 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:09.313 DEBUG 2736 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:09.313 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=0&size=10&status=pending] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:32:09.313 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=0&size=10&status=pending
2025-05-10 10:32:09.314 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=0&size=10&status=pending", parameters={masked}
2025-05-10 10:32:09.314 DEBUG 2736 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:32:09.315  INFO 2736 --- [http-nio-8090-exec-8] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 10, Status: pending, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:32:09.315 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=10
2025-05-10 10:32:09.319 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=10, TotalElements=3, TotalPages=1
2025-05-10 10:32:09.321 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:09.322 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 1 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 10:32:09.323 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:09.323 DEBUG 2736 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:09.448 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 10:32:09.448 DEBUG 2736 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:09.449  INFO 2736 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:09.451  INFO 2736 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:09.452  INFO 2736 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:09.452 DEBUG 2736 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:09.452 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:32:09.452 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 10:32:09.452 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 10:32:09.453 DEBUG 2736 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 10:32:09.500  INFO 2736 --- [http-nio-8090-exec-7] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:32:09.502  INFO 2736 --- [http-nio-8090-exec-7] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 10:32:09.502  INFO 2736 --- [http-nio-8090-exec-7] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 10:32:09.508  INFO 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 10:32:09.512  INFO 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 10:32:09.513 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 10:32:09.513  INFO 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 10:32:09.515  INFO 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:32:09.516  INFO 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 10:32:09.516  INFO 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 10:32:09.518  INFO 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 10:32:09.537  INFO 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 10:32:09.537 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 10:32:09.537 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 10:32:09.537 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 10:32:09.537 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 10:32:09.537 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 10:32:09.537 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 10:32:09.537 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 10:32:09.537 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 10:32:09.537 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 10:32:09.538 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 10:32:09.538 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 10:32:09.538 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 10:32:09.538 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 10:32:09.538 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 10:32:09.538 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 10:32:09.538 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 10:32:09.538 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 10:32:09.538 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 10:32:09.538 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 10:32:09.538 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 10:32:09.538 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 10:32:09.538 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 10:32:09.538 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 10:32:09.538 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 10:32:09.538 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 10:32:09.538 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 10:32:09.538 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 10:32:09.538 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 10:32:09.538 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 10:32:09.538 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 10:32:09.538 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 10:32:09.538 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 10:32:09.538 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 10:32:09.538 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 10:32:09.538 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 10:32:09.538 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 10:32:09.538 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 10:32:09.539  INFO 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 10:32:09.541  INFO 2736 --- [http-nio-8090-exec-7] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:32:09.544  INFO 2736 --- [http-nio-8090-exec-7] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 10:32:09.544  INFO 2736 --- [http-nio-8090-exec-7] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 10:32:09.546  INFO 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:32:09.549  INFO 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 10:32:09.549  INFO 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 10:32:09.572  INFO 2736 --- [http-nio-8090-exec-7] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 17, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 10:32:09.572  INFO 2736 --- [http-nio-8090-exec-7] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 17
2025-05-10 10:32:09.572  INFO 2736 --- [http-nio-8090-exec-7] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 10:32:09.572  INFO 2736 --- [http-nio-8090-exec-7] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 10:32:09.576  INFO 2736 --- [http-nio-8090-exec-7] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 21
2025-05-10 10:32:09.576  INFO 2736 --- [http-nio-8090-exec-7] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 10:32:09.579 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:09.579 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 10:32:09.580 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:09.581 DEBUG 2736 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:09.651 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkin/today-stats
2025-05-10 10:32:09.652 DEBUG 2736 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:09.652 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 10:32:09.652 DEBUG 2736 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:09.652  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:09.653  INFO 2736 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:09.655  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:09.655  INFO 2736 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:09.655  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:09.655  INFO 2736 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:09.655 DEBUG 2736 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:09.655 DEBUG 2736 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:09.655 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:32:09.655 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/checkin/today-stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:32:09.655 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 10:32:09.655 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/checkin/today-stats
2025-05-10 10:32:09.655 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/checkin/today-stats", parameters={}
2025-05-10 10:32:09.655 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=PENDING&pageSize=1&size=1&page=0", parameters={masked}
2025-05-10 10:32:09.656 DEBUG 2736 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CheckInController#getTodayStats()
2025-05-10 10:32:09.656 DEBUG 2736 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:32:09.656  INFO 2736 --- [http-nio-8090-exec-9] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: PENDING, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:32:09.656 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 10:32:09.662 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=3, TotalPages=3
2025-05-10 10:32:09.663 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:09.663 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 3 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 10:32:09.664 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:09.664 DEBUG 2736 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:09.669 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:09.671 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{data={todayCheckin={total=2, pending=0, completed=2, list=[CheckInRecord(id=21, checkInNumber=CI202 (truncated)...]
2025-05-10 10:32:09.672 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:09.672 DEBUG 2736 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:09.680 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 10:32:09.681 DEBUG 2736 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:09.682  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:09.684  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:09.684  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:09.684 DEBUG 2736 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:09.685 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:32:09.685 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 10:32:09.685 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1", parameters={masked}
2025-05-10 10:32:09.685 DEBUG 2736 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:32:09.686  INFO 2736 --- [http-nio-8090-exec-5] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:32:09.686 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 10:32:09.691 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=14, TotalPages=14
2025-05-10 10:32:09.692 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:09.693 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 14 containing com.hotel.dto.Reservati (truncated)...]
2025-05-10 10:32:09.694 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:09.694 DEBUG 2736 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:12.486 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/reservations/31/confirm
2025-05-10 10:32:12.487 DEBUG 2736 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:12.488  INFO 2736 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:12.490  INFO 2736 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:12.490  INFO 2736 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:12.491 DEBUG 2736 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:12.491 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/reservations/31/confirm] with attributes [authenticated]
2025-05-10 10:32:12.491 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/reservations/31/confirm
2025-05-10 10:32:12.491 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : POST "/api/reservations/31/confirm", parameters={}
2025-05-10 10:32:12.492 DEBUG 2736 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#confirmReservation(Long)
2025-05-10 10:32:12.511 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:12.511 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=预订确认成功, data=ReservationDTO(id=31, roomTypeName=行政套房, ro (truncated)...]
2025-05-10 10:32:12.512 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:12.512 DEBUG 2736 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:12.749 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10&status=pending
2025-05-10 10:32:12.750 DEBUG 2736 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:12.750  INFO 2736 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:12.753  INFO 2736 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:12.753  INFO 2736 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:12.753 DEBUG 2736 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:12.754 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=0&size=10&status=pending] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:32:12.754 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=0&size=10&status=pending
2025-05-10 10:32:12.754 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=0&size=10&status=pending", parameters={masked}
2025-05-10 10:32:12.754 DEBUG 2736 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:32:12.755  INFO 2736 --- [http-nio-8090-exec-10] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 10, Status: pending, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:32:12.755 DEBUG 2736 --- [http-nio-8090-exec-10] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=10
2025-05-10 10:32:12.759 DEBUG 2736 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=10, TotalElements=2, TotalPages=1
2025-05-10 10:32:12.760 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:12.761 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 1 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 10:32:12.762 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:12.763 DEBUG 2736 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:12.844 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 10:32:12.844 DEBUG 2736 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:12.845  INFO 2736 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:12.847  INFO 2736 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:12.847  INFO 2736 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:12.848 DEBUG 2736 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:12.848 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:32:12.848 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 10:32:12.849 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 10:32:12.849 DEBUG 2736 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 10:32:12.891  INFO 2736 --- [http-nio-8090-exec-2] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:32:12.892  INFO 2736 --- [http-nio-8090-exec-2] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 10:32:12.893  INFO 2736 --- [http-nio-8090-exec-2] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 10:32:12.898  INFO 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 10:32:12.901  INFO 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 10:32:12.901 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 10:32:12.901  INFO 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 10:32:12.903  INFO 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:32:12.905  INFO 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 10:32:12.905  INFO 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 10:32:12.906  INFO 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 10:32:12.923  INFO 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 10:32:12.923 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 10:32:12.923 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 10:32:12.923 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 10:32:12.923 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 10:32:12.923 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 10:32:12.923 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 10:32:12.923 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 10:32:12.923 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 10:32:12.923 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 10:32:12.923 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 10:32:12.923 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 10:32:12.923 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 10:32:12.923 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 10:32:12.924 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 10:32:12.924 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 10:32:12.924 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 10:32:12.924 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 10:32:12.924 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 10:32:12.924 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 10:32:12.924 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 10:32:12.924 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 10:32:12.925 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 10:32:12.925 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 10:32:12.925 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 10:32:12.925 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 10:32:12.925 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 10:32:12.925 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 10:32:12.925 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 10:32:12.925 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 10:32:12.925 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 10:32:12.925 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 10:32:12.925 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 10:32:12.925 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 10:32:12.925 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 10:32:12.926 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 10:32:12.926 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 10:32:12.926 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 10:32:12.926  INFO 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 10:32:12.928  INFO 2736 --- [http-nio-8090-exec-2] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:32:12.930  INFO 2736 --- [http-nio-8090-exec-2] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 10:32:12.930  INFO 2736 --- [http-nio-8090-exec-2] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 10:32:12.933  INFO 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:32:12.936  INFO 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 10:32:12.936  INFO 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 10:32:12.955  INFO 2736 --- [http-nio-8090-exec-2] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 17, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 10:32:12.956  INFO 2736 --- [http-nio-8090-exec-2] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 17
2025-05-10 10:32:12.956  INFO 2736 --- [http-nio-8090-exec-2] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 10:32:12.956  INFO 2736 --- [http-nio-8090-exec-2] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 10:32:12.958  INFO 2736 --- [http-nio-8090-exec-2] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 21
2025-05-10 10:32:12.958  INFO 2736 --- [http-nio-8090-exec-2] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 10:32:12.960 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:12.960 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 10:32:12.961 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:12.961 DEBUG 2736 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:13.088 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkin/today-stats
2025-05-10 10:32:13.089 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 10:32:13.089 DEBUG 2736 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:13.089 DEBUG 2736 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:13.089  INFO 2736 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:13.090  INFO 2736 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:13.092  INFO 2736 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:13.092  INFO 2736 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:13.092  INFO 2736 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:13.092  INFO 2736 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:13.092 DEBUG 2736 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:13.092 DEBUG 2736 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:13.092 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/checkin/today-stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:32:13.092 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:32:13.092 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/checkin/today-stats
2025-05-10 10:32:13.092 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 10:32:13.093 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/checkin/today-stats", parameters={}
2025-05-10 10:32:13.093 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=PENDING&pageSize=1&size=1&page=0", parameters={masked}
2025-05-10 10:32:13.093 DEBUG 2736 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CheckInController#getTodayStats()
2025-05-10 10:32:13.093 DEBUG 2736 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:32:13.093  INFO 2736 --- [http-nio-8090-exec-3] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: PENDING, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:32:13.094 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 10:32:13.097 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=2, TotalPages=2
2025-05-10 10:32:13.100 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:13.100 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 2 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 10:32:13.100 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:13.101 DEBUG 2736 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:13.105 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:13.108 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{data={todayCheckin={total=2, pending=0, completed=2, list=[CheckInRecord(id=21, checkInNumber=CI202 (truncated)...]
2025-05-10 10:32:13.109 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:13.109 DEBUG 2736 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:13.120 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 10:32:13.121 DEBUG 2736 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:13.121  INFO 2736 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:13.123  INFO 2736 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:13.123  INFO 2736 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:13.123 DEBUG 2736 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:13.125 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:32:13.125 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 10:32:13.125 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1", parameters={masked}
2025-05-10 10:32:13.125 DEBUG 2736 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:32:13.125  INFO 2736 --- [http-nio-8090-exec-8] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:32:13.126 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 10:32:13.130 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=15, TotalPages=15
2025-05-10 10:32:13.132 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:13.132 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 15 containing com.hotel.dto.Reservati (truncated)...]
2025-05-10 10:32:13.133 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:13.133 DEBUG 2736 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:15.529 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/reservations/32/confirm
2025-05-10 10:32:15.530 DEBUG 2736 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:15.531  INFO 2736 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:15.532  INFO 2736 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:15.533  INFO 2736 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:15.533 DEBUG 2736 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:15.533 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/reservations/32/confirm] with attributes [authenticated]
2025-05-10 10:32:15.534 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/reservations/32/confirm
2025-05-10 10:32:15.534 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : POST "/api/reservations/32/confirm", parameters={}
2025-05-10 10:32:15.534 DEBUG 2736 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#confirmReservation(Long)
2025-05-10 10:32:15.550 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:15.551 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=预订确认成功, data=ReservationDTO(id=32, roomTypeName=家庭套房, ro (truncated)...]
2025-05-10 10:32:15.552 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:15.552 DEBUG 2736 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:15.795 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10&status=pending
2025-05-10 10:32:15.795 DEBUG 2736 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:15.796  INFO 2736 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:15.798  INFO 2736 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:15.798  INFO 2736 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:15.798 DEBUG 2736 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:15.798 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=0&size=10&status=pending] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:32:15.798 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=0&size=10&status=pending
2025-05-10 10:32:15.798 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=0&size=10&status=pending", parameters={masked}
2025-05-10 10:32:15.798 DEBUG 2736 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:32:15.798  INFO 2736 --- [http-nio-8090-exec-9] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 10, Status: pending, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:32:15.799 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=10
2025-05-10 10:32:15.802 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=10, TotalElements=1, TotalPages=1
2025-05-10 10:32:15.803 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:15.805 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 1 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 10:32:15.805 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:15.805 DEBUG 2736 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:15.871 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 10:32:15.872 DEBUG 2736 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:15.872  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:15.874  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:15.874  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:15.874 DEBUG 2736 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:15.875 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:32:15.875 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 10:32:15.875 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 10:32:15.875 DEBUG 2736 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 10:32:15.914  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:32:15.916  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 10:32:15.916  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 10:32:15.923  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 10:32:15.927  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 10:32:15.927 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 10:32:15.927  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 10:32:15.929  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:32:15.932  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 10:32:15.932  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 10:32:15.934  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 10:32:15.953  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 10:32:15.953 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 10:32:15.953 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 10:32:15.953 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 10:32:15.953 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 10:32:15.953 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 10:32:15.953 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 10:32:15.953 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 10:32:15.953 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 10:32:15.953 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 10:32:15.953 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 10:32:15.953 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 10:32:15.953 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 10:32:15.953 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 10:32:15.954 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 10:32:15.954 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 10:32:15.954 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 10:32:15.954 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 10:32:15.954 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 10:32:15.954 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 10:32:15.954 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 10:32:15.954 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 10:32:15.954 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 10:32:15.954 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 10:32:15.954 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 10:32:15.954 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 10:32:15.955 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 10:32:15.955 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 10:32:15.955 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 10:32:15.955 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 10:32:15.955 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 10:32:15.955 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 10:32:15.955 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 10:32:15.955 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 10:32:15.955 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 10:32:15.955 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 10:32:15.956 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 10:32:15.956 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 10:32:15.956  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 10:32:15.958  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:32:15.961  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 10:32:15.961  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 10:32:15.964  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:32:15.966  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 10:32:15.966  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 10:32:15.986  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 17, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 10:32:15.986  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 17
2025-05-10 10:32:15.986  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 10:32:15.986  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 10:32:15.989  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 21
2025-05-10 10:32:15.989  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 10:32:15.992 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:15.992 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 10:32:15.993 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:15.993 DEBUG 2736 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:16.136 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 10:32:16.136 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkin/today-stats
2025-05-10 10:32:16.136 DEBUG 2736 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:16.136 DEBUG 2736 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:16.137  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:16.137  INFO 2736 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:16.139  INFO 2736 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:16.139  INFO 2736 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:16.139 DEBUG 2736 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:16.140  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:16.140  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:16.140 DEBUG 2736 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:16.140 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:32:16.140 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 10:32:16.140 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/checkin/today-stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:32:16.140 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=PENDING&pageSize=1&size=1&page=0", parameters={masked}
2025-05-10 10:32:16.140 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/checkin/today-stats
2025-05-10 10:32:16.140 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/checkin/today-stats", parameters={}
2025-05-10 10:32:16.141 DEBUG 2736 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CheckInController#getTodayStats()
2025-05-10 10:32:16.141 DEBUG 2736 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:32:16.141  INFO 2736 --- [http-nio-8090-exec-1] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: PENDING, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:32:16.141 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 10:32:16.148 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=1, TotalPages=1
2025-05-10 10:32:16.150 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:16.150 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 1 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 10:32:16.151 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:16.151 DEBUG 2736 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:16.156 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:16.159 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{data={todayCheckin={total=2, pending=0, completed=2, list=[CheckInRecord(id=21, checkInNumber=CI202 (truncated)...]
2025-05-10 10:32:16.160 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:16.160 DEBUG 2736 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:16.170 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 10:32:16.170 DEBUG 2736 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:16.171  INFO 2736 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:16.173  INFO 2736 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:16.173  INFO 2736 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:16.173 DEBUG 2736 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:16.174 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:32:16.174 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 10:32:16.174 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1", parameters={masked}
2025-05-10 10:32:16.174 DEBUG 2736 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:32:16.175  INFO 2736 --- [http-nio-8090-exec-10] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:32:16.175 DEBUG 2736 --- [http-nio-8090-exec-10] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 10:32:16.182 DEBUG 2736 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=16, TotalPages=16
2025-05-10 10:32:16.183 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:16.185 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 16 containing com.hotel.dto.Reservati (truncated)...]
2025-05-10 10:32:16.186 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:16.186 DEBUG 2736 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:17.471 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10
2025-05-10 10:32:17.472 DEBUG 2736 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:17.472  INFO 2736 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:17.474  INFO 2736 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:17.475  INFO 2736 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:17.475 DEBUG 2736 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:17.475 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=0&size=10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:32:17.475 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=0&size=10
2025-05-10 10:32:17.475 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=0&size=10", parameters={masked}
2025-05-10 10:32:17.475 DEBUG 2736 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:32:17.476  INFO 2736 --- [http-nio-8090-exec-2] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 10, Status: null, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:32:17.476 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=10
2025-05-10 10:32:17.482 DEBUG 2736 --- [http-nio-8090-exec-2] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=10, TotalElements=37, TotalPages=4
2025-05-10 10:32:17.484 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:17.484 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 10:32:17.485 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:17.485 DEBUG 2736 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:17.738 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 10:32:17.738 DEBUG 2736 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:17.739  INFO 2736 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:17.741  INFO 2736 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:17.741  INFO 2736 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:17.741 DEBUG 2736 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:17.741 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:32:17.741 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 10:32:17.742 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 10:32:17.742 DEBUG 2736 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 10:32:17.787  INFO 2736 --- [http-nio-8090-exec-3] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:32:17.790  INFO 2736 --- [http-nio-8090-exec-3] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 10:32:17.790  INFO 2736 --- [http-nio-8090-exec-3] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 10:32:17.797  INFO 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 10:32:17.801  INFO 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 10:32:17.801 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 10:32:17.801  INFO 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 10:32:17.804  INFO 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:32:17.806  INFO 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 10:32:17.806  INFO 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 10:32:17.808  INFO 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 10:32:17.827  INFO 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 10:32:17.827 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 10:32:17.828 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 10:32:17.828 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 10:32:17.828 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 10:32:17.828 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 10:32:17.828 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 10:32:17.828 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 10:32:17.828 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 10:32:17.828 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 10:32:17.828 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 10:32:17.828 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 10:32:17.828 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 10:32:17.828 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 10:32:17.828 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 10:32:17.828 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 10:32:17.828 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 10:32:17.828 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 10:32:17.828 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 10:32:17.828 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 10:32:17.828 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 10:32:17.829 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 10:32:17.829 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 10:32:17.829 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 10:32:17.829 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 10:32:17.829 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 10:32:17.829 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 10:32:17.829 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 10:32:17.829 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 10:32:17.829 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 10:32:17.829 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 10:32:17.829 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 10:32:17.829 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 10:32:17.830 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 10:32:17.830 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 10:32:17.830 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 10:32:17.830 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 10:32:17.830 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 10:32:17.830  INFO 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 10:32:17.832  INFO 2736 --- [http-nio-8090-exec-3] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:32:17.835  INFO 2736 --- [http-nio-8090-exec-3] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 10:32:17.835  INFO 2736 --- [http-nio-8090-exec-3] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 10:32:17.838  INFO 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:32:17.841  INFO 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 10:32:17.841  INFO 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 10:32:17.864 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 10:32:17.865 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkin/today-stats
2025-05-10 10:32:17.865 DEBUG 2736 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:17.865 DEBUG 2736 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:17.865  INFO 2736 --- [http-nio-8090-exec-3] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 17, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 10:32:17.865  INFO 2736 --- [http-nio-8090-exec-3] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 17
2025-05-10 10:32:17.865  INFO 2736 --- [http-nio-8090-exec-3] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 10:32:17.865  INFO 2736 --- [http-nio-8090-exec-3] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 10:32:17.866  INFO 2736 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:17.866  INFO 2736 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:17.868  INFO 2736 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:17.868  INFO 2736 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:17.868  INFO 2736 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:17.868  INFO 2736 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:17.868 DEBUG 2736 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:17.868 DEBUG 2736 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:17.868 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/checkin/today-stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:32:17.868 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:32:17.869 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 10:32:17.869  INFO 2736 --- [http-nio-8090-exec-3] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 21
2025-05-10 10:32:17.869 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/checkin/today-stats
2025-05-10 10:32:17.869  INFO 2736 --- [http-nio-8090-exec-3] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 10:32:17.869 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=PENDING&pageSize=1&size=1&page=0", parameters={masked}
2025-05-10 10:32:17.869 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/checkin/today-stats", parameters={}
2025-05-10 10:32:17.869 DEBUG 2736 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CheckInController#getTodayStats()
2025-05-10 10:32:17.869 DEBUG 2736 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:32:17.870  INFO 2736 --- [http-nio-8090-exec-8] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: PENDING, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:32:17.870 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 10:32:17.871 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:17.872 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 10:32:17.873 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:17.873 DEBUG 2736 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:17.876 DEBUG 2736 --- [http-nio-8090-exec-8] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=1, TotalPages=1
2025-05-10 10:32:17.878 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:17.878 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 1 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 10:32:17.880 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:17.880 DEBUG 2736 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:17.886 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:17.889 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{data={todayCheckin={total=2, pending=0, completed=2, list=[CheckInRecord(id=21, checkInNumber=CI202 (truncated)...]
2025-05-10 10:32:17.890 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:17.891 DEBUG 2736 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:17.900 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 10:32:17.901 DEBUG 2736 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:17.902  INFO 2736 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:17.904  INFO 2736 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:17.905  INFO 2736 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:17.905 DEBUG 2736 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:17.905 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:32:17.905 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 10:32:17.905 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1", parameters={masked}
2025-05-10 10:32:17.905 DEBUG 2736 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:32:17.906  INFO 2736 --- [http-nio-8090-exec-7] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:32:17.906 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 10:32:17.911 DEBUG 2736 --- [http-nio-8090-exec-7] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=16, TotalPages=16
2025-05-10 10:32:17.913 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:17.913 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 16 containing com.hotel.dto.Reservati (truncated)...]
2025-05-10 10:32:17.914 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:17.914 DEBUG 2736 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:22.511 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/rooms/filter?status=AVAILABLE&pageSize=200&page=0&roomTypeId=4&size=200
2025-05-10 10:32:22.511 DEBUG 2736 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:22.512  INFO 2736 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:22.516  INFO 2736 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:22.517  INFO 2736 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:22.517 DEBUG 2736 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:22.517 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/rooms/filter?status=AVAILABLE&pageSize=200&page=0&roomTypeId=4&size=200] with attributes [authenticated]
2025-05-10 10:32:22.517 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/rooms/filter?status=AVAILABLE&pageSize=200&page=0&roomTypeId=4&size=200
2025-05-10 10:32:22.517 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/rooms/filter?status=AVAILABLE&pageSize=200&page=0&roomTypeId=4&size=200", parameters={masked}
2025-05-10 10:32:22.517 DEBUG 2736 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.RoomController#getRoomsWithFilters(RoomFilterDTO)
2025-05-10 10:32:22.543 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:22.543 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{number=0, size=200, totalPages=1, content=[{roomNumber=303, id=14, floor=3, roomType={name=家庭套房, id (truncated)...]
2025-05-10 10:32:22.545 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:22.545 DEBUG 2736 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:28.189 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/admin/checkin
2025-05-10 10:32:28.189 DEBUG 2736 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:28.191  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:28.193  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:28.193  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:28.193 DEBUG 2736 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:28.194 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/admin/checkin] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:32:28.194 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/admin/checkin
2025-05-10 10:32:28.194 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/admin/checkin", parameters={}
2025-05-10 10:32:28.194 DEBUG 2736 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CheckInController#checkIn(CheckInRecord)
2025-05-10 10:32:28.211 DEBUG 2736 --- [http-nio-8090-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [CheckInRecord(id=null, checkInNumber=null, roomId=48, roomNumber=504, roomType=null, guestName=奥奥对我, (truncated)...]
2025-05-10 10:32:28.223  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : Payment method not provided, defaulting to CASH for CheckInRecord with bookingId: 10
2025-05-10 10:32:28.242  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 入住登记成功: ID=23, 入住单号=CI202505100003, 预订ID=10
2025-05-10 10:32:28.256 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:28.256 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{data=CheckInRecord(id=23, checkInNumber=CI202505100003, roomId=48, roomNumber=504, roomType=家庭套房, g (truncated)...]
2025-05-10 10:32:28.257 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-05-10 10:32:28.258 DEBUG 2736 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:28.587 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?page=0&size=10
2025-05-10 10:32:28.587 DEBUG 2736 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:28.589  INFO 2736 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:28.592  INFO 2736 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:28.592  INFO 2736 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:28.593 DEBUG 2736 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:28.593 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?page=0&size=10] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:32:28.593 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?page=0&size=10
2025-05-10 10:32:28.593 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?page=0&size=10", parameters={masked}
2025-05-10 10:32:28.594 DEBUG 2736 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:32:28.594  INFO 2736 --- [http-nio-8090-exec-1] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 10, Status: null, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:32:28.594 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=10
2025-05-10 10:32:28.601 DEBUG 2736 --- [http-nio-8090-exec-1] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=10, TotalElements=37, TotalPages=4
2025-05-10 10:32:28.603 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:28.603 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 4 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 10:32:28.605 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:28.605 DEBUG 2736 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:28.852 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 10:32:28.852 DEBUG 2736 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:28.853  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:28.856  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:28.857  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:28.857 DEBUG 2736 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:28.857 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:32:28.858 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 10:32:28.858 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 10:32:28.858 DEBUG 2736 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 10:32:28.903  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:32:28.905  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 10:32:28.906  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 10:32:28.910  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 10:32:28.913  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 10:32:28.913 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 10:32:28.913  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 10:32:28.915  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:32:28.917  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 10:32:28.917  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 10:32:28.920  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 10:32:28.939  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 10:32:28.939 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 10:32:28.939 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 10:32:28.939 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 10:32:28.939 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 10:32:28.939 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 10:32:28.939 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 10:32:28.939 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 10:32:28.939 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 10:32:28.939 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 10:32:28.939 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 10:32:28.939 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 10:32:28.939 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 10:32:28.939 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 10:32:28.939 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 10:32:28.939 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 10:32:28.939 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 10:32:28.940 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 10:32:28.940 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 10:32:28.940 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 10:32:28.940 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 10:32:28.940 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 10:32:28.940 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 10:32:28.940 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 10:32:28.940 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 10:32:28.940 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 10:32:28.940 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 10:32:28.940 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 10:32:28.940 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 10:32:28.940 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 10:32:28.940 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 10:32:28.941 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 10:32:28.941 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 10:32:28.941 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 10:32:28.941 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 10:32:28.941 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 10:32:28.941 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 10:32:28.941 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 10:32:28.941  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 10:32:28.943  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:32:28.946  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 10:32:28.946  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 10:32:28.948  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:32:28.950  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 10:32:28.950  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 10:32:28.963 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 10:32:28.963 DEBUG 2736 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:28.965 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/checkin/today-stats
2025-05-10 10:32:28.965 DEBUG 2736 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:28.965  INFO 2736 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:28.966  INFO 2736 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:28.968  INFO 2736 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:28.968  INFO 2736 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:28.968  INFO 2736 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:28.968  INFO 2736 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:28.968 DEBUG 2736 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:28.968 DEBUG 2736 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:28.969 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:32:28.969 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/checkin/today-stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:32:28.969 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=PENDING&pageSize=1&size=1&page=0
2025-05-10 10:32:28.969 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/checkin/today-stats
2025-05-10 10:32:28.969 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/checkin/today-stats", parameters={}
2025-05-10 10:32:28.969 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=PENDING&pageSize=1&size=1&page=0", parameters={masked}
2025-05-10 10:32:28.969 DEBUG 2736 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CheckInController#getTodayStats()
2025-05-10 10:32:28.970 DEBUG 2736 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:32:28.970  INFO 2736 --- [http-nio-8090-exec-10] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: PENDING, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:32:28.970 DEBUG 2736 --- [http-nio-8090-exec-10] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 10:32:28.974  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 17, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 10:32:28.974  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 17
2025-05-10 10:32:28.974  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 10:32:28.974  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 10:32:28.977 DEBUG 2736 --- [http-nio-8090-exec-10] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=1, TotalPages=1
2025-05-10 10:32:28.977  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 21
2025-05-10 10:32:28.977  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 10:32:28.978 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:28.979 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 1 containing com.hotel.dto.Reservatio (truncated)...]
2025-05-10 10:32:28.979 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:28.980 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 10:32:28.980 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:28.980 DEBUG 2736 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:28.981 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:28.981 DEBUG 2736 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:28.985 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:28.990 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{data={todayCheckin={total=3, pending=0, completed=3, list=[CheckInRecord(id=21, checkInNumber=CI202 (truncated)...]
2025-05-10 10:32:28.991 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:28.991 DEBUG 2736 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:29.012 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 10:32:29.012 DEBUG 2736 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:29.013  INFO 2736 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:29.016  INFO 2736 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:29.016  INFO 2736 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:29.016 DEBUG 2736 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:29.016 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:32:29.016 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1
2025-05-10 10:32:29.016 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/reservations?status=confirmed&exactDate=checkIn&date=2025-05-10&page=0&size=1", parameters={masked}
2025-05-10 10:32:29.017 DEBUG 2736 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReservationController#getAllReservations(Pageable, String, String, String, LocalDateTime, LocalDateTime, String)
2025-05-10 10:32:29.017  INFO 2736 --- [http-nio-8090-exec-3] c.h.controller.ReservationController     : Received request for reservations - Page Index: 0, Page Size: 1, Status: confirmed, GuestName: null, GuestPhone: null, StartDate: null, EndDate: null, BookingNo: null
2025-05-10 10:32:29.018 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.controller.ReservationController     : Pageable details before service call: PageNumber=0, PageSize=1
2025-05-10 10:32:29.023 DEBUG 2736 --- [http-nio-8090-exec-3] c.h.service.impl.ReservationServiceImpl  : Repository returned Page: PageNumber=0, Size=1, TotalElements=15, TotalPages=15
2025-05-10 10:32:29.024 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:29.025 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, code=200, message=成功, data=Page 1 of 15 containing com.hotel.dto.Reservati (truncated)...]
2025-05-10 10:32:29.025 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:29.025 DEBUG 2736 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:36.431 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/cleaning/tasks
2025-05-10 10:32:36.431 DEBUG 2736 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:36.432  INFO 2736 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: cleaner
2025-05-10 10:32:36.434  INFO 2736 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : User found: cleaner, Role: CLEANER
2025-05-10 10:32:36.434  INFO 2736 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CLEANER]
2025-05-10 10:32:36.434 DEBUG 2736 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 'cleaner' 认证成功, 设置 SecurityContext
2025-05-10 10:32:36.435 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/cleaning/tasks] with attributes [authenticated]
2025-05-10 10:32:36.435 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/cleaning/tasks
2025-05-10 10:32:36.436 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/cleaning/tasks", parameters={}
2025-05-10 10:32:36.436 DEBUG 2736 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CleaningTaskController#getTasks(String, int, int)
2025-05-10 10:32:36.436  INFO 2736 --- [http-nio-8090-exec-8] c.h.controller.CleaningTaskController    : 获取清洁任务列表，参数：status=null, page=0, size=10
2025-05-10 10:32:36.437  INFO 2736 --- [http-nio-8090-exec-8] com.hotel.service.impl.TaskServiceImpl   : 开始自动生成清洁任务...
2025-05-10 10:32:36.440  INFO 2736 --- [http-nio-8090-exec-8] com.hotel.service.impl.TaskServiceImpl   : 找到 1 个需要清洁的房间
2025-05-10 10:32:36.441  INFO 2736 --- [http-nio-8090-exec-8] com.hotel.service.impl.TaskServiceImpl   : 将使用默认清洁员: 清洁人员
2025-05-10 10:32:36.443  INFO 2736 --- [http-nio-8090-exec-8] com.hotel.service.impl.TaskServiceImpl   : 房间 202 已存在未完成的清洁任务，跳过任务创建
2025-05-10 10:32:36.444  INFO 2736 --- [http-nio-8090-exec-8] com.hotel.service.impl.TaskServiceImpl   : 自动生成清洁任务完成，共创建 0 个新任务
2025-05-10 10:32:36.446  INFO 2736 --- [http-nio-8090-exec-8] com.hotel.service.impl.TaskServiceImpl   : 开始同步CLEANING状态房间为processing状态任务...
2025-05-10 10:32:36.451  INFO 2736 --- [http-nio-8090-exec-8] com.hotel.service.impl.TaskServiceImpl   : 找到 4 个正在清洁中的房间
2025-05-10 10:32:36.459  INFO 2736 --- [http-nio-8090-exec-8] com.hotel.service.impl.TaskServiceImpl   : 同步CLEANING状态房间为processing状态任务完成
2025-05-10 10:32:36.470 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:36.471 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{totalPages=3, generatedTasksCount=0, currentPage=0, content=[Task(id=32, roomNumber=421, roomType=家 (truncated)...]
2025-05-10 10:32:36.472 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:36.472 DEBUG 2736 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:36.521 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cleaning/tasks/statistics
2025-05-10 10:32:36.522 DEBUG 2736 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:36.523  INFO 2736 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: cleaner
2025-05-10 10:32:36.526  INFO 2736 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : User found: cleaner, Role: CLEANER
2025-05-10 10:32:36.526  INFO 2736 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CLEANER]
2025-05-10 10:32:36.526 DEBUG 2736 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 'cleaner' 认证成功, 设置 SecurityContext
2025-05-10 10:32:36.527 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/cleaning/tasks/statistics] with attributes [authenticated]
2025-05-10 10:32:36.527 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cleaning/tasks/statistics
2025-05-10 10:32:36.527 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/cleaning/tasks/statistics", parameters={}
2025-05-10 10:32:36.527 DEBUG 2736 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CleaningTaskController#getTaskStatistics()
2025-05-10 10:32:36.527  INFO 2736 --- [http-nio-8090-exec-4] com.hotel.service.impl.TaskServiceImpl   : 开始自动生成清洁任务...
2025-05-10 10:32:36.531  INFO 2736 --- [http-nio-8090-exec-4] com.hotel.service.impl.TaskServiceImpl   : 找到 1 个需要清洁的房间
2025-05-10 10:32:36.533  INFO 2736 --- [http-nio-8090-exec-4] com.hotel.service.impl.TaskServiceImpl   : 将使用默认清洁员: 清洁人员
2025-05-10 10:32:36.535  INFO 2736 --- [http-nio-8090-exec-4] com.hotel.service.impl.TaskServiceImpl   : 房间 202 已存在未完成的清洁任务，跳过任务创建
2025-05-10 10:32:36.535  INFO 2736 --- [http-nio-8090-exec-4] com.hotel.service.impl.TaskServiceImpl   : 自动生成清洁任务完成，共创建 0 个新任务
2025-05-10 10:32:36.541 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:36.541 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{data=TaskDTO(id=null, roomNumber=null, roomType=null, cleaner=null, priority=null, status=null, exp (truncated)...]
2025-05-10 10:32:36.542 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:36.542 DEBUG 2736 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:42.572 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/cleaning/records
2025-05-10 10:32:42.573 DEBUG 2736 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:42.573  INFO 2736 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: cleaner
2025-05-10 10:32:42.576  INFO 2736 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : User found: cleaner, Role: CLEANER
2025-05-10 10:32:42.576  INFO 2736 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CLEANER]
2025-05-10 10:32:42.576 DEBUG 2736 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 'cleaner' 认证成功, 设置 SecurityContext
2025-05-10 10:32:42.576 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/cleaning/records] with attributes [authenticated]
2025-05-10 10:32:42.576 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/cleaning/records
2025-05-10 10:32:42.576 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/cleaning/records", parameters={}
2025-05-10 10:32:42.577 DEBUG 2736 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CleaningRecordController#getCleaningRecords(String, LocalDate, LocalDate)
2025-05-10 10:32:42.639 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:42.640 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{total=21, records=[{duration=1.5小时, roomNumber=501, cleaner=清洁人员, startTime=2025-05-01T09:00, id=1, (truncated)...]
2025-05-10 10:32:42.641 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:42.641 DEBUG 2736 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:46.665 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/rooms/types
2025-05-10 10:32:46.666 DEBUG 2736 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:46.667  INFO 2736 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:46.669  INFO 2736 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:46.669  INFO 2736 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:46.669 DEBUG 2736 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:46.669 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/rooms/types] with attributes [permitAll]
2025-05-10 10:32:46.669 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/rooms/types
2025-05-10 10:32:46.670 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/rooms/types", parameters={}
2025-05-10 10:32:46.670 DEBUG 2736 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.RoomController#getAllRoomTypes()
2025-05-10 10:32:46.685 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:46.685 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{code=200, data=[{area=null, amenities=[无限量矿泉水、咖啡、茶叶等], availableCount=20, images=[], name=行政套房, des (truncated)...]
2025-05-10 10:32:46.686 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:46.686 DEBUG 2736 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:46.930 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 10:32:46.930 DEBUG 2736 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:46.931  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:46.933  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:46.933  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:46.934 DEBUG 2736 --- [http-nio-8090-exec-6] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:46.934 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:32:46.934 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 10:32:46.934 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 10:32:46.934 DEBUG 2736 --- [http-nio-8090-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 10:32:46.973  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:32:46.976  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 10:32:46.976  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 10:32:46.981  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 10:32:46.984  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 10:32:46.985 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 10:32:46.985  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 10:32:46.986  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:32:46.989  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 10:32:46.989  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 10:32:46.991  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 10:32:47.009  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 10:32:47.009 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 10:32:47.009 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 10:32:47.009 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 10:32:47.009 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 10:32:47.009 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 10:32:47.009 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 10:32:47.009 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 10:32:47.009 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 10:32:47.009 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 10:32:47.009 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 10:32:47.010 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 10:32:47.010 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 10:32:47.010 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 10:32:47.010 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 10:32:47.010 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 10:32:47.010 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 10:32:47.010 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 10:32:47.010 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 10:32:47.010 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 10:32:47.010 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 10:32:47.010 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 10:32:47.010 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 10:32:47.010 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 10:32:47.010 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 10:32:47.010 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 10:32:47.010 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 10:32:47.010 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 10:32:47.010 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 10:32:47.010 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 10:32:47.011 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 10:32:47.011 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 10:32:47.011 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 10:32:47.011 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 10:32:47.011 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 10:32:47.011 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 10:32:47.011 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 10:32:47.011 DEBUG 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 10:32:47.011  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 10:32:47.013  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:32:47.016  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 10:32:47.016  INFO 2736 --- [http-nio-8090-exec-6] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 10:32:47.018  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:32:47.021  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 10:32:47.021  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 10:32:47.043  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 17, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 10:32:47.043  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 17
2025-05-10 10:32:47.043  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 10:32:47.043  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 10:32:47.045  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 21
2025-05-10 10:32:47.045  INFO 2736 --- [http-nio-8090-exec-6] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 10:32:47.047 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:47.047 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 10:32:47.048 DEBUG 2736 --- [http-nio-8090-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:47.048 DEBUG 2736 --- [http-nio-8090-exec-6] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:49.143 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/rooms/filter?status=OCCUPIED&size=200&page=0
2025-05-10 10:32:49.144 DEBUG 2736 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:49.144  INFO 2736 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:49.146  INFO 2736 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:49.146  INFO 2736 --- [http-nio-8090-exec-1] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:49.146 DEBUG 2736 --- [http-nio-8090-exec-1] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:49.147 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/rooms/filter?status=OCCUPIED&size=200&page=0] with attributes [authenticated]
2025-05-10 10:32:49.147 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/rooms/filter?status=OCCUPIED&size=200&page=0
2025-05-10 10:32:49.147 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/rooms/filter?status=OCCUPIED&size=200&page=0", parameters={masked}
2025-05-10 10:32:49.147 DEBUG 2736 --- [http-nio-8090-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.RoomController#getRoomsWithFilters(RoomFilterDTO)
2025-05-10 10:32:49.152 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:49.153 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{number=0, size=200, totalPages=1, content=[{roomNumber=310, id=21, floor=3, roomType={name=家庭套房, id (truncated)...]
2025-05-10 10:32:49.153 DEBUG 2736 --- [http-nio-8090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:49.153 DEBUG 2736 --- [http-nio-8090-exec-1] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:53.709 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/reception/checkout/504
2025-05-10 10:32:53.709 DEBUG 2736 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:53.710  INFO 2736 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:53.712  INFO 2736 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:53.712  INFO 2736 --- [http-nio-8090-exec-10] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:53.712 DEBUG 2736 --- [http-nio-8090-exec-10] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:53.713 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [POST /api/reception/checkout/504] with attributes [authenticated]
2025-05-10 10:32:53.713 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/reception/checkout/504
2025-05-10 10:32:53.713 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : POST "/api/reception/checkout/504", parameters={}
2025-05-10 10:32:53.714 DEBUG 2736 --- [http-nio-8090-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.ReceptionController#checkOut(String)
2025-05-10 10:32:53.729 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:53.729 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{message=退房成功，房间已标记为待清洁}]
2025-05-10 10:32:53.730 DEBUG 2736 --- [http-nio-8090-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:53.730 DEBUG 2736 --- [http-nio-8090-exec-10] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:53.973 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 10:32:53.973 DEBUG 2736 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:53.973  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:53.975  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:53.975  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:53.975 DEBUG 2736 --- [http-nio-8090-exec-5] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:53.976 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:32:53.976 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 10:32:53.976 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 10:32:53.976 DEBUG 2736 --- [http-nio-8090-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 10:32:54.010  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:32:54.012  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 10:32:54.012  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 10:32:54.016  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 10:32:54.019  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 10:32:54.019 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 10:32:54.019  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 10:32:54.020  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:32:54.022  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 10:32:54.022  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 10:32:54.024  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 10:32:54.041  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 10:32:54.041 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 10:32:54.041 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 10:32:54.042 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 10:32:54.042 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 10:32:54.042 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 10:32:54.042 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 10:32:54.042 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 10:32:54.042 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 10:32:54.042 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 10:32:54.042 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 10:32:54.042 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 10:32:54.042 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 10:32:54.042 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 10:32:54.042 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 10:32:54.042 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 10:32:54.042 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 10:32:54.042 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 10:32:54.042 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 10:32:54.042 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 10:32:54.042 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 10:32:54.043 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 10:32:54.043 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 10:32:54.043 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 10:32:54.043 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 10:32:54.043 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 10:32:54.043 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 10:32:54.043 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 10:32:54.043 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 10:32:54.043 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 10:32:54.043 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 10:32:54.043 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 10:32:54.043 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 10:32:54.043 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 10:32:54.044 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 10:32:54.044 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 10:32:54.044 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 10:32:54.044 DEBUG 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 10:32:54.044  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 10:32:54.046  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:32:54.049  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 10:32:54.049  INFO 2736 --- [http-nio-8090-exec-5] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 10:32:54.051  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:32:54.053  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 10:32:54.053  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 10:32:54.073  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 17, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 10:32:54.073  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 17
2025-05-10 10:32:54.073  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 10:32:54.073  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 10:32:54.076  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 21
2025-05-10 10:32:54.076  INFO 2736 --- [http-nio-8090-exec-5] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 10:32:54.077 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:54.077 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 10:32:54.078 DEBUG 2736 --- [http-nio-8090-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:54.078 DEBUG 2736 --- [http-nio-8090-exec-5] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:54.091 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/rooms/filter?status=OCCUPIED&size=200&page=0
2025-05-10 10:32:54.091 DEBUG 2736 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:54.092  INFO 2736 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:54.093  INFO 2736 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:54.094  INFO 2736 --- [http-nio-8090-exec-2] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:54.094 DEBUG 2736 --- [http-nio-8090-exec-2] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:54.094 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/rooms/filter?status=OCCUPIED&size=200&page=0] with attributes [authenticated]
2025-05-10 10:32:54.094 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/rooms/filter?status=OCCUPIED&size=200&page=0
2025-05-10 10:32:54.094 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/rooms/filter?status=OCCUPIED&size=200&page=0", parameters={masked}
2025-05-10 10:32:54.094 DEBUG 2736 --- [http-nio-8090-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.RoomController#getRoomsWithFilters(RoomFilterDTO)
2025-05-10 10:32:54.100 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:54.100 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{number=0, size=200, totalPages=1, content=[{roomNumber=310, id=21, floor=3, roomType={name=家庭套房, id (truncated)...]
2025-05-10 10:32:54.101 DEBUG 2736 --- [http-nio-8090-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:54.101 DEBUG 2736 --- [http-nio-8090-exec-2] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:56.429 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/rooms/filter?status=NEEDS_CLEANING&size=200&page=0
2025-05-10 10:32:56.429 DEBUG 2736 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:56.429  INFO 2736 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:56.431  INFO 2736 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:56.431  INFO 2736 --- [http-nio-8090-exec-3] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:56.431 DEBUG 2736 --- [http-nio-8090-exec-3] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:56.431 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/rooms/filter?status=NEEDS_CLEANING&size=200&page=0] with attributes [authenticated]
2025-05-10 10:32:56.432 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/rooms/filter?status=NEEDS_CLEANING&size=200&page=0
2025-05-10 10:32:56.432 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/rooms/filter?status=NEEDS_CLEANING&size=200&page=0", parameters={masked}
2025-05-10 10:32:56.432 DEBUG 2736 --- [http-nio-8090-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.RoomController#getRoomsWithFilters(RoomFilterDTO)
2025-05-10 10:32:56.437 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:56.437 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{number=0, size=200, totalPages=1, content=[{roomNumber=202, id=4, floor=2, roomType={name=行政套房, id= (truncated)...]
2025-05-10 10:32:56.438 DEBUG 2736 --- [http-nio-8090-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:56.438 DEBUG 2736 --- [http-nio-8090-exec-3] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:32:58.964 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/rooms/filter?status=NEEDS_CLEANING&size=200&page=0
2025-05-10 10:32:58.965 DEBUG 2736 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:32:58.966  INFO 2736 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:32:58.968  INFO 2736 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:32:58.968  INFO 2736 --- [http-nio-8090-exec-8] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:32:58.968 DEBUG 2736 --- [http-nio-8090-exec-8] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:32:58.969 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/rooms/filter?status=NEEDS_CLEANING&size=200&page=0] with attributes [authenticated]
2025-05-10 10:32:58.969 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/rooms/filter?status=NEEDS_CLEANING&size=200&page=0
2025-05-10 10:32:58.969 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/rooms/filter?status=NEEDS_CLEANING&size=200&page=0", parameters={masked}
2025-05-10 10:32:58.969 DEBUG 2736 --- [http-nio-8090-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.RoomController#getRoomsWithFilters(RoomFilterDTO)
2025-05-10 10:32:58.977 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:32:58.977 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{number=0, size=200, totalPages=1, content=[{roomNumber=202, id=4, floor=2, roomType={name=行政套房, id= (truncated)...]
2025-05-10 10:32:58.978 DEBUG 2736 --- [http-nio-8090-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:32:58.978 DEBUG 2736 --- [http-nio-8090-exec-8] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:33:05.643 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cleaning/tasks
2025-05-10 10:33:05.643 DEBUG 2736 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:33:05.644  INFO 2736 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: cleaner
2025-05-10 10:33:05.647  INFO 2736 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : User found: cleaner, Role: CLEANER
2025-05-10 10:33:05.647  INFO 2736 --- [http-nio-8090-exec-4] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CLEANER]
2025-05-10 10:33:05.648 DEBUG 2736 --- [http-nio-8090-exec-4] c.hotel.config.JwtAuthenticationFilter   : 用户 'cleaner' 认证成功, 设置 SecurityContext
2025-05-10 10:33:05.648 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/cleaning/tasks] with attributes [authenticated]
2025-05-10 10:33:05.648 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cleaning/tasks
2025-05-10 10:33:05.649 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/cleaning/tasks", parameters={}
2025-05-10 10:33:05.649 DEBUG 2736 --- [http-nio-8090-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CleaningTaskController#getTasks(String, int, int)
2025-05-10 10:33:05.649  INFO 2736 --- [http-nio-8090-exec-4] c.h.controller.CleaningTaskController    : 获取清洁任务列表，参数：status=null, page=0, size=10
2025-05-10 10:33:05.650  INFO 2736 --- [http-nio-8090-exec-4] com.hotel.service.impl.TaskServiceImpl   : 开始自动生成清洁任务...
2025-05-10 10:33:05.656  INFO 2736 --- [http-nio-8090-exec-4] com.hotel.service.impl.TaskServiceImpl   : 找到 2 个需要清洁的房间
2025-05-10 10:33:05.658  INFO 2736 --- [http-nio-8090-exec-4] com.hotel.service.impl.TaskServiceImpl   : 将使用默认清洁员: 清洁人员
2025-05-10 10:33:05.660  INFO 2736 --- [http-nio-8090-exec-4] com.hotel.service.impl.TaskServiceImpl   : 房间 202 已存在未完成的清洁任务，跳过任务创建
2025-05-10 10:33:05.664  INFO 2736 --- [http-nio-8090-exec-4] com.hotel.service.impl.TaskServiceImpl   : 为房间 504 创建了清洁任务，分配给清洁员: 清洁人员
2025-05-10 10:33:05.664  INFO 2736 --- [http-nio-8090-exec-4] com.hotel.service.impl.TaskServiceImpl   : 自动生成清洁任务完成，共创建 1 个新任务
2025-05-10 10:33:05.669  INFO 2736 --- [http-nio-8090-exec-4] com.hotel.service.impl.TaskServiceImpl   : 开始同步CLEANING状态房间为processing状态任务...
2025-05-10 10:33:05.673  INFO 2736 --- [http-nio-8090-exec-4] com.hotel.service.impl.TaskServiceImpl   : 找到 4 个正在清洁中的房间
2025-05-10 10:33:05.687  INFO 2736 --- [http-nio-8090-exec-4] com.hotel.service.impl.TaskServiceImpl   : 同步CLEANING状态房间为processing状态任务完成
2025-05-10 10:33:05.701 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:33:05.702 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{totalPages=4, generatedTasksCount=1, currentPage=0, content=[Task(id=33, roomNumber=504, roomType=家 (truncated)...]
2025-05-10 10:33:05.703 DEBUG 2736 --- [http-nio-8090-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:33:05.704 DEBUG 2736 --- [http-nio-8090-exec-4] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:33:05.756 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/cleaning/tasks/statistics
2025-05-10 10:33:05.756 DEBUG 2736 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:33:05.756  INFO 2736 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: cleaner
2025-05-10 10:33:05.759  INFO 2736 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : User found: cleaner, Role: CLEANER
2025-05-10 10:33:05.759  INFO 2736 --- [http-nio-8090-exec-7] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_CLEANER]
2025-05-10 10:33:05.759 DEBUG 2736 --- [http-nio-8090-exec-7] c.hotel.config.JwtAuthenticationFilter   : 用户 'cleaner' 认证成功, 设置 SecurityContext
2025-05-10 10:33:05.759 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/cleaning/tasks/statistics] with attributes [authenticated]
2025-05-10 10:33:05.759 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/cleaning/tasks/statistics
2025-05-10 10:33:05.760 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/cleaning/tasks/statistics", parameters={}
2025-05-10 10:33:05.760 DEBUG 2736 --- [http-nio-8090-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.CleaningTaskController#getTaskStatistics()
2025-05-10 10:33:05.760  INFO 2736 --- [http-nio-8090-exec-7] com.hotel.service.impl.TaskServiceImpl   : 开始自动生成清洁任务...
2025-05-10 10:33:05.765  INFO 2736 --- [http-nio-8090-exec-7] com.hotel.service.impl.TaskServiceImpl   : 找到 2 个需要清洁的房间
2025-05-10 10:33:05.766  INFO 2736 --- [http-nio-8090-exec-7] com.hotel.service.impl.TaskServiceImpl   : 将使用默认清洁员: 清洁人员
2025-05-10 10:33:05.767  INFO 2736 --- [http-nio-8090-exec-7] com.hotel.service.impl.TaskServiceImpl   : 房间 202 已存在未完成的清洁任务，跳过任务创建
2025-05-10 10:33:05.769  INFO 2736 --- [http-nio-8090-exec-7] com.hotel.service.impl.TaskServiceImpl   : 房间 504 已存在未完成的清洁任务，跳过任务创建
2025-05-10 10:33:05.769  INFO 2736 --- [http-nio-8090-exec-7] com.hotel.service.impl.TaskServiceImpl   : 自动生成清洁任务完成，共创建 0 个新任务
2025-05-10 10:33:05.773 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:33:05.773 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{data=TaskDTO(id=null, roomNumber=null, roomType=null, cleaner=null, priority=null, status=null, exp (truncated)...]
2025-05-10 10:33:05.773 DEBUG 2736 --- [http-nio-8090-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:33:05.774 DEBUG 2736 --- [http-nio-8090-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
2025-05-10 10:33:17.998 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/admin/dashboard/stats
2025-05-10 10:33:17.998 DEBUG 2736 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext
2025-05-10 10:33:17.998  INFO 2736 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Attempting to load user by identifier: 18999177256
2025-05-10 10:33:18.004  INFO 2736 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : User found: 18999177256, Role: RECEPTIONIST
2025-05-10 10:33:18.004  INFO 2736 --- [http-nio-8090-exec-9] c.hotel.service.UserDetailsServiceImpl   : Assigned authorities: [ROLE_RECEPTIONIST]
2025-05-10 10:33:18.004 DEBUG 2736 --- [http-nio-8090-exec-9] c.hotel.config.JwtAuthenticationFilter   : 用户 '18999177256' 认证成功, 设置 SecurityContext
2025-05-10 10:33:18.004 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.s.w.a.i.FilterSecurityInterceptor    : Authorized filter invocation [GET /api/admin/dashboard/stats] with attributes [hasAnyRole('ROLE_ADMIN','ROLE_RECEPTIONIST')]
2025-05-10 10:33:18.004 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/admin/dashboard/stats
2025-05-10 10:33:18.004 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/admin/dashboard/stats", parameters={}
2025-05-10 10:33:18.004 DEBUG 2736 --- [http-nio-8090-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.hotel.controller.AdminDashboardController#getDashboardStatistics()
2025-05-10 10:33:18.046  INFO 2736 --- [http-nio-8090-exec-9] c.hotel.service.impl.CheckInServiceImpl  : 计算日入住收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:33:18.048  INFO 2736 --- [http-nio-8090-exec-9] c.hotel.service.impl.CheckInServiceImpl  : 找到日退房记录数量: 0
2025-05-10 10:33:18.048  INFO 2736 --- [http-nio-8090-exec-9] c.hotel.service.impl.CheckInServiceImpl  : 计算的日入住总收入: 0
2025-05-10 10:33:18.052  INFO 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-10T00:00 到 2025-05-10T23:59:59.999999999
2025-05-10 10:33:18.054  INFO 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 1
2025-05-10 10:33:18.054 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 8944.00
2025-05-10 10:33:18.054  INFO 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 8944.00
2025-05-10 10:33:18.055  INFO 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 计算日预订收入：从 2025-05-09T00:00 到 2025-05-09T23:59:59.999999999
2025-05-10 10:33:18.056  INFO 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 找到日预订数量: 0
2025-05-10 10:33:18.057  INFO 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 计算的日预订总收入: 0
2025-05-10 10:33:18.058  INFO 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-05-01T00:00 到 2025-05-31T23:59:59.999999999
2025-05-10 10:33:18.072  INFO 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 37
2025-05-10 10:33:18.072 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 1, 金额: 18032.00, 累计总额: 18032.00
2025-05-10 10:33:18.072 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 2, 金额: 3477.60, 累计总额: 21509.60
2025-05-10 10:33:18.072 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 3, 金额: 619.20, 累计总额: 22128.80
2025-05-10 10:33:18.072 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 4, 金额: 1159.20, 累计总额: 23288.00
2025-05-10 10:33:18.072 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 5, 金额: 1159.20, 累计总额: 24447.20
2025-05-10 10:33:18.072 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 6, 金额: 1159.20, 累计总额: 25606.40
2025-05-10 10:33:18.072 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 7, 金额: 9273.60, 累计总额: 34880.00
2025-05-10 10:33:18.073 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 8, 金额: 9853.20, 累计总额: 44733.20
2025-05-10 10:33:18.073 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 9, 金额: 1288.00, 累计总额: 46021.20
2025-05-10 10:33:18.073 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 10, 金额: 1288.00, 累计总额: 47309.20
2025-05-10 10:33:18.073 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 11, 金额: 1262.24, 累计总额: 48571.44
2025-05-10 10:33:18.073 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 12, 金额: 34776.00, 累计总额: 83347.44
2025-05-10 10:33:18.074 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 13, 金额: 29559.60, 累计总额: 112907.04
2025-05-10 10:33:18.074 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 14, 金额: 21414.90, 累计总额: 134321.94
2025-05-10 10:33:18.074 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 15, 金额: 21414.90, 累计总额: 155736.84
2025-05-10 10:33:18.074 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 16, 金额: 20701.07, 累计总额: 176437.91
2025-05-10 10:33:18.074 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 17, 金额: 26986.82, 累计总额: 203424.73
2025-05-10 10:33:18.074 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 18, 金额: 25194.00, 累计总额: 228618.73
2025-05-10 10:33:18.074 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 19, 金额: 28896.00, 累计总额: 257514.73
2025-05-10 10:33:18.074 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 20, 金额: 21896.00, 累计总额: 279410.73
2025-05-10 10:33:18.074 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 21, 金额: 19320.00, 累计总额: 298730.73
2025-05-10 10:33:18.074 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 22, 金额: 11008.00, 累计总额: 309738.73
2025-05-10 10:33:18.074 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 23, 金额: 1976.00, 累计总额: 311714.73
2025-05-10 10:33:18.074 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 24, 金额: 32336.00, 累计总额: 344050.73
2025-05-10 10:33:18.074 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 25, 金额: 33592.00, 累计总额: 377642.73
2025-05-10 10:33:18.074 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 26, 金额: 7904.00, 累计总额: 385546.73
2025-05-10 10:33:18.074 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 27, 金额: 688.00, 累计总额: 386234.73
2025-05-10 10:33:18.074 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 28, 金额: 35776.00, 累计总额: 422010.73
2025-05-10 10:33:18.074 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 29, 金额: 15808.00, 累计总额: 437818.73
2025-05-10 10:33:18.075 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 30, 金额: 32336.00, 累计总额: 470154.73
2025-05-10 10:33:18.075 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 31, 金额: 2655329.04, 累计总额: 3125483.77
2025-05-10 10:33:18.075 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 32, 金额: 485576.00, 累计总额: 3611059.77
2025-05-10 10:33:18.075 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 33, 金额: 49400.00, 累计总额: 3660459.77
2025-05-10 10:33:18.075 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 34, 金额: 967288.00, 累计总额: 4627747.77
2025-05-10 10:33:18.075 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 35, 金额: 9305.80, 累计总额: 4637053.57
2025-05-10 10:33:18.075 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 36, 金额: 946680.00, 累计总额: 5583733.57
2025-05-10 10:33:18.075 DEBUG 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 预订ID: 37, 金额: 8944.00, 累计总额: 5592677.57
2025-05-10 10:33:18.075  INFO 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 5592677.57
2025-05-10 10:33:18.077  INFO 2736 --- [http-nio-8090-exec-9] c.hotel.service.impl.CheckInServiceImpl  : 计算月度入住收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:33:18.078  INFO 2736 --- [http-nio-8090-exec-9] c.hotel.service.impl.CheckInServiceImpl  : 找到月度退房记录数量: 0
2025-05-10 10:33:18.078  INFO 2736 --- [http-nio-8090-exec-9] c.hotel.service.impl.CheckInServiceImpl  : 计算的月度入住总收入: 0
2025-05-10 10:33:18.080  INFO 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 计算月度预订收入：从 2025-04-01T00:00 到 2025-04-30T23:59:59.999999999
2025-05-10 10:33:18.081  INFO 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 找到月度预订数量: 0
2025-05-10 10:33:18.081  INFO 2736 --- [http-nio-8090-exec-9] c.h.service.impl.ReservationServiceImpl  : 计算的月度预订总收入: 0
2025-05-10 10:33:18.095  INFO 2736 --- [http-nio-8090-exec-9] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计原始数据 - COMPLETED: 17, VERIFIED: 0, IN_PROGRESS: 1, PENDING: 3, ASSIGNED: 0
2025-05-10 10:33:18.095  INFO 2736 --- [http-nio-8090-exec-9] c.h.service.impl.CleaningServiceImpl     : 已完成任务总数: 17
2025-05-10 10:33:18.095  INFO 2736 --- [http-nio-8090-exec-9] c.h.service.impl.CleaningServiceImpl     : 进行中任务总数: 1
2025-05-10 10:33:18.095  INFO 2736 --- [http-nio-8090-exec-9] c.h.service.impl.CleaningServiceImpl     : 待处理任务总数: 3
2025-05-10 10:33:18.097  INFO 2736 --- [http-nio-8090-exec-9] c.h.service.impl.CleaningServiceImpl     : 清洁记录总数: 21
2025-05-10 10:33:18.097  INFO 2736 --- [http-nio-8090-exec-9] c.h.service.impl.CleaningServiceImpl     : 清洁任务统计数据一致性验证通过
2025-05-10 10:33:18.099 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-05-10 10:33:18.099 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{monthlyReservationRevenue=5592677.57, cleaningTasksInProgress=1, todayReservationRevenue=8944.00, t (truncated)...]
2025-05-10 10:33:18.100 DEBUG 2736 --- [http-nio-8090-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-05-10 10:33:18.100 DEBUG 2736 --- [http-nio-8090-exec-9] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request
