import{_ as le,i as D,d as p,r,s as ae,o as P,c as te,b as f,a as l,w as t,E as v,g as u,v as oe,f as ne,t as C,y as re}from"./index-12cb0ccf.js";const se={class:"staff-container"},ue={class:"page-header"},de={class:"pagination-container"},ie={class:"dialog-footer"},pe={class:"calendar-cell"},me={class:"dialog-footer"},ce={__name:"Staff",setup(fe){const d=D({name:"",phone:"",role:"",status:""}),k=p(!1),F=p([{name:"李四",role:"receptionist",phone:"13800138001",email:"lisi@example.com",workSchedule:"早班 (6:00-14:00)",joinDate:"2024-01-01",status:"active"}]),h=p(1),U=p(10),N=p(100),g=p(!1),S=p("add"),x=p(null),n=D({name:"",role:"",phone:"",email:"",joinDate:"",workSchedule:""}),O={name:[{required:!0,message:"请输入姓名",trigger:"blur"}],role:[{required:!0,message:"请选择角色",trigger:"change"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],joinDate:[{required:!0,message:"请选择入职日期",trigger:"change"}],workSchedule:[{required:!0,message:"请选择工作时间",trigger:"change"}]},_=p(!1),j=p(new Date),z=D({}),R=p(null),T=()=>{h.value=1,b()},I=()=>{Object.keys(d).forEach(o=>{d[o]=""}),T()},b=async()=>{k.value=!0;try{await new Promise(o=>setTimeout(o,1e3)),k.value=!1}catch(o){console.error("获取员工列表失败:",o),v.error("获取员工列表失败"),k.value=!1}},L=o=>{U.value=o,b()},M=o=>{h.value=o,b()},A=()=>{S.value="add",Object.keys(n).forEach(o=>{n[o]=""}),g.value=!0},G=o=>{S.value="edit",Object.keys(n).forEach(e=>{n[e]=o[e]}),g.value=!0},H=async()=>{x.value&&await x.value.validate(async o=>{if(o)try{await new Promise(e=>setTimeout(e,1e3)),v.success(S.value==="add"?"添加成功":"修改成功"),g.value=!1,b()}catch(e){console.error("保存员工信息失败:",e),v.error("操作失败")}})},J=o=>{R.value=o.id,_.value=!0},K=async()=>{try{await new Promise(o=>setTimeout(o,1e3)),v.success("排班保存成功"),_.value=!1}catch(o){console.error("保存排班信息失败:",o),v.error("保存排班失败")}},Q=async o=>{try{await re.confirm(`确定要将该员工标记为${o.status==="active"?"离职":"复职"}状态吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await new Promise(e=>setTimeout(e,1e3)),v.success(`${o.status==="active"?"离职":"复职"}操作成功`),o.status=o.status==="active"?"inactive":"active"}catch(e){e!=="cancel"&&(console.error("修改员工状态失败:",e),v.error("操作失败"))}};return b(),(o,e)=>{const m=r("el-button"),y=r("el-input"),i=r("el-form-item"),s=r("el-option"),V=r("el-select"),E=r("el-form"),$=r("el-card"),c=r("el-table-column"),B=r("el-tag"),W=r("el-table"),X=r("el-pagination"),Y=r("el-date-picker"),q=r("el-dialog"),Z=r("el-calendar"),ee=ae("loading");return P(),te("div",se,[f("div",ue,[e[18]||(e[18]=f("h2",null,"员工管理",-1)),l(m,{type:"primary",onClick:A},{default:t(()=>e[17]||(e[17]=[u("添加员工")])),_:1})]),l($,{class:"search-card"},{default:t(()=>[l(E,{inline:!0,model:d,class:"search-form"},{default:t(()=>[l(i,{label:"员工姓名"},{default:t(()=>[l(y,{modelValue:d.name,"onUpdate:modelValue":e[0]||(e[0]=a=>d.name=a),placeholder:"请输入员工姓名",clearable:""},null,8,["modelValue"])]),_:1}),l(i,{label:"手机号"},{default:t(()=>[l(y,{modelValue:d.phone,"onUpdate:modelValue":e[1]||(e[1]=a=>d.phone=a),placeholder:"请输入手机号",clearable:""},null,8,["modelValue"])]),_:1}),l(i,{label:"角色"},{default:t(()=>[l(V,{modelValue:d.role,"onUpdate:modelValue":e[2]||(e[2]=a=>d.role=a),placeholder:"请选择角色",clearable:""},{default:t(()=>[l(s,{label:"前台",value:"receptionist"}),l(s,{label:"保洁",value:"cleaner"})]),_:1},8,["modelValue"])]),_:1}),l(i,{label:"状态"},{default:t(()=>[l(V,{modelValue:d.status,"onUpdate:modelValue":e[3]||(e[3]=a=>d.status=a),placeholder:"请选择状态",clearable:""},{default:t(()=>[l(s,{label:"在职",value:"active"}),l(s,{label:"离职",value:"inactive"})]),_:1},8,["modelValue"])]),_:1}),l(i,null,{default:t(()=>[l(m,{type:"primary",onClick:T},{default:t(()=>e[19]||(e[19]=[u("搜索")])),_:1}),l(m,{onClick:I},{default:t(()=>e[20]||(e[20]=[u("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),l($,{class:"list-card"},{default:t(()=>[oe((P(),ne(W,{data:F.value,style:{width:"100%"}},{default:t(()=>[l(c,{prop:"name",label:"姓名"}),l(c,{prop:"role",label:"角色"},{default:t(({row:a})=>[l(B,{type:a.role==="receptionist"?"primary":"success"},{default:t(()=>[u(C(a.role==="receptionist"?"前台":"保洁"),1)]),_:2},1032,["type"])]),_:1}),l(c,{prop:"phone",label:"手机号"}),l(c,{prop:"email",label:"邮箱"}),l(c,{prop:"workSchedule",label:"工作时间"}),l(c,{prop:"joinDate",label:"入职日期"}),l(c,{prop:"status",label:"状态"},{default:t(({row:a})=>[l(B,{type:a.status==="active"?"success":"info"},{default:t(()=>[u(C(a.status==="active"?"在职":"离职"),1)]),_:2},1032,["type"])]),_:1}),l(c,{label:"操作",width:"200"},{default:t(({row:a})=>[l(m,{type:"primary",link:"",onClick:w=>G(a)},{default:t(()=>e[21]||(e[21]=[u("编辑")])),_:2},1032,["onClick"]),l(m,{type:"primary",link:"",onClick:w=>J(a)},{default:t(()=>e[22]||(e[22]=[u("排班")])),_:2},1032,["onClick"]),l(m,{type:"primary",link:"",onClick:w=>Q(a)},{default:t(()=>[u(C(a.status==="active"?"离职":"复职"),1)]),_:2},1032,["type","onClick"])]),_:1})]),_:1},8,["data"])),[[ee,k.value]]),f("div",de,[l(X,{"current-page":h.value,"onUpdate:currentPage":e[4]||(e[4]=a=>h.value=a),"page-size":U.value,"onUpdate:pageSize":e[5]||(e[5]=a=>U.value=a),"page-sizes":[10,20,50,100],total:N.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:L,onCurrentChange:M},null,8,["current-page","page-size","total"])])]),_:1}),l(q,{title:S.value==="add"?"添加员工":"编辑员工",modelValue:g.value,"onUpdate:modelValue":e[13]||(e[13]=a=>g.value=a),width:"500px"},{footer:t(()=>[f("span",ie,[l(m,{onClick:e[12]||(e[12]=a=>g.value=!1)},{default:t(()=>e[23]||(e[23]=[u("取消")])),_:1}),l(m,{type:"primary",onClick:H},{default:t(()=>e[24]||(e[24]=[u("确定")])),_:1})])]),default:t(()=>[l(E,{ref_key:"staffFormRef",ref:x,model:n,rules:O,"label-width":"100px"},{default:t(()=>[l(i,{label:"姓名",prop:"name"},{default:t(()=>[l(y,{modelValue:n.name,"onUpdate:modelValue":e[6]||(e[6]=a=>n.name=a)},null,8,["modelValue"])]),_:1}),l(i,{label:"角色",prop:"role"},{default:t(()=>[l(V,{modelValue:n.role,"onUpdate:modelValue":e[7]||(e[7]=a=>n.role=a),placeholder:"请选择角色",style:{width:"100%"}},{default:t(()=>[l(s,{label:"前台",value:"receptionist"}),l(s,{label:"保洁",value:"cleaner"})]),_:1},8,["modelValue"])]),_:1}),l(i,{label:"手机号",prop:"phone"},{default:t(()=>[l(y,{modelValue:n.phone,"onUpdate:modelValue":e[8]||(e[8]=a=>n.phone=a)},null,8,["modelValue"])]),_:1}),l(i,{label:"邮箱",prop:"email"},{default:t(()=>[l(y,{modelValue:n.email,"onUpdate:modelValue":e[9]||(e[9]=a=>n.email=a)},null,8,["modelValue"])]),_:1}),l(i,{label:"入职日期",prop:"joinDate"},{default:t(()=>[l(Y,{modelValue:n.joinDate,"onUpdate:modelValue":e[10]||(e[10]=a=>n.joinDate=a),type:"date",placeholder:"选择日期",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(i,{label:"工作时间",prop:"workSchedule"},{default:t(()=>[l(V,{modelValue:n.workSchedule,"onUpdate:modelValue":e[11]||(e[11]=a=>n.workSchedule=a),placeholder:"请选择工作时间",style:{width:"100%"}},{default:t(()=>[l(s,{label:"早班 (6:00-14:00)",value:"morning"}),l(s,{label:"中班 (14:00-22:00)",value:"afternoon"}),l(s,{label:"晚班 (22:00-6:00)",value:"night"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"]),l(q,{title:"员工排班",modelValue:_.value,"onUpdate:modelValue":e[16]||(e[16]=a=>_.value=a),width:"600px"},{footer:t(()=>[f("span",me,[l(m,{onClick:e[15]||(e[15]=a=>_.value=!1)},{default:t(()=>e[25]||(e[25]=[u("取消")])),_:1}),l(m,{type:"primary",onClick:K},{default:t(()=>e[26]||(e[26]=[u("保存排班")])),_:1})])]),default:t(()=>[l(Z,{modelValue:j.value,"onUpdate:modelValue":e[14]||(e[14]=a=>j.value=a)},{dateCell:t(({data:a})=>[f("div",pe,[f("p",null,C(a.day.split("-").slice(1).join("-")),1),l(V,{modelValue:z[a.day],"onUpdate:modelValue":w=>z[a.day]=w,placeholder:"选择班次",size:"small",style:{width:"100px"}},{default:t(()=>[l(s,{label:"早班",value:"morning"}),l(s,{label:"中班",value:"afternoon"}),l(s,{label:"晚班",value:"night"}),l(s,{label:"休息",value:"rest"})]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])])}}},ge=le(ce,[["__scopeId","data-v-b3e6b6bf"]]);export{ge as default};
